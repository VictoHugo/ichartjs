<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8" />
		<title>test</title>
		<meta name="Description" content="" />
		<meta name="Keywords" content="" />

		<script type="text/javascript" src="../src/ichart.core.js"></script>
		<script type="text/javascript" src="../src/ichart.element.js"></script>
		<script type="text/javascript" src="../src/ichart.html.js"></script>
		<script type="text/javascript" src="../src/ichart.painter.js"></script>
		<script type="text/javascript" src="../src/ichart.component.js"></script>
		<script type="text/javascript" src="../src/ichart.legend.js"></script>
		<script type="text/javascript" src="../src/ichart.label.js"></script>
		<script type="text/javascript" src="../src/ichart.chart.js"></script>
		<script type="text/javascript" src="../src/ichart.custom.js"></script>
		<script type="text/javascript" src="../src/ichart.sector.js"></script>
		<script type="text/javascript" src="../src/ichart.sector2d.js"></script>
		<script type="text/javascript" src="../src/ichart.sector3d.js"></script>
		<script type="text/javascript" src="../src/ichart.rectangle.js"></script>
		<script type="text/javascript" src="../src/ichart.rectangle2d.js"></script>
		<script type="text/javascript" src="../src/ichart.rectangle3d.js"></script>
		<script type="text/javascript" src="../src/ichart.column.js"></script>
		<script type="text/javascript" src="../src/ichart.column2d.js"></script>
		<script type="text/javascript" src="../src/ichart.bar.js"></script>
		<script type="text/javascript" src="../src/ichart.bar2d.js"></script>
		<script type="text/javascript" src="../src/ichart.columnmulti2d.js"></script>
		<script type="text/javascript" src="../src/ichart.barmulti2d.js"></script>
		<script type="text/javascript" src="../src/ichart.column3d.js"></script>
		<script type="text/javascript" src="../src/ichart.tip.js"></script>
		<script type="text/javascript" src="../src/ichart.text.js"></script>
		<script type="text/javascript" src="../src/ichart.pie.js"></script>
		<script type="text/javascript" src="../src/ichart.pie2d.js"></script>
		<script type="text/javascript" src="../src/ichart.donut2d.js"></script>
		<script type="text/javascript" src="../src/ichart.pie3d.js"></script>
		<script type="text/javascript" src="../src/ichart.coordinate.js"></script>
		<script type="text/javascript" src="../src/ichart.crosshair.js"></script>
		<script type="text/javascript" src="../src/ichart.linesegment.js"></script>
		<script type="text/javascript" src="../src/ichart.line.js"></script>
		<script type="text/javascript" src="../src/ichart.linebasic2d.js"></script>
		<script type="text/javascript" src="../src/ichart.area2d.js"></script>
		<script type="text/javascript" src="../src/ichart.linemonitor2d.js"></script>
		<script type="text/javascript" src="../src/ichart.points.js"></script>
		<script type="text/javascript" src="../src/ichart.scatter2d.js"></script>
		<script type="text/javascript" src="../src/ichart.interface.js"></script>
	<style type="text/css">
		body{
			margin-top:10px;
			text-align: center;
		}
		#canvasDiv div{
			margin:0px auto;
		}
	</style>
	<script type="text/javascript">
	$(function(){
		var data = [
		        	{name : '广州',value : 4000,color:'#a5c2d5'},
		        	{name : '上海',value : 4200,color:'#cbab4f'},
		        	{name : '南昌',value : 3500,color:'#76a871'},
		        	{name : '哈尔滨',value : 3600,color:'#9f7961'},
		        	{name : '北京',value : 4150,color:'#a56f8f'}
	        	];
    	
		var chart = new iChart.Column2D({
			render : 'canvasDiv',
			data: data,
			title : '2012年5个城市平均工资的情况',
			width : 800,
			height : 400,
			coordinate:{
				scale:[{
					 position:'left',	
					 start_scale:1000,
					 end_scale:5000,
					 scale_space:500
				}]
			}
		});

		/**
		 *自定义组件,画平均线。
		 */
		chart.plugin(new iChart.Custom({
				z_index:9,
				drawFn:function(){
					/**
					 *计算平均值的高度(坐标Y值)
					 */	
					var avg = chart.total/5,
						coo = chart.getCoordinate(),
						x = coo.get('originx'),
						W = coo.get('width'),
						S = coo.getScale('left'),
						H = coo.get('height'),
						h = (avg - S.start) * H / S.distance,
						y = chart.y + H - h;
					
					chart.target.line(x,y,x+W,y,1,'#b32c0d')
					.textAlign('start')
					.textBaseline('middle')
					.fillText('avg:'+avg,x+W+5,y,false,'#b32c0d');
				}
		}));	
			
		chart.draw();
});
	
	</script>
	</head>
	<body>
		<div id='canvasDiv' ></div>
	</body>
</html>
