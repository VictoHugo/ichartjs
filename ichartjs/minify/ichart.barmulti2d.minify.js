iChart.BarMulti2D=iChart.extend(iChart.Bar,{configure:function(){iChart.BarMulti2D.superclass.configure.call(this);this.type="barmulti2d";this.dataType="complex";this.set({});this.columns=[]},doAnimation:function(h,e){var c,f;this.coo.draw();for(var a=0;a<this.labels.length;a++)this.labels[a].draw();for(a=0;a<this.rectangles.length;a++)c=this.rectangles[a],this.fireEvent(this,"beforeRectangleAnimation",[this,c]),f=Math.ceil(this.animationArithmetic(h,0,c.height,e)),c.push("originy",c.y+(c.height-
f)),c.push("height",f),c.drawRectangle(),this.fireEvent(this,"afterRectangleAnimation",[this,c])},doConfig:function(){iChart.BarMulti2D.superclass.doConfig.call(this);var h=this.data.length,e=this.columnKeys.length,c=this.get("coordinate.width"),f=this.get("coordinate.height"),a=e*h;this.push("barspace",(c-this.get("barheight")*a)/(e+1));this.pushIf("barheight",f/(e+1+a));this.get("barheight")*h>f&&this.push("barheight",f/(e+1+a));this.push("barspace",(f-this.get("barheight")*a)/(e+1));this.coo=iChart.Interface.coordinate2d.call(this);
this.pushComponent(this.coo,!0);var e=this.coo.getScale(this.get("keduAlign")),f=this.get("label.enable"),a=this.get("tip.enable"),h=h*this.get("barheight")+this.get("barspace"),g,i,j,k;this.push("rectangle.height",this.get("barheight"));this.push("rectangle.originx",this.x+this.coo.get("brushsize"));this.push("rectangle.valueAlign","right");this.push("rectangle.tipAlign","right");for(var b=0;b<this.columns.length;b++){g=this.columns[b].item;k=this.fireString(this,"parseText",[this.columns[b],b],
this.columns[b].name);for(var d=0;d<g.length;d++)j=(g[d].value-e.start)*c/e.distance,i=g[d].name+":"+g[d].value,f&&this.push("rectangle.label.text",this.fireString(this,"parseLabelText",[g[d],b],i)),a&&this.push("rectangle.tip.text",this.fireString(this,"parseTipText",[g[d],b],i)),i=this.fireString(this,"parseValue",[g[d],b],g[d].value),this.push("rectangle.originy",this.y+this.get("barspace")+d*this.get("barheight")+b*h),this.push("rectangle.value",i),this.push("rectangle.width",j),this.push("rectangle.background_color",
g[d].color),this.push("rectangle.id",b+"-"+d),this.rectangles.push(new iChart.Rectangle2D(this.get("rectangle"),this));this.labels.push(new iChart.Text({id:b,text:k,textAlign:"right",textBaseline:"middle",originx:this.x-this.get("text_space"),originy:this.y+0.5*this.get("barspace")+(b+0.5)*h},this))}this.pushComponent(this.labels);this.pushComponent(this.rectangles)}});
