iChart.BarMulti2D=iChart.extend(iChart.Bar,{configure:function(){iChart.BarMulti2D.superclass.configure.call(this);this.type="barmulti2d";this.dataType="complex";this.set({});this.columns=[]},doAnimation:function(h,g){var d,e;this.coo.draw();for(var a=0;a<this.labels.length;a++)this.labels[a].draw();for(a=0;a<this.rectangles.length;a++)d=this.rectangles[a],this.fireEvent(this,"beforeRectangleAnimation",[this,d]),e=Math.ceil(this.animationArithmetic(h,0,d.height,g)),d.push("originy",d.y+(d.height-
e)),d.push("height",e),d.drawRectangle(),this.fireEvent(this,"afterRectangleAnimation",[this,d])},doConfig:function(){iChart.BarMulti2D.superclass.doConfig.call(this);var h=this.data.length,g=this.columnKeys.length,d=this.get("coordinate.width"),e=this.get("coordinate.height"),a=g*h,i=this.pushIf("barheight",e/(g+1+a));i*h>e&&(i=this.push("barheight",e/(g+1+a)));this.push("barspace",(e-i*a)/(g+1));this.coo=iChart.Interface.coordinate2d.call(this);this.pushComponent(this.coo,!0);var g=this.coo.getScale(this.get("keduAlign")),
e=this.get("label.enable"),a=this.get("tip.enable"),h=h*i+this.get("barspace"),f,j,k,l;this.push("rectangle.height",i);this.push("rectangle.originx",this.x+this.coo.get("brushsize"));this.push("rectangle.valueAlign","right");this.push("rectangle.tipAlign","right");for(var b=0;b<this.columns.length;b++){f=this.columns[b].item;l=this.fireString(this,"parseText",[this.columns[b],b],this.columns[b].name);for(var c=0;c<f.length;c++)k=(f[c].value-g.start)*d/g.distance,j=f[c].name+":"+f[c].value,e&&this.push("rectangle.label.text",
this.fireString(this,"parseLabelText",[f[c],b],j)),a&&this.push("rectangle.tip.text",this.fireString(this,"parseTipText",[f[c],b],j)),j=this.fireString(this,"parseValue",[f[c],b],f[c].value),this.push("rectangle.originy",this.y+this.get("barspace")+c*i+b*h),this.push("rectangle.value",j),this.push("rectangle.width",k),this.push("rectangle.background_color",f[c].color),this.push("rectangle.id",b+"-"+c),this.rectangles.push(new iChart.Rectangle2D(this.get("rectangle"),this));this.labels.push(new iChart.Text({id:b,
text:l,textAlign:"right",textBaseline:"middle",originx:this.x-this.get("text_space"),originy:this.y+0.5*this.get("barspace")+(b+0.5)*h},this))}this.pushComponent(this.labels);this.pushComponent(this.rectangles)}});
