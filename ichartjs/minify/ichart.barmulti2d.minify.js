iChart.BarMulti2D=iChart.extend(iChart.Bar,{configure:function(){iChart.BarMulti2D.superclass.configure.call(this);this.type="barmulti2d";this.dataType="complex";this.columns=[]},doConfig:function(){iChart.BarMulti2D.superclass.doConfig.call(this);var a=this._(),f=a.data.length,b=a.data_labels.length,k=a.coo.get("width"),c=a.coo.get("height"),g=b*f,d=a.pushIf("barheight",c/(b+1+g));d*f>c&&(d=a.push("barheight",c/(b+1+g)));a.push("barspace",(c-d*g)/(b+1));var i=a.coo.getScale(a.get("scaleAlign")),h=f*d+a.get("barspace");a.get("barheight");var j;a.push("rectangle.height",d);a.columns.each(function(b,e){b.item.each(function(b,c){j=(b.value-i.start)*k/i.distance;a.doParse(a,b,c,e+"-"+c,a.x+a.get("hispace")+c*d+e*h,a.y+a.get("barspace")+c*d+e*h,j);b.reference=new iChart.Rectangle2D(a.get("rectangle"),a);a.rectangles.push(b.reference)},a);a.labels.push(new iChart.Text({id:e,text:b.name,textAlign:"right",textBaseline:"middle",originx:a.x-a.get("text_space"),originy:a.y+0.5*a.get("barspace")+(e+0.5)*h},a))},a);a.components.push(a.labels);a.components.push(a.rectangles)}});