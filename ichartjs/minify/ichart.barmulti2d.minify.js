iChart.BarMulti2D=iChart.extend(iChart.Bar,{configure:function(){iChart.BarMulti2D.superclass.configure.call(this);this.type="barmulti2d";this.dataType="complex";this.set({labels:[]})},doConfig:function(){iChart.BarMulti2D.superclass.doConfig.call(this);var a=this._(),d=a.data.length,b=a.get("labels").length,i=a.coo.get("width"),c=a.coo.get("height"),f=b*d,e=a.pushIf("barheight",c/(b+1+f));e*d>c&&(e=a.push("barheight",c/(b+1+f)));a.push("barspace",(c-e*f)/(b+1));var g=a.coo.getScale(a.get("scaleAlign")),h=d*e+a.get("barspace");a.get("barheight");a.push("sub_option.height",e);a.columns.each(function(b,c){b.item.each(function(b,d){a.doParse(a,b,d,{id:c+"-"+d,originy:a.y+a.get("barspace")+d*e+c*h,width:(b.value-g.start)*i/g.distance});a.rectangles.push(new iChart.Rectangle2D(a.get("sub_option"),a))},a);a.doLabel(c,b.name,a.x-a.get("text_space"),a.y+0.5*a.get("barspace")+(c+0.5)*h)},a)}});