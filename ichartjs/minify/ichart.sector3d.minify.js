iChart.Sector3D=iChart.extend(iChart.Sector,{configure:function(){iChart.Sector3D.superclass.configure.apply(this,arguments);this.type="sector3d";this.dimension=iChart._3D;this.set({semi_major_axis:0,semi_minor_axis:0,cylinder_height:0})},drawSector:function(){this.T.sector3D(this.x,this.y,this.a,this.b,this.get("startAngle"),this.get("endAngle"),this.h,this.get("f_color"),this.get("border.enable"),this.get("border.width"),this.get("border.color"),this.get("shadow"),this.get("shadow_color"),this.get("shadow_blur"),this.get("shadow_offsetx"),this.get("shadow_offsety"),this.get("counterclockwise"))},isEventValid:function(a){return this.get("label.enable")&&this.label.isEventValid(a).valid?{valid:!0}:!iChart.inEllipse(a.x-this.x,a.y-this.y,this.a,this.b)?{valid:!1}:iChart.angleInRange(this.sA,this.eA,2*Math.PI-iChart.atan2Radian(this.x,this.y,a.x,a.y))?{valid:!0}:{valid:!1}},p2p:function(a,d,b,c){return{x:a+this.a*Math.cos(b)*c,y:d+this.b*Math.sin(b)*c}},tipInvoke:function(){var a=this,d=a.get("middleAngle"),b=iChart.quadrantd(d);return function(c,e){var f=a.p2p(a.x,a.y,d,0.6);return{left:2<=b&&3>=b?f.x-c:f.x,top:3<=b?f.y-e:f.y}}},doConfig:function(){iChart.Sector3D.superclass.doConfig.call(this);var a=this._(),d=a.get("counterclockwise"),b=a.get("middleAngle");a.a=a.get("semi_major_axis");a.b=a.get("semi_minor_axis");a.h=a.get("cylinder_height");iChart.Assert.gtZero(a.a);iChart.Assert.gtZero(a.b);a.pushIf("increment",iChart.lowTo(5,a.a/8));var c=function(b){b=iChart.atan2Radian(0,0,a.a*Math.cos(b),d?-a.b*Math.sin(b):a.b*Math.sin(b));!d&&0!=b&&(b=2*Math.PI-b);return b},e=a.get("increment");a.sA=c.call(a,a.get("startAngle"));a.eA=c.call(a,a.get("endAngle"));a.mA=c.call(a,b);a.push("inc_x",e*Math.cos(2*Math.PI-a.mA));a.push("inc_y",e*Math.sin(2*Math.PI-a.mA));if(a.get("label.enable")){a.pushIf("label.linelength",iChart.lowTo(10,a.a/8));a.Z=a.get("label.linelength")/a.a+1;var c=iChart.quadrantd(b),e=a.p2p(a.x,a.y,b,a.Z),f=a.p2p(a.x,a.y,b,1);a.push("label.originx",f.x);a.push("label.originy",f.y);a.push("label.quadrantd",c);a.push("label.line_potins",[f.x,f.y,e.x,e.y]);a.push("label.line_globalComposite",d&&b<Math.PI||!d&&b>Math.PI);a.push("label.labelx",e.x);a.push("label.labely",e.y);a.label=new iChart.Label(a.get("label"),a)}}});