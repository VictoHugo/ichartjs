iChart.Bar=iChart.extend(iChart.Chart,{configure:function(){iChart.Bar.superclass.configure.call(this);this.type="bar";this.dataType="simple";this.set({coordinate:{alternate_direction:"h"},barheight:void 0,text_space:6,scaleAlign:"bottom",rectangle:{}});this.registerEvent();this.rectangles=[];this.labels=[]},doParse:function(a,b,c,d,e,f,g){e=a.get("showpercent")?iChart.toPercent(b.value/a.total,a.get("decimalsnum")):b.value;a.get("tip.enable")&&a.push("rectangle.tip.text",a.fireString(a,"parseTipText",[b,b.value,c],b.name+" "+e));a.set({rectangle:{id:d,name:b.name,value:e,background_color:b.color,originy:f,width:g}})},doAnimation:function(a,b){this.coo.draw();this.labels.each(function(a){a.draw()},this);this.rectangles.each(function(c){c.push("width",Math.ceil(this.animationArithmetic(a,0,c.width,b)));c.drawRectangle()},this)},doConfig:function(){iChart.Bar.superclass.doConfig.call(this);var a=this._();iChart.Interface.coordinate.call(a);a.rectangles.zIndex=a.get("z_index");a.labels.zIndex=a.get("z_index")+1;if("simple"==a.dataType){var b=a.data.length,c=a.get("coordinate.height"),d=a.pushIf("barheight",c/(2*b+1));d*b>c&&(d=a.push("barheight",c/(2*b+1)));a.push("barspace",(c-d*b)/(b+1))}a.is3D();a.coo=iChart.Interface.coordinate_.call(a);a.components.push(a.coo);iChart.applyIf(a.get("rectangle"),iChart.clone(a.get("communal_option"),a.options));a.push("rectangle.height",d);a.push("rectangle.valueAlign","right");a.push("rectangle.tipAlign","right");a.push("rectangle.originx",a.x+a.coo.get("brushsize"))}});