iChart.Sector=iChart.extend(iChart.Component,{configure:function(){iChart.Sector.superclass.configure.apply(this,arguments);this.type="sector";this.set({value:"",name:"",counterclockwise:!1,startAngle:0,middleAngle:0,endAngle:0,totalAngle:0,bound_event:"click",expand:!1,donutwidth:0,mutex:!1,increment:void 0,label:{enable:!0}});this.atomic=!0;this.registerEvent("changed");this.tip=this.label=null},bound:function(){this.expanded||this.toggle()},rebound:function(){this.expanded&&this.toggle()},toggle:function(){this.fireEvent(this,this.get("bound_event"),[this])},doDraw:function(){this.drawSector();this.label&&this.label.draw()},labelInvoke:function(a){this.get("middleAngle");var b=this.label;x=this.get("inc_x")*a;y=-this.get("inc_y")*a;b.push("originx",b.get("originx")+x);b.push("originy",b.get("originy")+y);b.push("labelx",b.get("labelx")+x);b.push("labely",b.get("labely")+y);var c=[];b.get("line_potins").each(function(a,b){c.push(0==b%2?a+x:a+y)},b);b.push("line_potins",c)},doConfig:function(){iChart.Sector.superclass.doConfig.call(this);var a=this._(),b=a.variable.event;a.push("totalAngle",a.get("endAngle")-a.get("startAngle"));a.get("label.enable")&&(a.pushIf("label.border.color",a.get("border.color")),a.push("label.scolor",a.get("f_color")));a.variable.event.status=a.expanded=a.get("expand");a.get("tip.enable")&&("follow"!=a.get("tip.showType")&&a.push("tip.invokeOffsetDynamic",!1),a.tip=new iChart.Tip(a.get("tip"),a));b.poped=!1;a.on(a.get("bound_event"),function(a){b.poped=true;a.expanded=!a.expanded;a.redraw();b.poped=false});a.on("mouseover",function(){b.highlight=true;a.redraw();b.highlight=false}).on("mouseout",function(){b.highlight=false;a.redraw()});a.on("beforedraw",function(){a.push("f_color",b.highlight?a.get("light_color"):a.get("background_color"));a.x=a.get("originx");a.y=a.get("originy");if(b.status!=a.expanded){a.fireEvent(a,"changed",[a,a.expanded]);a.get("label.enable")&&a.labelInvoke(a.expanded?1:-1)}if(b.status=a.expanded)if(a.get("mutex")&&!b.poped)a.expanded=false;else{a.x=a.x+a.get("inc_x");a.y=a.y-a.get("inc_y")}return true})}});