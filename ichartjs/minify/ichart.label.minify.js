iChart.Label=iChart.extend(iChart.Component,{configure:function(){iChart.Label.superclass.configure.apply(this,arguments);this.type="legend";this.set({text:"",line_height:16,sign:"square",sign_size:12,padding:5,offsety:2,sign_space:5,highlight:!1,background_color:"#efefef",text_with_sign_color:!1,border:{radius:2}});this.registerEvent("beforeDrawRow","highlight","drawRow")},drawBorder:function(){this.lineFn.call(this);this.target.drawBorder(this.labelx,this.labely,this.width,this.height,this.get("border.width"),
this.get("border.color"),0==this.get("border.radius")?0:iChart.parseBorder(this.get("border.radius")),this.get("background_color"),!1,this.get("shadow"),this.get("shadow_color"),this.get("shadow_blur"),this.get("shadow_offsetx"),this.get("shadow_offsety"))},isEventValid:function(a){return{valid:iChart.inRange(this.labelx,this.labelx+this.width,a.offsetX)&&iChart.inRange(this.labely,this.labely+this.height,a.offsetY)}},doDraw:function(a){a=a||{};a.invoke&&this.updateLcb(a.invoke);a.highlight&&this.fireEvent(this,
"highlight");this.drawBorder();this.target.textStyle("left","top",this.get("fontStyle"));var a=this.labelx+this.get("padding_left"),b=this.labely+this.get("padding_top")+this.get("offsety"),c=this.get("color");this.get("text_with_sign_color")&&(c=this.get("scolor"));"square"==this.get("sign")?this.target.rectangle(a,b,this.get("sign_size"),this.get("sign_size"),this.get("scolor"),1):this.target.round(a+this.get("sign_size")/2,b+this.get("sign_size")/2,this.get("sign_size")/2,this.get("scolor"),1);
this.target.fillText(this.get("text"),a+this.get("sign_size")+this.get("sign_space"),b,this.get("textwidth"),c)},updateLcb:function(a){this.lineFn=a.lineFn;var b=a.labelXY.call(this);this.labelx=b.labelx;this.labely=b.labely;this.x=a.origin.x;this.y=a.origin.y},doConfig:function(){iChart.Label.superclass.doConfig.call(this);this.target.textFont(iChart.getFont(this.get("fontweight"),this.get("fontsize"),this.get("font")));this.height=this.get("line_height")+this.get("vpadding");this.width=this.target.measureText(this.get("text"))+
this.get("hpadding")+this.get("sign_size")+this.get("sign_space");var a=this.get("lineCB");a&&this.updateLcb(a)}});
