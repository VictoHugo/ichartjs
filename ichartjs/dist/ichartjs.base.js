(function(c){var a=navigator.userAgent.toLowerCase(),b=Object.prototype.toString,d=/opera/.test(a),g=/\bchrome\b/.test(a),f=/webkit/.test(a),i=!g&&/safari/.test(a),k=!d&&/msie/.test(a),n=!!document.createElement("canvas").getContext,u=!f&&/gecko/.test(a),t=/ipod|ipad|iphone|android/gi.test(a),r={Linear:function(a,b,d,c){return d*a/c+b},Quad:{easeIn:function(a,b,d,c){return d*(a/=c)*a+b},easeOut:function(a,b,d,c){return-d*(a/=c)*(a-2)+b},easeInOut:function(a,b,d,c){return 1>(a/=c/2)?d/2*a*a+b:-d/2*(--a*(a-2)-1)+b}},Cubic:{easeIn:function(a,b,d,c){return d*(a/=c)*a*a+b},easeOut:function(a,b,d,c){return d*((a=a/c-1)*a*a+1)+b},easeInOut:function(a,b,d,c){return 1>(a/=c/2)?d/2*a*a*a+b:d/2*((a-=2)*a*a+2)+b}},Quart:{easeIn:function(a,b,d,c){return d*(a/=c)*a*a*a+b},easeOut:function(a,b,d,c){return-d*((a=a/c-1)*a*a*a-1)+b},easeInOut:function(a,b,d,c){return 1>(a/=c/2)?d/2*a*a*a*a+b:-d/2*((a-=2)*a*a*a-2)+b}},Bounce:{easeOut:function(a,b,d,c){return(a/=c)<1/2.75?d*7.5625*a*a+b:a<2/2.75?d*(7.5625*(a-=1.5/2.75)*a+0.75)+b:a<2.5/2.75?d*(7.5625*(a-=2.25/2.75)*a+0.9375)+b:d*(7.5625*(a-=2.625/2.75)*a+0.984375)+b}}},z=function(a){var c=!1,x=!1,A=[],B=function(){if(document.addEventListener)return function(){document.removeEventListener("DOMContentLoaded",B,!1);l()};if(document.attachEvent)return function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",B),l())}}(),e=function(){if(!c){try{document.documentElement.doScroll("left")}catch(a){setTimeout(e,1);return}l()}},l=function(){if(!c){c=!0;for(var a=0;a<A.length;a++)A[a].call(document);A=[]}},h=function(){if(!x){x=!0;if("complete"===document.readyState)return setTimeout(l,1);if(document.addEventListener)document.addEventListener("DOMContentLoaded",B,!1),a.addEventListener("load",l,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",B);a.attachEvent("onload",l);var J=!1;try{J=null==a.frameElement}catch(b){}document.documentElement.doScroll&&J&&e()}}},p=function(a){h();c?a.call(document,o):A.push(function(){return a.call(this)})},o=function(a){if(!a||a.nodeType)return a;if("string"===typeof a)return-1!=a.indexOf("#")&&(a=a.substring(1)),document.getElementById(a);"function"===typeof a&&p(a)};o.apply=function(a,e){if(a&&e&&"object"==typeof e)for(var b in e)"undefined"!=typeof e[b]&&(a[b]=e[b]);if(!e&&a){var l={};for(b in a)l[b]=a[b];return l}return a};o.apply(o,{version:"1.0",email:"taylor@ichartjs.com",isEmpty:function(a,e){return null===a||void 0===a||o.isArray(a)&&!a.length||(!e?""===a:!1)},isArray:function(a){return"[object Array]"===b.apply(a)},isDate:function(a){return"[object Date]"===b.apply(a)},isObject:function(a){return!!a&&"[object Object]"===b.apply(a)},isFunction:function(a){return"[object Function]"===b.apply(a)},isNumber:function(a){return"number"===typeof a&&isFinite(a)},isString:function(a){return"string"===typeof a},isBoolean:function(a){return"boolean"===typeof a},isFalse:function(a){return"boolean"===typeof a&&!a},isElement:function(a){return a?!!a.tagName:!1},isDefined:function(a){return"undefined"!==typeof a}});o.applyIf=function(a,e){if(a&&o.isObject(e))for(var b in e)o.isDefined(e[b])&&!o.isDefined(a[b])&&(a[b]=e[b]);return!e&&a?o.apply(a):a};o.merge=function(a,e,b){if(a&&o.isObject(e)){for(var l in e)o.isDefined(e[l])&&(o.isObject(e[l])?o.isObject(a[l])?o.merge(a[l],e[l]):a[l]=o.clone(e[l],!0):a[l]=e[l]);if(o.isObject(b))return o.merge(a,b)}return a};o.clone=function(a,e,b){var l={};if(o.isArray(a)&&o.isObject(e))for(var h=0;h<a.length;h++)l[a[h]]=b&&o.isObject(e[a[h]])?o.clone(e[a[h]],b):e[a[h]];else if(o.isObject(a))for(h in a)l[h]=e&&o.isObject(a[h])&&!(a[h]instanceof o.Painter)?o.clone(a[h],e):a[h];return l};o.override=function(a,e){if(a&&e){var b=a.prototype;o.apply(b,e);o.isIE&&e.hasOwnProperty("toString")&&(b.toString=e.toString)}};o.extend=function(){var a=function(a){for(var e in a)this[e]=a[e]},e=Object.prototype.constructor;return function(b,l){var h=function(){b.apply(this,arguments)},p=function(){},d=b.prototype;p.prototype=d;p=h.prototype=new p;p.constructor=h;h.superclass=d;d.constructor==e&&(d.constructor=b);h.override=function(a){o.override(h,a)};p.superclass=p.supr=function(){return d};p.override=a;o.override(h,l);h.extend=function(a){return o.extend(h,a)};h.plugin_={};h.plugin=function(a,e){o.isString(a)&&o.isFunction(e)&&(h.plugin_[a]=e)};return h}}();var v=Math.sin,E=Math.cos,F=Math.atan,y=Math.sqrt,j=Math.abs,s=Math.PI,q=2*s,K=Math.ceil,G=Math.round,H=Math.floor,L=Math.max,M=Math.min,D=parseFloat,N=function(a,e){if(0==a)return a;var b=j(a),l=0.1;if(1<b){for(;1<b;)b/=10,l*=10;return H(a/l+e)*l}for(l=1;1>b;)b*=10,l/=10;return G(a/l+e)*l},O={navy:"rgb(0,0,128)",olive:"rgb(128,128,0)",orange:"rgb(255,165,0)",silver:"rgb(192,192,192)",white:"rgb(255,255,255)",gold:"rgb(255,215,0)",lime:"rgb(0,255,0)",fuchsia:"rgb(255,0,255)",aqua:"rgb(0,255,255)",green:"rgb(0,128,0)",gray:"rgb(80,80,80)",red:"rgb(255,0,0)",blue:"rgb(0,0,255)",pink:"rgb(255,192,203)",purple:"rgb(128,0,128)",yellow:"rgb(255,255,0)",maroon:"rgb(128,0,0)",black:"rgb(0,0,0)",azure:"rgb(240,255,255)",beige:"rgb(245,245,220)",brown:"rgb(165,42,42)",cyan:"rgb(0,255,255)",darkblue:"rgb(0,0,139)",darkcyan:"rgb(0,139,139)",darkgrey:"rgb(169,169,169)",darkgreen:"rgb(0,100,0)",darkkhaki:"rgb(189,183,107)",darkmagenta:"rgb(139,0,139)",darkolivegreen:"rgb(85,107,47)",darkorange:"rgb(255,140,0)",darkorchid:"rgb(153,50,204)",darkred:"rgb(139,0,0)",darksalmon:"rgb(233,150,122)",darkviolet:"rgb(148,0,211)",indigo:"rgb(75,0,130)",khaki:"rgb(240,230,140)",lightblue:"rgb(173,216,230)",lightcyan:"rgb(224,255,255)",lightgreen:"rgb(144,238,144)",lightgrey:"rgb(211,211,211)",lightpink:"rgb(255,182,193)",lightyellow:"rgb(255,255,224)",magenta:"rgb(255,0,255)",violet:"rgb(128,0,128)"},P=function(a){var e=/rgb\((\w*),(\w*),(\w*)\)/.exec(a);if(e)return[e[1],e[2],e[3]];if(e=/rgba\((\w*),(\w*),(\w*),(.*)\)/.exec(a))return[e[1],e[2],e[3],e[4]];throw Error("invalid colors value '"+a+"'");},I=function(a){if(!a)return a;a=a.replace(/\s/g,"").toLowerCase();if(/^rgb\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3}\)$/.exec(a)||/^rgba\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3},(0(\.[0-9])?|1(\.0)?)\)$/.exec(a))return a;if(/^#(([a-fA-F0-9]{6,7})|([a-fA-F0-9]{3}))$/.exec(a))return a=a.replace(/#/g,"").replace(/^(\w)(\w)(\w)$/,"$1$1$2$2$3$3"),(7==a.length?"rgba(":"rgb(")+parseInt(a.substring(0,2),16)+","+parseInt(a.substring(2,4),16)+","+parseInt(a.substring(4,6),16)+(7==a.length?",0."+a.substring(6,7)+")":")");if(O[a])return O[a];throw Error("invalid colors value '"+a+"'");},Q=function(a,e){e=e||0.14;return 0.5<a?e-(1-a)/10:0.1<a?e-0.16+a/5:a>e?e:a/2},R=function(a,e,b,l){if(!e)return e;var e=P(I(e)),h;h=e;var p=void 0,d=void 0;o.isArray(h)&&(p=h[1],d=h[2],h=h[0]);h/=255;var p=p/255,d=d/255,c=L(L(h,p),d),j=M(M(h,p),d),j=c-j;if(0==j)h=[0,0,c];else{var v;h==c?v=(p-d)/j:p==c?v=(d-h)/j+2:d==c&&(v=(h-p)/j+4);v*=60;0>v&&(v+=360);h=[v,j/c,c]}h[1]-=0!=l?l||0.05:l;a?(h[2]-=Q(h[2],b),h[1]=o.upTo(h[1],1),h[2]=o.lowTo(h[2],0)):(h[2]+=Q(1-h[2],b),h[1]=o.lowTo(h[1],0),h[2]=o.upTo(h[2],1));l=e[3];a=e=void 0;o.isArray(h)&&(a=l,l=h[1],e=h[2],h=h[0]);var g,E,f,b=H(h/60)%6,d=h/60-b;h=e*(1-l);p=e*(1-l*d);l=e*(1-l*(1-d));switch(b){case 0:g=e;E=l;f=h;break;case 1:g=p;E=e;f=h;break;case 2:g=h;E=e;f=l;break;case 3:g=h;E=p;f=e;break;case 4:g=l;E=h;f=e;break;case 5:g=e,E=h,f=p}return"rgb"+(a?"a":"")+"("+G(255*g)+","+G(255*E)+","+G(255*f)+(a?","+a+")":")")};o.apply(o,{getFont:function(a,e,b){return a+" "+e+"px "+b},getDoc:function(){return a.contentWindow?a.contentWindow.document:a.contentDocument?a.contentDocument:a.document},DefineAbstract:function(a,e){if(!e[a])throw Error("Cannot instantiate the type '"+e.type+"'.you must implements it with method '"+a+"'.");},getAA:function(a){return"linear"==a?r.Linear:"bounce"==a?r.Bounce.easeOut:"easeInOut"==a||"easeIn"==a||"easeOut"==a?r[o.DefaultAA][a]:r.Linear},noConflict:function(){return z},plugin:function(a,e,b){o.isFunction(a)&&a.plugin(e,b)},parsePadding:function(a,e){a=a||0;if(o.isNumber(a))return[a,a,a,a];if(o.isArray(a))return a;e=e||0;a=a.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g,/\s/).replace(/\s/g,",").split(",");1==a.length?a[0]=a[1]=a[2]=a[3]=D(a[0])||e:2==a.length?(a[0]=a[2]=D(a[0])||e,a[1]=a[3]=D(a[1])||e):3==a.length?(a[0]=D(a[0])||e,a[1]=a[3]=D(a[1])||e,a[2]=D(a[2])||e):(a[0]=D(a[0])||e,a[1]=D(a[1])||e,a[2]=D(a[2])||e,a[3]=D(a[3])||e);return a},distanceP2P:function(a,e,b,l){return y((b-a)*(b-a)+(l-e)*(l-e))},atan2Radian:function(a,e,b,l){if(a==b)return l>e?s/2:3*s/2;if(e==l)return b>a?0:s;var h=o.quadrant(a,e,b,l),a=F(j((e-l)/(a-b)));return h?(3==h?q:s)+(2==h?a:-a):a},angle2Radian:function(a){return a*s/180},radian2Angle:function(a){return 180*a/s},quadrant:function(a,e,b,l){return a<b?e<l?0:3:e<l?1:2},toPI2:function(a){for(;0>a;)a+=q;return a%q},quadrantd:function(a){if(0==a)return 0;if(0==a%q)return 3;for(;0>a;)a+=q;return K(2*(a%q)/s)-1},upTo:function(a,e){return e>a?a:e},lowTo:function(a,e){return e<a?a:e},between:function(a,e,b){return b>e?e:b<a?a:b},inRange:function(a,e,b){return e>b&&a<b},angleInRange:function(a,e,b){b-=a;b=0>b?b+q:b;b%=q;return e-a>b},angleZInRange:function(a,e,b){return e>a?e>b&&a<b:b>a||b<e},inRangeClosed:function(a,e,b){return e>=b&&a<=b},inEllipse:function(a,e,b,l){return 1>=a*a/b/b+e*e/l/l},p2Point:function(a,e,b,l){return{x:a+E(b)*l,y:e+v(b)*l}},toRgb:I,toRgba:function(a,e){var b=P(I(a));return"rgba("+b[0]+","+b[1]+","+b[2]+","+e+")"},vectorP2P:function(a,e,b){b||(e=o.angle2Radian(e),a=o.angle2Radian(a));e=v(e);return{x:e*v(a),y:e*E(a)}},iGather:function(a){return(a||"ichartjs")+"-"+K(1E4*Math.random())+(new Date).getTime().toString().substring(4)},toPercent:function(a,e){return(100*a).toFixed(e)+"%"},parsePercent:function(a,e){return o.isString(a)&&(a=a.match(/(.*)%/))?e?H(D(a[1])*e/100):a[1]/100:a},parseFloat:function(a,e){if(!o.isNumber(a)&&(a=D(a),!o.isNumber(a)))throw Error("["+e+"]="+a+"is not a valid number.");return a},ceil:function(a){return N(a,1)},floor:function(a){return N(a,-1)},_2D:"2d",_3D:"3d",light:function(a,e,b){return R(!1,a,e,b)},dark:function(a,e,b){return R(!0,a,e,b)},fixPixel:function(a){return o.isNumber(a)?a:D(a.replace("px",""))||0},toPixel:function(a){return o.isNumber(a)?a+"px":o.fixPixel(a)+"px"},emptyFn:function(){return!0},supportCanvas:n,isOpera:d,isWebKit:f,isChrome:g,isSafari:i,isIE:k,isGecko:u,isMobile:t,touch:"ontouchend"in document,FRAME:t?30:60,DefaultAA:"Cubic"});o.Assert={gt:function(a,e,b){if(!o.isNumber(a)&&a>=e)throw Error(b+" required Number gt "+e+",given:"+a);},isNumber:function(a,e){if(!o.isNumber(a))throw Error(e+" required Number,given:"+a);},isArray:function(a,e){if(!o.isArray(a))throw Error(e+" required Array,given:"+a);},isTrue:function(a,e){if(!0!==a)throw Error(e);}};o.requestAnimFrame=function(){var e=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(e){a.setTimeout(e,1E3/60)};return function(a){e(a)}}();o.Event={addEvent:function(a,e,b,l){a.addEventListener?a.addEventListener(e,b,l):a.attachEvent?a.attachEvent("on"+e,b):a["on"+e]=b},fix:function(e){"undefined"==typeof e&&(e=a.event);var b={target:e.target,pageX:e.pageX,pageY:e.pageY,offsetX:e.offsetX,offsetY:e.offsetY,stopPropagation:!1,event:e};if("undefined"==typeof e.offsetX){e.target||(b.target=e.srcElement||document);e.targetTouches&&(b.pageX=e.targetTouches[0].pageX,b.pageY=e.targetTouches[0].pageY);if(null==b.pageX&&null!=e.clientX){var l=document.documentElement,h=document.body;b.pageX=e.clientX+(l&&l.scrollLeft||h&&h.scrollLeft||0)-(l&&l.clientLeft||h&&h.clientLeft||0);b.pageY=e.clientY+(l&&l.scrollTop||h&&h.scrollTop||0)-(l&&l.clientTop||h&&h.clientTop||0)}for(var h=l=0,o=e.target;o!=document.body&&o;)l+=o.offsetLeft,h+=o.offsetTop,o=o.offsetParent;b.offsetX=b.pageX-l;b.offsetY=b.pageY-h}b.x=b.offsetX;b.y=b.offsetY;e.stopPropagation||(e.stopPropagation=function(){a.event.cancelBubble=true});return b}};return o}(c);Array.prototype.each=function(a,b){for(var d=this.length,c,g=0;g<d&&!(c=b?a.call(b,this[g],g):a(this[g],g),"boolean"===typeof c&&!c);g++);return this};Array.prototype.eachAll=function(a,b){this.each(function(d,c){return z.isArray(d)?d.eachAll(a,b):b?a.call(b,d,c):a(d,c)},b)};Array.prototype.sor=function(a){for(var b=this.length-1,d,c=0;c<b;c++)for(var g=b;g>c;g--)if(a?!a(this[g],this[g-1]):this[g]<this[g-1])d=this[g],this[g]=this[g-1],this[g-1]=d};c.iChart=z;c.$||(c.$=c.iChart)})(window);(function(c){c.Element=function(a){var b=this._();b.type="element";c.DefineAbstract("configure",b);c.DefineAbstract("afterConfiguration",b);b.options={};b.set({id:"",border:{enable:!1,color:"#BCBCBC",style:"solid",width:1,radius:0},shadow:!1,shadow_color:"#666666",shadow_blur:4,shadow_offsetx:0,shadow_offsety:0});b.W="width";b.H="height";b.O="top";b.B="bottom";b.L="left";b.R="right";b.C="center";b.X="originx";b.Y="originy";b.variable={};b.events={mouseup:[],touchstart:[],touchmove:[],touchend:[],mousedown:[],dblclick:[]};this.registerEvent("initialize");b.initialization=!1;b.configure.apply(b,Array.prototype.slice.call(arguments,1));b.default_=c.clone(b.options,!0);b.set(a);b.afterConfiguration()};c.Element.prototype={_:function(){return this},afterConfiguration:function(){if(c.isObject(this.get("listeners")))for(var a in this.get("listeners"))this.on(a,this.get("listeners")[a]);this.initialize();this.fireEvent(this,"initialize",[this])},registerEvent:function(){for(var a=0;a<arguments.length;a++)this.events[arguments[a]]=[]},fireString:function(a,b,d,g){a=this.fireEvent(a,b,d);return c.isString(a)?a:!0!==a&&c.isDefined(a)?a.toString():g},fireEvent:function(a,b,d){var c=this.events[b].length;if(1==c)return this.events[b][0].apply(a,d);for(var f=!0,i=0;i<c;i++)this.events[b][i].apply(a,d)||(f=!1);return f},on:function(a,b){if(c.isString(a)){if(!this.events[a])throw Error("["+this.type+"] invalid event:'"+a+"'");this.events[a].push(b)}else c.isArray(a)&&a.each(function(a){this.on(a,b)},this);return this},getPlugin:function(a){return this.constructor.plugin_[a]},set:function(a){c.isObject(a)&&c.merge(this.options,a)},pushIf:function(a,b){return!c.isDefined(this.get(a))?this.push(a,b):this.get(a)},push:function(a,b){for(var d=a.split("."),c=d.length-1,f=this.options,i=0;i<c;i++)f[d[i]]||(f[d[i]]={}),f=f[d[i]];return f[d[c]]=b},get:function(a){for(var a=a.split("."),b=this.options[a[0]],d=1;d<a.length;d++){if(!b)return null;b=b[a[d]]}return b}};c.Html=c.extend(c.Element,{configure:function(a){this.type="html";this.T=a;c.DefineAbstract("beforeshow",this);this.set({animation:!0,width:0,height:0,style:"",index:999,offset_top:0,offset_left:0});this.transitions=""},initialize:function(){this.wrap=this.get("wrap");this.dom=document.createElement("div");this.get("shadow")&&this.css("boxShadow",this.get("shadow_offsetx")+"px "+this.get("shadow_offsety")+"px "+this.get("shadow_blur")+"px "+this.get("shadow_color"));this.get("border.enable")&&(this.css("border",this.get("border.width")+"px "+this.get("border.style")+" "+this.get("border.color")),this.css("borderRadius",this.get("border.radius")+"px"));this.css("zIndex",this.get("index"));this.applyStyle()},width:function(){return this.dom.offsetWidth},height:function(){return this.dom.offsetHeight},onTransitionEnd:function(a,b){var d="transitionend";c.isWebKit?d="webkitTransitionEnd":c.isOpera&&(d="oTransitionEnd");c.Event.addEvent(this.dom,d,a,b)},transition:function(a){this.transitions=""==this.transitions?a:this.transitions+","+a;c.isWebKit?this.css("WebkitTransition",this.transitions):c.isGecko?this.css("MozTransition",this.transitions):c.isOpera?this.css("OTransition",this.transitions):this.css("transition",this.transitions)},show:function(a,b){this.beforeshow(a,b);this.css("visibility","visible");this.get("animation")&&this.css("opacity",1)},hidden:function(){this.css("visibility","hidden")},getDom:function(){return this.dom},css:function(a,b){if(c.isString(a))if(c.isDefined(b))this.dom.style[a]=b;else return this.dom.style[a]},applyStyle:function(){for(var a=this.get("style").split(";"),b,d=0;d<a.length;d++)b=a[d].split(":"),1<b.length&&this.css(b[0],b[1])}});c.Painter=c.extend(c.Element,{configure:function(){this.type="painter";this.dimension=c._2D;c.DefineAbstract("commonDraw",this);c.DefineAbstract("initialize",this);this.set({strokeStyle:"gray",padding:10,color:"black",offsetx:0,offsety:0,background_color:"#FEFEFE",color_factor:0.15,style:"",border:{enable:!0},gradient:!1,gradient_mode:"LinearGradientUpDown",z_index:0,listeners:null,originx:0,originy:0});this.variable.event={mouseover:!1};this.registerEvent("click","mousemove","mouseover","mouseout","beforedraw","draw")},is3D:function(){return this.dimension==c._3D},applyGradient:function(a,b,d,c){var f=this._();f.get("gradient")&&(f.push("f_color",f.T.gradient(a||f.x||0,b||f.y||0,d||f.get(f.W),c||f.get(f.H),[f.get("dark_color"),f.get("light_color")],f.get("gradient_mode"))),f.push("light_color",f.T.gradient(a||f.x||0,b||f.y||0,d||f.get(f.W),c||f.get(f.H),[f.get("background_color"),f.get("light_color")],f.get("gradient_mode"))),f.push("f_color_",f.get("f_color")))},draw:function(a){if(!this.fireEvent(this,"beforedraw",[this,a]))return this;this.commonDraw(this,a);this.fireEvent(this,"draw",[this,a])},doConfig:function(){var a=this._(),b=c.parsePadding(a.get("padding")),d=a.get("border.enable"),d=d?c.parsePadding(a.get("border.width")):[0,0,0,0],g=c.toRgb(a.get("background_color")),f=a.get("color_factor"),i=a.get("gradient")?0:null;a.set({border_top:d[0],border_right:d[1],border_bottom:d[2],border_left:d[3],hborder:d[1]+d[3],vborder:d[0]+d[2],padding_top:b[0]+d[0],padding_right:b[1]+d[1],padding_bottom:b[2]+d[2],padding_left:b[3]+d[3],hpadding:b[1]+b[3]+d[1]+d[3],vpadding:b[0]+b[2]+d[0]+d[2]});a.get("shadow")&&a.push("shadow",{color:a.get("shadow_color"),blur:a.get("shadow_blur"),offsetx:a.get("shadow_offsetx"),offsety:a.get("shadow_offsety")});a.push("f_color",g);a.push("f_color_",g);a.push("light_color",c.light(g,f,i));a.push("dark_color",c.dark(g,0.8*f,i));a.push("light_color2",c.light(g,2*f,i));a.id=a.get("id");a.is3D()&&!a.get("xAngle_")&&(b=c.vectorP2P(a.get("xAngle"),a.get("yAngle")),a.push("xAngle_",b.x),a.push("yAngle_",b.y))}});c.Component=c.extend(c.Painter,{configure:function(a){c.Component.superclass.configure.apply(this,arguments);this.type="component";this.set({fontsize:12,font:"Verdana",fontweight:"normal",tip:{enable:!1,border:{width:2}}});this.proxy=this.atomic=!1;this.inject(a);this.final_parameter={}},initialize:function(){c.DefineAbstract("isEventValid",this);c.DefineAbstract("doDraw",this);this.doConfig();this.initialization=!0},getDimension:function(){return{x:this.x,y:this.y,width:this.get("width"),height:this.get("height")}},doConfig:function(){c.Component.superclass.doConfig.call(this);var a=this._();a.x=a.push(a.X,a.get(a.X)+a.get("offsetx"));a.y=a.push(a.Y,a.get(a.Y)+a.get("offsety"));a.push("fontStyle",c.getFont(a.get("fontweight"),a.get("fontsize"),a.get("font")));a.data=a.get("data");a.get("tip.enable")&&(a.pushIf("tip.border.color",a.get("f_color")),c.isFunction(a.get("tip.invokeOffset"))||a.push("tip.invokeOffset",a.tipInvoke()))},isMouseOver:function(a){return this.isEventValid(a,this)},redraw:function(a){this.container.draw(a)},commonDraw:function(a){a.proxy||a.doDraw.call(a,a)},inject:function(a){a&&(this.container=a,this.target=this.T=a.T)}});c.Scale=c.extend(c.Component,{configure:function(){c.Scale.superclass.configure.apply(this,arguments);this.type="scale";this.set({position:"left",which:"h",basic_value:0,scale2grid:!0,distance:void 0,start_scale:0,end_scale:void 0,min_scale:void 0,max_scale:void 0,scale_space:void 0,scale_share:5,scale_enable:!0,scale_size:1,scale_width:4,scale_color:"#333333",scaleAlign:"center",labels:[],label:{},text_space:6,textAlign:"left",decimalsnum:0,join_style:"none",join_size:2});this.registerEvent("parseText")},isEventValid:function(){return{valid:!1}},doDraw:function(a){a.get("scale_enable")&&a.items.each(function(b){a.T.line(b.x0,b.y0,b.x1,b.y1,a.get("scale_size"),a.get("scale_color"),!1)});a.labels.each(function(a){a.draw()})},doLayout:function(a,b,d){d.get("scale_enable")&&d.items.each(function(d){d.x0+=a;d.y0+=b;d.x1+=a;d.y1+=b});d.labels.each(function(d){d.doLayout(a,b,0,d)})},doConfig:function(){c.Scale.superclass.doConfig.call(this);c.Assert.isNumber(this.get("distance"),"distance");var a=this._(),b=Math.abs,d=a.get("labels").length,g=a.get("min_scale"),f=a.get("max_scale"),i=a.get("scale_space"),k=a.get("end_scale"),n=a.get("start_scale");a.items=[];a.labels=[];a.number=0;if(0<d)a.number=d-1;else{c.Assert.isTrue(c.isNumber(f)||c.isNumber(k),"max_scale&end_scale");if(!c.isNumber(k)||k<f)k=a.push("end_scale",c.ceil(f));n>g&&(n=a.push("start_scale",c.floor(g)));i&&b(i)<b(k-n)&&a.push("scale_share",(k-n)/i);a.number=a.push("scale_share",b(a.get("scale_share")));if(!i||i>k-n)i=a.push("scale",(k-n)/a.get("scale_share"));parseInt(i)!=i&&0==a.get("decimalsnum")&&(b=i+"",b=b.substring(b.indexOf(".")+1),a.push("decimalsnum",b.length))}a.push("distanceOne",a.get("valid_distance")/a.number);var u,t,r,z=k=f=g=b=0,m=0;u=a.get("scale_width");t=u/2;r=a.get("scaleAlign");var C=a.get("position"),x=a.get("text_space"),A="",B=a.get("coo").get("axis.width");a.push("which",a.get("which").toLowerCase());a.isH="h"==a.get("which");a.isH?(r==a.O?k=-u:r==a.C?(k=-t,g=t):g=u,C==a.O?(m=-x-B[0],A=a.B):(m=x+B[2],A=a.O),C=a.C):(r==a.L?f=-u:r==a.C?(f=-t,b=t):b=u,A="middle",C==a.R)?(C=a.L,z=x+B[1]):(C=a.R,z=-x-B[3]);for(x=0;x<=a.number;x++)u=d?a.get("labels")[x]:(i*x+n).toFixed(a.get("decimalsnum")),t=a.isH?a.get("valid_x")+x*a.get("distanceOne"):a.x,r=a.isH?a.y:a.get("valid_y")+a.get("distance")-x*a.get("distanceOne"),a.items.push({x:t,y:r,x0:t+f,y0:r+k,x1:t+b,y1:r+g}),a.labels.push(new c.Text(c.applyIf(c.apply(a.get("label"),c.merge({text:u,x:t,y:r,originx:t+z,originy:r+m},a.fireEvent(a,"parseText",[u,t+z,r+m,x,a.number==x]))),{textAlign:C,textBaseline:A}),a))}});c.Coordinate={coordinate_:function(){var a=this._(),b=a.get("coordinate.scale"),d=a.get("scaleAlign"),g=!0;c.isObject(b)&&(b=[b]);c.isArray(b)?(b.each(function(a){if(a.position==d)return g=!1}),g&&(d=d==a.L?a.R:d==a.R?a.L:d==a.O?a.B:a.O,a.push("scaleAlign",d)),b.each(function(b){if(b.position==d){if(!b.start_scale)b.min_scale=a.get("minValue");if(!b.end_scale)b.max_scale=a.get("maxValue");return false}})):a.push("coordinate.scale",{position:d,scaleAlign:d,max_scale:a.get("maxValue"),min_scale:a.get("minValue")});a.is3D()&&(a.push("coordinate.xAngle_",a.get("xAngle_")),a.push("coordinate.yAngle_",a.get("yAngle_")),a.push("coordinate.zHeight",a.get("zHeight")*a.get("bottom_scale")));return new (c[a.is3D()?"Coordinate3D":"Coordinate2D"])(a.get("coordinate"),a)},coordinate:function(){var a=this._(),b=a.get("client_width"),d=a.get("client_height"),g=a.push("coordinate.width",c.parsePercent(a.get("coordinate.width"),b)),f=a.push("coordinate.height",c.parsePercent(a.get("coordinate.height"),d)),i=a.get("coordinate.valid_width"),k=a.get("coordinate.valid_height");if(!f||f>d)f=a.push("coordinate.height",Math.floor(0.8*d));if(!g||g>b)g=a.push("coordinate.width",Math.floor(0.8*b));i=a.push("coordinate.valid_width",c.parsePercent(i,g));k=a.push("coordinate.valid_height",c.parsePercent(k,f));a.is3D()&&(b=a.get("coordinate.pedestal_height"),d=a.get("coordinate.board_deep"),b=c.isNumber(b)?b:22,d=c.isNumber(d)?d:20,f=a.push("coordinate.height",f-b-d));a.get("align")==a.L?a.push(a.X,a.get("l_originx")):a.get("align")==a.R?a.push(a.X,a.get("r_originx")-g):a.push(a.X,a.get("centerx")-g/2);a.push(a.X,a.get(a.X)+a.get("offsetx"));a.push(a.Y,a.get("centery")-f/2+a.get("offsety"));(!i||i>g)&&a.push("coordinate.valid_width",g);(!k||k>f)&&a.push("coordinate.valid_height",f);a.x=a.get(a.X);a.y=a.get(a.Y);a.get("coordinate.originy");a.push("coordinate.originx",a.x);a.push("coordinate.originy",a.y)}};c.Coordinate2D=c.extend(c.Component,{configure:function(){c.Coordinate2D.superclass.configure.apply(this,arguments);this.type="coordinate2d";this.set({sign_size:12,sign_space:5,scale:[],width:"80%",height:"80%",valid_width:"100%",valid_height:"100%",grid_line_width:1,grid_color:"#dbe1e1",gridHStyle:{},gridVStyle:{},gridlinesVisible:!0,scale2grid:!0,grids:void 0,ignoreOverlap:!0,ignoreEdge:!1,xlabel:"",ylabel:"",background_color:0,striped:!0,striped_direction:"v",striped_factor:0.01,crosshair:{enable:!1},width:void 0,height:void 0,z_index:-1,axis:{enable:!0,color:"#666666",width:1}});this.scale=[];this.gridlines=[]},getScale:function(a){for(var b=0;b<this.scale.length;b++){var d=this.scale[b];if(d.get("position")==a)return a=[d.get("basic_value"),d.get("start_scale"),d.get("end_scale"),d.get("end_scale")-d.get("start_scale"),0],a[4]=c.inRange(a[1],a[2]+1,a[0])||c.inRange(a[2]-1,a[1],a[0]),{range:a[4],basic:a[4]?(a[0]-a[1])/a[3]:0,start:a[4]?a[0]:a[1],end:a[2],distance:a[3]}}return{start:0,end:0,distance:0}},isEventValid:function(a,b){return{valid:a.x>b.x&&a.x<b.x+b.get(b.W)&&a.y<b.y+b.get(b.H)&&a.y>b.y}},doDraw:function(a){a.T.box(a.x,a.y,a.get(a.W),a.get(a.H),0,a.get("f_color"));if(a.get("striped")){var b,d,g=!1;a.get("axis.width");var f=c.dark(a.get("background_color"),a.get("striped_factor"),0)}var i="v"==a.get("striped_direction");a.gridlines.each(function(c){a.get("striped")&&(g&&(i?a.T.box(c.x1,c.y1+c.width,c.x2-c.x1,d-c.y1-c.width,0,f):a.T.box(b+c.width,c.y2,c.x1-b,c.y1-c.y2,0,f)),b=c.x1,d=c.y1,g=!g)}).each(function(b){b.overlap||(b.solid?a.T.line(b.x1,b.y1,b.x2,b.y2,b.width,b.color):a.T.dotted(b.x1,b.y1,b.x2,b.y2,b.width,b.color,b.size,b.fator))});a.T.box(a.x,a.y,a.get(a.W),a.get(a.H),a.get("axis"),!1,a.get("shadow"),!0);a.scale.each(function(a){a.draw()})},doConfig:function(){c.Coordinate2D.superclass.doConfig.call(this);var a=this._();c.Assert.isNumber(a.get(a.W),a.W);c.Assert.isNumber(a.get(a.H),a.H);a.atomic=!1;a.get("gradient")&&c.isString(a.get("f_color"))&&a.push("f_color",a.T.avgLinearGradient(a.x,a.y,a.x,a.y+a.get(a.H),[a.get("dark_color"),a.get("light_color")]));if(a.get("axis.enable")){var b=a.get("axis.width");c.isArray(b)||a.push("axis.width",[b,b,b,b])}else a.push("axis.width",[0,0,0,0]);a.get("crosshair.enable")&&(a.push("crosshair.wrap",a.container.shell),a.push("crosshair.height",a.get(a.H)),a.push("crosshair.width",a.get(a.W)),a.push("crosshair.top",a.y),a.push("crosshair.left",a.x),a.crosshair=new c.CrossHair(a.get("crosshair"),a));var d,g=(b=!(!a.get("gridlinesVisible")||!a.get("grids")))&&!!a.get("grids.horizontal"),f=b&&!!a.get("grids.vertical"),i=a.get(a.H),k=a.get(a.W),n=a.get("valid_width"),u=a.get("valid_height"),b=a.get("gridlinesVisible")&&a.get("scale2grid")&&!(g&&f),t=(k-n)/2,r=(i-u)/2,z=a.get("axis.width");a.push("x_start",a.x+(k-n)/2);a.push("x_end",a.x+(k+n)/2);a.push("y_start",a.y+(i-u)/2);a.push("y_end",a.y+(i+u)/2);c.isArray(a.get("scale"))||(c.isObject(a.get("scale"))?a.push("scale",[a.get("scale")]):a.push("scale",[]));a.get("scale").each(function(e){d=(d=e.position)||a.L;d=d.toLowerCase();e[a.X]=a.x;e.coo=a;e[a.Y]=a.y;e.valid_x=a.x+t;e.valid_y=a.y+r;e.position=d;if(d==a.O){e.which="h";e.distance=k;e.valid_distance=n}else if(d==a.R){e.which="v";e.distance=i;e.valid_distance=u;e[a.X]=e[a.X]+k;e.valid_x=e.valid_x+n}else if(d==a.B){e.which="h";e.distance=k;e.valid_distance=n;e[a.Y]=e[a.Y]+i;e.valid_y=e.valid_y+u}else{e.which="v";e.distance=i;e.valid_distance=u}a.scale.push(new c.Scale(e,a.container))},a);var m=a.push("ignoreOverlap",a.get("ignoreOverlap")&&a.get("axis.enable")||a.get("ignoreEdge"));if(m)var C=a.get("ignoreEdge")?function(e,b,l){return e=="v"?l==a.y||l==a.y+i:b==a.x||b==a.x+e}:function(e,b,l){return e=="v"?l==a.y&&z[0]>0||l==a.y+i&&z[2]>0:b==a.x&&z[3]>0||b==a.x+k&&z[1]>0};var x={solid:!0,size:10,fator:1,width:a.get("grid_line_width"),color:a.get("grid_color")},A=c.applyIf(a.get("gridHStyle"),x),B=c.applyIf(a.get("gridVStyle"),x);if(b){var e,l,h;a.scale.each(function(b){h=b.get("position");if(!c.isFalse(b.get("scale2grid"))&&!(g&&b.get("which")=="v"||f&&b.get("which")=="h")){e=l=0;h==a.O?l=i:h==a.R?e=-k:h==a.B?l=-i:e=k;b.items.each(function(h){m&&a.gridlines.push(c.applyIf({overlap:C.call(a,b.get("which"),h.x,h.y),x1:h.x,y1:h.y,x2:h.x+e,y2:h.y+l},b.isH?B:A))})}})}if(f){var p=a.get("grids.vertical");c.Assert.gt(p.value,0,"value");b=k/p.value;x=p.value;"given_value"==p.way&&(x=b,b=p.value,b=b>k?k:b);for(p=0;p<=x;p++)m&&a.gridlines.push(c.applyIf({overlap:C.call(a,"h",a.x+p*b,a.y),x1:a.x+p*b,y1:a.y,x2:a.x+p*b,y2:a.y+i,H:!1,width:B.width,color:B.color},B))}if(g){p=a.get("grids.horizontal");c.Assert.gt(p.value,0,"value");b=i/p.value;x=p.value;"given_value"==p.way&&(x=b,b=p.value,b=b>i?i:b);for(p=0;p<=x;p++)m&&a.gridlines.push(c.applyIf({overlap:C.call(a,"v",a.x,a.y+p*b),x1:a.x,y1:a.y+p*b,x2:a.x+k,y2:a.y+p*b,H:!0,width:A.width,color:A.color},A))}}});c.Coordinate3D=c.extend(c.Coordinate2D,{configure:function(){c.Coordinate3D.superclass.configure.apply(this,arguments);this.type="coordinate3d";this.dimension=c._3D;this.set({xAngle:60,yAngle:20,xAngle_:void 0,yAngle_:void 0,zHeight:0,pedestal_height:22,board_deep:20,left_board:!0,gradient:!0,color_factor:0.18,ignoreEdge:!0,striped:!1,grid_color:"#a4ad96",background_color:"#d6dbd2",shadow_offsetx:4,shadow_offsety:2,wall_style:[],axis:{enable:!1}})},doDraw:function(a){var b=a.get(a.W),d=a.get(a.H),c=a.get("xAngle_"),f=a.get("yAngle_"),i=a.get("zHeight"),k=a.get("z_offx"),n=a.get("z_offy");a.get("pedestal_height")&&a.T.cube3D(a.x,a.y+d+a.get("pedestal_height"),c,f,!1,b,a.get("pedestal_height"),3*i/2,a.get("axis.enable"),a.get("axis.width"),a.get("axis.color"),a.get("bottom_style"));a.get("board_deep")&&a.T.cube3D(a.x+k,a.y+d-n,c,f,!1,b,d,a.get("board_deep"),a.get("axis.enable"),a.get("axis.width"),a.get("axis.color"),a.get("board_style"));a.T.cube3D(a.x,a.y+d,c,f,!1,b,d,i,a.get("axis.enable"),a.get("axis.width"),a.get("axis.color"),a.get("wall_style"));a.gridlines.each(function(b){b.solid?(a.get("left_board")&&a.T.line(b.x1,b.y1,b.x1+k,b.y1-n,b.width,b.color),a.T.line(b.x1+k,b.y1-n,b.x2+k,b.y2-n,b.width,b.color)):(a.get("left_board")&&a.T.dotted(b.x1,b.y1,b.x1+k,b.y1-n,b.width,b.color,b.size,b.fator),a.T.dotted(b.x1+k,b.y1-n,b.x2+k,b.y2-n,b.width,b.color,b.size,b.fator))});a.scale.each(function(a){a.draw()})},doConfig:function(){c.Coordinate3D.superclass.doConfig.call(this);for(var a=this._(),b=a.get("wall_style"),d=a.get("background_color"),g=a.get(a.H),f=a.get(a.W),i=a.get("color_factor"),k=a.push("z_offx",a.get("xAngle_")*a.get("zHeight")),n=a.push("z_offy",a.get("yAngle_")*a.get("zHeight"));6>b.length;)b.push({color:d});a.get("left_board")||(b[2]=!1,a.scale.each(function(a){a.doLayout(k,-n,a)}));a.push("bottom_style",[{color:a.get("shadow_color"),shadow:a.get("shadow")},!1,!1,{color:b[3].color},!1,{color:b[3].color}]);a.push("board_style",[!1,!1,!1,{color:b[4].color},{color:b[5].color},!1]);a.get("gradient")&&(c.isString(b[0].color)&&(b[0].color=a.T.avgLinearGradient(a.x,a.y+g,a.x+f,a.y+g,[c.dark(b[0].color,i/2+0.06),c.dark(b[0].color,i/2+0.06)])),c.isString(b[1].color)&&(b[1].color=a.T.avgLinearGradient(a.x+k,a.y-n,a.x+k,a.y+g-n,[c.dark(b[1].color,i),c.light(b[1].color,i)])),c.isString(b[2].color)&&(b[2].color=a.T.avgLinearGradient(a.x,a.y,a.x,a.y+g,[c.light(b[2].color,i/3),c.dark(b[2].color,i)])),a.get("bottom_style")[5].color=a.T.avgLinearGradient(a.x,a.y+g,a.x,a.y+g+a.get("pedestal_height"),[c.light(b[3].color,i/2+0.06),c.dark(b[3].color,i/2,0)]));a.push("wall_style",[b[0],b[1],b[2]])}});c.Custom=c.extend(c.Component,{configure:function(){c.Custom.superclass.configure.apply(this,arguments);this.type="custom";this.set({drawFn:c.emptyFn,eventValid:void 0,animating_draw:!0});this.registerEvent()},doDraw:function(a){a.get("drawFn").call(a,a)},isEventValid:function(a,b){return c.isFunction(this.get("eventValid"))?this.get("eventValid").call(this,a,b):{valid:!1}},doConfig:function(){c.Custom.superclass.doConfig.call(this);this.A_draw=this.get("animating_draw");this.variable.animation={animating:!1,time:0,duration:0}}});(function(a){function b(e){"string"===typeof e&&(e=a(e));if(!e||!e.tagName||"canvas"!=e.tagName.toLowerCase())throw Error("there not a canvas element");this.canvas=e;this.c=this.canvas.getContext("2d");this.width=this.canvas.width;this.height=this.canvas.height}var d=Math.PI,c=d/90,f=c/2,i=Math.ceil,k=Math.floor,n=2*d,u=Math.max,t=Math.min,r=Math.sin,z=Math.cos,m=function(a,b){return 1==a?k(b)+0.5:Math.round(b)},C=function(a,b,h,d){var c=b.x,v=b.y,g=a[h-1],f=a[h+1],y,j;if(h<a.length-1){var a=g.y,h=f.y,i;y=(d*c+g.x)/(d+1);j=(d*v+a)/(d+1);f=(d*c+f.x)/(d+1);d=(d*v+h)/(d+1);i=(d-j)*(f-c)/(f-y)+v-d;j+=i;d+=i;j>a&&j>v?(j=u(a,v),d=2*v-j):j<a&&j<v&&(j=t(a,v),d=2*v-j);d>h&&d>v?(d=u(h,v),j=2*v-d):d<h&&d<v&&(d=t(h,v),j=2*v-d);b.rcx=f;b.rcy=d}return[g.rcx||g.x,g.rcy||g.y,y||c,j||v,c,v]},x=function(e){return a.isNumber(e)?e:a.parseFloat(e,e)},A=function(e){var b,h=0,d,c=0;this.total=0;init=!1;e.each(function(e){h=e.value;if(a.isArray(h)){var g=0;c=h.length>c?h.length:c;for(var f=0;f<h.length;f++)h[f]=x(h[f]),g+=h[f],init||(b=d=h[f],init=!0),b=u(h[f],b),d=t(h[f],d);e.total=g}else h=x(h),e.value=h,this.total+=h,init||(b=d=h,init=!0),b=u(h,b),d=t(h,d)},this);this.get("minValue")&&(d=t(this.get("minValue"),d));this.get("maxValue")&&(b=u(this.get("maxValue"),b));a.isArray(this.get("labels"))&&(c=this.get("labels").length>c?this.get("labels").length:c);this.push("maxItemSize",c);this.push("minValue",d);this.push("maxValue",b)},B=function(a){var b=this._(),h,d,c,g,f,F=!1;b.labels=b.get("labels");f=b.labels.length;if(0==f){f=a[0].value.length;for(var i=0;i<f;i++)b.labels.push("")}b.columns=[];for(i=b.total=0;i<f;i++){for(var j=[],s=0;s<a.length;s++)if(g=a[s],c=g.value[i])c=x(c,c),g.value[i]=c,b.total+=c,F||(h=d=c,F=!0),h=u(c,h),d=t(c,d),j.push({name:g.name,value:g.value[i],color:g.color});b.columns.push({name:b.labels[i],item:j})}b.push("minValue",d);b.push("maxValue",h)};b.prototype={getContext:function(){return this.c},css:function(e,b){if(a.isDefined(b))this.canvas.style[e]=b;else return this.canvas.style[e]},ellipse:function(a,b,h,d,o,v,f,i,y,j,s,q,k,m){q=!!q;k=!!k;this.save().gCo(m).strokeStyle(i,y,j).shadowOn(s).fillStyle(f).moveTo(a,b).beginPath();for(k&&this.moveTo(a,b);o<=v;)this.lineTo(a+h*z(o),b+(q?-d*r(o):d*r(o))),o+=c;return this.lineTo(a+h*z(v),b+(q?-d*r(v):d*r(v))).closePath().stroke(i).fill(f).restore()},arc:function(a,b,h,d,c,g,f,i,y,j,s,q,k,m){if(!h)return this;q=!!q;k=!!k&&!d;this.save().gCo(m).strokeStyle(i,y,j).fillStyle(f).beginPath();d?(this.moveTo(a+z(c)*(h-d),b+r(c)*(h-d)).lineTo(a+z(c)*h,b+r(c)*h),this.c.arc(a,b,h,c,g,q),this.lineTo(a+z(g)*(h-d),b+r(g)*(h-d)),this.c.arc(a,b,h-d,g,c,!q)):this.c.arc(a,b,h,c,g,q);k&&this.lineTo(a,b);this.closePath();i?this.shadowOn(s).stroke(i).shadowOff().fill(f):this.shadowOn(s).fill(f);return this.restore()},sector:function(a,b,h,d,c,g,f,i,y,j,k,q){k&&this.arc(a,b,h,d,c,g,f,0,0,0,k,q,!0,!0);return this.arc(a,b,h,d,c,g,f,i,y,j,!1,q,!0)},sector3D:function(){var e=function(e,b,h,l,p,j,f,i,k){var m=a.quadrantd(p),n=a.quadrantd(j);if(!(2==m||3==m)||!(2==n||3==n)){m=function(a,d){this.lineTo(e+h*z(a),b+(d||0)+(f?-l*r(a):l*r(a)))};p=f&&j>d&&p<d?d:p;j=!f&&p<d&&j>d?d:j;n=p;for(this.fillStyle(a.dark(k)).moveTo(e+h*z(p),b+(f?-l*r(p):l*r(p))).beginPath();n<=j;)m.call(this,n),n+=c;m.call(this,j);this.lineTo(e+h*z(j),b+i+(f?-l*r(j):l*r(j)));for(n=j;n>=p;)m.call(this,n,i),n-=c;m.call(this,p,i);this.lineTo(e+h*z(p),b+(f?-l*r(p):l*r(p))).closePath().fill(!0)}},b=function(a,e,b,h,l,d,c,p){b=a+b*z(c);h=e+d+(l?-h*r(c):h*r(c));this.moveTo(a,e).beginPath().fillStyle(p).lineTo(a,e+d).lineTo(b,h).lineTo(b,h-d).lineTo(a,e).closePath().fill(!0)},h=function(e,h,c,p,g,j,f,i,k){var m=f?g<d/2||g>1.5*d:g>d/2&&g<1.5*d,n=f?j>d/2&&j<1.5*d:j<d/2||j>1.5*d;if(!m&&!n)return!1;k=a.dark(k);m&&b.call(this,e,h,c,p,f,i,g,k);n&&b.call(this,e,h,c,p,f,i,j,k)},p=function(a,b,l,d,c,p,g,f,i,k,m,n,r){this.ellipse(a,b+g,l,d,c,p,f,i,k,m,n,r,!0);h.call(this,a,b,l,d,c,p,r,g,f);this.ellipse(a,b,l,d,c,p,f,i,k,m,!1,r,!0);e.call(this,a,b,l,d,c,p,r,g,f);return this};p.layerPaint=h;p.sPaint=e;p.layerDraw=b;return p}(),textStyle:function(a,b,h){return this.textAlign(a).textBaseline(b).textFont(h)},strokeStyle:function(a,b,h,d){if(a&&(b&&(this.c.lineWidth=b),h&&(this.c.strokeStyle=h),d))this.c.lineJoin=d;return this},globalAlpha:function(a){a&&(this.c.globalAlpha=a);return this},fillStyle:function(a){a&&(this.c.fillStyle=a);return this},arc2:function(a,b,h,d,c,g){h&&this.c.arc(a,b,h,d,c,g);return this},textAlign:function(a){a&&(this.c.textAlign=a);return this},textBaseline:function(a){a&&(this.c.textBaseline=a);return this},textFont:function(a){a&&(this.c.font=a);return this},shadowOn:function(a){a&&(this.c.shadowColor=a.color,this.c.shadowBlur=a.blur,this.c.shadowOffsetX=a.offsetx,this.c.shadowOffsetY=a.offsety);return this},shadowOff:function(){this.c.shadowColor="white";this.c.shadowBlur=this.c.shadowOffsetX=this.c.shadowOffsetY=0;return this},gradient:function(a,b,h,d,c,g){var g=g.toLowerCase(),f=a,i=b,k=!g.indexOf("linear"),g=g.substring(14);if(k){switch(g){case "updown":i+=d;break;case "downup":b+=d;break;case "leftright":f+=h;break;case "rightleft":a+=h;break;default:return c[0]}return this.avgLinearGradient(a,b,f,i,c)}a+=h/2;b+=d/2;"outin"==g&&c.reverse();return this.avgRadialGradient(a,b,0,a,b,0.8*(h>d?d:h),c)},avgLinearGradient:function(a,b,h,d,c){a=this.createLinearGradient(a,b,h,d);for(b=0;b<c.length;b++)a.addColorStop(b/(c.length-1),c[b]);return a},createLinearGradient:function(a,b,h,d){return this.c.createLinearGradient(a,b,h,d)},avgRadialGradient:function(a,b,h,d,c,g,f){a=this.createRadialGradient(a,b,h,d,c,g);for(b=0;b<f.length;b++)a.addColorStop(b/(f.length-1),f[b]);return a},createRadialGradient:function(a,b,h,d,c,g){return this.c.createRadialGradient(a,b,h,d,c,g)},text:function(a,b,h,d,c,g,f,i,k,j,m,q){return""==a?this:this.save().textStyle(g,f,i).fillText(a,b,h,d,c,k,j,m,q).restore()},fillText:function(a,b,h,d,c,g,i,k,m){a=a.toString();d=d||!1;i=i||16;a=a.split("tb"==(g||"lr")?"":"\n");1<a.length&&("middle"==this.c.textBaseline?h-=(a.length-1)*i/2:"bottom"==this.c.textBaseline&&(h-=(a.length-1)*i));this.save().fillStyle(c).translate(b,h).rotate(f*m).shadowOn(k);a.each(function(a,e){try{d?this.c.fillText(a,0,e*i,d):this.c.fillText(a,0,e*i)}catch(c){console.log(c.message+"["+a+","+b+","+h+"]")}},this);return this.restore()},measureText:function(a){return this.c.measureText(a).width},moveTo:function(a,b){this.c.moveTo(a||0,b||0);return this},lineTo:function(a,b){this.c.lineTo(a||0,b||0);return this},save:function(){this.c.save();return this},restore:function(){this.c.restore();return this},beginPath:function(){this.c.beginPath();return this},closePath:function(){this.c.closePath();return this},stroke:function(a){a&&this.c.stroke();return this},fill:function(a){a&&this.c.fill();return this},cube:function(e,b,d,c,g,f,i,k,n,j,s,q){e=m(j,e);b=m(j,b);i=i&&0<i?i:g;c=b-i*c;d=m(j,e+i*d);c=m(j,c);q&&(this.polygon(k,n,j,s,q,!1,[{x:e,y:b},{x:d,y:c},{x:d+g,y:c},{x:e+g,y:b}]),this.polygon(k,n,j,s,q,!1,[{x:e,y:b},{x:e,y:b+f},{x:e+g,y:b+f},{x:e+g,y:b}]),this.polygon(k,n,j,s,q,!1,[{x:e+g,y:b},{x:d+g,y:c},{x:d+g,y:c+f},{x:e+g,y:b+f}]));this.polygon(a.dark(k),n,j,s,!1,!1,[{x:e,y:b},{x:d,y:c},{x:d+g,y:c},{x:e+g,y:b}]);this.polygon(k,n,j,s,!1,!1,[{x:e,y:b},{x:e,y:b+f},{x:e+g,y:b+f},{x:e+g,y:b}]);this.polygon(a.dark(k),n,j,s,!1,!1,[{x:e+g,y:b},{x:d+g,y:c},{x:d+g,y:c+f},{x:e+g,y:b+f}]);return this},cube3D:function(e,b,d,c,g,f,i,k,n,j,s,q){e=m(j,e);b=m(j,b);k=!k||0==k?f:k;g?(c=a.vectorP2P(d,c),d=e+k*c.x,c=b-k*c.y):(d=e+k*d,c=b-k*c);for(;6>q.length;)q.push(!1);d=m(j,d);c=m(j,c);k=[];0>c?a.isObject(q[4])&&k.push(a.applyIf({points:[{x:e,y:b-i},{x:d,y:c-i},{x:d+f,y:c-i},{x:e+f,y:b-i}]},q[4])):a.isObject(q[0])&&k.push(a.applyIf({points:[{x:e,y:b},{x:d,y:c},{x:d+f,y:c},{x:e+f,y:b}]},q[0]));a.isObject(q[1])&&k.push(a.applyIf({points:[{x:d,y:c},{x:d,y:c-i},{x:d+f,y:c-i},{x:d+f,y:c}]},q[1]));a.isObject(q[2])&&k.push(a.applyIf({points:[{x:e,y:b},{x:e,y:b-i},{x:d,y:c-i},{x:d,y:c}]},q[2]));a.isObject(q[3])&&k.push(a.applyIf({points:[{x:e+f,y:b},{x:e+f,y:b-i},{x:d+f,y:c-i},{x:d+f,y:c}]},q[3]));0>c?a.isObject(q[0])&&k.push(a.applyIf({points:[{x:e,y:b},{x:d,y:c},{x:d+f,y:c},{x:e+f,y:b}]},q[0])):a.isObject(q[4])&&k.push(a.applyIf({points:[{x:e,y:b-i},{x:d,y:c-i},{x:d+f,y:c-i},{x:e+f,y:b-i}]},q[4]));a.isObject(q[5])&&k.push(a.applyIf({points:[{x:e,y:b},{x:e,y:b-i},{x:e+f,y:b-i},{x:e+f,y:b}]},q[5]));k.each(function(a){this.polygon(a.color,n,j,s,a.shadow,a.alpha,a.points)},this);return this},polygon:function(a,b,d,c,g,f,i,k,n,j){this.save().strokeStyle(b,d,c).beginPath().fillStyle(a).globalAlpha(f).shadowOn(g).moveTo(i[0].x,i[0].y);if(k){this.moveTo(m(d,j[0].x),m(d,j[0].y)).lineTo(m(d,i[0].x),m(d,i[0].y));for(c=1;c<i.length;c++)this.bezierCurveTo(C(i,i[c],c,n));this.lineTo(m(d,j[1].x),m(d,j[1].y))}else for(c=1;c<i.length;c++)this.lineTo(m(d,i[c].x),m(d,i[c].y));return this.closePath().stroke(b).fill(a).restore()},lines:function(a,b,d,c){this.save().gCo(c).beginPath().strokeStyle(!0,b,d).moveTo(m(b,a[0]),m(b,a[1]));for(d=2;d<a.length-1;d+=2)this.lineTo(m(b,a[d]),m(b,a[d+1]));return this.stroke(!0).restore()},bezierCurveTo:function(a){this.c.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5]);return this},label:function(a,b,d){return this.save().beginPath().strokeStyle(!0,b,d).moveTo(m(b,a[0].x),m(b,a[0].y)).bezierCurveTo([a[1].x,a[1].y,a[2].x,a[2].y,a[3].x,a[3].y]).stroke(!0).restore()},lineArray:function(a,b,d,c,g){this.save().beginPath().strokeStyle(!0,b,d).moveTo(m(b,a[0].x),m(b,a[0].y));for(d=1;d<a.length;d++)c?this.bezierCurveTo(C(a,a[d],d,g||1.5)):this.lineTo(m(b,a[d].x),m(b,a[d].y));return this.stroke(!0).restore()},manyLine:function(a,b,d,c,g){var f=[],i=!1,g=g||1.5;a.each(function(a){a.ignored&&i?(this.lineArray(f,b,d,c,g),f=[],i=!1):a.ignored||(f.push(a),i=!0)},this);f.length&&this.lineArray(f,b,d,c,g)},dotted:function(b,d,c,g,f,i,n,r,y){if(!f)return this;var b=m(f,b),d=m(f,d),c=m(f,c),g=m(f,g),j=a.distanceP2P(b,d,c,g),s;if(0>=n||j<=n||b!=c&&d!=g)return this.line(b,d,c,g,f,i,y);if(b>c||d>g)s=b,b=c,c=s,s=d,d=g,g=s;this.save().gCo(y).strokeStyle(!0,f,i).beginPath().moveTo(b,d);f=n*(r||1);i=k(j/(n+f));j=j-i*(n+f)>n;r=d==g;i=j?i+1:i;for(y=1;y<=i;y++)this.lineTo(r?b+n*y+f*(y-1):b,r?d:d+n*y+f*(y-1)).moveTo(r?b+(n+f)*y:b,r?d:d+(n+f)*y);j||this.lineTo(c,g);return this.stroke(!0).restore()},line:function(a,b,d,c,g,f,i){if(!g)return this;this.save().gCo(i);return this.beginPath().strokeStyle(!0,g,f).moveTo(m(g,a),m(g,b)).lineTo(m(g,d),m(g,c)).stroke(!0).restore()},round:function(a,b,d,c,g,f){return this.arc(a,b,d,0,0,n,c,!!f,g,f)},fillRect:function(a,b,d,c){this.c.fillRect(a,b,d,c);return this},translate:function(a,b){this.c.translate(a,b);return this},rotate:function(a){this.c.rotate(a);return this},clearRect:function(a,b,d,c){d=d||this.width;c=c||this.height;this.c.clearRect(a||0,b||0,d,c);return this},gCo:function(a){return a?this.gCO(a):this},gCO:function(a){this.c.globalCompositeOperation=a?"destination-over":"source-over";return this},box:function(b,c,h,g,f,r,u,t,y){f=f||{enable:0};if(f.enable){var j=f.width,s=f.color,q=f.radius,x=a.isNumber(j),j=a.parsePadding(j);j[0]==j[1]&&j[1]==j[2]&&j[2]==j[3]&&(x=!0);t=t?1:-1;h+=t*(j[1]+j[3])/2;g+=t*(j[0]+j[2])/2;b-=t*(j[3]/2);c-=t*(j[0]/2);j=x?j[0]:j;q=!x||!q||0==q||"0"==q?0:a.parsePadding(q)}this.save().gCo(y).fillStyle(r).strokeStyle(x,j,s);q?this.beginPath().moveTo(m(j,b+q[0]),m(j,c)).lineTo(m(j,b+h-q[1]),m(j,c)).arc2(m(j,b+h-q[1]),m(j,c+q[1]),q[1],3*d/2,n).lineTo(m(j,b+h),m(j,c+g-q[2])).arc2(m(j,b+h-q[2]),m(j,c+g-q[2]),q[2],0,d/2).lineTo(m(j,b+q[3]),m(j,c+g)).arc2(m(j,b+q[3]),m(j,c+g-q[3]),q[3],d/2,d).lineTo(m(j,b),m(j,c+q[0])).arc2(m(j,b+q[0]),m(j,c+q[0]),q[0],d,3*d/2).closePath().shadowOn(u).stroke(j).shadowOff().fill(r):!f.enable||x?(j&&f.enable&&(this.shadowOn(u).c.strokeRect(b,c,h,g),this.shadowOff()),r&&this.fillRect(b,c,h,g)):(j&&(s=a.isArray(s)?s:[s,s,s,s],this.shadowOn(u).line(b+h,c+j[0]/2,b+h,c+g-j[0]/2,j[1],s[1],0).line(b,c+j[0]/2,b,c+g-j[0]/2,j[3],s[3],0).line(k(b-j[3]/2),c,b+h+j[1]/2,c,j[0],s[0],0).line(k(b-j[3]/2),c+g,b+h+j[1]/2,c+g,j[2],s[2],0).shadowOff()),r&&this.beginPath().moveTo(k(b+j[3]/2),k(c+j[0]/2)).lineTo(i(b+h-j[1]/2),c+j[0]/2).lineTo(i(b+h-j[1]/2),i(c+g-j[2]/2)).lineTo(k(b+j[3]/2),i(c+g-j[2]/2)).lineTo(k(b+j[3]/2),k(c+j[0]/2)).closePath().fill(r));return this.restore()},toDataURL:function(a){return this.canvas.toDataURL(a||"image/png")},addEvent:function(b,d,c){a.Event.addEvent(this.canvas,b,d,c)}};a.taylor={light:function(a,b){b.highlight=!1;a.on("mouseover",function(){b.highlight=!0;a.redraw("mouseover")}).on("mouseout",function(){b.highlight=!1;a.redraw("mouseout")}).on("beforedraw",function(){a.push("f_color",b.highlight?a.get("light_color"):a.get("f_color_"));return!0})}};a.Chart=a.extend(a.Painter,{configure:function(){a.Chart.superclass.configure.apply(this,arguments);this.type="chart";this.dataType="simple";this.set({render:"",data:[],width:void 0,height:void 0,lineJoin:"round",align:"center",default_mouseover_css:!0,turn_off_touchmove:!1,showpercent:!1,decimalsnum:1,title:{text:"",fontweight:"bold",fontsize:20,height:30},subtitle:{text:"",fontweight:"bold",fontsize:16,height:20},footnote:{text:"",color:"#5d7f97",textAlign:"right",height:20},title_align:"center",title_valign:"top",animation:!1,doAnimation:null,animation_timing_function:"easeInOut",duration_animation_duration:1E3,z_index:999,legend:{enable:!1},tip:{enable:!1}});this.registerEvent("beforeAnimation","afterAnimation","animating");this.T=null;this.animationed=this.RENDERED=!1;this.data=[];this.plugins=[];this.oneways=[];this.total=0},toImageURL:function(){return this.T.toImageURL()},segmentRect:function(){this.T.clearRect(this.get("l_originx"),this.get("t_originy"),this.get("client_width"),this.get("client_height"))},resetCanvas:function(){this.T.box(this.get("l_originx"),this.get("t_originy"),this.get("client_width"),this.get("client_height"),0,this.get("f_color"),0,0,!0)},animation:function(b){b.segmentRect();b.doAnimation(b.variable.animation.time,b.duration,b);b.legend&&b.legend.draw();b.plugins.each(function(a){a.A_draw&&(a.variable.animation.animating=!0,a.variable.animation.time=b.variable.animation.time,a.variable.animation.duration=b.duration,a.draw(),a.variable.animation.animating=!1)});b.resetCanvas();b.variable.animation.time<b.duration?(b.variable.animation.time++,a.requestAnimFrame(function(){b.animation(b)})):a.requestAnimFrame(function(){b.variable.animation.time=0;b.animationed=!0;b.draw();b.processAnimation=!1;b.fireEvent(b,"afterAnimation",[b])})},runAnimation:function(){this.fireEvent(this,"beforeAnimation",[this]);this.animation(this)},doSort:function(){this.components.sor(function(b,d){return(a.isArray(b)?b.zIndex||0:b.get("z_index"))>(a.isArray(d)?d.zIndex||0:d.get("z_index"))})},commonDraw:function(b,d){a.Assert.isTrue(b.RENDERED,b.type+" has not rendered.");a.Assert.isTrue(b.initialization,b.type+" has initialize failed.");a.Assert.gt(b.data.length,0,b.type+"'s data is empty.");b.redraw||(b.doSort(),b.oneways.eachAll(function(a){a.draw()}));b.redraw=!0;!b.animationed&&b.get("animation")?b.runAnimation():(b.segmentRect(),b.components.eachAll(function(a){a.draw(d)}),b.resetCanvas())},plugin:function(a){a.inject(this);this.components.push(a);this.plugins.push(a)},getTitle:function(){return this.title},getSubTitle:function(){return this.subtitle},getFootNote:function(){return this.footnote},getDrawingArea:function(){return{x:this.get("l_originx"),x:this.get("t_originy"),width:this.get("client_width"),height:this.get("client_height")}},setUp:function(){this.redraw=!1;this.T.clearRect();this.initialization=!1;this.initialize()},create:function(e,d){if(e.get("fit")){var c=window.innerWidth,g=window.innerHeight,f=a.getDoc().body.style;f.padding="0px";f.margin="0px";f.overflow="hidden";e.push(e.W,c);e.push(e.H,g)}e.width=e.pushIf(e.W,400);e.height=e.pushIf(e.H,300);e.canvasid=a.iGather(e.type);e.shellid="shell-"+e.canvasid;c=[];c.push("<div id='");c.push(e.shellid);c.push("' style='width:");c.push(e.width);c.push("px;height:");c.push(e.height);c.push("px;padding:0px;margin:0px;overflow:hidden;position:relative;'>");c.push("<canvas id= '");c.push(e.canvasid);c.push("'  width='");c.push(e.width);c.push("' height='");c.push(e.height);c.push("'><p>Your browser does not support the canvas element</p></canvas></div>");d.innerHTML=c.join("");e.shell=a(e.shellid);e.T=e.target=new b(e.canvasid);e.RENDERED=!0},initialize:function(){var b=this._(),d=b.get("data");if(!b.RENDERED){var c=b.get("render");"string"==typeof c&&a(c)?b.create(b,a(c)):"object"==typeof c&&b.create(b,c)}0<d.length&&b.RENDERED&&!b.initialization&&("simple"==b.dataType?A.call(b,d):"complex"==b.dataType&&B.call(b,d),b.data=d,b.doConfig(),b.initialization=!0)},eventOff:function(){this.stopEvent=!0},eventOn:function(){this.stopEvent=!1},oneWay:function(b){var d=b.variable.event,c=!b.get("turn_off_touchmove"),g=!a.touch&&b.get("default_mouseover_css"),f,i,k=a.touch?["touchstart","touchmove"]:["click","mousemove"];b.stopEvent=!1;k.each(function(d){b.T.addEvent(d,function(c){b.processAnimation||b.stopEvent||c.targetTouches&&1!=c.targetTouches.length||b.fireEvent(b,d,[b,a.Event.fix(c)])},!1)});b.on(k[0],function(a,b){a.components.eachAll(function(a){var e=a.isMouseOver(b);if(e.valid)return d.click=!0,a.fireEvent(a,"click",[a,b,e]),!b.stopPropagation});d.click&&(c&&b.event.preventDefault(),d.click=!1)});if(!a.touch||c)b.on(k[1],function(a,b){f=i=!1;a.components.eachAll(function(e){var c=e.variable.event,h=e.isMouseOver(b);if(h.valid){if(f=!0,i=i||e.atomic,d.mouseover||(d.mouseover=!0,a.fireEvent(a,"mouseover",[e,b,h])),g&&i&&a.T.css("cursor","pointer"),c.mouseover||(c.mouseover=!0,e.fireEvent(e,"mouseover",[e,b,h])),e.fireEvent(e,"mousemove",[e,b,h]),h.stop)return!1}else c.mouseover&&(c.mouseover=!1,e.fireEvent(e,"mouseout",[e,b,h]));return!b.stopPropagation});d.mouseover&&(b.event.preventDefault(),g&&!i&&a.T.css("cursor","default"),!f&&d.mouseover&&(d.mouseover=!1,a.fireEvent(a,"mouseout",[a,b])))});b.oneWay=a.emptyFn},getPercent:function(b){return this.get("showpercent")?a.toPercent(b/this.total,this.get("decimalsnum")):b},doActing:function(b,d,c,g,f){g=!!b.get("communal_acting");b.push(g?"sub_option":"communal_acting",a.clone(b.get(g?"communal_acting":"sub_option"),!0));a.merge(b.get("sub_option"),d);a.merge(b.get("sub_option"),c);b.pushIf("sub_option.background_color",d.color);b.get("sub_option.tip.enable")&&(b.push("sub_option.tip.text",f||d.name+" "+b.getPercent(d.value)),b.push("sub_option.tip.name",d.name),b.push("sub_option.tip.value",d.value),b.push("sub_option.tip.total",b.total))},doConfig:function(){a.Chart.superclass.doConfig.call(this);var b=this._();a.Assert.isArray(b.data);b.T.strokeStyle(!0,0,b.get("strokeStyle"),b.get("lineJoin"));b.processAnimation=b.get("animation");b.push("communal_acting",0);b.duration=i(b.get("duration_animation_duration")*a.FRAME/1E3);a.isFunction(b.get("doAnimation"))&&(b.doAnimation=b.get("doAnimation"));b.variable.animation={type:0,time:0,queue:[]};b.components=[];b.oneways=[];b.oneways.push(new a.Custom({drawFn:function(){b.T.box(0,0,b.width,b.height,b.get("border"),b.get("f_color"),0,0,true)}}));b.plugins.each(function(a){b.components.push(a)});b.applyGradient();b.animationArithmetic=a.getAA(b.get("animation_timing_function"));b.oneWay(b);b.push("r_originx",b.width-b.get("padding_right"));b.push("b_originy",b.height-b.get("padding_bottom"));var d=0,c=b.push("l_originx",b.get("padding_left")),g=b.push("t_originy",b.get("padding_top")),f=b.push("client_width",b.get(b.W)-b.get("hpadding"));a.isString(b.get("title"))&&b.push("title",a.applyIf({text:b.get("title")},b.default_.title));a.isString(b.get("subtitle"))&&b.push("subtitle",a.applyIf({text:b.get("subtitle")},b.default_.subtitle));a.isString(b.get("footnote"))&&b.push("footnote",a.applyIf({text:b.get("footnote")},b.default_.footnote));if(""!=b.get("title.text")){var k=""!=b.get("subtitle.text"),d=k?b.get("title.height")+b.get("subtitle.height"):b.get("title.height"),g=b.push("t_originy",g+d);b.push("title.originx",c);b.push("title.originy",b.get("padding_top"));b.push("title.width",f);b.title=new a.Text(b.get("title"),b);b.oneways.push(b.title);k&&(b.push("subtitle.originx",c),b.push("subtitle.originy",b.get("title.originy")+b.get("title.height")),b.push("subtitle.width",f),b.subtitle=new a.Text(b.get("subtitle"),b),b.oneways.push(b.subtitle))}""!=b.get("footnote.text")&&(k=b.get("footnote.height"),d+=k,b.push("b_originy",b.get("b_originy")-k),b.push("footnote.originx",c),b.push("footnote.originy",b.get("b_originy")),b.push("footnote.width",f),b.footnote=new a.Text(b.get("footnote"),b),b.oneways.push(b.footnote));d=b.push("client_height",b.get(b.H)-b.get("vpadding")-d);b.push("minDistance",t(f,d));b.push("maxDistance",u(f,d));b.push("minstr",f<d?b.W:b.H);b.push("centerx",c+f/2);b.push("centery",g+d/2);a.applyIf(b.get("sub_option"),a.clone("shadow,shadow_color,shadow_blur,shadow_offsetx,shadow_offsety,tip".split(","),b.options,!0));b.get("legend.enable")&&(b.legend=new a.Legend(a.apply({maxwidth:f,data:b.data},b.get("legend")),b),b.components.push(b.legend));b.push("sub_option.tip.wrap",b.push("tip.wrap",b.shell))}})})(c);c.Legend=c.extend(c.Component,{configure:function(){c.Legend.superclass.configure.apply(this,arguments);this.type="legend";this.set({data:void 0,width:"auto",column:1,row:"max",maxwidth:0,line_height:16,sign:"square",sign_size:12,sign_space:5,legend_space:5,z_index:1009,text_with_sign_color:!1,align:"right",valign:"middle"});this.atomic=!0;this.registerEvent("parse","drawRaw","drawCell")},isEventValid:function(a,b){var d={valid:!1};a.x>this.x&&a.x<b.x+b.width&&a.y>b.y&&a.y<b.y+b.height&&b.data.each(function(c,f){a.x>c.x&&a.x<c.x+c.width_+b.get("signwidth")&&a.y>c.y&&a.y<c.y+b.get("line_height")&&(d={valid:!0,index:f,target:c})},b);return d},drawCell:function(a,b,d,c,f){var i=this.get("sign_size"),k=this.getPlugin("sign");if(!k||!k.call(this,this.T,f,a+i/2,b+i/2,i,c))-1!=f.indexOf("bar")&&this.T.box(a,b+5*i/12,i,i/6,0,c),"round"==f?this.T.round(a+i/2,b+i/2,i/2,c):"round-bar"==f?this.T.round(a+i/2,b+i/2,i/4,c):"square-bar"==f?this.T.box(a+i/4,b+i/4,i/2,i/2,0,c):"bar"!=f&&this.T.box(a,b,i,i,0,c);f=this.get("color");this.get("text_with_sign_color")&&(f=c);this.T.fillText(d,a+this.get("signwidth"),b+i/2,this.get("textwidth"),f)},drawRow:function(a,b,c){for(var g,f=0;f<this.get("column");f++)g=this.data[a],a<this.data.length&&(this.fireEvent(this,"drawCell",[this,g]),this.drawCell(b,c,g.text,g.color,g.sign||this.get("sign")),g.x=b,g.y=c),b+=this.columnwidth[f]+this.get("signwidth")+this.get("legend_space"),a++},doDraw:function(a){a.T.box(a.x,a.y,a.width,a.height,a.get("border"),a.get("f_color"),!1,a.get("shadow"));a.T.textStyle(a.L,"middle",c.getFont(a.get("fontweight"),a.get("fontsize"),a.get("font")));for(var b=a.x+a.get("padding_left"),d=a.y+a.get("padding_top"),g=a.get("column"),f=a.get("row"),i=0;i<f;i++)a.drawRow(i*g,b,d),d+=a.get("line_height"),a.fireEvent(a,"drawRaw",[a,i*g])},doConfig:function(){c.Legend.superclass.doConfig.call(this);var a=this._(),b=a.get("sign_size"),d=a.container;a.T.textFont(a.get("fontStyle"));a.push("signwidth",b+a.get("sign_space"));a.get("line_height")<b&&a.push("line_height",b+b/5);a.get("align")==a.C&&"middle"==a.get("valign")&&a.push("valign",a.O);d.get("align")==a.L&&"middle"==a.get("valign")&&a.push("align",a.R);var b=0,g=w=a.get(a.W),f=0,i="auto"==w,k=c.isNumber(a.get("column")),n=c.isNumber(a.get("row")),u=a.data.length;!k&&!n&&(k=1);k&&!n&&a.push("row",Math.ceil(u/a.get("column")));!k&&n&&a.push("column",Math.ceil(u/a.get("row")));k=a.get("column");n=a.get("row");u>n*k&&(n+=Math.ceil((u-n*k)/k),a.push("row",n));a.columnwidth=Array(k);i&&(g=0);a.data.each(function(b,d){c.merge(b,a.fireEvent(a,"parse",[a,b.name,d]));b.text=b.text||b.name;b.width_=a.T.measureText(b.text)},a);for(var t=0;t<k;t++){f=0;for(b=t;b<u;)f=Math.max(f,a.data[b].width_),b+=k;a.columnwidth[t]=f;g+=f}i&&(w=a.push(a.W,g+a.get("hpadding")+a.get("signwidth")*k+(k-1)*a.get("legend_space")));w>a.get("maxwidth")&&(w=a.push(a.W,a.get("maxwidth")));a.push("textwidth",w-a.get("hpadding")-a.get("signwidth"));a.width=w;a.height=b=a.push(a.H,n*a.get("line_height")+a.get("vpadding"));a.y=a.get("valign")==a.O?d.get("t_originy"):a.get("valign")==a.B?d.get("b_originy")-b:d.get("centery")-b/2;a.x=a.get("align")==a.L?d.get("l_originx"):a.get("align")==a.C?d.get("centerx")-w/2:d.get("r_originx")-w;a.x=a.push(a.X,a.x+a.get("offsetx"));a.y=a.push(a.Y,a.y+a.get("offsety"))}});c.CrossHair=c.extend(c.Html,{configure:function(){c.CrossHair.superclass.configure.apply(this,arguments);this.type="crosshair";this.set({yAngle_:void 0,top:0,left:0,hcross:!0,vcross:!0,invokeOffset:null,line_width:1,line_color:"#1A1A1A",delay:200})},follow:function(a,b){if(this.get("invokeOffset")){var c=this.get("invokeOffset")(a,b);c&&c.hit&&this.position(c.top-this.top,c.left-this.left);return!1}this.position(a.y-this.top-1,a.x-this.left-1);return!0},position:function(a,b){this.horizontal.style.top=a-this.size+"px";this.vertical.style.left=b-this.size+"px"},beforeshow:function(a,b){this.follow(a,b)||this.position(-99,-99)},doCreate:function(a,b,d){var g=document.createElement("div");g.style.width=c.toPixel(b);g.style.height=c.toPixel(d);g.style.backgroundColor=a.get("line_color");g.style.position="absolute";a.dom.appendChild(g);return g},initialize:function(){c.CrossHair.superclass.initialize.call(this);var a=this._(),b=c.toPixel(a.get("line_width"));a.top=c.fixPixel(a.get(a.O));a.left=c.fixPixel(a.get(a.L));a.dom=document.createElement("div");a.dom.style.zIndex=a.get("index");a.dom.style.position="absolute";a.dom.style.width=c.toPixel(0);a.dom.style.height=c.toPixel(0);a.dom.style.top=c.toPixel(a.get(a.O));a.dom.style.left=c.toPixel(a.get(a.L));a.css("visibility","hidden");a.horizontal=a.doCreate(a,a.get("hcross")?c.toPixel(a.get(a.W)):"0px",b);a.vertical=a.doCreate(a,b,a.get("vcross")?c.toPixel(a.get(a.H)):"0px");a.size=a.get("line_width")/2;a.get("shadow")&&(a.dom.style.boxShadow=a.get("shadowStyle"));a.wrap.appendChild(a.dom);a.T.on("mouseover",function(b,c,f){a.show(c,f)}).on("mouseout",function(b,c,f){a.hidden(c,f)}).on("mousemove",function(b,c,f){a.follow(c,f)})}});c.Tip=c.extend(c.Html,{configure:function(){c.Tip.superclass.configure.apply(this,arguments);this.type="tip";this.set({name:"",value:"",text:"",showType:"follow",invokeOffset:null,fade_duration:300,move_duration:100,timing_function:"ease-out",invokeOffsetDynamic:!1,style:"textAlign:left;padding:4px 5px;cursor:pointer;backgroundColor:rgba(239,239,239,.85);fontSize:12px;color:black;",border:{enable:!0,radius:5},delay:200});this.registerEvent("parseText")},position:function(a,b){this.style.top=(0>a?0:a)+"px";this.style.left=(0>b?0:b)+"px"},follow:function(a,b){var d=this._();d.style.width="";if(d.get("invokeOffsetDynamic")){if(b.hit){(c.isString(b.text)||c.isNumber(b.text))&&d.text(b.name,b.value,b.text,b.i,d);var g=d.get("invokeOffset")(d.width(),d.height(),b);d.position(g.top,g.left)}}else"follow"!=d.get("showType")&&c.isFunction(d.get("invokeOffset"))?(g=d.get("invokeOffset")(d.width(),d.height(),b),d.position(g.top,g.left)):d.position(a.y-1.1*d.height()-2,a.x+2)},text:function(a,b,c,g,f){f.dom.innerHTML=f.fireString(f,"parseText",[f,a,b,c,g],c)},beforeshow:function(a,b){this.follow(a,b)},hidden:function(){this.get("animation")?this.css("opacity",0):this.css("visibility","hidden")},initialize:function(){c.Tip.superclass.initialize.call(this);var a=this._();a.css("position","absolute");a.text(a.get("name"),a.get("value"),a.get("text"),0,a);a.style=a.dom.style;a.hidden();if(a.get("animation")){var b=a.get("move_duration")/1E3+"s "+a.get("timing_function")+" 0s";a.transition("opacity "+a.get("fade_duration")/1E3+"s "+a.get("timing_function")+" 0s");a.transition("top "+b);a.transition("left "+b);a.onTransitionEnd(function(){0==a.css("opacity")&&a.css("visibility","hidden")},!1)}a.wrap.appendChild(a.dom);a.T.on("mouseover",function(b,c,f){a.show(c,f)}).on("mouseout",function(b,c){a.hidden(c)});if("follow"==a.get("showType"))a.T.on("mousemove",function(b,c,f){a.T.variable.event.mouseover&&setTimeout(function(){a.T.variable.event.mouseover&&a.follow(c,f)},a.get("delay"))})}});c.Text=c.extend(c.Component,{configure:function(){c.Text.superclass.configure.apply(this,arguments);this.type="text";this.set({text:"",textAlign:"center",background_color:0,textBaseline:"top",border:{enable:!1},width:0,height:0,padding:0,writingmode:"lr",line_height:16,rotate:0});this.registerEvent()},doDraw:function(a){a.get("box_feature")&&a.T.box(a.x,a.y,a.get(a.W),a.get(a.H),a.get("border"),a.get("f_color"));""!=a.get("text")&&a.T.text(a.get("text"),a.get("textx"),a.get("texty"),a.get(a.W),a.get("color"),a.get("textAlign"),a.get("textBaseline"),a.get("fontStyle"),a.get("writingmode"),a.get("line_height"),a.get("shadow"),a.get("rotate"))},isEventValid:function(){return{valid:!1}},doLayout:function(a,b,c,g){g.x=g.push(g.X,g.x+a);g.y=g.push(g.Y,g.y+b);g.push("textx",g.get("textx")+a);g.push("texty",g.get("texty")+b)},doConfig:function(){c.Text.superclass.doConfig.call(this);var a=this._(),b=a.x,d=a.y+a.get("padding_top"),g=a.get(a.W),f=a.get(a.H),i=a.get("textAlign"),b=b+(i==a.C?g/2:i==a.R?g-a.get("padding_right"):a.get("padding_left"));f&&(d+=f/2,a.push("textBaseline","middle"));a.push("textx",b);a.push("texty",d);a.push("box_feature",g&&f);a.applyGradient()}})})(iChart);