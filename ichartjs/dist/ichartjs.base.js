(function(c){var a=navigator.userAgent.toLowerCase(),b=Object.prototype.toString,e=/opera/.test(a),f=/\bchrome\b/.test(a),g=/webkit/.test(a),i=!f&&/safari/.test(a),k=!e&&/msie/.test(a),q=!!document.createElement("canvas").getContext,v=!g&&/gecko/.test(a),t=/ipod|ipad|iphone|android/gi.test(a),s=function(a,b,e,c){return e*a/c+b},w={easeIn:function(a,b,e,c){return e*(a/=c)*a*a+b},easeOut:function(a,b,e,c){return e*((a=a/c-1)*a*a+1)+b},easeInOut:function(a,b,e,c){return 1>(a/=c/2)?e/2*a*a*a+b:e/2*((a-=2)*a*a+2)+b}},n=function(a){var c=!1,y=!1,x=[],d=function(){if(document.addEventListener)return function(){document.removeEventListener("DOMContentLoaded",d,!1);h()};if(document.attachEvent)return function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",d),h())}}(),m=function(){if(!c){try{document.documentElement.doScroll("left")}catch(a){setTimeout(m,1);return}h()}},h=function(){if(!c){c=!0;for(var a=0;a<x.length;a++)x[a].call(document);x=[]}},p=function(){if(!y){y=!0;if("complete"===document.readyState)return setTimeout(h,1);if(document.addEventListener)document.addEventListener("DOMContentLoaded",d,!1),a.addEventListener("load",h,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",d);a.attachEvent("onload",h);var G=!1;try{G=null==a.frameElement}catch(b){}document.documentElement.doScroll&&G&&m()}}},r=function(a){p();c?a.call(document,j):x.push(function(){return a.call(this)})},j=function(a){if(!a||a.nodeType)return a;if("string"===typeof a)return-1!=a.indexOf("#")&&(a=a.substring(1)),document.getElementById(a);"function"===typeof a&&r(a)};j.apply=function(a,d){if(a&&d&&"object"==typeof d)for(var m in d)"undefined"!=typeof d[m]&&(a[m]=d[m]);if(!d&&a){var b={};for(m in a)b[m]=a[m];return b}return a};j.apply(j,{version:"1.0",email:"taylor@ichartjs.com",isEmpty:function(a,d){return null===a||void 0===a||j.isArray(a)&&!a.length||(!d?""===a:!1)},isArray:function(a){return"[object Array]"===b.apply(a)},isDate:function(a){return"[object Date]"===b.apply(a)},isObject:function(a){return!!a&&"[object Object]"===b.apply(a)},isFunction:function(a){return"[object Function]"===b.apply(a)},isNumber:function(a){return"number"===typeof a&&isFinite(a)},isString:function(a){return"string"===typeof a},isBoolean:function(a){return"boolean"===typeof a},isFalse:function(a){return"boolean"===typeof a&&!a},isElement:function(a){return a?!!a.tagName:!1},isDefined:function(a){return"undefined"!==typeof a}});j.applyIf=function(a,d){if(a&&j.isObject(d))for(var m in d)j.isDefined(d[m])&&!j.isDefined(a[m])&&(a[m]=d[m]);return!d&&a?j.apply(a):a};j.merge=function(a,d,m){if(a&&j.isObject(d)){for(var b in d)j.isDefined(d[b])&&(j.isObject(d[b])?j.isObject(a[b])?j.merge(a[b],d[b]):a[b]=j.clone(d[b],!0):a[b]=d[b]);if(j.isObject(m))return j.merge(a,m)}return a};j.clone=function(a,d,m){var b={};if(j.isArray(a)&&j.isObject(d))for(var h=0;h<a.length;h++)b[a[h]]=m&&j.isObject(d[a[h]])?j.clone(d[a[h]],m):d[a[h]];else if(j.isObject(a))for(h in a)b[h]=d&&j.isObject(a[h])&&!(a[h]instanceof j.Painter)?j.clone(a[h],d):a[h];return b};j.override=function(a,d){if(a&&d){var m=a.prototype;j.apply(m,d);j.isIE&&d.hasOwnProperty("toString")&&(m.toString=d.toString)}};j.extend=function(){var a=function(a){for(var d in a)this[d]=a[d]},d=Object.prototype.constructor;return function(m,b){var h=function(){m.apply(this,arguments)},p=function(){},r=m.prototype;p.prototype=r;p=h.prototype=new p;p.constructor=h;h.superclass=r;r.constructor==d&&(r.constructor=m);h.override=function(a){j.override(h,a)};p.superclass=p.supr=function(){return r};p.override=a;j.override(h,b);h.extend=function(a){return j.extend(h,a)};h.plugin_={};h.plugin=function(a,d){j.isString(a)&&j.isFunction(d)&&(h.plugin_[a]=d)};return h}}();var C=Math.sin,H=Math.cos,R=Math.atan,l=Math.sqrt,I=Math.abs,o=Math.PI,B=2*o,J=Math.ceil,D=Math.round,E=Math.floor,K=Math.max,L=Math.min,A=parseFloat,M=function(a,d){if(0==a)return a;var m=I(a),b=0.1;if(1<m){for(;1<m;)m/=10,b*=10;return E(a/b+d)*b}for(b=1;1>m;)m*=10,b/=10;return D(a/b+d)*b},N={navy:"rgb(0,0,128)",olive:"rgb(128,128,0)",orange:"rgb(255,165,0)",silver:"rgb(192,192,192)",white:"rgb(255,255,255)",gold:"rgb(255,215,0)",lime:"rgb(0,255,0)",fuchsia:"rgb(255,0,255)",aqua:"rgb(0,255,255)",green:"rgb(0,128,0)",gray:"rgb(80,80,80)",red:"rgb(255,0,0)",blue:"rgb(0,0,255)",pink:"rgb(255,192,203)",purple:"rgb(128,0,128)",yellow:"rgb(255,255,0)",maroon:"rgb(128,0,0)",black:"rgb(0,0,0)",azure:"rgb(240,255,255)",beige:"rgb(245,245,220)",brown:"rgb(165,42,42)",cyan:"rgb(0,255,255)",darkblue:"rgb(0,0,139)",darkcyan:"rgb(0,139,139)",darkgrey:"rgb(169,169,169)",darkgreen:"rgb(0,100,0)",darkkhaki:"rgb(189,183,107)",darkmagenta:"rgb(139,0,139)",darkolivegreen:"rgb(85,107,47)",darkorange:"rgb(255,140,0)",darkorchid:"rgb(153,50,204)",darkred:"rgb(139,0,0)",darksalmon:"rgb(233,150,122)",darkviolet:"rgb(148,0,211)",indigo:"rgb(75,0,130)",khaki:"rgb(240,230,140)",lightblue:"rgb(173,216,230)",lightcyan:"rgb(224,255,255)",lightgreen:"rgb(144,238,144)",lightgrey:"rgb(211,211,211)",lightpink:"rgb(255,182,193)",lightyellow:"rgb(255,255,224)",magenta:"rgb(255,0,255)",violet:"rgb(128,0,128)"},O=function(a){var d=/rgb\((\w*),(\w*),(\w*)\)/.exec(a);if(d)return[d[1],d[2],d[3]];if(d=/rgba\((\w*),(\w*),(\w*),(.*)\)/.exec(a))return[d[1],d[2],d[3],d[4]];throw Error("invalid colors value '"+a+"'");},F=function(a){if(!a)return a;a=a.replace(/\s/g,"").toLowerCase();if(/^rgb\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3}\)$/.exec(a)||/^rgba\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3},(0(\.[0-9])?|1(\.0)?)\)$/.exec(a))return a;if(/^#(([a-fA-F0-9]{6,7})|([a-fA-F0-9]{3}))$/.exec(a))return a=a.replace(/#/g,"").replace(/^(\w)(\w)(\w)$/,"$1$1$2$2$3$3"),(7==a.length?"rgba(":"rgb(")+parseInt(a.substring(0,2),16)+","+parseInt(a.substring(2,4),16)+","+parseInt(a.substring(4,6),16)+(7==a.length?",0."+a.substring(6,7)+")":")");if(N[a])return N[a];throw Error("invalid colors value '"+a+"'");},P=function(a,d){d=d||0.14;return 0.5<a?d-(1-a)/10:0.1<a?d-0.16+a/5:a>d?d:a/2},Q=function(a,d,m,b){if(!d)return d;var d=O(F(d)),h;h=d;var p=void 0,r=void 0;j.isArray(h)&&(p=h[1],r=h[2],h=h[0]);h/=255;var p=p/255,r=r/255,e=K(K(h,p),r),c=L(L(h,p),r),c=e-c;if(0==c)h=[0,0,e];else{var l;h==e?l=(p-r)/c:p==e?l=(r-h)/c+2:r==e&&(l=(h-p)/c+4);l*=60;0>l&&(l+=360);h=[l,c/e,e]}h[1]-=0!=b?b||0.05:b;a?(h[2]-=P(h[2],m),h[1]=j.upTo(h[1],1),h[2]=j.lowTo(h[2],0)):(h[2]+=P(1-h[2],m),h[1]=j.lowTo(h[1],0),h[2]=j.upTo(h[2],1));b=d[3];a=d=void 0;j.isArray(h)&&(a=b,b=h[1],d=h[2],h=h[0]);var f,C,g,m=E(h/60)%6,r=h/60-m;h=d*(1-b);p=d*(1-b*r);b=d*(1-b*(1-r));switch(m){case 0:f=d;C=b;g=h;break;case 1:f=p;C=d;g=h;break;case 2:f=h;C=d;g=b;break;case 3:f=h;C=p;g=d;break;case 4:f=b;C=h;g=d;break;case 5:f=d,C=h,g=p}return"rgb"+(a?"a":"")+"("+D(255*f)+","+D(255*C)+","+D(255*g)+(a?","+a+")":")")};j.apply(j,{getFont:function(a,d,b){return a+" "+d+"px "+b},getDoc:function(){return a.contentWindow?a.contentWindow.document:a.contentDocument?a.contentDocument:a.document},DefineAbstract:function(a,d){if(!d[a])throw Error("Cannot instantiate the type '"+d.type+"'.you must implements it with method '"+a+"'.");},getAA:function(a){return"linear"==a?s:"easeInOut"==a||"easeIn"==a||"easeOut"==a?w[a]:s},noConflict:function(){return n},plugin:function(a,d,b){j.isFunction(a)&&a.plugin(d,b)},parsePadding:function(a,d){a=a||0;if(j.isNumber(a))return[a,a,a,a];if(j.isArray(a))return a;d=d||0;a=a.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g,/\s/).replace(/\s/g,",").split(",");1==a.length?a[0]=a[1]=a[2]=a[3]=A(a[0])||d:2==a.length?(a[0]=a[2]=A(a[0])||d,a[1]=a[3]=A(a[1])||d):3==a.length?(a[0]=A(a[0])||d,a[1]=a[3]=A(a[1])||d,a[2]=A(a[2])||d):(a[0]=A(a[0])||d,a[1]=A(a[1])||d,a[2]=A(a[2])||d,a[3]=A(a[3])||d);return a},distanceP2P:function(a,d,b,m){return l((b-a)*(b-a)+(m-d)*(m-d))},atan2Radian:function(a,d,b,m){if(a==b)return m>d?o/2:3*o/2;if(d==m)return b>a?0:o;var h=j.quadrant(a,d,b,m),a=R(I((d-m)/(a-b)));return h?(3==h?B:o)+(2==h?a:-a):a},angle2Radian:function(a){return a*o/180},radian2Angle:function(a){return 180*a/o},quadrant:function(a,d,b,m){return a<b?d<m?0:3:d<m?1:2},toPI2:function(a){for(;0>a;)a+=B;return a%B},visible:function(a,d,b){if(a>d)return[];var m=j.quadrantd(a),h=j.quadrantd(d);if((2==m||3==m)&&(2==h||3==h)&&d-a<o)return[];a=$.toPI2(a);d=$.toPI2(d);d<a&&(d+=B);a>o&&(a=B);if(d>B)return[{s:a,e:o,f:b},{s:B,e:d,f:b}];d>o&&(d=o);return{s:a,e:d,f:b}},quadrantd:function(a){if(0==a)return 0;if(0==a%B)return 3;for(;0>a;)a+=B;return J(2*(a%B)/o)-1},upTo:function(a,d){return d>a?a:d},lowTo:function(a,d){return d<a?a:d},between:function(a,d,b){return b>d?d:b<a?a:b},inRange:function(a,d,b){return d>b&&a<b},angleInRange:function(a,d,b){b-=a;b=0>b?b+B:b;b%=B;return d-a>b},angleZInRange:function(a,d,b){return d>a?d>b&&a<b:b>a||b<d},inRangeClosed:function(a,d,b){return d>=b&&a<=b},inEllipse:function(a,d,b,m){return 1>=a*a/b/b+d*d/m/m},p2Point:function(a,d,b,m){return{x:a+H(b)*m,y:d+C(b)*m}},toRgb:F,toRgba:function(a,d){var b=O(F(a));return"rgba("+b[0]+","+b[1]+","+b[2]+","+d+")"},vectorP2P:function(a,d,b){b||(d=j.angle2Radian(d),a=j.angle2Radian(a));d=C(d);return{x:d*C(a),y:d*H(a)}},iGather:function(a){return(a||"ichartjs")+"-"+J(1E4*Math.random())+(new Date).getTime().toString().substring(4)},toPercent:function(a,d){return(100*a).toFixed(d)+"%"},parsePercent:function(a,d){return j.isString(a)&&(a=a.match(/(.*)%/))?d?E(A(a[1])*d/100):a[1]/100:a},parseFloat:function(a,d){if(!j.isNumber(a)&&(a=A(a),!j.isNumber(a)))throw Error("["+d+"]="+a+"is not a valid number.");return a},ceil:function(a){return M(a,1)},floor:function(a){return M(a,-1)},_2D:"2d",_3D:"3d",light:function(a,d,b){return Q(!1,a,d,b)},dark:function(a,d,b){return Q(!0,a,d,b)},fixPixel:function(a){return j.isNumber(a)?a:A(a.replace("px",""))||0},toPixel:function(a){return j.isNumber(a)?a+"px":j.fixPixel(a)+"px"},emptyFn:function(){return!0},supportCanvas:q,isOpera:e,isWebKit:g,isChrome:f,isSafari:i,isIE:k,isGecko:v,isMobile:t,touch:"ontouchend"in document,FRAME:t?30:60});j.Assert={gt:function(a,d,b){if(!j.isNumber(a)&&a>=d)throw Error(b+" required Number gt "+d+",given:"+a);},isNumber:function(a,d){if(!j.isNumber(a))throw Error(d+" required Number,given:"+a);},isArray:function(a,d){if(!j.isArray(a))throw Error(d+" required Array,given:"+a);},isTrue:function(a,d){if(!0!==a)throw Error(d);}};j.requestAnimFrame=function(){var d=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(d){a.setTimeout(d,1E3/60)};return function(a){d(a)}}();j.Event={addEvent:function(a,d,b,m){a.addEventListener?a.addEventListener(d,b,m):a.attachEvent?a.attachEvent("on"+d,b):a["on"+d]=b},fix:function(d){"undefined"==typeof d&&(d=a.event);var b={target:d.target,pageX:d.pageX,pageY:d.pageY,offsetX:d.offsetX,offsetY:d.offsetY,stopPropagation:!1,event:d};if("undefined"==typeof d.offsetX){d.target||(b.target=d.srcElement||document);d.targetTouches&&(b.pageX=d.targetTouches[0].pageX,b.pageY=d.targetTouches[0].pageY);if(null==b.pageX&&null!=d.clientX){var m=document.documentElement,h=document.body;b.pageX=d.clientX+(m&&m.scrollLeft||h&&h.scrollLeft||0)-(m&&m.clientLeft||h&&h.clientLeft||0);b.pageY=d.clientY+(m&&m.scrollTop||h&&h.scrollTop||0)-(m&&m.clientTop||h&&h.clientTop||0)}for(var h=m=0,p=d.target;p!=document.body&&p;)m+=p.offsetLeft,h+=p.offsetTop,p=p.offsetParent;b.offsetX=b.pageX-m;b.offsetY=b.pageY-h}b.x=b.offsetX;b.y=b.offsetY;d.stopPropagation||(d.stopPropagation=function(){a.event.cancelBubble=true});return b}};return j}(c);Array.prototype.each=function(a,b){for(var e=this.length,c,d=0;d<e&&!(c=b?a.call(b,this[d],d):a(this[d],d),"boolean"===typeof c&&!c);d++);return this};Array.prototype.eachAll=function(a,b){this.each(function(c,e){return n.isArray(c)?c.eachAll(a,b):b?a.call(b,c,e):a(c,e)},b)};Array.prototype.sor=function(a){for(var b=this.length-1,c,e=0;e<b;e++)for(var d=b;d>e;d--)if(a?!a(this[d],this[d-1]):this[d]<this[d-1])c=this[d],this[d]=this[d-1],this[d-1]=c};c.iChart=n;c.$||(c.$=c.iChart)})(window);(function(c){c.Element=function(a){var b=this._();b.type="element";c.DefineAbstract("configure",b);c.DefineAbstract("afterConfiguration",b);b.options={};b.set({id:"",border:{enable:!1,color:"#BCBCBC",style:"solid",width:1,radius:0},shadow:!1,shadow_color:"#666666",shadow_blur:4,shadow_offsetx:0,shadow_offsety:0});b.W="width";b.H="height";b.O="top";b.B="bottom";b.L="left";b.R="right";b.C="center";b.X="originx";b.Y="originy";b.variable={};b.events={mouseup:[],touchstart:[],touchmove:[],touchend:[],mousedown:[],dblclick:[]};this.registerEvent("initialize");b.initialization=!1;b.configure.apply(b,Array.prototype.slice.call(arguments,1));b.default_=c.clone(b.options,!0);b.set(a);b.afterConfiguration()};c.Element.prototype={_:function(){return this},afterConfiguration:function(){if(c.isObject(this.get("listeners")))for(var a in this.get("listeners"))this.on(a,this.get("listeners")[a]);this.initialize();this.fireEvent(this,"initialize",[this])},registerEvent:function(){for(var a=0;a<arguments.length;a++)this.events[arguments[a]]=[]},fireString:function(a,b,e,f){a=this.fireEvent(a,b,e);return c.isString(a)?a:!0!==a&&c.isDefined(a)?a.toString():f},fireEvent:function(a,b,c){var f=this.events[b].length;if(1==f)return this.events[b][0].apply(a,c);for(var g=!0,i=0;i<f;i++)this.events[b][i].apply(a,c)||(g=!1);return g},on:function(a,b){if(c.isString(a)){if(!this.events[a])throw Error("["+this.type+"] invalid event:'"+a+"'");this.events[a].push(b)}else c.isArray(a)&&a.each(function(a){this.on(a,b)},this);return this},getPlugin:function(a){return this.constructor.plugin_[a]},set:function(a){c.isObject(a)&&c.merge(this.options,a)},pushIf:function(a,b){return!c.isDefined(this.get(a))?this.push(a,b):this.get(a)},push:function(a,b){for(var c=a.split("."),f=c.length-1,g=this.options,i=0;i<f;i++)g[c[i]]||(g[c[i]]={}),g=g[c[i]];return g[c[f]]=b},get:function(a){for(var a=a.split("."),b=this.options[a[0]],c=1;c<a.length;c++){if(!b)return null;b=b[a[c]]}return b}};c.Html=c.extend(c.Element,{configure:function(a){this.type="html";this.T=a;c.DefineAbstract("beforeshow",this);this.set({animation:!0,width:0,height:0,style:"",index:999,offset_top:0,offset_left:0});this.transitions=""},initialize:function(){this.wrap=this.get("wrap");this.dom=document.createElement("div");this.get("shadow")&&this.css("boxShadow",this.get("shadow_offsetx")+"px "+this.get("shadow_offsety")+"px "+this.get("shadow_blur")+"px "+this.get("shadow_color"));this.get("border.enable")&&(this.css("border",this.get("border.width")+"px "+this.get("border.style")+" "+this.get("border.color")),this.css("borderRadius",this.get("border.radius")+"px"));this.css("zIndex",this.get("index"));this.applyStyle()},width:function(){return this.dom.offsetWidth},height:function(){return this.dom.offsetHeight},onTransitionEnd:function(a,b){var e="transitionend";c.isWebKit?e="webkitTransitionEnd":c.isOpera&&(e="oTransitionEnd");c.Event.addEvent(this.dom,e,a,b)},transition:function(a){this.transitions=""==this.transitions?a:this.transitions+","+a;c.isWebKit?this.css("WebkitTransition",this.transitions):c.isGecko?this.css("MozTransition",this.transitions):c.isOpera?this.css("OTransition",this.transitions):this.css("transition",this.transitions)},show:function(a,b){this.beforeshow(a,b);this.css("visibility","visible");this.get("animation")&&this.css("opacity",1)},hidden:function(){this.css("visibility","hidden")},getDom:function(){return this.dom},css:function(a,b){if(c.isString(a))if(c.isDefined(b))this.dom.style[a]=b;else return this.dom.style[a]},applyStyle:function(){for(var a=this.get("style").split(";"),b,c=0;c<a.length;c++)b=a[c].split(":"),1<b.length&&this.css(b[0],b[1])}});c.Painter=c.extend(c.Element,{configure:function(){this.type="painter";this.dimension=c._2D;c.DefineAbstract("commonDraw",this);c.DefineAbstract("initialize",this);this.set({strokeStyle:"gray",padding:10,color:"black",offsetx:0,offsety:0,background_color:"#FEFEFE",color_factor:0.15,style:"",border:{enable:!0},gradient:!1,gradient_mode:"LinearGradientUpDown",z_index:0,listeners:null,originx:0,originy:0});this.variable.event={mouseover:!1};this.registerEvent("click","mousemove","mouseover","mouseout","beforedraw","draw")},is3D:function(){return this.dimension==c._3D},applyGradient:function(a,b,c,f){var g=this._();g.get("gradient")&&(g.push("f_color",g.T.gradient(a||g.x||0,b||g.y||0,c||g.get(g.W),f||g.get(g.H),[g.get("dark_color"),g.get("light_color")],g.get("gradient_mode"))),g.push("light_color",g.T.gradient(a||g.x||0,b||g.y||0,c||g.get(g.W),f||g.get(g.H),[g.get("background_color"),g.get("light_color")],g.get("gradient_mode"))),g.push("f_color_",g.get("f_color")))},draw:function(a){if(!this.fireEvent(this,"beforedraw",[this,a]))return this;this.commonDraw(this,a);this.fireEvent(this,"draw",[this,a])},doConfig:function(){var a=this._(),b=c.parsePadding(a.get("padding")),e=a.get("border.enable"),e=e?c.parsePadding(a.get("border.width")):[0,0,0,0],f=c.toRgb(a.get("background_color")),g=a.get("color_factor"),i=a.get("gradient")?0:null;a.set({border_top:e[0],border_right:e[1],border_bottom:e[2],border_left:e[3],hborder:e[1]+e[3],vborder:e[0]+e[2],padding_top:b[0]+e[0],padding_right:b[1]+e[1],padding_bottom:b[2]+e[2],padding_left:b[3]+e[3],hpadding:b[1]+b[3]+e[1]+e[3],vpadding:b[0]+b[2]+e[0]+e[2]});a.get("shadow")&&a.push("shadow",{color:a.get("shadow_color"),blur:a.get("shadow_blur"),offsetx:a.get("shadow_offsetx"),offsety:a.get("shadow_offsety")});a.push("f_color",f);a.push("f_color_",f);a.push("light_color",c.light(f,g,i));a.push("dark_color",c.dark(f,0.8*g,i));a.push("light_color2",c.light(f,2*g,i));a.id=a.get("id");a.is3D()&&!a.get("xAngle_")&&(b=c.vectorP2P(a.get("xAngle"),a.get("yAngle")),a.push("xAngle_",b.x),a.push("yAngle_",b.y))}});c.Component=c.extend(c.Painter,{configure:function(a){c.Component.superclass.configure.apply(this,arguments);this.type="component";this.set({fontsize:12,font:"Verdana",fontweight:"normal",tip:{enable:!1,border:{width:2}}});this.proxy=this.atomic=!1;this.inject(a)},initialize:function(){c.DefineAbstract("isEventValid",this);c.DefineAbstract("doDraw",this);this.doConfig();this.initialization=!0},getDimension:function(){return{x:this.x,y:this.y,width:this.get("width"),height:this.get("height")}},doConfig:function(){c.Component.superclass.doConfig.call(this);var a=this._();a.x=a.push(a.X,a.get(a.X)+a.get("offsetx"));a.y=a.push(a.Y,a.get(a.Y)+a.get("offsety"));a.push("fontStyle",c.getFont(a.get("fontweight"),a.get("fontsize"),a.get("font")));a.data=a.get("data");a.get("tip.enable")&&(a.pushIf("tip.border.color",a.get("f_color")),c.isFunction(a.get("tip.invokeOffset"))||a.push("tip.invokeOffset",a.tipInvoke()))},isMouseOver:function(a){return this.isEventValid(a,this)},redraw:function(a){this.container.draw(a)},commonDraw:function(a){a.proxy||a.doDraw.call(a,a)},inject:function(a){a&&(this.container=a,this.target=this.T=a.T)}});c.Scale=c.extend(c.Component,{configure:function(){c.Scale.superclass.configure.apply(this,arguments);this.type="scale";this.set({position:"left",which:"h",basic_value:0,scale2grid:!0,distance:void 0,start_scale:0,end_scale:void 0,min_scale:void 0,max_scale:void 0,scale_space:void 0,scale_share:5,scale_enable:!0,scale_size:1,scale_width:4,scale_color:"#333333",scaleAlign:"center",labels:[],label:{},text_space:6,textAlign:"left",decimalsnum:0,join_style:"none",join_size:2});this.registerEvent("parseText")},isEventValid:function(){return{valid:!1}},doDraw:function(a){a.get("scale_enable")&&a.items.each(function(b){a.T.line(b.x0,b.y0,b.x1,b.y1,a.get("scale_size"),a.get("scale_color"),!1)});a.labels.each(function(a){a.draw()})},doLayout:function(a,b,c){c.get("scale_enable")&&c.items.each(function(c){c.x0+=a;c.y0+=b;c.x1+=a;c.y1+=b});c.labels.each(function(c){c.doLayout(a,b,0,c)})},doConfig:function(){c.Scale.superclass.doConfig.call(this);c.Assert.isNumber(this.get("distance"),"distance");var a=this._(),b=Math.abs,e=a.get("labels").length,f=a.get("min_scale"),g=a.get("max_scale"),i=a.get("scale_space"),k=a.get("end_scale"),q=a.get("start_scale");a.items=[];a.labels=[];a.number=0;if(0<e)a.number=e-1;else{c.Assert.isTrue(c.isNumber(g)||c.isNumber(k),"max_scale&end_scale");if(!c.isNumber(k)||k<g)k=a.push("end_scale",c.ceil(g));q>f&&(q=a.push("start_scale",c.floor(f)));i&&b(i)<b(k-q)&&a.push("scale_share",(k-q)/i);a.number=a.push("scale_share",b(a.get("scale_share")));if(!i||i>k-q)i=a.push("scale",(k-q)/a.get("scale_share"));parseInt(i)!=i&&0==a.get("decimalsnum")&&(b=i+"",b=b.substring(b.indexOf(".")+1),a.push("decimalsnum",b.length))}a.push("distanceOne",a.get("valid_distance")/a.number);var v,t,s,w=k=g=f=b=0,n=0;v=a.get("scale_width");t=v/2;s=a.get("scaleAlign");var z=a.get("position"),u=a.get("text_space"),y="",x=a.get("coo").get("axis.width");a.push("which",a.get("which").toLowerCase());a.isH="h"==a.get("which");a.isH?(s==a.O?k=-v:s==a.C?(k=-t,f=t):f=v,z==a.O?(n=-u-x[0],y=a.B):(n=u+x[2],y=a.O),z=a.C):(s==a.L?g=-v:s==a.C?(g=-t,b=t):b=v,y="middle",z==a.R)?(z=a.L,w=u+x[1]):(z=a.R,w=-u-x[3]);for(u=0;u<=a.number;u++)v=e?a.get("labels")[u]:(i*u+q).toFixed(a.get("decimalsnum")),t=a.isH?a.get("valid_x")+u*a.get("distanceOne"):a.x,s=a.isH?a.y:a.get("valid_y")+a.get("distance")-u*a.get("distanceOne"),a.items.push({x:t,y:s,x0:t+g,y0:s+k,x1:t+b,y1:s+f}),a.labels.push(new c.Text(c.applyIf(c.apply(a.get("label"),c.merge({text:v,x:t,y:s,originx:t+w,originy:s+n},a.fireEvent(a,"parseText",[v,t+w,s+n,u,a.number==u]))),{textAlign:z,textBaseline:y}),a))}});c.Coordinate={coordinate_:function(){var a=this._(),b=a.get("coordinate.scale"),e=a.get("scaleAlign"),f=!0;c.isObject(b)&&(b=[b]);c.isArray(b)?(b.each(function(a){if(a.position==e)return f=!1}),f&&(e=e==a.L?a.R:e==a.R?a.L:e==a.O?a.B:a.O,a.push("scaleAlign",e)),b.each(function(b){if(b.position==e){if(!b.start_scale)b.min_scale=a.get("minValue");if(!b.end_scale)b.max_scale=a.get("maxValue");return false}})):a.push("coordinate.scale",{position:e,scaleAlign:e,max_scale:a.get("maxValue"),min_scale:a.get("minValue")});a.is3D()&&(a.push("coordinate.xAngle_",a.get("xAngle_")),a.push("coordinate.yAngle_",a.get("yAngle_")),a.push("coordinate.zHeight",a.get("zHeight")*a.get("bottom_scale")));return new (c[a.is3D()?"Coordinate3D":"Coordinate2D"])(a.get("coordinate"),a)},coordinate:function(){var a=this._(),b=a.get("client_width"),e=a.get("client_height"),f=a.push("coordinate.width",c.parsePercent(a.get("coordinate.width"),b)),g=a.push("coordinate.height",c.parsePercent(a.get("coordinate.height"),e)),i=a.get("coordinate.valid_width"),k=a.get("coordinate.valid_height");if(!g||g>e)g=a.push("coordinate.height",Math.floor(0.8*e));if(!f||f>b)f=a.push("coordinate.width",Math.floor(0.8*b));i=a.push("coordinate.valid_width",c.parsePercent(i,f));k=a.push("coordinate.valid_height",c.parsePercent(k,g));a.is3D()&&(b=a.get("coordinate.pedestal_height"),e=a.get("coordinate.board_deep"),b=c.isNumber(b)?b:22,e=c.isNumber(e)?e:20,g=a.push("coordinate.height",g-b-e));a.get("align")==a.L?a.push(a.X,a.get("l_originx")):a.get("align")==a.R?a.push(a.X,a.get("r_originx")-f):a.push(a.X,a.get("centerx")-f/2);a.x=a.push(a.X,a.get(a.X)+a.get("offsetx"));a.y=a.push(a.Y,a.get("centery")-g/2+a.get("offsety"));(!i||i>f)&&a.push("coordinate.valid_width",f);(!k||k>g)&&a.push("coordinate.valid_height",g);a.push("coordinate.originx",a.x);a.push("coordinate.originy",a.y)}};c.Coordinate2D=c.extend(c.Component,{configure:function(){c.Coordinate2D.superclass.configure.apply(this,arguments);this.type="coordinate2d";this.set({sign_size:12,sign_space:5,scale:[],width:"80%",height:"80%",valid_width:"100%",valid_height:"100%",grid_line_width:1,grid_color:"#dbe1e1",gridHStyle:{},gridVStyle:{},gridlinesVisible:!0,scale2grid:!0,grids:void 0,ignoreOverlap:!0,ignoreEdge:!1,xlabel:"",ylabel:"",background_color:0,striped:!0,striped_direction:"v",striped_factor:0.01,crosshair:{enable:!1},width:void 0,height:void 0,z_index:-1,axis:{enable:!0,color:"#666666",width:1}});this.scale=[];this.gridlines=[]},getScale:function(a){for(var b=0;b<this.scale.length;b++){var e=this.scale[b];if(e.get("position")==a)return a=[e.get("basic_value"),e.get("start_scale"),e.get("end_scale"),e.get("end_scale")-e.get("start_scale"),0],a[4]=c.inRange(a[1],a[2]+1,a[0])||c.inRange(a[2]-1,a[1],a[0]),{range:a[4],basic:a[4]?(a[0]-a[1])/a[3]:0,start:a[4]?a[0]:a[1],end:a[2],distance:a[3]}}return{start:0,end:0,distance:0}},isEventValid:function(a,b){return{valid:a.x>b.x&&a.x<b.x+b.get(b.W)&&a.y<b.y+b.get(b.H)&&a.y>b.y}},doDraw:function(a){a.T.box(a.x,a.y,a.get(a.W),a.get(a.H),0,a.get("f_color"));if(a.get("striped")){var b,e,f=!1;a.get("axis.width");var g=c.dark(a.get("background_color"),a.get("striped_factor"),0)}var i="v"==a.get("striped_direction");a.gridlines.each(function(c){a.get("striped")&&(f&&(i?a.T.box(c.x1,c.y1+c.width,c.x2-c.x1,e-c.y1-c.width,0,g):a.T.box(b+c.width,c.y2,c.x1-b,c.y1-c.y2,0,g)),b=c.x1,e=c.y1,f=!f)}).each(function(b){b.overlap||(b.solid?a.T.line(b.x1,b.y1,b.x2,b.y2,b.width,b.color):a.T.dotted(b.x1,b.y1,b.x2,b.y2,b.width,b.color,b.size,b.fator))});a.T.box(a.x,a.y,a.get(a.W),a.get(a.H),a.get("axis"),!1,a.get("shadow"),!0);a.scale.each(function(a){a.draw()})},doConfig:function(){c.Coordinate2D.superclass.doConfig.call(this);var a=this._();c.Assert.isNumber(a.get(a.W),a.W);c.Assert.isNumber(a.get(a.H),a.H);a.atomic=!1;a.get("gradient")&&c.isString(a.get("f_color"))&&a.push("f_color",a.T.avgLinearGradient(a.x,a.y,a.x,a.y+a.get(a.H),[a.get("dark_color"),a.get("light_color")]));if(a.get("axis.enable")){var b=a.get("axis.width");c.isArray(b)||a.push("axis.width",[b,b,b,b])}else a.push("axis.width",[0,0,0,0]);a.get("crosshair.enable")&&(a.push("crosshair.wrap",a.container.shell),a.push("crosshair.height",a.get(a.H)),a.push("crosshair.width",a.get(a.W)),a.push("crosshair.top",a.y),a.push("crosshair.left",a.x),a.crosshair=new c.CrossHair(a.get("crosshair"),a));var e,f=(b=!(!a.get("gridlinesVisible")||!a.get("grids")))&&!!a.get("grids.horizontal"),g=b&&!!a.get("grids.vertical"),i=a.get(a.H),k=a.get(a.W),q=a.get("valid_width"),v=a.get("valid_height"),b=a.get("gridlinesVisible")&&a.get("scale2grid")&&!(f&&g),t=(k-q)/2,s=(i-v)/2,w=a.get("axis.width");a.push("x_start",a.x+(k-q)/2);a.push("x_end",a.x+(k+q)/2);a.push("y_start",a.y+(i-v)/2);a.push("y_end",a.y+(i+v)/2);c.isArray(a.get("scale"))||(c.isObject(a.get("scale"))?a.push("scale",[a.get("scale")]):a.push("scale",[]));a.get("scale").each(function(d){e=(e=d.position)||a.L;e=e.toLowerCase();d[a.X]=a.x;d.coo=a;d[a.Y]=a.y;d.valid_x=a.x+t;d.valid_y=a.y+s;d.position=e;if(e==a.O){d.which="h";d.distance=k;d.valid_distance=q}else if(e==a.R){d.which="v";d.distance=i;d.valid_distance=v;d[a.X]=d[a.X]+k;d.valid_x=d.valid_x+q}else if(e==a.B){d.which="h";d.distance=k;d.valid_distance=q;d[a.Y]=d[a.Y]+i;d.valid_y=d.valid_y+v}else{d.which="v";d.distance=i;d.valid_distance=v}a.scale.push(new c.Scale(d,a.container))},a);var n=a.push("ignoreOverlap",a.get("ignoreOverlap")&&a.get("axis.enable")||a.get("ignoreEdge"));if(n)var z=a.get("ignoreEdge")?function(d,b,m){return d=="v"?m==a.y||m==a.y+i:b==a.x||b==a.x+d}:function(d,b,m){return d=="v"?m==a.y&&w[0]>0||m==a.y+i&&w[2]>0:b==a.x&&w[3]>0||b==a.x+k&&w[1]>0};var u={solid:!0,size:10,fator:1,width:a.get("grid_line_width"),color:a.get("grid_color")},y=c.applyIf(a.get("gridHStyle"),u),x=c.applyIf(a.get("gridVStyle"),u);if(b){var d,m,h;a.scale.each(function(b){h=b.get("position");if(!c.isFalse(b.get("scale2grid"))&&!(f&&b.get("which")=="v"||g&&b.get("which")=="h")){d=m=0;h==a.O?m=i:h==a.R?d=-k:h==a.B?m=-i:d=k;b.items.each(function(h){n&&a.gridlines.push(c.applyIf({overlap:z.call(a,b.get("which"),h.x,h.y),x1:h.x,y1:h.y,x2:h.x+d,y2:h.y+m},b.isH?x:y))})}})}if(g){var p=a.get("grids.vertical");c.Assert.gt(p.value,0,"value");b=k/p.value;u=p.value;"given_value"==p.way&&(u=b,b=p.value,b=b>k?k:b);for(p=0;p<=u;p++)n&&a.gridlines.push(c.applyIf({overlap:z.call(a,"h",a.x+p*b,a.y),x1:a.x+p*b,y1:a.y,x2:a.x+p*b,y2:a.y+i,H:!1,width:x.width,color:x.color},x))}if(f){p=a.get("grids.horizontal");c.Assert.gt(p.value,0,"value");b=i/p.value;u=p.value;"given_value"==p.way&&(u=b,b=p.value,b=b>i?i:b);for(p=0;p<=u;p++)n&&a.gridlines.push(c.applyIf({overlap:z.call(a,"v",a.x,a.y+p*b),x1:a.x,y1:a.y+p*b,x2:a.x+k,y2:a.y+p*b,H:!0,width:y.width,color:y.color},y))}}});c.Coordinate3D=c.extend(c.Coordinate2D,{configure:function(){c.Coordinate3D.superclass.configure.apply(this,arguments);this.type="coordinate3d";this.dimension=c._3D;this.set({xAngle:60,yAngle:20,xAngle_:void 0,yAngle_:void 0,zHeight:0,pedestal_height:22,board_deep:20,left_board:!0,gradient:!0,color_factor:0.18,ignoreEdge:!0,striped:!1,grid_color:"#a4ad96",background_color:"#d6dbd2",shadow_offsetx:4,shadow_offsety:2,wall_style:[],axis:{enable:!1}})},doDraw:function(a){var b=a.get(a.W),c=a.get(a.H),f=a.get("xAngle_"),g=a.get("yAngle_"),i=a.get("zHeight"),k=a.get("z_offx"),q=a.get("z_offy");a.get("pedestal_height")&&a.T.cube3D(a.x,a.y+c+a.get("pedestal_height"),f,g,!1,b,a.get("pedestal_height"),3*i/2,a.get("axis.enable"),a.get("axis.width"),a.get("axis.color"),a.get("bottom_style"));a.get("board_deep")&&a.T.cube3D(a.x+k,a.y+c-q,f,g,!1,b,c,a.get("board_deep"),a.get("axis.enable"),a.get("axis.width"),a.get("axis.color"),a.get("board_style"));a.T.cube3D(a.x,a.y+c,f,g,!1,b,c,i,a.get("axis.enable"),a.get("axis.width"),a.get("axis.color"),a.get("wall_style"));a.gridlines.each(function(b){b.solid?(a.get("left_board")&&a.T.line(b.x1,b.y1,b.x1+k,b.y1-q,b.width,b.color),a.T.line(b.x1+k,b.y1-q,b.x2+k,b.y2-q,b.width,b.color)):(a.get("left_board")&&a.T.dotted(b.x1,b.y1,b.x1+k,b.y1-q,b.width,b.color,b.size,b.fator),a.T.dotted(b.x1+k,b.y1-q,b.x2+k,b.y2-q,b.width,b.color,b.size,b.fator))});a.scale.each(function(a){a.draw()})},doConfig:function(){c.Coordinate3D.superclass.doConfig.call(this);for(var a=this._(),b=a.get("wall_style"),e=a.get("background_color"),f=a.get(a.H),g=a.get(a.W),i=a.get("color_factor"),k=a.push("z_offx",a.get("xAngle_")*a.get("zHeight")),q=a.push("z_offy",a.get("yAngle_")*a.get("zHeight"));6>b.length;)b.push({color:e});a.get("left_board")||(b[2]=!1,a.scale.each(function(a){a.doLayout(k,-q,a)}));a.push("bottom_style",[{color:a.get("shadow_color"),shadow:a.get("shadow")},!1,!1,{color:b[3].color},!1,{color:b[3].color}]);a.push("board_style",[!1,!1,!1,{color:b[4].color},{color:b[5].color},!1]);a.get("gradient")&&(c.isString(b[0].color)&&(b[0].color=a.T.avgLinearGradient(a.x,a.y+f,a.x+g,a.y+f,[c.dark(b[0].color,i/2+0.06),c.dark(b[0].color,i/2+0.06)])),c.isString(b[1].color)&&(b[1].color=a.T.avgLinearGradient(a.x+k,a.y-q,a.x+k,a.y+f-q,[c.dark(b[1].color,i),c.light(b[1].color,i)])),c.isString(b[2].color)&&(b[2].color=a.T.avgLinearGradient(a.x,a.y,a.x,a.y+f,[c.light(b[2].color,i/3),c.dark(b[2].color,i)])),a.get("bottom_style")[5].color=a.T.avgLinearGradient(a.x,a.y+f,a.x,a.y+f+a.get("pedestal_height"),[c.light(b[3].color,i/2+0.06),c.dark(b[3].color,i/2,0)]));a.push("wall_style",[b[0],b[1],b[2]])}});c.Custom=c.extend(c.Component,{configure:function(){c.Custom.superclass.configure.apply(this,arguments);this.type="custom";this.set({drawFn:c.emptyFn,eventValid:void 0,animating_draw:!0});this.registerEvent()},doDraw:function(a){a.get("drawFn").call(a,a)},isEventValid:function(a,b){return c.isFunction(this.get("eventValid"))?this.get("eventValid").call(this,a,b):{valid:!1}},doConfig:function(){c.Custom.superclass.doConfig.call(this);this.A_draw=this.get("animating_draw");this.variable.animation={animating:!1,time:0,duration:0}}});(function(a){function b(d){"string"===typeof d&&(d=a(d));if(!d||!d.tagName||"canvas"!=d.tagName.toLowerCase())throw Error("there not a canvas element");this.canvas=d;this.c=this.canvas.getContext("2d");this.width=this.canvas.width;this.height=this.canvas.height}var c=Math.PI,f=c/90,g=f/2,i=Math.ceil,k=Math.floor,q=2*c,v=Math.max,t=Math.min,s=Math.sin,w=Math.cos,n=function(a,b){return 1==a?k(b)+0.5:Math.round(b)},z=function(a,b,h,c){var r=b.x,j=b.y,e=a[h-1],f=a[h+1],g,l;if(h<a.length-1){var a=e.y,h=f.y,i;g=(c*r+e.x)/(c+1);l=(c*j+a)/(c+1);f=(c*r+f.x)/(c+1);c=(c*j+h)/(c+1);i=(c-l)*(f-r)/(f-g)+j-c;l+=i;c+=i;l>a&&l>j?(l=v(a,j),c=2*j-l):l<a&&l<j&&(l=t(a,j),c=2*j-l);c>h&&c>j?(c=v(h,j),l=2*j-c):c<h&&c<j&&(c=t(h,j),l=2*j-c);b.rcx=f;b.rcy=c}return[e.rcx||e.x,e.rcy||e.y,g||r,l||j,r,j]},u=function(d){return a.isNumber(d)?d:a.parseFloat(d,d)},y=function(d){var b,h=0,c,r=0;this.total=0;init=!1;d.each(function(d){h=d.value;if(a.isArray(h)){var e=0;r=h.length>r?h.length:r;for(var f=0;f<h.length;f++)h[f]=u(h[f]),e+=h[f],init||(b=c=h[f],init=!0),b=v(h[f],b),c=t(h[f],c);d.total=e}else h=u(h),d.value=h,this.total+=h,init||(b=c=h,init=!0),b=v(h,b),c=t(h,c)},this);this.get("minValue")&&(c=t(this.get("minValue"),c));this.get("maxValue")&&(b=v(this.get("maxValue"),b));a.isArray(this.get("labels"))&&(r=this.get("labels").length>r?this.get("labels").length:r);this.push("maxItemSize",r);this.push("minValue",c);this.push("maxValue",b)},x=function(a){var b=this._(),h,c,r,j,f,e=!1;b.labels=b.get("labels");f=b.labels.length;if(0==f){f=a[0].value.length;for(var g=0;g<f;g++)b.labels.push("")}b.columns=[];for(g=b.total=0;g<f;g++){for(var l=[],i=0;i<a.length;i++)if(j=a[i],r=j.value[g])r=u(r,r),j.value[g]=r,b.total+=r,e||(h=c=r,e=!0),h=v(r,h),c=t(r,c),l.push({name:j.name,value:j.value[g],color:j.color});b.columns.push({name:b.labels[g],item:l})}b.push("minValue",c);b.push("maxValue",h)};b.prototype={getContext:function(){return this.c},css:function(d,b){if(a.isDefined(b))this.canvas.style[d]=b;else return this.canvas.style[d]},ellipse:function(a,b,h,c,r,j,e,g,i,l,k,o,n,q){n=!!n;this.save().gCo(q).strokeStyle(g,i,l).shadowOn(k).fillStyle(e).moveTo(a,b).beginPath();for(n&&this.moveTo(a,b);r<=j;)this.lineTo(a+h*w(r),b+c*s(r)),r+=f;return this.lineTo(a+h*w(j),b+c*s(j)).closePath().stroke(g).fill(e).restore()},arc:function(a,b,h,c,r,j,f,e,g,l,i,o,k,n){if(!h)return this;o=!!o;k=!!k&&!c;this.save().gCo(n).strokeStyle(e,g,l).fillStyle(f).beginPath();c?(this.moveTo(a+w(r)*(h-c),b+s(r)*(h-c)).lineTo(a+w(r)*h,b+s(r)*h),this.c.arc(a,b,h,r,j,o),this.lineTo(a+w(j)*(h-c),b+s(j)*(h-c)),this.c.arc(a,b,h-c,j,r,!o)):this.c.arc(a,b,h,r,j,o);k&&this.lineTo(a,b);this.closePath();e?this.shadowOn(i).stroke(e).shadowOff().fill(f):this.shadowOn(i).fill(f);return this.restore()},sector:function(a,b,h,c,f,j,e,g,i,l,k,o){k&&this.arc(a,b,h,c,f,j,e,0,0,0,k,o,!0,!0);return this.arc(a,b,h,c,f,j,e,g,i,l,!1,o,!0)},sector3D:function(){var d=function(d,b,h,c,m,p,e,g,i){var e=function(a,m){this.lineTo(d+h*w(a),b+(m||0)+c*s(a))},k=m;for(this.fillStyle(a.dark(i)).moveTo(d+h*w(m),b+c*s(m)).beginPath();k<=p;)e.call(this,k),k+=f;e.call(this,p);this.lineTo(d+h*w(p),b+g+c*s(p));for(k=p;k>=m;)e.call(this,k,g),k-=f;e.call(this,m,g);this.lineTo(d+h*w(m),b+c*s(m)).closePath().fill(!0)},b=function(a,d,b,h,c,m,p,e){b=a+b*w(p);h=d+m+h*s(p);this.moveTo(a,d).beginPath().fillStyle(e).lineTo(a,d+m).lineTo(b,h).lineTo(b,h-m).lineTo(a,d).closePath().fill(!0)},h=function(d,h,c,p,e,f,g,i,k){var n=a.quadrantd(e),q=a.quadrantd(f),k=a.dark(k);(1==n||2==n)&&b.call(this,d,h,c,p,g,i,e,k);(0==q||3==q)&&b.call(this,d,h,c,p,g,i,f,k)},c=function(a,b,c,m,p,e,f,g,i,k,n,q,s){this.ellipse(a,b+f,c,m,p,e,g,i,k,n,q,s,!0);h.call(this,a,b,c,m,p,e,s,f,g);this.ellipse(a,b,c,m,p,e,g,i,k,n,!1,s,!0);d.call(this,a,b,c,m,p,e,s,f,g);return this};c.layerPaint=h;c.sPaint=d;c.layerDraw=b;return c}(),textStyle:function(a,b,h){return this.textAlign(a).textBaseline(b).textFont(h)},strokeStyle:function(a,b,h,c){if(a&&(b&&(this.c.lineWidth=b),h&&(this.c.strokeStyle=h),c))this.c.lineJoin=c;return this},globalAlpha:function(a){a&&(this.c.globalAlpha=a);return this},fillStyle:function(a){a&&(this.c.fillStyle=a);return this},arc2:function(a,b,h,c,e,f){h&&this.c.arc(a,b,h,c,e,f);return this},textAlign:function(a){a&&(this.c.textAlign=a);return this},textBaseline:function(a){a&&(this.c.textBaseline=a);return this},textFont:function(a){a&&(this.c.font=a);return this},shadowOn:function(a){a&&(this.c.shadowColor=a.color,this.c.shadowBlur=a.blur,this.c.shadowOffsetX=a.offsetx,this.c.shadowOffsetY=a.offsety);return this},shadowOff:function(){this.c.shadowColor="white";this.c.shadowBlur=this.c.shadowOffsetX=this.c.shadowOffsetY=0;return this},gradient:function(a,b,h,c,e,f){var f=f.toLowerCase(),g=a,i=b,k=!f.indexOf("linear"),f=f.substring(14);if(k){switch(f){case "updown":i+=c;break;case "downup":b+=c;break;case "leftright":g+=h;break;case "rightleft":a+=h;break;default:return e[0]}return this.avgLinearGradient(a,b,g,i,e)}a+=h/2;b+=c/2;"outin"==f&&e.reverse();return this.avgRadialGradient(a,b,0,a,b,0.8*(h>c?c:h),e)},avgLinearGradient:function(a,b,c,e,f){a=this.createLinearGradient(a,b,c,e);for(b=0;b<f.length;b++)a.addColorStop(b/(f.length-1),f[b]);return a},createLinearGradient:function(a,b,c,e){return this.c.createLinearGradient(a,b,c,e)},avgRadialGradient:function(a,b,c,e,f,j,g){a=this.createRadialGradient(a,b,c,e,f,j);for(b=0;b<g.length;b++)a.addColorStop(b/(g.length-1),g[b]);return a},createRadialGradient:function(a,b,c,e,f,j){return this.c.createRadialGradient(a,b,c,e,f,j)},text:function(a,b,c,e,f,j,g,i,k,l,n,o){return""==a?this:this.save().textStyle(j,g,i).fillText(a,b,c,e,f,k,l,n,o).restore()},fillText:function(a,b,c,e,f,j,i,k,n){a=a.toString();e=e||!1;i=i||16;a=a.split("tb"==(j||"lr")?"":"\n");1<a.length&&("middle"==this.c.textBaseline?c-=(a.length-1)*i/2:"bottom"==this.c.textBaseline&&(c-=(a.length-1)*i));this.save().fillStyle(f).translate(b,c).rotate(g*n).shadowOn(k);a.each(function(a,d){try{e?this.c.fillText(a,0,d*i,e):this.c.fillText(a,0,d*i)}catch(f){console.log(f.message+"["+a+","+b+","+c+"]")}},this);return this.restore()},measureText:function(a){var a=a.split("\n"),b=0;a.each(function(a){b=v(this.measureText(a).width,b)},this.c);return b},moveTo:function(a,b){this.c.moveTo(a||0,b||0);return this},lineTo:function(a,b){this.c.lineTo(a||0,b||0);return this},save:function(){this.c.save();return this},restore:function(){this.c.restore();return this},beginPath:function(){this.c.beginPath();return this},closePath:function(){this.c.closePath();return this},stroke:function(a){a&&this.c.stroke();return this},fill:function(a){a&&this.c.fill();return this},cube:function(d,b,c,e,f,j,g,i,k,l,q,o){d=n(l,d);b=n(l,b);g=g&&0<g?g:f;e=b-g*e;c=n(l,d+g*c);e=n(l,e);o&&(this.polygon(i,k,l,q,o,!1,[{x:d,y:b},{x:c,y:e},{x:c+f,y:e},{x:d+f,y:b}]),this.polygon(i,k,l,q,o,!1,[{x:d,y:b},{x:d,y:b+j},{x:d+f,y:b+j},{x:d+f,y:b}]),this.polygon(i,k,l,q,o,!1,[{x:d+f,y:b},{x:c+f,y:e},{x:c+f,y:e+j},{x:d+f,y:b+j}]));this.polygon(a.dark(i),k,l,q,!1,!1,[{x:d,y:b},{x:c,y:e},{x:c+f,y:e},{x:d+f,y:b}]);this.polygon(i,k,l,q,!1,!1,[{x:d,y:b},{x:d,y:b+j},{x:d+f,y:b+j},{x:d+f,y:b}]);this.polygon(a.dark(i),k,l,q,!1,!1,[{x:d+f,y:b},{x:c+f,y:e},{x:c+f,y:e+j},{x:d+f,y:b+j}]);return this},cube3D:function(d,b,c,e,f,j,g,i,k,l,q,o){d=n(l,d);b=n(l,b);i=!i||0==i?j:i;f?(e=a.vectorP2P(c,e),c=d+i*e.x,e=b-i*e.y):(c=d+i*c,e=b-i*e);for(;6>o.length;)o.push(!1);c=n(l,c);e=n(l,e);i=[];0>e?a.isObject(o[4])&&i.push(a.applyIf({points:[{x:d,y:b-g},{x:c,y:e-g},{x:c+j,y:e-g},{x:d+j,y:b-g}]},o[4])):a.isObject(o[0])&&i.push(a.applyIf({points:[{x:d,y:b},{x:c,y:e},{x:c+j,y:e},{x:d+j,y:b}]},o[0]));a.isObject(o[1])&&i.push(a.applyIf({points:[{x:c,y:e},{x:c,y:e-g},{x:c+j,y:e-g},{x:c+j,y:e}]},o[1]));a.isObject(o[2])&&i.push(a.applyIf({points:[{x:d,y:b},{x:d,y:b-g},{x:c,y:e-g},{x:c,y:e}]},o[2]));a.isObject(o[3])&&i.push(a.applyIf({points:[{x:d+j,y:b},{x:d+j,y:b-g},{x:c+j,y:e-g},{x:c+j,y:e}]},o[3]));0>e?a.isObject(o[0])&&i.push(a.applyIf({points:[{x:d,y:b},{x:c,y:e},{x:c+j,y:e},{x:d+j,y:b}]},o[0])):a.isObject(o[4])&&i.push(a.applyIf({points:[{x:d,y:b-g},{x:c,y:e-g},{x:c+j,y:e-g},{x:d+j,y:b-g}]},o[4]));a.isObject(o[5])&&i.push(a.applyIf({points:[{x:d,y:b},{x:d,y:b-g},{x:d+j,y:b-g},{x:d+j,y:b}]},o[5]));i.each(function(a){this.polygon(a.color,k,l,q,a.shadow,a.alpha,a.points)},this);return this},polygon:function(a,b,c,e,f,g,i,k,q,l){this.save().strokeStyle(b,c,e).beginPath().fillStyle(a).globalAlpha(g).shadowOn(f).moveTo(i[0].x,i[0].y);if(k){this.moveTo(n(c,l[0].x),n(c,l[0].y)).lineTo(n(c,i[0].x),n(c,i[0].y));for(e=1;e<i.length;e++)this.bezierCurveTo(z(i,i[e],e,q));this.lineTo(n(c,l[1].x),n(c,l[1].y))}else for(e=1;e<i.length;e++)this.lineTo(n(c,i[e].x),n(c,i[e].y));return this.closePath().stroke(b).fill(a).restore()},lines:function(a,b,c,e){this.save().gCo(e).beginPath().strokeStyle(!0,b,c).moveTo(n(b,a[0]),n(b,a[1]));for(c=2;c<a.length-1;c+=2)this.lineTo(n(b,a[c]),n(b,a[c+1]));return this.stroke(!0).restore()},bezierCurveTo:function(a){this.c.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5]);return this},label:function(a,b,c){return this.save().beginPath().strokeStyle(!0,b,c).moveTo(n(b,a[0].x),n(b,a[0].y)).bezierCurveTo([a[1].x,a[1].y,a[2].x,a[2].y,a[3].x,a[3].y]).stroke(!0).restore()},lineArray:function(a,b,c,e,f){this.save().beginPath().strokeStyle(!0,b,c).moveTo(n(b,a[0].x),n(b,a[0].y));for(c=1;c<a.length;c++)e?this.bezierCurveTo(z(a,a[c],c,f||1.5)):this.lineTo(n(b,a[c].x),n(b,a[c].y));return this.stroke(!0).restore()},manyLine:function(a,b,c,e,f){var g=[],i=!1,f=f||1.5;a.each(function(a){a.ignored&&i?(this.lineArray(g,b,c,e,f),g=[],i=!1):a.ignored||(g.push(a),i=!0)},this);g.length&&this.lineArray(g,b,c,e,f)},dotted:function(d,b,c,e,f,g,i,q,s){if(!f)return this;var d=n(f,d),b=n(f,b),c=n(f,c),e=n(f,e),l=a.distanceP2P(d,b,c,e),t;if(0>=i||l<=i||d!=c&&b!=e)return this.line(d,b,c,e,f,g,s);if(d>c||b>e)t=d,d=c,c=t,t=b,b=e,e=t;this.save().gCo(s).strokeStyle(!0,f,g).beginPath().moveTo(d,b);f=i*(q||1);g=k(l/(i+f));l=l-g*(i+f)>i;q=b==e;g=l?g+1:g;for(s=1;s<=g;s++)this.lineTo(q?d+i*s+f*(s-1):d,q?b:b+i*s+f*(s-1)).moveTo(q?d+(i+f)*s:d,q?b:b+(i+f)*s);l||this.lineTo(c,e);return this.stroke(!0).restore()},line:function(a,b,c,e,f,g,i){if(!f)return this;this.save().gCo(i);return this.beginPath().strokeStyle(!0,f,g).moveTo(n(f,a),n(f,b)).lineTo(n(f,c),n(f,e)).stroke(!0).restore()},round:function(a,b,c,e,f,g){return this.arc(a,b,c,0,0,q,e,!!g,f,g)},fillRect:function(a,b,c,e){this.c.fillRect(a,b,c,e);return this},translate:function(a,b){this.c.translate(a,b);return this},rotate:function(a){this.c.rotate(a);return this},clearRect:function(a,b,c,e){c=c||this.width;e=e||this.height;this.c.clearRect(a||0,b||0,c,e);return this},gCo:function(a){return a?this.gCO(a):this},gCO:function(a){this.c.globalCompositeOperation=a?"destination-over":"source-over";return this},box:function(b,f,h,g,r,j,s,t,v){r=r||{enable:0};if(r.enable){var l=r.width,u=r.color,o=r.radius,w=a.isNumber(l),l=a.parsePadding(l);l[0]==l[1]&&l[1]==l[2]&&l[2]==l[3]&&(w=!0);t=t?1:-1;h+=t*(l[1]+l[3])/2;g+=t*(l[0]+l[2])/2;b-=t*(l[3]/2);f-=t*(l[0]/2);l=w?l[0]:l;o=!w||!o||0==o||"0"==o?0:a.parsePadding(o)}this.save().gCo(v).fillStyle(j).strokeStyle(w,l,u);o?this.beginPath().moveTo(n(l,b+o[0]),n(l,f)).lineTo(n(l,b+h-o[1]),n(l,f)).arc2(n(l,b+h-o[1]),n(l,f+o[1]),o[1],3*c/2,q).lineTo(n(l,b+h),n(l,f+g-o[2])).arc2(n(l,b+h-o[2]),n(l,f+g-o[2]),o[2],0,c/2).lineTo(n(l,b+o[3]),n(l,f+g)).arc2(n(l,b+o[3]),n(l,f+g-o[3]),o[3],c/2,c).lineTo(n(l,b),n(l,f+o[0])).arc2(n(l,b+o[0]),n(l,f+o[0]),o[0],c,3*c/2).closePath().shadowOn(s).stroke(l).shadowOff().fill(j):!r.enable||w?(l&&r.enable&&(this.shadowOn(s).c.strokeRect(b,f,h,g),this.shadowOff()),j&&this.fillRect(b,f,h,g)):(l&&(u=a.isArray(u)?u:[u,u,u,u],this.shadowOn(s).line(b+h,f+l[0]/2,b+h,f+g-l[0]/2,l[1],u[1],0).line(b,f+l[0]/2,b,f+g-l[0]/2,l[3],u[3],0).line(k(b-l[3]/2),f,b+h+l[1]/2,f,l[0],u[0],0).line(k(b-l[3]/2),f+g,b+h+l[1]/2,f+g,l[2],u[2],0).shadowOff()),j&&this.beginPath().moveTo(k(b+l[3]/2),k(f+l[0]/2)).lineTo(i(b+h-l[1]/2),f+l[0]/2).lineTo(i(b+h-l[1]/2),i(f+g-l[2]/2)).lineTo(k(b+l[3]/2),i(f+g-l[2]/2)).lineTo(k(b+l[3]/2),k(f+l[0]/2)).closePath().fill(j));return this.restore()},toDataURL:function(a){return this.canvas.toDataURL(a||"image/png")},addEvent:function(b,c,e){a.Event.addEvent(this.canvas,b,c,e)}};a.taylor={light:function(a,b){b.highlight=!1;a.on("mouseover",function(){b.highlight=!0;a.redraw("mouseover")}).on("mouseout",function(){b.highlight=!1;a.redraw("mouseout")}).on("beforedraw",function(){a.push("f_color",b.highlight?a.get("light_color"):a.get("f_color_"));return!0})}};a.Chart=a.extend(a.Painter,{configure:function(){a.Chart.superclass.configure.apply(this,arguments);this.type="chart";this.dataType="simple";this.set({render:"",data:[],width:void 0,height:void 0,lineJoin:"round",align:"center",default_mouseover_css:!0,turn_off_touchmove:!1,showpercent:!1,decimalsnum:1,title:{text:"",fontweight:"bold",fontsize:20,height:30},subtitle:{text:"",fontweight:"bold",fontsize:16,height:20},footnote:{text:"",color:"#5d7f97",textAlign:"right",height:20},title_align:"center",title_valign:"top",animation:!1,doAnimation:null,animation_timing_function:"easeInOut",duration_animation_duration:1E3,z_index:999,legend:{enable:!1},tip:{enable:!1}});this.registerEvent("beforeAnimation","afterAnimation","animating");this.T=null;this.animationed=this.RENDERED=!1;this.data=[];this.plugins=[];this.oneways=[];this.total=0},toDataURL:function(a){return this.T.toDataURL(a)},segmentRect:function(){this.T.clearRect(this.get("l_originx"),this.get("t_originy"),this.get("client_width"),this.get("client_height"))},resetCanvas:function(){this.T.box(this.get("l_originx"),this.get("t_originy"),this.get("client_width"),this.get("client_height"),0,this.get("f_color"),0,0,!0)},animation:function(b){b.segmentRect();b.doAnimation(b.variable.animation.time,b.duration,b);b.legend&&b.legend.draw();b.plugins.each(function(a){a.A_draw&&(a.variable.animation.animating=!0,a.variable.animation.time=b.variable.animation.time,a.variable.animation.duration=b.duration,a.draw(),a.variable.animation.animating=!1)});b.resetCanvas();b.variable.animation.time<b.duration?(b.variable.animation.time++,a.requestAnimFrame(function(){b.animation(b)})):a.requestAnimFrame(function(){b.variable.animation.time=0;b.animationed=!0;b.draw();b.processAnimation=!1;b.fireEvent(b,"afterAnimation",[b])})},runAnimation:function(){this.fireEvent(this,"beforeAnimation",[this]);this.animation(this)},doSort:function(){this.components.sor(function(b,c){return(a.isArray(b)?b.zIndex||0:b.get("z_index"))>(a.isArray(c)?c.zIndex||0:c.get("z_index"))})},commonDraw:function(b,c){a.Assert.isTrue(b.RENDERED,b.type+" has not rendered.");a.Assert.isTrue(b.initialization,b.type+" has initialize failed.");a.Assert.gt(b.data.length,0,b.type+"'s data is empty.");b.redraw||(b.doSort(),b.oneways.eachAll(function(a){a.draw()}));b.redraw=!0;!b.animationed&&b.get("animation")?b.runAnimation():(b.segmentRect(),b.components.eachAll(function(a){a.draw(c)}),b.resetCanvas())},plugin:function(a){a.inject(this);this.components.push(a);this.plugins.push(a)},getTitle:function(){return this.title},getSubTitle:function(){return this.subtitle},getFootNote:function(){return this.footnote},getDrawingArea:function(){return{x:this.get("l_originx"),x:this.get("t_originy"),width:this.get("client_width"),height:this.get("client_height")}},setUp:function(){this.redraw=!1;this.T.clearRect();this.initialization=!1;this.initialize()},create:function(d,c){if(d.get("fit")){var e=window.innerWidth,f=window.innerHeight,g=a.getDoc().body.style;g.padding="0px";g.margin="0px";g.overflow="hidden";d.push(d.W,e);d.push(d.H,f)}d.width=d.pushIf(d.W,400);d.height=d.pushIf(d.H,300);d.canvasid=a.iGather(d.type);d.shellid="shell-"+d.canvasid;e=[];e.push("<div id='");e.push(d.shellid);e.push("' style='width:");e.push(d.width);e.push("px;height:");e.push(d.height);e.push("px;padding:0px;margin:0px;overflow:hidden;position:relative;'>");e.push("<canvas id= '");e.push(d.canvasid);e.push("'  width='");e.push(d.width);e.push("' height='");e.push(d.height);e.push("'><p>Your browser does not support the canvas element</p></canvas></div>");c.innerHTML=e.join("");d.shell=a(d.shellid);d.T=d.target=new b(d.canvasid);d.RENDERED=!0},initialize:function(){var b=this._(),c=b.get("data"),e=b.get("render");b.RENDERED||("string"==typeof e&&a(e)?b.create(b,a(e)):"object"==typeof e&&b.create(b,e));0<c.length&&b.RENDERED&&!b.initialization&&("simple"==b.dataType?y.call(b,c):"complex"==b.dataType&&x.call(b,c),b.data=c,b.doConfig(),b.initialization=!0)},eventOff:function(){this.stopEvent=!0},eventOn:function(){this.stopEvent=!1},oneWay:function(b){var c=b.variable.event,e=!b.get("turn_off_touchmove"),f=!a.touch&&b.get("default_mouseover_css"),g,i,k=a.touch?["touchstart","touchmove"]:["click","mousemove"];b.stopEvent=!1;k.each(function(c){b.T.addEvent(c,function(e){b.processAnimation||b.stopEvent||e.targetTouches&&1!=e.targetTouches.length||b.fireEvent(b,c,[b,a.Event.fix(e)])},!1)});b.on(k[0],function(a,b){a.components.eachAll(function(a){var d=a.isMouseOver(b);if(d.valid)return c.click=!0,a.fireEvent(a,"click",[a,b,d]),!b.stopPropagation});c.click&&(e&&b.event.preventDefault(),c.click=!1)});if(!a.touch||e)b.on(k[1],function(a,b){g=i=!1;a.components.eachAll(function(d){var e=d.variable.event,h=d.isMouseOver(b);if(h.valid){if(g=!0,i=i||d.atomic,c.mouseover||(c.mouseover=!0,a.fireEvent(a,"mouseover",[d,b,h])),f&&i&&a.T.css("cursor","pointer"),e.mouseover||(e.mouseover=!0,d.fireEvent(d,"mouseover",[d,b,h])),d.fireEvent(d,"mousemove",[d,b,h]),h.stop)return!1}else e.mouseover&&(e.mouseover=!1,d.fireEvent(d,"mouseout",[d,b,h]));return!b.stopPropagation});c.mouseover&&(b.event.preventDefault(),f&&!i&&a.T.css("cursor","default"),!g&&c.mouseover&&(c.mouseover=!1,a.fireEvent(a,"mouseout",[a,b])))});b.oneWay=a.emptyFn},getPercent:function(b){return this.get("showpercent")?a.toPercent(b/this.total,this.get("decimalsnum")):b},doActing:function(b,c,e,f,g){f=!!b.get("communal_acting");b.push(f?"sub_option":"communal_acting",a.clone(b.get(f?"communal_acting":"sub_option"),!0));a.merge(b.get("sub_option"),c);a.merge(b.get("sub_option"),e);b.pushIf("sub_option.background_color",c.color);b.get("sub_option.tip.enable")&&(b.push("sub_option.tip.text",g||c.name+" "+b.getPercent(c.value)),b.push("sub_option.tip.name",c.name),b.push("sub_option.tip.value",c.value),b.push("sub_option.tip.total",b.total))},doConfig:function(){a.Chart.superclass.doConfig.call(this);var b=this._();a.Assert.isArray(b.data);b.T.strokeStyle(!0,0,b.get("strokeStyle"),b.get("lineJoin"));b.processAnimation=b.get("animation");b.push("communal_acting",0);b.duration=i(b.get("duration_animation_duration")*a.FRAME/1E3);a.isFunction(b.get("doAnimation"))&&(b.doAnimation=b.get("doAnimation"));b.variable.animation={type:0,time:0,queue:[]};b.components=[];b.oneways=[];b.oneways.push(new a.Custom({drawFn:function(){b.T.box(0,0,b.width,b.height,b.get("border"),b.get("f_color"),0,0,true)}}));b.plugins.each(function(a){b.components.push(a)});b.applyGradient();b.animationArithmetic=a.getAA(b.get("animation_timing_function"));b.oneWay(b);b.push("r_originx",b.width-b.get("padding_right"));b.push("b_originy",b.height-b.get("padding_bottom"));var c=0,e=b.push("l_originx",b.get("padding_left")),f=b.push("t_originy",b.get("padding_top")),g=b.push("client_width",b.get(b.W)-b.get("hpadding"));a.isString(b.get("title"))&&b.push("title",a.applyIf({text:b.get("title")},b.default_.title));a.isString(b.get("subtitle"))&&b.push("subtitle",a.applyIf({text:b.get("subtitle")},b.default_.subtitle));a.isString(b.get("footnote"))&&b.push("footnote",a.applyIf({text:b.get("footnote")},b.default_.footnote));if(""!=b.get("title.text")){var j=""!=b.get("subtitle.text"),c=j?b.get("title.height")+b.get("subtitle.height"):b.get("title.height"),f=b.push("t_originy",f+c);b.push("title.originx",e);b.push("title.originy",b.get("padding_top"));b.push("title.width",g);b.title=new a.Text(b.get("title"),b);b.oneways.push(b.title);j&&(b.push("subtitle.originx",e),b.push("subtitle.originy",b.get("title.originy")+b.get("title.height")),b.push("subtitle.width",g),b.subtitle=new a.Text(b.get("subtitle"),b),b.oneways.push(b.subtitle))}""!=b.get("footnote.text")&&(j=b.get("footnote.height"),c+=j,b.push("b_originy",b.get("b_originy")-j),b.push("footnote.originx",e),b.push("footnote.originy",b.get("b_originy")),b.push("footnote.width",g),b.footnote=new a.Text(b.get("footnote"),b),b.oneways.push(b.footnote));c=b.push("client_height",b.get(b.H)-b.get("vpadding")-c);b.push("minDistance",t(g,c));b.push("maxDistance",v(g,c));b.push("minstr",g<c?b.W:b.H);b.push("centerx",e+g/2);b.push("centery",f+c/2);a.applyIf(b.get("sub_option"),a.clone("shadow,shadow_color,shadow_blur,shadow_offsetx,shadow_offsety,tip".split(","),b.options,!0));b.get("legend.enable")&&(b.legend=new a.Legend(a.apply({maxwidth:g,data:b.data},b.get("legend")),b),b.components.push(b.legend));b.push("sub_option.tip.wrap",b.push("tip.wrap",b.shell))}})})(c);c.Legend=c.extend(c.Component,{configure:function(){c.Legend.superclass.configure.apply(this,arguments);this.type="legend";this.set({data:void 0,width:"auto",column:1,row:"max",maxwidth:0,line_height:16,sign:"square",sign_size:12,sign_space:5,legend_space:5,z_index:1009,text_with_sign_color:!1,align:"right",valign:"middle"});this.atomic=!0;this.registerEvent("parse")},isEventValid:function(a,b){var c={valid:!1};a.x>this.x&&a.x<b.x+b.width&&a.y>b.y&&a.y<b.y+b.height&&b.data.each(function(f,g){if(a.x>f.x&&a.x<f.x+f.width_+b.get("signwidth")&&a.y>f.y&&a.y<f.y+b.get("line_height"))return c={valid:!0,index:g,target:f},!1},b);return c},drawCell:function(a,b,c,f,g,i){var k=i.get("sign_size"),q=i.getPlugin("sign");if(!q||!q.call(i,i.T,g,a+k/2,b,k,f))-1!=g.indexOf("bar")&&i.T.box(a,b-k/12,k,k/6,0,f),"round"==g?i.T.round(a+k/2,b,k/2,f):"round-bar"==g?i.T.round(a+k/2,b,k/4,f):"square-bar"==g?i.T.box(a+k/4,b-k/4,k/2,k/2,0,f):"square"==g&&i.T.box(a,b-k/2,k,k,0,f);i.T.fillText(c,a+i.get("signwidth"),b,0,i.get("text_with_sign_color")?f:i.get("color"),"lr",i.get("line_height"))},doDraw:function(a){a.T.box(a.x,a.y,a.width,a.height,a.get("border"),a.get("f_color"),!1,a.get("shadow"));a.T.textStyle(a.L,"middle",c.getFont(a.get("fontweight"),a.get("fontsize"),a.get("font")));a.data.each(function(b){a.drawCell(b.x,b.y,b.text,b.color,b.sign,a)})},doLayout:function(a,b){var e=a.get("sign_size"),f=0,g=0,i=0,k=a.get("column"),q=a.get("row"),v=a.data.length;a.T.textFont(a.get("fontStyle"));a.get("line_height")<e&&a.push("line_height",e+e/5);a.push("signwidth",e+a.get("sign_space"));a.data.each(function(b){b.width_=a.T.measureText(b.text)},a);for(var t=0;t<k;t++){for(var i=0,s=t;s<v;s+=k)i=Math.max(i,a.data[s].width_);a.columnwidth[t]=i;f+=i}for(t=0;t<q;t++){i=0;for(s=t*k;s<v;s++)i=Math.max(i,a.data[s].text.split("\n").length);a.columnheight[t]=i;g+=i}f=a.push(a.W,f+a.get("hpadding")+a.get("signwidth")*k+(k-1)*a.get("legend_space"));if(f>a.get("maxwidth"))k=a.get("maxwidth")/f,q=c.lowTo,v=Math.floor,a.push("fontsize",q(6,v(a.get("fontsize")*k))),a.push("sign_size",q(6,v(e*k))),a.push("sign_space",q(4,v(a.get("sign_space")*k))),a.push("legend_space",q(4,v(a.get("legend_space")*k))),a.push("fontStyle",c.getFont(a.get("fontweight"),a.get("fontsize"),a.get("font"))),a.doLayout(a,b);else{var w;a.width=f;a.height=g=a.push(a.H,g*a.get("line_height")+a.get("vpadding"));a.y=a.get("valign")==a.O?b.get("t_originy"):a.get("valign")==a.B?b.get("b_originy")-g:b.get("centery")-g/2;a.x=a.get("align")==a.L?b.get("l_originx"):a.get("align")==a.C?b.get("centerx")-f/2:b.get("r_originx")-f;a.x=a.push(a.X,a.x+a.get("offsetx"));a.y=a.push(a.Y,a.y+a.get("offsety"));i=a.y+a.get("padding_top");e=a.get("legend_space")+a.get("signwidth");for(t=0;t<q;t++){g=a.x+a.get("padding_left");w=a.columnheight[t]/2*a.get("line_height");i+=w;for(s=0;s<k&&t*k+s<v;s++)f=a.data[t*k+s],f.y=i,f.x=g,g+=a.columnwidth[s]+e;i+=w}}},doConfig:function(){c.Legend.superclass.doConfig.call(this);var a=this._(),b=a.container,e=c.isNumber(a.get("column")),f=c.isNumber(a.get("row")),g=a.data.length;a.get("align")==a.C&&"middle"==a.get("valign")&&a.push("valign",a.O);b.get("align")==a.L&&"middle"==a.get("valign")&&a.push("align",a.R);a.data.each(function(b,e){c.merge(b,a.fireEvent(a,"parse",[a,b.name,e]));b.text=b.text||b.name;b.sign=b.sign||a.get("sign")},a);!e&&!f&&(e=a.push("column",1));e&&!f&&(f=a.push("row",Math.ceil(g/a.get("column"))));!e&&f&&(e=a.push("column",Math.ceil(g/a.get("row"))));e=a.get("column");f=a.get("row");g>f*e&&(f+=Math.ceil((g-f*e)/e),f=a.push("row",f));a.columnwidth=Array(e);a.columnheight=Array(f);a.doLayout(a,b)}});c.CrossHair=c.extend(c.Html,{configure:function(){c.CrossHair.superclass.configure.apply(this,arguments);this.type="crosshair";this.set({top:0,left:0,hcross:!0,vcross:!0,invokeOffset:null,line_width:1,line_color:"#1A1A1A",delay:200})},follow:function(a,b){if(this.get("invokeOffset")){var c=this.get("invokeOffset")(a,b);c&&c.hit&&this.position(c.top-this.top,c.left-this.left);return!1}this.position(a.y-this.top-1,a.x-this.left-1);return!0},position:function(a,b){this.horizontal.style.top=a-this.size+"px";this.vertical.style.left=b-this.size+"px"},beforeshow:function(a,b){this.follow(a,b)||this.position(-99,-99)},doCreate:function(a,b,e){var f=document.createElement("div");f.style.width=c.toPixel(b);f.style.height=c.toPixel(e);f.style.backgroundColor=a.get("line_color");f.style.position="absolute";a.dom.appendChild(f);return f},initialize:function(){c.CrossHair.superclass.initialize.call(this);var a=this._(),b=c.toPixel(a.get("line_width"));a.top=c.fixPixel(a.get(a.O));a.left=c.fixPixel(a.get(a.L));a.dom=document.createElement("div");a.dom.style.zIndex=a.get("index");a.dom.style.position="absolute";a.dom.style.width=c.toPixel(0);a.dom.style.height=c.toPixel(0);a.dom.style.top=c.toPixel(a.get(a.O));a.dom.style.left=c.toPixel(a.get(a.L));a.css("visibility","hidden");a.horizontal=a.doCreate(a,a.get("hcross")?c.toPixel(a.get(a.W)):"0px",b);a.vertical=a.doCreate(a,b,a.get("vcross")?c.toPixel(a.get(a.H)):"0px");a.size=a.get("line_width")/2;a.get("shadow")&&(a.dom.style.boxShadow=a.get("shadowStyle"));a.wrap.appendChild(a.dom);a.T.on("mouseover",function(b,c,g){a.show(c,g)}).on("mouseout",function(b,c,g){a.hidden(c,g)}).on("mousemove",function(b,c,g){a.follow(c,g)})}});c.Tip=c.extend(c.Html,{configure:function(){c.Tip.superclass.configure.apply(this,arguments);this.type="tip";this.set({name:"",value:"",text:"",showType:"follow",invokeOffset:null,fade_duration:300,move_duration:100,timing_function:"ease-out",invokeOffsetDynamic:!1,style:"textAlign:left;padding:4px 5px;cursor:pointer;backgroundColor:rgba(239,239,239,.85);fontSize:12px;color:black;",border:{enable:!0,radius:5},delay:200});this.registerEvent("parseText")},position:function(a,b){this.style.top=(0>a?0:a)+"px";this.style.left=(0>b?0:b)+"px"},follow:function(a,b){var e=this._();e.style.width="";if(e.get("invokeOffsetDynamic")){if(b.hit){(c.isString(b.text)||c.isNumber(b.text))&&e.text(b.name,b.value,b.text,b.i,e);var f=e.get("invokeOffset")(e.width(),e.height(),b);e.position(f.top,f.left)}}else"follow"!=e.get("showType")&&c.isFunction(e.get("invokeOffset"))?(f=e.get("invokeOffset")(e.width(),e.height(),b),e.position(f.top,f.left)):e.position(a.y-1.1*e.height()-2,a.x+2)},text:function(a,b,c,f,g){g.dom.innerHTML=g.fireString(g,"parseText",[g,a,b,c,f],c)},beforeshow:function(a,b){this.follow(a,b)},hidden:function(){this.get("animation")?this.css("opacity",0):this.css("visibility","hidden")},initialize:function(){c.Tip.superclass.initialize.call(this);var a=this._();a.css("position","absolute");a.text(a.get("name"),a.get("value"),a.get("text"),0,a);a.style=a.dom.style;a.hidden();if(a.get("animation")){var b=a.get("move_duration")/1E3+"s "+a.get("timing_function")+" 0s";a.transition("opacity "+a.get("fade_duration")/1E3+"s "+a.get("timing_function")+" 0s");a.transition("top "+b);a.transition("left "+b);a.onTransitionEnd(function(){0==a.css("opacity")&&a.css("visibility","hidden")},!1)}a.wrap.appendChild(a.dom);a.T.on("mouseover",function(b,c,g){a.show(c,g)}).on("mouseout",function(b,c){a.hidden(c)});if("follow"==a.get("showType"))a.T.on("mousemove",function(b,c,g){a.T.variable.event.mouseover&&setTimeout(function(){a.T.variable.event.mouseover&&a.follow(c,g)},a.get("delay"))})}});c.Text=c.extend(c.Component,{configure:function(){c.Text.superclass.configure.apply(this,arguments);this.type="text";this.set({text:"",textAlign:"center",background_color:0,textBaseline:"top",border:{enable:!1},width:0,height:0,padding:0,writingmode:"lr",line_height:16,rotate:0});this.registerEvent()},doDraw:function(a){a.get("box_feature")&&a.T.box(a.x,a.y,a.get(a.W),a.get(a.H),a.get("border"),a.get("f_color"));""!=a.get("text")&&a.T.text(a.get("text"),a.get("textx"),a.get("texty"),a.get(a.W),a.get("color"),a.get("textAlign"),a.get("textBaseline"),a.get("fontStyle"),a.get("writingmode"),a.get("line_height"),a.get("shadow"),a.get("rotate"))},isEventValid:function(){return{valid:!1}},doLayout:function(a,b,c,f){f.x=f.push(f.X,f.x+a);f.y=f.push(f.Y,f.y+b);f.push("textx",f.get("textx")+a);f.push("texty",f.get("texty")+b)},doConfig:function(){c.Text.superclass.doConfig.call(this);var a=this._(),b=a.x,e=a.y+a.get("padding_top"),f=a.get(a.W),g=a.get(a.H),i=a.get("textAlign"),b=b+(i==a.C?f/2:i==a.R?f-a.get("padding_right"):a.get("padding_left"));g&&(e+=g/2,a.push("textBaseline","middle"));a.push("textx",b);a.push("texty",e);a.push("box_feature",f&&g);a.applyGradient()}})})(iChart);