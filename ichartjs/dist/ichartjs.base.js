(function(c){var a=navigator.userAgent.toLowerCase(),b=Object.prototype.toString,e=/opera/.test(a),h=/\bchrome\b/.test(a),f=/webkit/.test(a),i=!h&&/safari/.test(a),l=!e&&/msie/.test(a),p=!!document.createElement("canvas").getContext,t=!f&&/gecko/.test(a),s=/ipod|ipad|iphone|android/gi.test(a),r=function(a,b,e,c){return e*a/c+b},x={easeIn:function(a,b,e,c){return e*(a/=c)*a*a+b},easeOut:function(a,b,e,c){return e*((a=a/c-1)*a*a+1)+b},easeInOut:function(a,b,e,c){return 1>(a/=c/2)?e/2*a*a*a+b:e/2*((a-=2)*a*a+2)+b}},n=function(a){var c=!1,A=!1,z=[],d=function(){if(document.addEventListener)return function(){document.removeEventListener("DOMContentLoaded",d,!1);g()};if(document.attachEvent)return function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",d),g())}}(),m=function(){if(!c){try{document.documentElement.doScroll("left")}catch(a){setTimeout(m,1);return}g()}},g=function(){if(!c){c=!0;for(var a=0;a<z.length;a++)z[a].call(document);z=[]}},o=function(){if(!A){A=!0;if("complete"===document.readyState)return setTimeout(g,1);if(document.addEventListener)document.addEventListener("DOMContentLoaded",d,!1),a.addEventListener("load",g,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",d);a.attachEvent("onload",g);var J=!1;try{J=null==a.frameElement}catch(b){}document.documentElement.doScroll&&J&&m()}}},y=function(a){o();c?a.call(document,j):z.push(function(){return a.call(this)})},j=function(a){if(!a||a.nodeType)return a;if("string"===typeof a)return-1!=a.indexOf("#")&&(a=a.substring(1)),document.getElementById(a);"function"===typeof a&&y(a)};j.apply=function(a,d){if(a&&d&&"object"==typeof d)for(var b in d)"undefined"!=typeof d[b]&&(a[b]=d[b]);if(!d&&a){var m={};for(b in a)m[b]=a[b];return m}return a};j.apply(j,{version:"1.0",email:"taylor@ichartjs.com",isEmpty:function(a,d){return null===a||void 0===a||j.isArray(a)&&!a.length||(!d?""===a:!1)},isArray:function(a){return"[object Array]"===b.apply(a)},isDate:function(a){return"[object Date]"===b.apply(a)},isObject:function(a){return!!a&&"[object Object]"===b.apply(a)},isFunction:function(a){return"[object Function]"===b.apply(a)},isNumber:function(a){return"number"===typeof a&&isFinite(a)},isString:function(a){return"string"===typeof a},isBoolean:function(a){return"boolean"===typeof a},isFalse:function(a){return"boolean"===typeof a&&!a},isElement:function(a){return a?!!a.tagName:!1},isDefined:function(a){return"undefined"!==typeof a}});j.applyIf=function(a,d){if(a&&j.isObject(d))for(var b in d)j.isDefined(d[b])&&!j.isDefined(a[b])&&(a[b]=d[b]);return!d&&a?j.apply(a):a};j.merge=function(a,d,b){if(a&&j.isObject(d)){for(var m in d)j.isDefined(d[m])&&(j.isObject(d[m])?j.isObject(a[m])?j.merge(a[m],d[m]):a[m]=j.clone(d[m],!0):a[m]=d[m]);if(j.isObject(b))return j.merge(a,b)}return a};j.clone=function(a,d,b){var m={};if(j.isArray(a)&&j.isObject(d))for(var g=0;g<a.length;g++)m[a[g]]=b&&j.isObject(d[a[g]])?j.clone(d[a[g]],b):d[a[g]];else if(j.isObject(a))for(g in a)m[g]=d&&j.isObject(a[g])&&!(a[g]instanceof j.Painter)?j.clone(a[g],d):a[g];return m};j.override=function(a,d){if(a&&d){var b=a.prototype;j.apply(b,d);j.isIE&&d.hasOwnProperty("toString")&&(b.toString=d.toString)}};j.extend=function(){var a=function(a){for(var d in a)this[d]=a[d]},d=Object.prototype.constructor;return function(b,m){var g=function(){b.apply(this,arguments)},o=function(){},y=b.prototype;o.prototype=y;o=g.prototype=new o;o.constructor=g;g.superclass=y;y.constructor==d&&(y.constructor=b);g.override=function(a){j.override(g,a)};o.superclass=o.supr=function(){return y};o.override=a;j.override(g,m);g.extend=function(a){return j.extend(g,a)};g.plugin_={};g.plugin=function(a,d){j.isString(a)&&j.isFunction(d)&&(g.plugin_[a]=d)};return g}}();var D=Math.sin,K=Math.cos,E=Math.atan,k=Math.sqrt,v=Math.abs,q=Math.PI,F=2*q,L=Math.ceil,G=Math.round,H=Math.floor,M=Math.max,N=Math.min,C=parseFloat,O=function(a,d){if(0==a)return a;var b=v(a),m=0.1;if(1<b){for(;1<b;)b/=10,m*=10;return H(a/m+d)*m}for(m=1;1>b;)b*=10,m/=10;return G(a/m+d)*m},P={navy:"rgb(0,0,128)",olive:"rgb(128,128,0)",orange:"rgb(255,165,0)",silver:"rgb(192,192,192)",white:"rgb(255,255,255)",gold:"rgb(255,215,0)",lime:"rgb(0,255,0)",fuchsia:"rgb(255,0,255)",aqua:"rgb(0,255,255)",green:"rgb(0,128,0)",gray:"rgb(80,80,80)",red:"rgb(255,0,0)",blue:"rgb(0,0,255)",pink:"rgb(255,192,203)",purple:"rgb(128,0,128)",yellow:"rgb(255,255,0)",maroon:"rgb(128,0,0)",black:"rgb(0,0,0)",azure:"rgb(240,255,255)",beige:"rgb(245,245,220)",brown:"rgb(165,42,42)",cyan:"rgb(0,255,255)",darkblue:"rgb(0,0,139)",darkcyan:"rgb(0,139,139)",darkgrey:"rgb(169,169,169)",darkgreen:"rgb(0,100,0)",darkkhaki:"rgb(189,183,107)",darkmagenta:"rgb(139,0,139)",darkolivegreen:"rgb(85,107,47)",darkorange:"rgb(255,140,0)",darkorchid:"rgb(153,50,204)",darkred:"rgb(139,0,0)",darksalmon:"rgb(233,150,122)",darkviolet:"rgb(148,0,211)",indigo:"rgb(75,0,130)",khaki:"rgb(240,230,140)",lightblue:"rgb(173,216,230)",lightcyan:"rgb(224,255,255)",lightgreen:"rgb(144,238,144)",lightgrey:"rgb(211,211,211)",lightpink:"rgb(255,182,193)",lightyellow:"rgb(255,255,224)",magenta:"rgb(255,0,255)",violet:"rgb(128,0,128)"},Q=function(a){var d=/rgb\((\w*),(\w*),(\w*)\)/.exec(a);if(d)return[d[1],d[2],d[3]];if(d=/rgba\((\w*),(\w*),(\w*),(.*)\)/.exec(a))return[d[1],d[2],d[3],d[4]];throw Error("invalid colors value '"+a+"'");},I=function(a){if(!a)return a;a=a.replace(/\s/g,"").toLowerCase();if(/^rgb\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3}\)$/.exec(a)||/^rgba\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3},(0(\.[0-9])?|1(\.0)?)\)$/.exec(a))return a;if(/^#(([a-fA-F0-9]{6,7})|([a-fA-F0-9]{3}))$/.exec(a))return a=a.replace(/#/g,"").replace(/^(\w)(\w)(\w)$/,"$1$1$2$2$3$3"),(7==a.length?"rgba(":"rgb(")+parseInt(a.substring(0,2),16)+","+parseInt(a.substring(2,4),16)+","+parseInt(a.substring(4,6),16)+(7==a.length?",0."+a.substring(6,7)+")":")");if(P[a])return P[a];throw Error("invalid colors value '"+a+"'");},R=function(a,d){d=d||0.14;return 0.5<a?d-(1-a)/10:0.1<a?d-0.16+a/5:a>d?d:a/2},S=function(a,d,b,m){if(!d)return d;var d=Q(I(d)),g;g=d;var o=void 0,y=void 0;j.isArray(g)&&(o=g[1],y=g[2],g=g[0]);g/=255;var o=o/255,y=y/255,e=M(M(g,o),y),c=N(N(g,o),y),c=e-c;if(0==c)g=[0,0,e];else{var k;g==e?k=(o-y)/c:o==e?k=(y-g)/c+2:y==e&&(k=(g-o)/c+4);k*=60;0>k&&(k+=360);g=[k,c/e,e]}g[1]-=0!=m?m||0.05:m;a?(g[2]-=R(g[2],b),g[1]=j.upTo(g[1],1),g[2]=j.lowTo(g[2],0)):(g[2]+=R(1-g[2],b),g[1]=j.lowTo(g[1],0),g[2]=j.upTo(g[2],1));m=d[3];a=d=void 0;j.isArray(g)&&(a=m,m=g[1],d=g[2],g=g[0]);var h,D,f,b=H(g/60)%6,y=g/60-b;g=d*(1-m);o=d*(1-m*y);m=d*(1-m*(1-y));switch(b){case 0:h=d;D=m;f=g;break;case 1:h=o;D=d;f=g;break;case 2:h=g;D=d;f=m;break;case 3:h=g;D=o;f=d;break;case 4:h=m;D=g;f=d;break;case 5:h=d,D=g,f=o}return"rgb"+(a?"a":"")+"("+G(255*h)+","+G(255*D)+","+G(255*f)+(a?","+a+")":")")};j.apply(j,{getFont:function(a,d,b){return a+" "+d+"px "+b},getDoc:function(){return a.contentWindow?a.contentWindow.document:a.contentDocument?a.contentDocument:a.document},DefineAbstract:function(a,d){if(!d[a])throw Error("Cannot instantiate the type '"+d.type+"'.you must implements it with method '"+a+"'.");},getAA:function(a){return"linear"==a?r:"easeInOut"==a||"easeIn"==a||"easeOut"==a?x[a]:r},noConflict:function(){return n},plugin:function(a,d,b){j.isFunction(a)&&a.plugin(d,b)},parsePadding:function(a,d){a=a||0;if(j.isNumber(a))return[a,a,a,a];if(j.isArray(a))return a;d=d||0;a=a.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g,/\s/).replace(/\s/g,",").split(",");1==a.length?a[0]=a[1]=a[2]=a[3]=C(a[0])||d:2==a.length?(a[0]=a[2]=C(a[0])||d,a[1]=a[3]=C(a[1])||d):3==a.length?(a[0]=C(a[0])||d,a[1]=a[3]=C(a[1])||d,a[2]=C(a[2])||d):(a[0]=C(a[0])||d,a[1]=C(a[1])||d,a[2]=C(a[2])||d,a[3]=C(a[3])||d);return a},distanceP2P:function(a,d,b,m){return k((b-a)*(b-a)+(m-d)*(m-d))},atan2Radian:function(a,d,b,m){if(a==b)return m>d?q/2:3*q/2;if(d==m)return b>a?0:q;var g=j.quadrant(a,d,b,m),a=E(v((d-m)/(a-b)));return g?(3==g?F:q)+(2==g?a:-a):a},angle2Radian:function(a){return a*q/180},radian2Angle:function(a){return 180*a/q},quadrant:function(a,d,b,m){return a<b?d<m?0:3:d<m?1:2},toPI2:function(a){for(;0>a;)a+=F;return a%F},quadrantd:function(a){if(0==a)return 0;if(0==a%F)return 3;for(;0>a;)a+=F;return L(2*(a%F)/q)-1},upTo:function(a,d){return d>a?a:d},lowTo:function(a,d){return d<a?a:d},between:function(a,d,b){return b>d?d:b<a?a:b},inRange:function(a,d,b){return d>b&&a<b},angleInRange:function(a,d,b){b-=a;b=0>b?b+F:b;b%=F;return d-a>b},angleZInRange:function(a,d,b){return d>a?d>b&&a<b:b>a||b<d},inRangeClosed:function(a,d,b){return d>=b&&a<=b},inEllipse:function(a,d,b,m){return 1>=a*a/b/b+d*d/m/m},p2Point:function(a,d,b,m){return{x:a+K(b)*m,y:d+D(b)*m}},toRgb:I,toRgba:function(a,d){var b=Q(I(a));return"rgba("+b[0]+","+b[1]+","+b[2]+","+d+")"},vectorP2P:function(a,d,b){b||(d=j.angle2Radian(d),a=j.angle2Radian(a));d=D(d);return{x:d*D(a),y:d*K(a)}},iGather:function(a){return(a||"ichartjs")+"-"+L(1E4*Math.random())+(new Date).getTime().toString().substring(4)},toPercent:function(a,d){return(100*a).toFixed(d)+"%"},parsePercent:function(a,d){return j.isString(a)&&(a=a.match(/(.*)%/))?d?H(C(a[1])*d/100):a[1]/100:a},parseFloat:function(a,d){if(!j.isNumber(a)&&(a=C(a),!j.isNumber(a)))throw Error("["+d+"]="+a+"is not a valid number.");return a},ceil:function(a){return O(a,1)},floor:function(a){return O(a,-1)},_2D:"2d",_3D:"3d",light:function(a,d,b){return S(!1,a,d,b)},dark:function(a,d,b){return S(!0,a,d,b)},fixPixel:function(a){return j.isNumber(a)?a:C(a.replace("px",""))||0},toPixel:function(a){return j.isNumber(a)?a+"px":j.fixPixel(a)+"px"},emptyFn:function(){return!0},supportCanvas:p,isOpera:e,isWebKit:f,isChrome:h,isSafari:i,isIE:l,isGecko:t,isMobile:s,touch:"ontouchend"in document,FRAME:s?30:60});j.Assert={gt:function(a,d,b){if(!j.isNumber(a)&&a>=d)throw Error(b+" required Number gt "+d+",given:"+a);},isNumber:function(a,d){if(!j.isNumber(a))throw Error(d+" required Number,given:"+a);},isArray:function(a,d){if(!j.isArray(a))throw Error(d+" required Array,given:"+a);},isTrue:function(a,d){if(!0!==a)throw Error(d);}};j.requestAnimFrame=function(){var d=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(d){a.setTimeout(d,1E3/60)};return function(a){d(a)}}();j.Event={addEvent:function(a,d,b,m){a.addEventListener?a.addEventListener(d,b,m):a.attachEvent?a.attachEvent("on"+d,b):a["on"+d]=b},fix:function(d){"undefined"==typeof d&&(d=a.event);var b={target:d.target,pageX:d.pageX,pageY:d.pageY,offsetX:d.offsetX,offsetY:d.offsetY,stopPropagation:!1,event:d};if("undefined"==typeof d.offsetX){d.target||(b.target=d.srcElement||document);d.targetTouches&&(b.pageX=d.targetTouches[0].pageX,b.pageY=d.targetTouches[0].pageY);if(null==b.pageX&&null!=d.clientX){var m=document.documentElement,g=document.body;b.pageX=d.clientX+(m&&m.scrollLeft||g&&g.scrollLeft||0)-(m&&m.clientLeft||g&&g.clientLeft||0);b.pageY=d.clientY+(m&&m.scrollTop||g&&g.scrollTop||0)-(m&&m.clientTop||g&&g.clientTop||0)}for(var g=m=0,o=d.target;o!=document.body&&o;)m+=o.offsetLeft,g+=o.offsetTop,o=o.offsetParent;b.offsetX=b.pageX-m;b.offsetY=b.pageY-g}b.x=b.offsetX;b.y=b.offsetY;d.stopPropagation||(d.stopPropagation=function(){a.event.cancelBubble=true});return b}};return j}(c);Array.prototype.each=function(a,b){for(var e=this.length,c,d=0;d<e&&!(c=b?a.call(b,this[d],d):a(this[d],d),"boolean"===typeof c&&!c);d++);return this};Array.prototype.eachAll=function(a,b){this.each(function(e,c){return n.isArray(e)?e.eachAll(a,b):b?a.call(b,e,c):a(e,c)},b)};Array.prototype.sor=function(a){for(var b=this.length-1,e,c=0;c<b;c++)for(var d=b;d>c;d--)if(a?!a(this[d],this[d-1]):this[d]<this[d-1])e=this[d],this[d]=this[d-1],this[d-1]=e};c.iChart=n;c.$||(c.$=c.iChart)})(window);(function(c){c.Element=function(a){var b=this._();b.type="element";c.DefineAbstract("configure",b);c.DefineAbstract("afterConfiguration",b);b.options={};b.set({id:"",border:{enable:!1,color:"#BCBCBC",style:"solid",width:1,radius:0},shadow:!1,shadow_color:"#666666",shadow_blur:4,shadow_offsetx:0,shadow_offsety:0});b.W="width";b.H="height";b.O="top";b.B="bottom";b.L="left";b.R="right";b.C="center";b.X="originx";b.Y="originy";b.variable={};b.events={mouseup:[],touchstart:[],touchmove:[],touchend:[],mousedown:[],dblclick:[]};this.registerEvent("initialize");b.initialization=!1;b.configure.apply(b,Array.prototype.slice.call(arguments,1));b.default_=c.clone(b.options,!0);b.set(a);b.afterConfiguration()};c.Element.prototype={_:function(){return this},afterConfiguration:function(){if(c.isObject(this.get("listeners")))for(var a in this.get("listeners"))this.on(a,this.get("listeners")[a]);this.initialize();this.fireEvent(this,"initialize",[this])},registerEvent:function(){for(var a=0;a<arguments.length;a++)this.events[arguments[a]]=[]},fireString:function(a,b,e,h){a=this.fireEvent(a,b,e);return c.isString(a)?a:!0!==a&&c.isDefined(a)?a.toString():h},fireEvent:function(a,b,e){var c=this.events[b].length;if(1==c)return this.events[b][0].apply(a,e);for(var f=!0,i=0;i<c;i++)this.events[b][i].apply(a,e)||(f=!1);return f},on:function(a,b){if(c.isString(a)){if(!this.events[a])throw Error("["+this.type+"] invalid event:'"+a+"'");this.events[a].push(b)}else c.isArray(a)&&a.each(function(a){this.on(a,b)},this);return this},getPlugin:function(a){return this.constructor.plugin_[a]},set:function(a){c.isObject(a)&&c.merge(this.options,a)},pushIf:function(a,b){return!c.isDefined(this.get(a))?this.push(a,b):this.get(a)},push:function(a,b){for(var e=a.split("."),c=e.length-1,f=this.options,i=0;i<c;i++)f[e[i]]||(f[e[i]]={}),f=f[e[i]];return f[e[c]]=b},get:function(a){for(var a=a.split("."),b=this.options[a[0]],e=1;e<a.length;e++){if(!b)return null;b=b[a[e]]}return b}};c.Html=c.extend(c.Element,{configure:function(a){this.type="html";this.T=a;c.DefineAbstract("beforeshow",this);this.set({animation:!0,width:0,height:0,style:"",index:999,offset_top:0,offset_left:0});this.transitions=""},initialize:function(){this.wrap=this.get("wrap");this.dom=document.createElement("div");this.get("shadow")&&this.css("boxShadow",this.get("shadow_offsetx")+"px "+this.get("shadow_offsety")+"px "+this.get("shadow_blur")+"px "+this.get("shadow_color"));this.get("border.enable")&&(this.css("border",this.get("border.width")+"px "+this.get("border.style")+" "+this.get("border.color")),this.css("borderRadius",this.get("border.radius")+"px"));this.css("zIndex",this.get("index"));this.applyStyle()},width:function(){return this.dom.offsetWidth},height:function(){return this.dom.offsetHeight},onTransitionEnd:function(a,b){var e="transitionend";c.isWebKit?e="webkitTransitionEnd":c.isOpera&&(e="oTransitionEnd");c.Event.addEvent(this.dom,e,a,b)},transition:function(a){this.transitions=""==this.transitions?a:this.transitions+","+a;c.isWebKit?this.css("WebkitTransition",this.transitions):c.isGecko?this.css("MozTransition",this.transitions):c.isOpera?this.css("OTransition",this.transitions):this.css("transition",this.transitions)},show:function(a,b){this.beforeshow(a,b);this.css("visibility","visible");this.get("animation")&&this.css("opacity",1)},hidden:function(){this.css("visibility","hidden")},getDom:function(){return this.dom},css:function(a,b){if(c.isString(a))if(c.isDefined(b))this.dom.style[a]=b;else return this.dom.style[a]},applyStyle:function(){for(var a=this.get("style").split(";"),b,e=0;e<a.length;e++)b=a[e].split(":"),1<b.length&&this.css(b[0],b[1])}});c.Painter=c.extend(c.Element,{configure:function(){this.type="painter";this.dimension=c._2D;c.DefineAbstract("commonDraw",this);c.DefineAbstract("initialize",this);this.set({strokeStyle:"gray",padding:10,color:"black",offsetx:0,offsety:0,background_color:"#FEFEFE",color_factor:0.15,style:"",border:{enable:!0},gradient:!1,gradient_mode:"LinearGradientUpDown",z_index:0,listeners:null,originx:0,originy:0});this.variable.event={mouseover:!1};this.registerEvent("click","mousemove","mouseover","mouseout","beforedraw","draw")},is3D:function(){return this.dimension==c._3D},applyGradient:function(a,b,e,c){var f=this._();f.get("gradient")&&(f.push("f_color",f.T.gradient(a||f.x||0,b||f.y||0,e||f.get(f.W),c||f.get(f.H),[f.get("dark_color"),f.get("light_color")],f.get("gradient_mode"))),f.push("light_color",f.T.gradient(a||f.x||0,b||f.y||0,e||f.get(f.W),c||f.get(f.H),[f.get("background_color"),f.get("light_color")],f.get("gradient_mode"))),f.push("f_color_",f.get("f_color")))},draw:function(a){if(!this.fireEvent(this,"beforedraw",[this,a]))return this;this.commonDraw(this,a);this.fireEvent(this,"draw",[this,a])},doConfig:function(){var a=this._(),b=c.parsePadding(a.get("padding")),e=a.get("border.enable"),e=e?c.parsePadding(a.get("border.width")):[0,0,0,0],h=c.toRgb(a.get("background_color")),f=a.get("color_factor"),i=a.get("gradient")?0:null;a.set({border_top:e[0],border_right:e[1],border_bottom:e[2],border_left:e[3],hborder:e[1]+e[3],vborder:e[0]+e[2],padding_top:b[0]+e[0],padding_right:b[1]+e[1],padding_bottom:b[2]+e[2],padding_left:b[3]+e[3],hpadding:b[1]+b[3]+e[1]+e[3],vpadding:b[0]+b[2]+e[0]+e[2]});a.get("shadow")&&a.push("shadow",{color:a.get("shadow_color"),blur:a.get("shadow_blur"),offsetx:a.get("shadow_offsetx"),offsety:a.get("shadow_offsety")});a.push("f_color",h);a.push("f_color_",h);a.push("light_color",c.light(h,f,i));a.push("dark_color",c.dark(h,0.8*f,i));a.push("light_color2",c.light(h,2*f,i));a.id=a.get("id");a.is3D()&&!a.get("xAngle_")&&(b=c.vectorP2P(a.get("xAngle"),a.get("yAngle")),a.push("xAngle_",b.x),a.push("yAngle_",b.y))}});c.Component=c.extend(c.Painter,{configure:function(a){c.Component.superclass.configure.apply(this,arguments);this.type="component";this.set({fontsize:12,font:"Verdana",fontweight:"normal",tip:{enable:!1,border:{width:2}}});this.proxy=this.atomic=!1;this.inject(a)},initialize:function(){c.DefineAbstract("isEventValid",this);c.DefineAbstract("doDraw",this);this.doConfig();this.initialization=!0},getDimension:function(){return{x:this.x,y:this.y,width:this.get("width"),height:this.get("height")}},doConfig:function(){c.Component.superclass.doConfig.call(this);var a=this._();a.x=a.push(a.X,a.get(a.X)+a.get("offsetx"));a.y=a.push(a.Y,a.get(a.Y)+a.get("offsety"));a.push("fontStyle",c.getFont(a.get("fontweight"),a.get("fontsize"),a.get("font")));a.data=a.get("data");a.get("tip.enable")&&(a.pushIf("tip.border.color",a.get("f_color")),c.isFunction(a.get("tip.invokeOffset"))||a.push("tip.invokeOffset",a.tipInvoke()))},isMouseOver:function(a){return this.isEventValid(a,this)},redraw:function(a){this.container.draw(a)},commonDraw:function(a){a.proxy||a.doDraw.call(a,a)},inject:function(a){a&&(this.container=a,this.target=this.T=a.T)}});c.Scale=c.extend(c.Component,{configure:function(){c.Scale.superclass.configure.apply(this,arguments);this.type="scale";this.set({position:"left",which:"h",basic_value:0,scale2grid:!0,distance:void 0,start_scale:0,end_scale:void 0,min_scale:void 0,max_scale:void 0,scale_space:void 0,scale_share:5,scale_enable:!0,scale_size:1,scale_width:4,scale_color:"#333333",scaleAlign:"center",labels:[],label:{},text_space:6,textAlign:"left",decimalsnum:0,join_style:"none",join_size:2});this.registerEvent("parseText")},isEventValid:function(){return{valid:!1}},doDraw:function(a){a.get("scale_enable")&&a.items.each(function(b){a.T.line(b.x0,b.y0,b.x1,b.y1,a.get("scale_size"),a.get("scale_color"),!1)});a.labels.each(function(a){a.draw()})},doLayout:function(a,b,e){e.get("scale_enable")&&e.items.each(function(e){e.x0+=a;e.y0+=b;e.x1+=a;e.y1+=b});e.labels.each(function(e){e.doLayout(a,b,0,e)})},doConfig:function(){c.Scale.superclass.doConfig.call(this);c.Assert.isNumber(this.get("distance"),"distance");var a=this._(),b=Math.abs,e=a.get("labels").length,h=a.get("min_scale"),f=a.get("max_scale"),i=a.get("scale_space"),l=a.get("end_scale"),p=a.get("start_scale");a.items=[];a.labels=[];a.number=0;if(0<e)a.number=e-1;else{c.Assert.isTrue(c.isNumber(f)||c.isNumber(l),"max_scale&end_scale");if(!c.isNumber(l)||l<f)l=a.push("end_scale",c.ceil(f));p>h&&(p=a.push("start_scale",c.floor(h)));i&&b(i)<b(l-p)&&a.push("scale_share",(l-p)/i);a.number=a.push("scale_share",b(a.get("scale_share")));if(!i||i>l-p)i=a.push("scale",(l-p)/a.get("scale_share"));parseInt(i)!=i&&0==a.get("decimalsnum")&&(b=i+"",b=b.substring(b.indexOf(".")+1),a.push("decimalsnum",b.length))}a.push("distanceOne",a.get("valid_distance")/a.number);var t,s,r,x=l=f=h=b=0,n=0;t=a.get("scale_width");s=t/2;r=a.get("scaleAlign");var B=a.get("position"),u=a.get("text_space"),A="",z=a.get("coo").get("axis.width");a.push("which",a.get("which").toLowerCase());a.isH="h"==a.get("which");a.isH?(r==a.O?l=-t:r==a.C?(l=-s,h=s):h=t,B==a.O?(n=-u-z[0],A=a.B):(n=u+z[2],A=a.O),B=a.C):(r==a.L?f=-t:r==a.C?(f=-s,b=s):b=t,A="middle",B==a.R)?(B=a.L,x=u+z[1]):(B=a.R,x=-u-z[3]);for(u=0;u<=a.number;u++)t=e?a.get("labels")[u]:(i*u+p).toFixed(a.get("decimalsnum")),s=a.isH?a.get("valid_x")+u*a.get("distanceOne"):a.x,r=a.isH?a.y:a.get("valid_y")+a.get("distance")-u*a.get("distanceOne"),a.items.push({x:s,y:r,x0:s+f,y0:r+l,x1:s+b,y1:r+h}),a.labels.push(new c.Text(c.applyIf(c.apply(a.get("label"),c.merge({text:t,x:s,y:r,originx:s+x,originy:r+n},a.fireEvent(a,"parseText",[t,s+x,r+n,u,a.number==u]))),{textAlign:B,textBaseline:A}),a))}});c.Coordinate={coordinate_:function(){var a=this._(),b=a.get("coordinate.scale"),e=a.get("scaleAlign"),h=!0;c.isObject(b)&&(b=[b]);c.isArray(b)?(b.each(function(a){if(a.position==e)return h=!1}),h&&(e=e==a.L?a.R:e==a.R?a.L:e==a.O?a.B:a.O,a.push("scaleAlign",e)),b.each(function(b){if(b.position==e){if(!b.start_scale)b.min_scale=a.get("minValue");if(!b.end_scale)b.max_scale=a.get("maxValue");return false}})):a.push("coordinate.scale",{position:e,scaleAlign:e,max_scale:a.get("maxValue"),min_scale:a.get("minValue")});a.is3D()&&(a.push("coordinate.xAngle_",a.get("xAngle_")),a.push("coordinate.yAngle_",a.get("yAngle_")),a.push("coordinate.zHeight",a.get("zHeight")*a.get("bottom_scale")));return new (c[a.is3D()?"Coordinate3D":"Coordinate2D"])(a.get("coordinate"),a)},coordinate:function(){var a=this._(),b=a.get("client_width"),e=a.get("client_height"),h=a.push("coordinate.width",c.parsePercent(a.get("coordinate.width"),b)),f=a.push("coordinate.height",c.parsePercent(a.get("coordinate.height"),e)),i=a.get("coordinate.valid_width"),l=a.get("coordinate.valid_height");if(!f||f>e)f=a.push("coordinate.height",Math.floor(0.8*e));if(!h||h>b)h=a.push("coordinate.width",Math.floor(0.8*b));i=a.push("coordinate.valid_width",c.parsePercent(i,h));l=a.push("coordinate.valid_height",c.parsePercent(l,f));a.is3D()&&(b=a.get("coordinate.pedestal_height"),e=a.get("coordinate.board_deep"),b=c.isNumber(b)?b:22,e=c.isNumber(e)?e:20,f=a.push("coordinate.height",f-b-e));a.get("align")==a.L?a.push(a.X,a.get("l_originx")):a.get("align")==a.R?a.push(a.X,a.get("r_originx")-h):a.push(a.X,a.get("centerx")-h/2);a.push(a.X,a.get(a.X)+a.get("offsetx"));a.push(a.Y,a.get("centery")-f/2+a.get("offsety"));(!i||i>h)&&a.push("coordinate.valid_width",h);(!l||l>f)&&a.push("coordinate.valid_height",f);a.x=a.get(a.X);a.y=a.get(a.Y);a.get("coordinate.originy");a.push("coordinate.originx",a.x);a.push("coordinate.originy",a.y)}};c.Coordinate2D=c.extend(c.Component,{configure:function(){c.Coordinate2D.superclass.configure.apply(this,arguments);this.type="coordinate2d";this.set({sign_size:12,sign_space:5,scale:[],width:"80%",height:"80%",valid_width:"100%",valid_height:"100%",grid_line_width:1,grid_color:"#dbe1e1",gridHStyle:{},gridVStyle:{},gridlinesVisible:!0,scale2grid:!0,grids:void 0,ignoreOverlap:!0,ignoreEdge:!1,xlabel:"",ylabel:"",background_color:0,striped:!0,striped_direction:"v",striped_factor:0.01,crosshair:{enable:!1},width:void 0,height:void 0,z_index:-1,axis:{enable:!0,color:"#666666",width:1}});this.scale=[];this.gridlines=[]},getScale:function(a){for(var b=0;b<this.scale.length;b++){var e=this.scale[b];if(e.get("position")==a)return a=[e.get("basic_value"),e.get("start_scale"),e.get("end_scale"),e.get("end_scale")-e.get("start_scale"),0],a[4]=c.inRange(a[1],a[2]+1,a[0])||c.inRange(a[2]-1,a[1],a[0]),{range:a[4],basic:a[4]?(a[0]-a[1])/a[3]:0,start:a[4]?a[0]:a[1],end:a[2],distance:a[3]}}return{start:0,end:0,distance:0}},isEventValid:function(a,b){return{valid:a.x>b.x&&a.x<b.x+b.get(b.W)&&a.y<b.y+b.get(b.H)&&a.y>b.y}},doDraw:function(a){a.T.box(a.x,a.y,a.get(a.W),a.get(a.H),0,a.get("f_color"));if(a.get("striped")){var b,e,h=!1;a.get("axis.width");var f=c.dark(a.get("background_color"),a.get("striped_factor"),0)}var i="v"==a.get("striped_direction");a.gridlines.each(function(c){a.get("striped")&&(h&&(i?a.T.box(c.x1,c.y1+c.width,c.x2-c.x1,e-c.y1-c.width,0,f):a.T.box(b+c.width,c.y2,c.x1-b,c.y1-c.y2,0,f)),b=c.x1,e=c.y1,h=!h)}).each(function(b){b.overlap||(b.solid?a.T.line(b.x1,b.y1,b.x2,b.y2,b.width,b.color):a.T.dotted(b.x1,b.y1,b.x2,b.y2,b.width,b.color,b.size,b.fator))});a.T.box(a.x,a.y,a.get(a.W),a.get(a.H),a.get("axis"),!1,a.get("shadow"),!0);a.scale.each(function(a){a.draw()})},doConfig:function(){c.Coordinate2D.superclass.doConfig.call(this);var a=this._();c.Assert.isNumber(a.get(a.W),a.W);c.Assert.isNumber(a.get(a.H),a.H);a.atomic=!1;a.get("gradient")&&c.isString(a.get("f_color"))&&a.push("f_color",a.T.avgLinearGradient(a.x,a.y,a.x,a.y+a.get(a.H),[a.get("dark_color"),a.get("light_color")]));if(a.get("axis.enable")){var b=a.get("axis.width");c.isArray(b)||a.push("axis.width",[b,b,b,b])}else a.push("axis.width",[0,0,0,0]);a.get("crosshair.enable")&&(a.push("crosshair.wrap",a.container.shell),a.push("crosshair.height",a.get(a.H)),a.push("crosshair.width",a.get(a.W)),a.push("crosshair.top",a.y),a.push("crosshair.left",a.x),a.crosshair=new c.CrossHair(a.get("crosshair"),a));var e,h=(b=!(!a.get("gridlinesVisible")||!a.get("grids")))&&!!a.get("grids.horizontal"),f=b&&!!a.get("grids.vertical"),i=a.get(a.H),l=a.get(a.W),p=a.get("valid_width"),t=a.get("valid_height"),b=a.get("gridlinesVisible")&&a.get("scale2grid")&&!(h&&f),s=(l-p)/2,r=(i-t)/2,x=a.get("axis.width");a.push("x_start",a.x+(l-p)/2);a.push("x_end",a.x+(l+p)/2);a.push("y_start",a.y+(i-t)/2);a.push("y_end",a.y+(i+t)/2);c.isArray(a.get("scale"))||(c.isObject(a.get("scale"))?a.push("scale",[a.get("scale")]):a.push("scale",[]));a.get("scale").each(function(d){e=(e=d.position)||a.L;e=e.toLowerCase();d[a.X]=a.x;d.coo=a;d[a.Y]=a.y;d.valid_x=a.x+s;d.valid_y=a.y+r;d.position=e;if(e==a.O){d.which="h";d.distance=l;d.valid_distance=p}else if(e==a.R){d.which="v";d.distance=i;d.valid_distance=t;d[a.X]=d[a.X]+l;d.valid_x=d.valid_x+p}else if(e==a.B){d.which="h";d.distance=l;d.valid_distance=p;d[a.Y]=d[a.Y]+i;d.valid_y=d.valid_y+t}else{d.which="v";d.distance=i;d.valid_distance=t}a.scale.push(new c.Scale(d,a.container))},a);var n=a.push("ignoreOverlap",a.get("ignoreOverlap")&&a.get("axis.enable")||a.get("ignoreEdge"));if(n)var B=a.get("ignoreEdge")?function(d,b,m){return d=="v"?m==a.y||m==a.y+i:b==a.x||b==a.x+d}:function(d,b,m){return d=="v"?m==a.y&&x[0]>0||m==a.y+i&&x[2]>0:b==a.x&&x[3]>0||b==a.x+l&&x[1]>0};var u={solid:!0,size:10,fator:1,width:a.get("grid_line_width"),color:a.get("grid_color")},A=c.applyIf(a.get("gridHStyle"),u),z=c.applyIf(a.get("gridVStyle"),u);if(b){var d,m,g;a.scale.each(function(b){g=b.get("position");if(!c.isFalse(b.get("scale2grid"))&&!(h&&b.get("which")=="v"||f&&b.get("which")=="h")){d=m=0;g==a.O?m=i:g==a.R?d=-l:g==a.B?m=-i:d=l;b.items.each(function(g){n&&a.gridlines.push(c.applyIf({overlap:B.call(a,b.get("which"),g.x,g.y),x1:g.x,y1:g.y,x2:g.x+d,y2:g.y+m},b.isH?z:A))})}})}if(f){var o=a.get("grids.vertical");c.Assert.gt(o.value,0,"value");b=l/o.value;u=o.value;"given_value"==o.way&&(u=b,b=o.value,b=b>l?l:b);for(o=0;o<=u;o++)n&&a.gridlines.push(c.applyIf({overlap:B.call(a,"h",a.x+o*b,a.y),x1:a.x+o*b,y1:a.y,x2:a.x+o*b,y2:a.y+i,H:!1,width:z.width,color:z.color},z))}if(h){o=a.get("grids.horizontal");c.Assert.gt(o.value,0,"value");b=i/o.value;u=o.value;"given_value"==o.way&&(u=b,b=o.value,b=b>i?i:b);for(o=0;o<=u;o++)n&&a.gridlines.push(c.applyIf({overlap:B.call(a,"v",a.x,a.y+o*b),x1:a.x,y1:a.y+o*b,x2:a.x+l,y2:a.y+o*b,H:!0,width:A.width,color:A.color},A))}}});c.Coordinate3D=c.extend(c.Coordinate2D,{configure:function(){c.Coordinate3D.superclass.configure.apply(this,arguments);this.type="coordinate3d";this.dimension=c._3D;this.set({xAngle:60,yAngle:20,xAngle_:void 0,yAngle_:void 0,zHeight:0,pedestal_height:22,board_deep:20,left_board:!0,gradient:!0,color_factor:0.18,ignoreEdge:!0,striped:!1,grid_color:"#a4ad96",background_color:"#d6dbd2",shadow_offsetx:4,shadow_offsety:2,wall_style:[],axis:{enable:!1}})},doDraw:function(a){var b=a.get(a.W),c=a.get(a.H),h=a.get("xAngle_"),f=a.get("yAngle_"),i=a.get("zHeight"),l=a.get("z_offx"),p=a.get("z_offy");a.get("pedestal_height")&&a.T.cube3D(a.x,a.y+c+a.get("pedestal_height"),h,f,!1,b,a.get("pedestal_height"),3*i/2,a.get("axis.enable"),a.get("axis.width"),a.get("axis.color"),a.get("bottom_style"));a.get("board_deep")&&a.T.cube3D(a.x+l,a.y+c-p,h,f,!1,b,c,a.get("board_deep"),a.get("axis.enable"),a.get("axis.width"),a.get("axis.color"),a.get("board_style"));a.T.cube3D(a.x,a.y+c,h,f,!1,b,c,i,a.get("axis.enable"),a.get("axis.width"),a.get("axis.color"),a.get("wall_style"));a.gridlines.each(function(b){b.solid?(a.get("left_board")&&a.T.line(b.x1,b.y1,b.x1+l,b.y1-p,b.width,b.color),a.T.line(b.x1+l,b.y1-p,b.x2+l,b.y2-p,b.width,b.color)):(a.get("left_board")&&a.T.dotted(b.x1,b.y1,b.x1+l,b.y1-p,b.width,b.color,b.size,b.fator),a.T.dotted(b.x1+l,b.y1-p,b.x2+l,b.y2-p,b.width,b.color,b.size,b.fator))});a.scale.each(function(a){a.draw()})},doConfig:function(){c.Coordinate3D.superclass.doConfig.call(this);for(var a=this._(),b=a.get("wall_style"),e=a.get("background_color"),h=a.get(a.H),f=a.get(a.W),i=a.get("color_factor"),l=a.push("z_offx",a.get("xAngle_")*a.get("zHeight")),p=a.push("z_offy",a.get("yAngle_")*a.get("zHeight"));6>b.length;)b.push({color:e});a.get("left_board")||(b[2]=!1,a.scale.each(function(a){a.doLayout(l,-p,a)}));a.push("bottom_style",[{color:a.get("shadow_color"),shadow:a.get("shadow")},!1,!1,{color:b[3].color},!1,{color:b[3].color}]);a.push("board_style",[!1,!1,!1,{color:b[4].color},{color:b[5].color},!1]);a.get("gradient")&&(c.isString(b[0].color)&&(b[0].color=a.T.avgLinearGradient(a.x,a.y+h,a.x+f,a.y+h,[c.dark(b[0].color,i/2+0.06),c.dark(b[0].color,i/2+0.06)])),c.isString(b[1].color)&&(b[1].color=a.T.avgLinearGradient(a.x+l,a.y-p,a.x+l,a.y+h-p,[c.dark(b[1].color,i),c.light(b[1].color,i)])),c.isString(b[2].color)&&(b[2].color=a.T.avgLinearGradient(a.x,a.y,a.x,a.y+h,[c.light(b[2].color,i/3),c.dark(b[2].color,i)])),a.get("bottom_style")[5].color=a.T.avgLinearGradient(a.x,a.y+h,a.x,a.y+h+a.get("pedestal_height"),[c.light(b[3].color,i/2+0.06),c.dark(b[3].color,i/2,0)]));a.push("wall_style",[b[0],b[1],b[2]])}});c.Custom=c.extend(c.Component,{configure:function(){c.Custom.superclass.configure.apply(this,arguments);this.type="custom";this.set({drawFn:c.emptyFn,eventValid:void 0,animating_draw:!0});this.registerEvent()},doDraw:function(a){a.get("drawFn").call(a,a)},isEventValid:function(a,b){return c.isFunction(this.get("eventValid"))?this.get("eventValid").call(this,a,b):{valid:!1}},doConfig:function(){c.Custom.superclass.doConfig.call(this);this.A_draw=this.get("animating_draw");this.variable.animation={animating:!1,time:0,duration:0}}});(function(a){function b(d){"string"===typeof d&&(d=a(d));if(!d||!d.tagName||"canvas"!=d.tagName.toLowerCase())throw Error("there not a canvas element");this.canvas=d;this.c=this.canvas.getContext("2d");this.width=this.canvas.width;this.height=this.canvas.height}var c=Math.PI,h=c/90,f=h/2,i=Math.ceil,l=Math.floor,p=2*c,t=Math.max,s=Math.min,r=Math.sin,x=Math.cos,n=function(a,b){return 1==a?l(b)+0.5:Math.round(b)},B=function(a,b,g,c){var e=b.x,j=b.y,h=a[g-1],f=a[g+1],E,k;if(g<a.length-1){var a=h.y,g=f.y,i;E=(c*e+h.x)/(c+1);k=(c*j+a)/(c+1);f=(c*e+f.x)/(c+1);c=(c*j+g)/(c+1);i=(c-k)*(f-e)/(f-E)+j-c;k+=i;c+=i;k>a&&k>j?(k=t(a,j),c=2*j-k):k<a&&k<j&&(k=s(a,j),c=2*j-k);c>g&&c>j?(c=t(g,j),k=2*j-c):c<g&&c<j&&(c=s(g,j),k=2*j-c);b.rcx=f;b.rcy=c}return[h.rcx||h.x,h.rcy||h.y,E||e,k||j,e,j]},u=function(d){return a.isNumber(d)?d:a.parseFloat(d,d)},A=function(d){var b,g=0,c,e=0;this.total=0;init=!1;d.each(function(d){g=d.value;if(a.isArray(g)){var h=0;e=g.length>e?g.length:e;for(var f=0;f<g.length;f++)g[f]=u(g[f]),h+=g[f],init||(b=c=g[f],init=!0),b=t(g[f],b),c=s(g[f],c);d.total=h}else g=u(g),d.value=g,this.total+=g,init||(b=c=g,init=!0),b=t(g,b),c=s(g,c)},this);this.get("minValue")&&(c=s(this.get("minValue"),c));this.get("maxValue")&&(b=t(this.get("maxValue"),b));a.isArray(this.get("labels"))&&(e=this.get("labels").length>e?this.get("labels").length:e);this.push("maxItemSize",e);this.push("minValue",c);this.push("maxValue",b)},z=function(a){var b=this._(),g,c,e,j,h,f=!1;b.labels=b.get("labels");h=b.labels.length;if(0==h){h=a[0].value.length;for(var i=0;i<h;i++)b.labels.push("")}b.columns=[];for(i=b.total=0;i<h;i++){for(var k=[],v=0;v<a.length;v++)if(j=a[v],e=j.value[i])e=u(e,e),j.value[i]=e,b.total+=e,f||(g=c=e,f=!0),g=t(e,g),c=s(e,c),k.push({name:j.name,value:j.value[i],color:j.color});b.columns.push({name:b.labels[i],item:k})}b.push("minValue",c);b.push("maxValue",g)};b.prototype={getContext:function(){return this.c},css:function(d,b){if(a.isDefined(b))this.canvas.style[d]=b;else return this.canvas.style[d]},ellipse:function(a,b,g,c,e,j,f,i,E,k,v,q,l,n){q=!!q;l=!!l;this.save().gCo(n).strokeStyle(i,E,k).shadowOn(v).fillStyle(f).moveTo(a,b).beginPath();for(l&&this.moveTo(a,b);e<=j;)this.lineTo(a+g*x(e),b+(q?-c*r(e):c*r(e))),e+=h;return this.lineTo(a+g*x(j),b+(q?-c*r(j):c*r(j))).closePath().stroke(i).fill(f).restore()},arc:function(a,b,g,c,e,j,h,f,i,k,l,q,n,p){if(!g)return this;q=!!q;n=!!n&&!c;this.save().gCo(p).strokeStyle(f,i,k).fillStyle(h).beginPath();c?(this.moveTo(a+x(e)*(g-c),b+r(e)*(g-c)).lineTo(a+x(e)*g,b+r(e)*g),this.c.arc(a,b,g,e,j,q),this.lineTo(a+x(j)*(g-c),b+r(j)*(g-c)),this.c.arc(a,b,g-c,j,e,!q)):this.c.arc(a,b,g,e,j,q);n&&this.lineTo(a,b);this.closePath();f?this.shadowOn(l).stroke(f).shadowOff().fill(h):this.shadowOn(l).fill(h);return this.restore()},sector:function(a,b,g,c,e,j,h,f,i,k,l,q){l&&this.arc(a,b,g,c,e,j,h,0,0,0,l,q,!0,!0);return this.arc(a,b,g,c,e,j,h,f,i,k,!1,q,!0)},sector3D:function(){var d=function(d,b,g,m,o,k,f,i,l){var n=a.quadrantd(o),p=a.quadrantd(k);if(!(2==n||3==n)||!(2==p||3==p)){n=function(a,c){this.lineTo(d+g*x(a),b+(c||0)+(f?-m*r(a):m*r(a)))};o=f&&k>c&&o<c?c:o;k=!f&&o<c&&k>c?c:k;p=o;for(this.fillStyle(a.dark(l)).moveTo(d+g*x(o),b+(f?-m*r(o):m*r(o))).beginPath();p<=k;)n.call(this,p),p+=h;n.call(this,k);this.lineTo(d+g*x(k),b+i+(f?-m*r(k):m*r(k)));for(p=k;p>=o;)n.call(this,p,i),p-=h;n.call(this,o,i);this.lineTo(d+g*x(o),b+(f?-m*r(o):m*r(o))).closePath().fill(!0)}},b=function(a,d,b,g,c,m,e,o){b=a+b*x(e);g=d+m+(c?-g*r(e):g*r(e));this.moveTo(a,d).beginPath().fillStyle(o).lineTo(a,d+m).lineTo(b,g).lineTo(b,g-m).lineTo(a,d).closePath().fill(!0)},g=function(d,g,o,h,f,k,i,q,l){var n=i?f<c/2||f>1.5*c:f>c/2&&f<1.5*c,p=i?k>c/2&&k<1.5*c:k<c/2||k>1.5*c;if(!n&&!p)return!1;l=a.dark(l);n&&b.call(this,d,g,o,h,i,q,f,l);p&&b.call(this,d,g,o,h,i,q,k,l)},o=function(a,b,m,c,e,o,f,h,i,l,n,p,r){this.ellipse(a,b+f,m,c,e,o,h,i,l,n,p,r,!0);g.call(this,a,b,m,c,e,o,r,f,h);this.ellipse(a,b,m,c,e,o,h,i,l,n,!1,r,!0);d.call(this,a,b,m,c,e,o,r,f,h);return this};o.layerPaint=g;o.sPaint=d;o.layerDraw=b;return o}(),textStyle:function(a,b,g){return this.textAlign(a).textBaseline(b).textFont(g)},strokeStyle:function(a,b,g,c){if(a&&(b&&(this.c.lineWidth=b),g&&(this.c.strokeStyle=g),c))this.c.lineJoin=c;return this},globalAlpha:function(a){a&&(this.c.globalAlpha=a);return this},fillStyle:function(a){a&&(this.c.fillStyle=a);return this},arc2:function(a,b,g,c,e,j){g&&this.c.arc(a,b,g,c,e,j);return this},textAlign:function(a){a&&(this.c.textAlign=a);return this},textBaseline:function(a){a&&(this.c.textBaseline=a);return this},textFont:function(a){a&&(this.c.font=a);return this},shadowOn:function(a){a&&(this.c.shadowColor=a.color,this.c.shadowBlur=a.blur,this.c.shadowOffsetX=a.offsetx,this.c.shadowOffsetY=a.offsety);return this},shadowOff:function(){this.c.shadowColor="white";this.c.shadowBlur=this.c.shadowOffsetX=this.c.shadowOffsetY=0;return this},gradient:function(a,b,g,c,e,j){var j=j.toLowerCase(),f=a,h=b,i=!j.indexOf("linear"),j=j.substring(14);if(i){switch(j){case "updown":h+=c;break;case "downup":b+=c;break;case "leftright":f+=g;break;case "rightleft":a+=g;break;default:return e[0]}return this.avgLinearGradient(a,b,f,h,e)}a+=g/2;b+=c/2;"outin"==j&&e.reverse();return this.avgRadialGradient(a,b,0,a,b,0.8*(g>c?c:g),e)},avgLinearGradient:function(a,b,g,c,e){a=this.createLinearGradient(a,b,g,c);for(b=0;b<e.length;b++)a.addColorStop(b/(e.length-1),e[b]);return a},createLinearGradient:function(a,b,g,c){return this.c.createLinearGradient(a,b,g,c)},avgRadialGradient:function(a,b,g,c,e,j,f){a=this.createRadialGradient(a,b,g,c,e,j);for(b=0;b<f.length;b++)a.addColorStop(b/(f.length-1),f[b]);return a},createRadialGradient:function(a,b,g,c,e,j){return this.c.createRadialGradient(a,b,g,c,e,j)},text:function(a,b,g,c,e,j,f,h,i,k,l,n){return""==a?this:this.save().textStyle(j,f,h).fillText(a,b,g,c,e,i,k,l,n).restore()},fillText:function(a,b,g,c,e,j,h,i,l){a=a.toString();c=c||!1;h=h||16;a=a.split("tb"==(j||"lr")?"":"\n");1<a.length&&("middle"==this.c.textBaseline?g-=(a.length-1)*h/2:"bottom"==this.c.textBaseline&&(g-=(a.length-1)*h));this.save().fillStyle(e).translate(b,g).rotate(f*l).shadowOn(i);a.each(function(a,d){try{c?this.c.fillText(a,0,d*h,c):this.c.fillText(a,0,d*h)}catch(e){console.log(e.message+"["+a+","+b+","+g+"]")}},this);return this.restore()},measureText:function(a){return this.c.measureText(a).width},moveTo:function(a,b){this.c.moveTo(a||0,b||0);return this},lineTo:function(a,b){this.c.lineTo(a||0,b||0);return this},save:function(){this.c.save();return this},restore:function(){this.c.restore();return this},beginPath:function(){this.c.beginPath();return this},closePath:function(){this.c.closePath();return this},stroke:function(a){a&&this.c.stroke();return this},fill:function(a){a&&this.c.fill();return this},cube:function(d,b,g,c,e,j,h,f,i,k,l,q){d=n(k,d);b=n(k,b);h=h&&0<h?h:e;c=b-h*c;g=n(k,d+h*g);c=n(k,c);q&&(this.polygon(f,i,k,l,q,!1,[{x:d,y:b},{x:g,y:c},{x:g+e,y:c},{x:d+e,y:b}]),this.polygon(f,i,k,l,q,!1,[{x:d,y:b},{x:d,y:b+j},{x:d+e,y:b+j},{x:d+e,y:b}]),this.polygon(f,i,k,l,q,!1,[{x:d+e,y:b},{x:g+e,y:c},{x:g+e,y:c+j},{x:d+e,y:b+j}]));this.polygon(a.dark(f),i,k,l,!1,!1,[{x:d,y:b},{x:g,y:c},{x:g+e,y:c},{x:d+e,y:b}]);this.polygon(f,i,k,l,!1,!1,[{x:d,y:b},{x:d,y:b+j},{x:d+e,y:b+j},{x:d+e,y:b}]);this.polygon(a.dark(f),i,k,l,!1,!1,[{x:d+e,y:b},{x:g+e,y:c},{x:g+e,y:c+j},{x:d+e,y:b+j}]);return this},cube3D:function(d,b,c,e,h,j,f,i,l,k,p,q){d=n(k,d);b=n(k,b);i=!i||0==i?j:i;h?(e=a.vectorP2P(c,e),c=d+i*e.x,e=b-i*e.y):(c=d+i*c,e=b-i*e);for(;6>q.length;)q.push(!1);c=n(k,c);e=n(k,e);i=[];0>e?a.isObject(q[4])&&i.push(a.applyIf({points:[{x:d,y:b-f},{x:c,y:e-f},{x:c+j,y:e-f},{x:d+j,y:b-f}]},q[4])):a.isObject(q[0])&&i.push(a.applyIf({points:[{x:d,y:b},{x:c,y:e},{x:c+j,y:e},{x:d+j,y:b}]},q[0]));a.isObject(q[1])&&i.push(a.applyIf({points:[{x:c,y:e},{x:c,y:e-f},{x:c+j,y:e-f},{x:c+j,y:e}]},q[1]));a.isObject(q[2])&&i.push(a.applyIf({points:[{x:d,y:b},{x:d,y:b-f},{x:c,y:e-f},{x:c,y:e}]},q[2]));a.isObject(q[3])&&i.push(a.applyIf({points:[{x:d+j,y:b},{x:d+j,y:b-f},{x:c+j,y:e-f},{x:c+j,y:e}]},q[3]));0>e?a.isObject(q[0])&&i.push(a.applyIf({points:[{x:d,y:b},{x:c,y:e},{x:c+j,y:e},{x:d+j,y:b}]},q[0])):a.isObject(q[4])&&i.push(a.applyIf({points:[{x:d,y:b-f},{x:c,y:e-f},{x:c+j,y:e-f},{x:d+j,y:b-f}]},q[4]));a.isObject(q[5])&&i.push(a.applyIf({points:[{x:d,y:b},{x:d,y:b-f},{x:d+j,y:b-f},{x:d+j,y:b}]},q[5]));i.each(function(a){this.polygon(a.color,l,k,p,a.shadow,a.alpha,a.points)},this);return this},polygon:function(a,b,c,e,f,h,i,l,p,k){this.save().strokeStyle(b,c,e).beginPath().fillStyle(a).globalAlpha(h).shadowOn(f).moveTo(i[0].x,i[0].y);if(l){this.moveTo(n(c,k[0].x),n(c,k[0].y)).lineTo(n(c,i[0].x),n(c,i[0].y));for(e=1;e<i.length;e++)this.bezierCurveTo(B(i,i[e],e,p));this.lineTo(n(c,k[1].x),n(c,k[1].y))}else for(e=1;e<i.length;e++)this.lineTo(n(c,i[e].x),n(c,i[e].y));return this.closePath().stroke(b).fill(a).restore()},lines:function(a,b,c,e){this.save().gCo(e).beginPath().strokeStyle(!0,b,c).moveTo(n(b,a[0]),n(b,a[1]));for(c=2;c<a.length-1;c+=2)this.lineTo(n(b,a[c]),n(b,a[c+1]));return this.stroke(!0).restore()},bezierCurveTo:function(a){this.c.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5]);return this},label:function(a,b,c){return this.save().beginPath().strokeStyle(!0,b,c).moveTo(n(b,a[0].x),n(b,a[0].y)).bezierCurveTo([a[1].x,a[1].y,a[2].x,a[2].y,a[3].x,a[3].y]).stroke(!0).restore()},lineArray:function(a,b,c,e,f){this.save().beginPath().strokeStyle(!0,b,c).moveTo(n(b,a[0].x),n(b,a[0].y));for(c=1;c<a.length;c++)e?this.bezierCurveTo(B(a,a[c],c,f||1.5)):this.lineTo(n(b,a[c].x),n(b,a[c].y));return this.stroke(!0).restore()},manyLine:function(a,b,c,e,f){var h=[],i=!1,f=f||1.5;a.each(function(a){a.ignored&&i?(this.lineArray(h,b,c,e,f),h=[],i=!1):a.ignored||(h.push(a),i=!0)},this);h.length&&this.lineArray(h,b,c,e,f)},dotted:function(d,b,c,e,f,h,i,p,r){if(!f)return this;var d=n(f,d),b=n(f,b),c=n(f,c),e=n(f,e),k=a.distanceP2P(d,b,c,e),v;if(0>=i||k<=i||d!=c&&b!=e)return this.line(d,b,c,e,f,h,r);if(d>c||b>e)v=d,d=c,c=v,v=b,b=e,e=v;this.save().gCo(r).strokeStyle(!0,f,h).beginPath().moveTo(d,b);f=i*(p||1);h=l(k/(i+f));k=k-h*(i+f)>i;p=b==e;h=k?h+1:h;for(r=1;r<=h;r++)this.lineTo(p?d+i*r+f*(r-1):d,p?b:b+i*r+f*(r-1)).moveTo(p?d+(i+f)*r:d,p?b:b+(i+f)*r);k||this.lineTo(c,e);return this.stroke(!0).restore()},line:function(a,b,c,e,f,h,i){if(!f)return this;this.save().gCo(i);return this.beginPath().strokeStyle(!0,f,h).moveTo(n(f,a),n(f,b)).lineTo(n(f,c),n(f,e)).stroke(!0).restore()},round:function(a,b,c,e,f,h){return this.arc(a,b,c,0,0,p,e,!!h,f,h)},fillRect:function(a,b,c,e){this.c.fillRect(a,b,c,e);return this},translate:function(a,b){this.c.translate(a,b);return this},rotate:function(a){this.c.rotate(a);return this},clearRect:function(a,b,c,e){c=c||this.width;e=e||this.height;this.c.clearRect(a||0,b||0,c,e);return this},gCo:function(a){return a?this.gCO(a):this},gCO:function(a){this.c.globalCompositeOperation=a?"destination-over":"source-over";return this},box:function(b,f,g,h,r,j,t,s,E){r=r||{enable:0};if(r.enable){var k=r.width,v=r.color,q=r.radius,u=a.isNumber(k),k=a.parsePadding(k);k[0]==k[1]&&k[1]==k[2]&&k[2]==k[3]&&(u=!0);s=s?1:-1;g+=s*(k[1]+k[3])/2;h+=s*(k[0]+k[2])/2;b-=s*(k[3]/2);f-=s*(k[0]/2);k=u?k[0]:k;q=!u||!q||0==q||"0"==q?0:a.parsePadding(q)}this.save().gCo(E).fillStyle(j).strokeStyle(u,k,v);q?this.beginPath().moveTo(n(k,b+q[0]),n(k,f)).lineTo(n(k,b+g-q[1]),n(k,f)).arc2(n(k,b+g-q[1]),n(k,f+q[1]),q[1],3*c/2,p).lineTo(n(k,b+g),n(k,f+h-q[2])).arc2(n(k,b+g-q[2]),n(k,f+h-q[2]),q[2],0,c/2).lineTo(n(k,b+q[3]),n(k,f+h)).arc2(n(k,b+q[3]),n(k,f+h-q[3]),q[3],c/2,c).lineTo(n(k,b),n(k,f+q[0])).arc2(n(k,b+q[0]),n(k,f+q[0]),q[0],c,3*c/2).closePath().shadowOn(t).stroke(k).shadowOff().fill(j):!r.enable||u?(k&&r.enable&&(this.shadowOn(t).c.strokeRect(b,f,g,h),this.shadowOff()),j&&this.fillRect(b,f,g,h)):(k&&(v=a.isArray(v)?v:[v,v,v,v],this.shadowOn(t).line(b+g,f+k[0]/2,b+g,f+h-k[0]/2,k[1],v[1],0).line(b,f+k[0]/2,b,f+h-k[0]/2,k[3],v[3],0).line(l(b-k[3]/2),f,b+g+k[1]/2,f,k[0],v[0],0).line(l(b-k[3]/2),f+h,b+g+k[1]/2,f+h,k[2],v[2],0).shadowOff()),j&&this.beginPath().moveTo(l(b+k[3]/2),l(f+k[0]/2)).lineTo(i(b+g-k[1]/2),f+k[0]/2).lineTo(i(b+g-k[1]/2),i(f+h-k[2]/2)).lineTo(l(b+k[3]/2),i(f+h-k[2]/2)).lineTo(l(b+k[3]/2),l(f+k[0]/2)).closePath().fill(j));return this.restore()},toDataURL:function(a){return this.canvas.toDataURL(a||"image/png")},addEvent:function(b,c,e){a.Event.addEvent(this.canvas,b,c,e)}};a.taylor={light:function(a,b){b.highlight=!1;a.on("mouseover",function(){b.highlight=!0;a.redraw("mouseover")}).on("mouseout",function(){b.highlight=!1;a.redraw("mouseout")}).on("beforedraw",function(){a.push("f_color",b.highlight?a.get("light_color"):a.get("f_color_"));return!0})}};a.Chart=a.extend(a.Painter,{configure:function(){a.Chart.superclass.configure.apply(this,arguments);this.type="chart";this.dataType="simple";this.set({render:"",data:[],width:void 0,height:void 0,lineJoin:"round",align:"center",default_mouseover_css:!0,turn_off_touchmove:!1,showpercent:!1,decimalsnum:1,title:{text:"",fontweight:"bold",fontsize:20,height:30},subtitle:{text:"",fontweight:"bold",fontsize:16,height:20},footnote:{text:"",color:"#5d7f97",textAlign:"right",height:20},title_align:"center",title_valign:"top",animation:!1,doAnimation:null,animation_timing_function:"easeInOut",duration_animation_duration:1E3,z_index:999,legend:{enable:!1},tip:{enable:!1}});this.registerEvent("beforeAnimation","afterAnimation","animating");this.T=null;this.animationed=this.RENDERED=!1;this.data=[];this.plugins=[];this.oneways=[];this.total=0},toDataURL:function(a){return this.T.toDataURL(a)},segmentRect:function(){this.T.clearRect(this.get("l_originx"),this.get("t_originy"),this.get("client_width"),this.get("client_height"))},resetCanvas:function(){this.T.box(this.get("l_originx"),this.get("t_originy"),this.get("client_width"),this.get("client_height"),0,this.get("f_color"),0,0,!0)},animation:function(b){b.segmentRect();b.doAnimation(b.variable.animation.time,b.duration,b);b.legend&&b.legend.draw();b.plugins.each(function(a){a.A_draw&&(a.variable.animation.animating=!0,a.variable.animation.time=b.variable.animation.time,a.variable.animation.duration=b.duration,a.draw(),a.variable.animation.animating=!1)});b.resetCanvas();b.variable.animation.time<b.duration?(b.variable.animation.time++,a.requestAnimFrame(function(){b.animation(b)})):a.requestAnimFrame(function(){b.variable.animation.time=0;b.animationed=!0;b.draw();b.processAnimation=!1;b.fireEvent(b,"afterAnimation",[b])})},runAnimation:function(){this.fireEvent(this,"beforeAnimation",[this]);this.animation(this)},doSort:function(){this.components.sor(function(b,c){return(a.isArray(b)?b.zIndex||0:b.get("z_index"))>(a.isArray(c)?c.zIndex||0:c.get("z_index"))})},commonDraw:function(b,c){a.Assert.isTrue(b.RENDERED,b.type+" has not rendered.");a.Assert.isTrue(b.initialization,b.type+" has initialize failed.");a.Assert.gt(b.data.length,0,b.type+"'s data is empty.");b.redraw||(b.doSort(),b.oneways.eachAll(function(a){a.draw()}));b.redraw=!0;!b.animationed&&b.get("animation")?b.runAnimation():(b.segmentRect(),b.components.eachAll(function(a){a.draw(c)}),b.resetCanvas())},plugin:function(a){a.inject(this);this.components.push(a);this.plugins.push(a)},getTitle:function(){return this.title},getSubTitle:function(){return this.subtitle},getFootNote:function(){return this.footnote},getDrawingArea:function(){return{x:this.get("l_originx"),x:this.get("t_originy"),width:this.get("client_width"),height:this.get("client_height")}},setUp:function(){this.redraw=!1;this.T.clearRect();this.initialization=!1;this.initialize()},create:function(d,c){if(d.get("fit")){var e=window.innerWidth,f=window.innerHeight,h=a.getDoc().body.style;h.padding="0px";h.margin="0px";h.overflow="hidden";d.push(d.W,e);d.push(d.H,f)}d.width=d.pushIf(d.W,400);d.height=d.pushIf(d.H,300);d.canvasid=a.iGather(d.type);d.shellid="shell-"+d.canvasid;e=[];e.push("<div id='");e.push(d.shellid);e.push("' style='width:");e.push(d.width);e.push("px;height:");e.push(d.height);e.push("px;padding:0px;margin:0px;overflow:hidden;position:relative;'>");e.push("<canvas id= '");e.push(d.canvasid);e.push("'  width='");e.push(d.width);e.push("' height='");e.push(d.height);e.push("'><p>Your browser does not support the canvas element</p></canvas></div>");c.innerHTML=e.join("");d.shell=a(d.shellid);d.T=d.target=new b(d.canvasid);d.RENDERED=!0},initialize:function(){var b=this._(),c=b.get("data"),e=b.get("render");b.RENDERED||("string"==typeof e&&a(e)?b.create(b,a(e)):"object"==typeof e&&b.create(b,e));0<c.length&&b.RENDERED&&!b.initialization&&("simple"==b.dataType?A.call(b,c):"complex"==b.dataType&&z.call(b,c),b.data=c,b.doConfig(),b.initialization=!0)},eventOff:function(){this.stopEvent=!0},eventOn:function(){this.stopEvent=!1},oneWay:function(b){var c=b.variable.event,e=!b.get("turn_off_touchmove"),f=!a.touch&&b.get("default_mouseover_css"),h,i,l=a.touch?["touchstart","touchmove"]:["click","mousemove"];b.stopEvent=!1;l.each(function(c){b.T.addEvent(c,function(e){b.processAnimation||b.stopEvent||e.targetTouches&&1!=e.targetTouches.length||b.fireEvent(b,c,[b,a.Event.fix(e)])},!1)});b.on(l[0],function(a,b){a.components.eachAll(function(a){var d=a.isMouseOver(b);if(d.valid)return c.click=!0,a.fireEvent(a,"click",[a,b,d]),!b.stopPropagation});c.click&&(e&&b.event.preventDefault(),c.click=!1)});if(!a.touch||e)b.on(l[1],function(a,b){h=i=!1;a.components.eachAll(function(d){var e=d.variable.event,g=d.isMouseOver(b);if(g.valid){if(h=!0,i=i||d.atomic,c.mouseover||(c.mouseover=!0,a.fireEvent(a,"mouseover",[d,b,g])),f&&i&&a.T.css("cursor","pointer"),e.mouseover||(e.mouseover=!0,d.fireEvent(d,"mouseover",[d,b,g])),d.fireEvent(d,"mousemove",[d,b,g]),g.stop)return!1}else e.mouseover&&(e.mouseover=!1,d.fireEvent(d,"mouseout",[d,b,g]));return!b.stopPropagation});c.mouseover&&(b.event.preventDefault(),f&&!i&&a.T.css("cursor","default"),!h&&c.mouseover&&(c.mouseover=!1,a.fireEvent(a,"mouseout",[a,b])))});b.oneWay=a.emptyFn},getPercent:function(b){return this.get("showpercent")?a.toPercent(b/this.total,this.get("decimalsnum")):b},doActing:function(b,c,e,f,h){f=!!b.get("communal_acting");b.push(f?"sub_option":"communal_acting",a.clone(b.get(f?"communal_acting":"sub_option"),!0));a.merge(b.get("sub_option"),c);a.merge(b.get("sub_option"),e);b.pushIf("sub_option.background_color",c.color);b.get("sub_option.tip.enable")&&(b.push("sub_option.tip.text",h||c.name+" "+b.getPercent(c.value)),b.push("sub_option.tip.name",c.name),b.push("sub_option.tip.value",c.value),b.push("sub_option.tip.total",b.total))},doConfig:function(){a.Chart.superclass.doConfig.call(this);var b=this._();a.Assert.isArray(b.data);b.T.strokeStyle(!0,0,b.get("strokeStyle"),b.get("lineJoin"));b.processAnimation=b.get("animation");b.push("communal_acting",0);b.duration=i(b.get("duration_animation_duration")*a.FRAME/1E3);a.isFunction(b.get("doAnimation"))&&(b.doAnimation=b.get("doAnimation"));b.variable.animation={type:0,time:0,queue:[]};b.components=[];b.oneways=[];b.oneways.push(new a.Custom({drawFn:function(){b.T.box(0,0,b.width,b.height,b.get("border"),b.get("f_color"),0,0,true)}}));b.plugins.each(function(a){b.components.push(a)});b.applyGradient();b.animationArithmetic=a.getAA(b.get("animation_timing_function"));b.oneWay(b);b.push("r_originx",b.width-b.get("padding_right"));b.push("b_originy",b.height-b.get("padding_bottom"));var c=0,e=b.push("l_originx",b.get("padding_left")),f=b.push("t_originy",b.get("padding_top")),h=b.push("client_width",b.get(b.W)-b.get("hpadding"));a.isString(b.get("title"))&&b.push("title",a.applyIf({text:b.get("title")},b.default_.title));a.isString(b.get("subtitle"))&&b.push("subtitle",a.applyIf({text:b.get("subtitle")},b.default_.subtitle));a.isString(b.get("footnote"))&&b.push("footnote",a.applyIf({text:b.get("footnote")},b.default_.footnote));if(""!=b.get("title.text")){var j=""!=b.get("subtitle.text"),c=j?b.get("title.height")+b.get("subtitle.height"):b.get("title.height"),f=b.push("t_originy",f+c);b.push("title.originx",e);b.push("title.originy",b.get("padding_top"));b.push("title.width",h);b.title=new a.Text(b.get("title"),b);b.oneways.push(b.title);j&&(b.push("subtitle.originx",e),b.push("subtitle.originy",b.get("title.originy")+b.get("title.height")),b.push("subtitle.width",h),b.subtitle=new a.Text(b.get("subtitle"),b),b.oneways.push(b.subtitle))}""!=b.get("footnote.text")&&(j=b.get("footnote.height"),c+=j,b.push("b_originy",b.get("b_originy")-j),b.push("footnote.originx",e),b.push("footnote.originy",b.get("b_originy")),b.push("footnote.width",h),b.footnote=new a.Text(b.get("footnote"),b),b.oneways.push(b.footnote));c=b.push("client_height",b.get(b.H)-b.get("vpadding")-c);b.push("minDistance",s(h,c));b.push("maxDistance",t(h,c));b.push("minstr",h<c?b.W:b.H);b.push("centerx",e+h/2);b.push("centery",f+c/2);a.applyIf(b.get("sub_option"),a.clone("shadow,shadow_color,shadow_blur,shadow_offsetx,shadow_offsety,tip".split(","),b.options,!0));b.get("legend.enable")&&(b.legend=new a.Legend(a.apply({maxwidth:h,data:b.data},b.get("legend")),b),b.components.push(b.legend));b.push("sub_option.tip.wrap",b.push("tip.wrap",b.shell))}})})(c);c.Legend=c.extend(c.Component,{configure:function(){c.Legend.superclass.configure.apply(this,arguments);this.type="legend";this.set({data:void 0,width:"auto",column:1,row:"max",maxwidth:0,line_height:16,sign:"square",sign_size:12,sign_space:5,legend_space:5,z_index:1009,text_with_sign_color:!1,align:"right",valign:"middle"});this.atomic=!0;this.registerEvent("parse","drawRaw","drawCell")},isEventValid:function(a,b){var c={valid:!1};a.x>this.x&&a.x<b.x+b.width&&a.y>b.y&&a.y<b.y+b.height&&b.data.each(function(h,f){a.x>h.x&&a.x<h.x+h.width_+b.get("signwidth")&&a.y>h.y&&a.y<h.y+b.get("line_height")&&(c={valid:!0,index:f,target:h})},b);return c},drawCell:function(a,b,c,h,f){var i=this.get("sign_size"),l=this.getPlugin("sign");if(!l||!l.call(this,this.T,f,a+i/2,b+i/2,i,h))-1!=f.indexOf("bar")&&this.T.box(a,b+5*i/12,i,i/6,0,h),"round"==f?this.T.round(a+i/2,b+i/2,i/2,h):"round-bar"==f?this.T.round(a+i/2,b+i/2,i/4,h):"square-bar"==f?this.T.box(a+i/4,b+i/4,i/2,i/2,0,h):"bar"!=f&&this.T.box(a,b,i,i,0,h);f=this.get("color");this.get("text_with_sign_color")&&(f=h);this.T.fillText(c,a+this.get("signwidth"),b+i/2,this.get("textwidth"),f)},drawRow:function(a,b,c){for(var h,f=0;f<this.get("column");f++)h=this.data[a],a<this.data.length&&(this.fireEvent(this,"drawCell",[this,h]),this.drawCell(b,c,h.text,h.color,h.sign||this.get("sign")),h.x=b,h.y=c),b+=this.columnwidth[f]+this.get("signwidth")+this.get("legend_space"),a++},doDraw:function(a){a.T.box(a.x,a.y,a.width,a.height,a.get("border"),a.get("f_color"),!1,a.get("shadow"));a.T.textStyle(a.L,"middle",c.getFont(a.get("fontweight"),a.get("fontsize"),a.get("font")));for(var b=a.x+a.get("padding_left"),e=a.y+a.get("padding_top"),h=a.get("column"),f=a.get("row"),i=0;i<f;i++)a.drawRow(i*h,b,e),e+=a.get("line_height"),a.fireEvent(a,"drawRaw",[a,i*h])},doConfig:function(){c.Legend.superclass.doConfig.call(this);var a=this._(),b=a.get("sign_size"),e=a.container;a.T.textFont(a.get("fontStyle"));a.push("signwidth",b+a.get("sign_space"));a.get("line_height")<b&&a.push("line_height",b+b/5);a.get("align")==a.C&&"middle"==a.get("valign")&&a.push("valign",a.O);e.get("align")==a.L&&"middle"==a.get("valign")&&a.push("align",a.R);var b=0,h=w=a.get(a.W),f=0,i="auto"==w,l=c.isNumber(a.get("column")),p=c.isNumber(a.get("row")),t=a.data.length;!l&&!p&&(l=1);l&&!p&&a.push("row",Math.ceil(t/a.get("column")));!l&&p&&a.push("column",Math.ceil(t/a.get("row")));l=a.get("column");p=a.get("row");t>p*l&&(p+=Math.ceil((t-p*l)/l),a.push("row",p));a.columnwidth=Array(l);i&&(h=0);a.data.each(function(b,e){c.merge(b,a.fireEvent(a,"parse",[a,b.name,e]));b.text=b.text||b.name;b.width_=a.T.measureText(b.text)},a);for(var s=0;s<l;s++){f=0;for(b=s;b<t;)f=Math.max(f,a.data[b].width_),b+=l;a.columnwidth[s]=f;h+=f}i&&(w=a.push(a.W,h+a.get("hpadding")+a.get("signwidth")*l+(l-1)*a.get("legend_space")));w>a.get("maxwidth")&&(w=a.push(a.W,a.get("maxwidth")));a.push("textwidth",w-a.get("hpadding")-a.get("signwidth"));a.width=w;a.height=b=a.push(a.H,p*a.get("line_height")+a.get("vpadding"));a.y=a.get("valign")==a.O?e.get("t_originy"):a.get("valign")==a.B?e.get("b_originy")-b:e.get("centery")-b/2;a.x=a.get("align")==a.L?e.get("l_originx"):a.get("align")==a.C?e.get("centerx")-w/2:e.get("r_originx")-w;a.x=a.push(a.X,a.x+a.get("offsetx"));a.y=a.push(a.Y,a.y+a.get("offsety"))}});c.CrossHair=c.extend(c.Html,{configure:function(){c.CrossHair.superclass.configure.apply(this,arguments);this.type="crosshair";this.set({top:0,left:0,hcross:!0,vcross:!0,invokeOffset:null,line_width:1,line_color:"#1A1A1A",delay:200})},follow:function(a,b){if(this.get("invokeOffset")){var c=this.get("invokeOffset")(a,b);c&&c.hit&&this.position(c.top-this.top,c.left-this.left);return!1}this.position(a.y-this.top-1,a.x-this.left-1);return!0},position:function(a,b){this.horizontal.style.top=a-this.size+"px";this.vertical.style.left=b-this.size+"px"},beforeshow:function(a,b){this.follow(a,b)||this.position(-99,-99)},doCreate:function(a,b,e){var h=document.createElement("div");h.style.width=c.toPixel(b);h.style.height=c.toPixel(e);h.style.backgroundColor=a.get("line_color");h.style.position="absolute";a.dom.appendChild(h);return h},initialize:function(){c.CrossHair.superclass.initialize.call(this);var a=this._(),b=c.toPixel(a.get("line_width"));a.top=c.fixPixel(a.get(a.O));a.left=c.fixPixel(a.get(a.L));a.dom=document.createElement("div");a.dom.style.zIndex=a.get("index");a.dom.style.position="absolute";a.dom.style.width=c.toPixel(0);a.dom.style.height=c.toPixel(0);a.dom.style.top=c.toPixel(a.get(a.O));a.dom.style.left=c.toPixel(a.get(a.L));a.css("visibility","hidden");a.horizontal=a.doCreate(a,a.get("hcross")?c.toPixel(a.get(a.W)):"0px",b);a.vertical=a.doCreate(a,b,a.get("vcross")?c.toPixel(a.get(a.H)):"0px");a.size=a.get("line_width")/2;a.get("shadow")&&(a.dom.style.boxShadow=a.get("shadowStyle"));a.wrap.appendChild(a.dom);a.T.on("mouseover",function(b,c,f){a.show(c,f)}).on("mouseout",function(b,c,f){a.hidden(c,f)}).on("mousemove",function(b,c,f){a.follow(c,f)})}});c.Tip=c.extend(c.Html,{configure:function(){c.Tip.superclass.configure.apply(this,arguments);this.type="tip";this.set({name:"",value:"",text:"",showType:"follow",invokeOffset:null,fade_duration:300,move_duration:100,timing_function:"ease-out",invokeOffsetDynamic:!1,style:"textAlign:left;padding:4px 5px;cursor:pointer;backgroundColor:rgba(239,239,239,.85);fontSize:12px;color:black;",border:{enable:!0,radius:5},delay:200});this.registerEvent("parseText")},position:function(a,b){this.style.top=(0>a?0:a)+"px";this.style.left=(0>b?0:b)+"px"},follow:function(a,b){var e=this._();e.style.width="";if(e.get("invokeOffsetDynamic")){if(b.hit){(c.isString(b.text)||c.isNumber(b.text))&&e.text(b.name,b.value,b.text,b.i,e);var h=e.get("invokeOffset")(e.width(),e.height(),b);e.position(h.top,h.left)}}else"follow"!=e.get("showType")&&c.isFunction(e.get("invokeOffset"))?(h=e.get("invokeOffset")(e.width(),e.height(),b),e.position(h.top,h.left)):e.position(a.y-1.1*e.height()-2,a.x+2)},text:function(a,b,c,h,f){f.dom.innerHTML=f.fireString(f,"parseText",[f,a,b,c,h],c)},beforeshow:function(a,b){this.follow(a,b)},hidden:function(){this.get("animation")?this.css("opacity",0):this.css("visibility","hidden")},initialize:function(){c.Tip.superclass.initialize.call(this);var a=this._();a.css("position","absolute");a.text(a.get("name"),a.get("value"),a.get("text"),0,a);a.style=a.dom.style;a.hidden();if(a.get("animation")){var b=a.get("move_duration")/1E3+"s "+a.get("timing_function")+" 0s";a.transition("opacity "+a.get("fade_duration")/1E3+"s "+a.get("timing_function")+" 0s");a.transition("top "+b);a.transition("left "+b);a.onTransitionEnd(function(){0==a.css("opacity")&&a.css("visibility","hidden")},!1)}a.wrap.appendChild(a.dom);a.T.on("mouseover",function(b,c,f){a.show(c,f)}).on("mouseout",function(b,c){a.hidden(c)});if("follow"==a.get("showType"))a.T.on("mousemove",function(b,c,f){a.T.variable.event.mouseover&&setTimeout(function(){a.T.variable.event.mouseover&&a.follow(c,f)},a.get("delay"))})}});c.Text=c.extend(c.Component,{configure:function(){c.Text.superclass.configure.apply(this,arguments);this.type="text";this.set({text:"",textAlign:"center",background_color:0,textBaseline:"top",border:{enable:!1},width:0,height:0,padding:0,writingmode:"lr",line_height:16,rotate:0});this.registerEvent()},doDraw:function(a){a.get("box_feature")&&a.T.box(a.x,a.y,a.get(a.W),a.get(a.H),a.get("border"),a.get("f_color"));""!=a.get("text")&&a.T.text(a.get("text"),a.get("textx"),a.get("texty"),a.get(a.W),a.get("color"),a.get("textAlign"),a.get("textBaseline"),a.get("fontStyle"),a.get("writingmode"),a.get("line_height"),a.get("shadow"),a.get("rotate"))},isEventValid:function(){return{valid:!1}},doLayout:function(a,b,c,h){h.x=h.push(h.X,h.x+a);h.y=h.push(h.Y,h.y+b);h.push("textx",h.get("textx")+a);h.push("texty",h.get("texty")+b)},doConfig:function(){c.Text.superclass.doConfig.call(this);var a=this._(),b=a.x,e=a.y+a.get("padding_top"),h=a.get(a.W),f=a.get(a.H),i=a.get("textAlign"),b=b+(i==a.C?h/2:i==a.R?h-a.get("padding_right"):a.get("padding_left"));f&&(e+=f/2,a.push("textBaseline","middle"));a.push("textx",b);a.push("texty",e);a.push("box_feature",h&&f);a.applyGradient()}})})(iChart);