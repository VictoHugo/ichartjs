/**
 * ichartjs Library v1.0 http://www.ichartjs.com/
 * 
 * @author wanghe
 * @Copyright 2013 wanghetommy@gmail.com Licensed under the Apache License, Version 2.0 (the "License"); 
 * you may not use this file except in compliance with the License. 
 * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0
 */
;(function(c){var a=navigator.userAgent.toLowerCase(),b=Object.prototype.toString,e=/opera/.test(a),g=/\bchrome\b/.test(a),f=/webkit/.test(a),i=!g&&/safari/.test(a),j=!e&&/msie/.test(a),o=!!document.createElement("canvas").getContext,t=!f&&/gecko/.test(a),s=/ipod|ipad|iphone|android/gi.test(a),q=function(a,b,e,c){return e*a/c+b},u={easeIn:function(a,b,e,c){return e*(a/=c)*a*a+b},easeOut:function(a,b,e,c){return e*((a=a/c-1)*a*a+1)+b},easeInOut:function(a,b,e,c){return 1>(a/=c/2)?e/2*a*a*a+b:e/2*((a-=2)*a*a+2)+b}},n=function(a){var c=!1,y=!1,w=[],d=function(){if(document.addEventListener)return function(){document.removeEventListener("DOMContentLoaded",d,!1);h()};if(document.attachEvent)return function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",d),h())}}(),m=function(){if(!c){try{document.documentElement.doScroll("left")}catch(a){setTimeout(m,1);return}h()}},h=function(){if(!c){c=!0;for(var a=0;a<w.length;a++)w[a].call(document);w=[]}},p=function(){if(!y){y=!0;if("complete"===document.readyState)return setTimeout(h,1);if(document.addEventListener)document.addEventListener("DOMContentLoaded",d,!1),a.addEventListener("load",h,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",d);a.attachEvent("onload",h);var H=!1;try{H=null==a.frameElement}catch(b){}document.documentElement.doScroll&&H&&m()}}},x=function(a){p();c?a.call(document,l):w.push(function(){return a.call(this)})},l=function(a){if(!a||a.nodeType)return a;if("string"===typeof a)return-1!=a.indexOf("#")&&(a=a.substring(1)),document.getElementById(a);"function"===typeof a&&x(a)};l.apply=function(a,d){if(a&&d&&"object"==typeof d)for(var m in d)"undefined"!=typeof d[m]&&(a[m]=d[m]);if(!d&&a){var b={};for(m in a)b[m]=a[m];return b}return a};l.apply(l,{version:"1.0",email:"taylor@ichartjs.com",isEmpty:function(a,d){return null===a||void 0===a||l.isArray(a)&&!a.length||(!d?""===a:!1)},isArray:function(a){return"[object Array]"===b.apply(a)},isDate:function(a){return"[object Date]"===b.apply(a)},isObject:function(a){return!!a&&"[object Object]"===b.apply(a)},isFunction:function(a){return"[object Function]"===b.apply(a)},isNumber:function(a){return"number"===typeof a&&isFinite(a)},isString:function(a){return"string"===typeof a},isBoolean:function(a){return"boolean"===typeof a},isFalse:function(a){return"boolean"===typeof a&&!a},isElement:function(a){return a?!!a.tagName:!1},isDefined:function(a){return"undefined"!==typeof a}});l.applyIf=function(a,d){if(a&&l.isObject(d))for(var m in d)l.isDefined(d[m])&&!l.isDefined(a[m])&&(a[m]=d[m]);return!d&&a?l.apply(a):a};l.merge=function(a,d,m){if(a&&l.isObject(d)){for(var b in d)l.isDefined(d[b])&&(l.isObject(d[b])?l.isObject(a[b])?l.merge(a[b],d[b]):a[b]=l.clone(d[b],!0):a[b]=d[b]);if(l.isObject(m))return l.merge(a,m)}return a};l.clone=function(a,d,m){var b={};if(l.isArray(a)&&l.isObject(d))for(var h=0;h<a.length;h++)b[a[h]]=m&&l.isObject(d[a[h]])?l.clone(d[a[h]],m):d[a[h]];else if(l.isObject(a))for(h in a)b[h]=d&&l.isObject(a[h])&&!(a[h]instanceof l.Painter)?l.clone(a[h],d):a[h];return b};l.override=function(a,d){if(a&&d){var m=a.prototype;l.apply(m,d);l.isIE&&d.hasOwnProperty("toString")&&(m.toString=d.toString)}};l.extend=function(){var a=function(a){for(var d in a)this[d]=a[d]},d=Object.prototype.constructor;return function(m,b){var h=function(){m.apply(this,arguments)},p=function(){},x=m.prototype;p.prototype=x;p=h.prototype=new p;p.constructor=h;h.superclass=x;x.constructor==d&&(x.constructor=m);h.override=function(a){l.override(h,a)};p.superclass=p.supr=function(){return x};p.override=a;l.override(h,b);h.extend=function(a){return l.extend(h,a)};h.plugin_={};h.plugin=function(a,d){l.isString(a)&&l.isFunction(d)&&(h.plugin_[a]=d)};return h}}();var B=Math.sin,I=Math.cos,R=Math.atan,k=Math.sqrt,D=Math.abs,r=Math.PI,C=2*r,J=Math.ceil,E=Math.round,F=Math.floor,K=Math.max,L=Math.min,A=parseFloat,M=function(a,d){if(0==a)return a;var m=D(a),b=0.1;if(1<m){for(;1<m;)m/=10,b*=10;return F(a/b+d)*b}for(b=1;1>m;)m*=10,b/=10;return E(a/b+d)*b},N={navy:"rgb(0,0,128)",olive:"rgb(128,128,0)",orange:"rgb(255,165,0)",silver:"rgb(192,192,192)",white:"rgb(255,255,255)",gold:"rgb(255,215,0)",lime:"rgb(0,255,0)",fuchsia:"rgb(255,0,255)",aqua:"rgb(0,255,255)",green:"rgb(0,128,0)",gray:"rgb(80,80,80)",red:"rgb(255,0,0)",blue:"rgb(0,0,255)",pink:"rgb(255,192,203)",purple:"rgb(128,0,128)",yellow:"rgb(255,255,0)",maroon:"rgb(128,0,0)",black:"rgb(0,0,0)",azure:"rgb(240,255,255)",beige:"rgb(245,245,220)",brown:"rgb(165,42,42)",cyan:"rgb(0,255,255)",darkblue:"rgb(0,0,139)",darkcyan:"rgb(0,139,139)",darkgrey:"rgb(169,169,169)",darkgreen:"rgb(0,100,0)",darkkhaki:"rgb(189,183,107)",darkmagenta:"rgb(139,0,139)",darkolivegreen:"rgb(85,107,47)",darkorange:"rgb(255,140,0)",darkorchid:"rgb(153,50,204)",darkred:"rgb(139,0,0)",darksalmon:"rgb(233,150,122)",darkviolet:"rgb(148,0,211)",indigo:"rgb(75,0,130)",khaki:"rgb(240,230,140)",lightblue:"rgb(173,216,230)",lightcyan:"rgb(224,255,255)",lightgreen:"rgb(144,238,144)",lightgrey:"rgb(211,211,211)",lightpink:"rgb(255,182,193)",lightyellow:"rgb(255,255,224)",magenta:"rgb(255,0,255)",violet:"rgb(128,0,128)"},O=function(a){var d=/rgb\((\w*),(\w*),(\w*)\)/.exec(a);if(d)return[d[1],d[2],d[3]];if(d=/rgba\((\w*),(\w*),(\w*),(.*)\)/.exec(a))return[d[1],d[2],d[3],d[4]];throw Error("invalid colors value '"+a+"'");},G=function(a){if(!a)return a;a=a.replace(/\s/g,"").toLowerCase();if(/^rgb\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3}\)$/.exec(a)||/^rgba\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3},(0(\.[0-9])?|1(\.0)?)\)$/.exec(a))return a;if(/^#(([a-fA-F0-9]{6,7})|([a-fA-F0-9]{3}))$/.exec(a))return a=a.replace(/#/g,"").replace(/^(\w)(\w)(\w)$/,"$1$1$2$2$3$3"),(7==a.length?"rgba(":"rgb(")+parseInt(a.substring(0,2),16)+","+parseInt(a.substring(2,4),16)+","+parseInt(a.substring(4,6),16)+(7==a.length?",0."+a.substring(6,7)+")":")");if(N[a])return N[a];throw Error("invalid colors value '"+a+"'");},P=function(a,d){d=d||0.14;return 0.5<a?d-(1-a)/10:0.1<a?d-0.16+a/5:a>d?d:a/2},Q=function(a,d,m,b){if(!d)return d;var d=O(G(d)),h;h=d;var p=void 0,x=void 0;l.isArray(h)&&(p=h[1],x=h[2],h=h[0]);h/=255;var p=p/255,x=x/255,e=K(K(h,p),x),c=L(L(h,p),x),c=e-c;if(0==c)h=[0,0,e];else{var k;h==e?k=(p-x)/c:p==e?k=(x-h)/c+2:x==e&&(k=(h-p)/c+4);k*=60;0>k&&(k+=360);h=[k,c/e,e]}h[1]-=0!=b?b||0.05:b;a?(h[2]-=P(h[2],m),h[1]=l.upTo(h[1],1),h[2]=l.lowTo(h[2],0)):(h[2]+=P(1-h[2],m),h[1]=l.lowTo(h[1],0),h[2]=l.upTo(h[2],1));b=d[3];a=d=void 0;l.isArray(h)&&(a=b,b=h[1],d=h[2],h=h[0]);var g,B,f,m=F(h/60)%6,x=h/60-m;h=d*(1-b);p=d*(1-b*x);b=d*(1-b*(1-x));switch(m){case 0:g=d;B=b;f=h;break;case 1:g=p;B=d;f=h;break;case 2:g=h;B=d;f=b;break;case 3:g=h;B=p;f=d;break;case 4:g=b;B=h;f=d;break;case 5:g=d,B=h,f=p}return"rgb"+(a?"a":"")+"("+E(255*g)+","+E(255*B)+","+E(255*f)+(a?","+a+")":")")};l.apply(l,{getFont:function(a,d,b){return a+" "+d+"px "+b},getDoc:function(){return a.contentWindow?a.contentWindow.document:a.contentDocument?a.contentDocument:a.document},DefineAbstract:function(a,d){if(!d[a])throw Error("Cannot instantiate the type '"+d.type+"'.you must implements it with method '"+a+"'.");},getAA:function(a){return"linear"==a?q:"easeInOut"==a||"easeIn"==a||"easeOut"==a?u[a]:q},noConflict:function(){return n},plugin:function(a,d,b){l.isFunction(a)&&a.plugin(d,b)},parsePadding:function(a,d){a=a||0;if(l.isNumber(a))return[a,a,a,a];if(l.isArray(a))return a;d=d||0;a=a.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g,/\s/).replace(/\s/g,",").split(",");1==a.length?a[0]=a[1]=a[2]=a[3]=A(a[0])||d:2==a.length?(a[0]=a[2]=A(a[0])||d,a[1]=a[3]=A(a[1])||d):3==a.length?(a[0]=A(a[0])||d,a[1]=a[3]=A(a[1])||d,a[2]=A(a[2])||d):(a[0]=A(a[0])||d,a[1]=A(a[1])||d,a[2]=A(a[2])||d,a[3]=A(a[3])||d);return a},distanceP2P:function(a,d,b,m){return k((b-a)*(b-a)+(m-d)*(m-d))},atan2Radian:function(a,d,b,m){if(a==b)return m>d?r/2:3*r/2;if(d==m)return b>a?0:r;var h=l.quadrant(a,d,b,m),a=R(D((d-m)/(a-b)));return h?(3==h?C:r)+(2==h?a:-a):a},angle2Radian:function(a){return a*r/180},radian2Angle:function(a){return 180*a/r},quadrant:function(a,d,b,m){return a<b?d<m?0:3:d<m?1:2},toPI2:function(a){for(;0>a;)a+=C;return a%C},quadrantd:function(a){if(0==a)return 0;if(0==a%C)return 3;for(;0>a;)a+=C;return J(2*(a%C)/r)-1},upTo:function(a,d){return d>a?a:d},lowTo:function(a,d){return d<a?a:d},between:function(a,d,b){return b>d?d:b<a?a:b},inRange:function(a,d,b){return d>b&&a<b},angleInRange:function(a,d,b){b-=a;b=0>b?b+C:b;b%=C;return d-a>b},angleZInRange:function(a,d,b){return d>a?d>b&&a<b:b>a||b<d},inRangeClosed:function(a,d,b){return d>=b&&a<=b},inEllipse:function(a,d,b,m){return 1>=a*a/b/b+d*d/m/m},p2Point:function(a,d,b,m){return{x:a+I(b)*m,y:d+B(b)*m}},toRgb:G,toRgba:function(a,d){var b=O(G(a));return"rgba("+b[0]+","+b[1]+","+b[2]+","+d+")"},vectorP2P:function(a,d,b){b||(d=l.angle2Radian(d),a=l.angle2Radian(a));d=B(d);return{x:d*B(a),y:d*I(a)}},iGather:function(a){return(a||"ichartjs")+"-"+J(1E4*Math.random())+(new Date).getTime().toString().substring(4)},toPercent:function(a,d){return(100*a).toFixed(d)+"%"},parsePercent:function(a,d){return l.isString(a)&&(a=a.match(/(.*)%/))?d?F(A(a[1])*d/100):a[1]/100:a},parseFloat:function(a,d){if(!l.isNumber(a)&&(a=A(a),!l.isNumber(a)))throw Error("["+d+"]="+a+"is not a valid number.");return a},ceil:function(a){return M(a,1)},floor:function(a){return M(a,-1)},_2D:"2d",_3D:"3d",light:function(a,d,b){return Q(!1,a,d,b)},dark:function(a,d,b){return Q(!0,a,d,b)},fixPixel:function(a){return l.isNumber(a)?a:A(a.replace("px",""))||0},toPixel:function(a){return l.isNumber(a)?a+"px":l.fixPixel(a)+"px"},emptyFn:function(){return!0},supportCanvas:o,isOpera:e,isWebKit:f,isChrome:g,isSafari:i,isIE:j,isGecko:t,isMobile:s,touch:"ontouchend"in document,FRAME:s?30:60});l.Assert={gt:function(a,d,b){if(!l.isNumber(a)&&a>=d)throw Error(b+" required Number gt "+d+",given:"+a);},isNumber:function(a,d){if(!l.isNumber(a))throw Error(d+" required Number,given:"+a);},isArray:function(a,d){if(!l.isArray(a))throw Error(d+" required Array,given:"+a);},isTrue:function(a,d){if(!0!==a)throw Error(d);}};l.requestAnimFrame=function(){var d=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(d){a.setTimeout(d,1E3/60)};return function(a){d(a)}}();l.Event={addEvent:function(a,d,b,m){a.addEventListener?a.addEventListener(d,b,m):a.attachEvent?a.attachEvent("on"+d,b):a["on"+d]=b},fix:function(d){"undefined"==typeof d&&(d=a.event);var b={target:d.target,pageX:d.pageX,pageY:d.pageY,offsetX:d.offsetX,offsetY:d.offsetY,stopPropagation:!1,event:d};if("undefined"==typeof d.offsetX){d.target||(b.target=d.srcElement||document);d.targetTouches&&(b.pageX=d.targetTouches[0].pageX,b.pageY=d.targetTouches[0].pageY);if(null==b.pageX&&null!=d.clientX){var m=document.documentElement,h=document.body;b.pageX=d.clientX+(m&&m.scrollLeft||h&&h.scrollLeft||0)-(m&&m.clientLeft||h&&h.clientLeft||0);b.pageY=d.clientY+(m&&m.scrollTop||h&&h.scrollTop||0)-(m&&m.clientTop||h&&h.clientTop||0)}for(var h=m=0,p=d.target;p!=document.body&&p;)m+=p.offsetLeft,h+=p.offsetTop,p=p.offsetParent;b.offsetX=b.pageX-m;b.offsetY=b.pageY-h}b.x=b.offsetX;b.y=b.offsetY;d.stopPropagation||(d.stopPropagation=function(){a.event.cancelBubble=true});return b}};return l}(c);Array.prototype.each=function(a,b){for(var e=this.length,c,d=0;d<e&&!(c=b?a.call(b,this[d],d):a(this[d],d),"boolean"===typeof c&&!c);d++);return this};Array.prototype.eachAll=function(a,b){this.each(function(e,c){return n.isArray(e)?e.eachAll(a,b):b?a.call(b,e,c):a(e,c)},b)};Array.prototype.sor=function(a){for(var b=this.length-1,e,c=0;c<b;c++)for(var d=b;d>c;d--)if(a?!a(this[d],this[d-1]):this[d]<this[d-1])e=this[d],this[d]=this[d-1],this[d-1]=e};c.iChart=n;c.$||(c.$=c.iChart)})(window);(function(c){c.Element=function(a){var b=this._();b.type="element";c.DefineAbstract("configure",b);c.DefineAbstract("afterConfiguration",b);b.options={};b.set({id:"",border:{enable:!1,color:"#BCBCBC",style:"solid",width:1,radius:0},shadow:!1,shadow_color:"#666666",shadow_blur:4,shadow_offsetx:0,shadow_offsety:0});b.W="width";b.H="height";b.O="top";b.B="bottom";b.L="left";b.R="right";b.C="center";b.X="originx";b.Y="originy";b.variable={};b.events={mouseup:[],touchstart:[],touchmove:[],touchend:[],mousedown:[],dblclick:[]};this.registerEvent("initialize");b.initialization=!1;b.configure.apply(b,Array.prototype.slice.call(arguments,1));b.default_=c.clone(b.options,!0);b.set(a);b.afterConfiguration()};c.Element.prototype={_:function(){return this},afterConfiguration:function(){if(c.isObject(this.get("listeners")))for(var a in this.get("listeners"))this.on(a,this.get("listeners")[a]);this.initialize();this.fireEvent(this,"initialize",[this])},registerEvent:function(){for(var a=0;a<arguments.length;a++)this.events[arguments[a]]=[]},fireString:function(a,b,e,g){a=this.fireEvent(a,b,e);return c.isString(a)?a:!0!==a&&c.isDefined(a)?a.toString():g},fireEvent:function(a,b,e){var c=this.events[b].length;if(1==c)return this.events[b][0].apply(a,e);for(var f=!0,i=0;i<c;i++)this.events[b][i].apply(a,e)||(f=!1);return f},on:function(a,b){if(c.isString(a)){if(!this.events[a])throw Error("["+this.type+"] invalid event:'"+a+"'");this.events[a].push(b)}else c.isArray(a)&&a.each(function(a){this.on(a,b)},this);return this},getPlugin:function(a){return this.constructor.plugin_[a]},set:function(a){c.isObject(a)&&c.merge(this.options,a)},pushIf:function(a,b){return!c.isDefined(this.get(a))?this.push(a,b):this.get(a)},push:function(a,b){for(var e=a.split("."),c=e.length-1,f=this.options,i=0;i<c;i++)f[e[i]]||(f[e[i]]={}),f=f[e[i]];return f[e[c]]=b},get:function(a){for(var a=a.split("."),b=this.options[a[0]],e=1;e<a.length;e++){if(!b)return null;b=b[a[e]]}return b}};c.Html=c.extend(c.Element,{configure:function(a){this.type="html";this.T=a;c.DefineAbstract("beforeshow",this);this.set({animation:!0,width:0,height:0,style:"",index:999,offset_top:0,offset_left:0});this.transitions=""},initialize:function(){this.wrap=this.get("wrap");this.dom=document.createElement("div");this.get("shadow")&&this.css("boxShadow",this.get("shadow_offsetx")+"px "+this.get("shadow_offsety")+"px "+this.get("shadow_blur")+"px "+this.get("shadow_color"));this.get("border.enable")&&(this.css("border",this.get("border.width")+"px "+this.get("border.style")+" "+this.get("border.color")),this.css("borderRadius",this.get("border.radius")+"px"));this.css("zIndex",this.get("index"));this.applyStyle()},width:function(){return this.dom.offsetWidth},height:function(){return this.dom.offsetHeight},onTransitionEnd:function(a,b){var e="transitionend";c.isWebKit?e="webkitTransitionEnd":c.isOpera&&(e="oTransitionEnd");c.Event.addEvent(this.dom,e,a,b)},transition:function(a){this.transitions=""==this.transitions?a:this.transitions+","+a;c.isWebKit?this.css("WebkitTransition",this.transitions):c.isGecko?this.css("MozTransition",this.transitions):c.isOpera?this.css("OTransition",this.transitions):this.css("transition",this.transitions)},show:function(a,b){this.beforeshow(a,b);this.css("visibility","visible");this.get("animation")&&this.css("opacity",1)},hidden:function(){this.css("visibility","hidden")},getDom:function(){return this.dom},css:function(a,b){if(c.isString(a))if(c.isDefined(b))this.dom.style[a]=b;else return this.dom.style[a]},applyStyle:function(){for(var a=this.get("style").split(";"),b,e=0;e<a.length;e++)b=a[e].split(":"),1<b.length&&this.css(b[0],b[1])}});c.Painter=c.extend(c.Element,{configure:function(){this.type="painter";this.dimension=c._2D;c.DefineAbstract("commonDraw",this);c.DefineAbstract("initialize",this);this.set({strokeStyle:"gray",padding:10,color:"black",offsetx:0,offsety:0,background_color:"#FEFEFE",color_factor:0.15,style:"",border:{enable:!0},gradient:!1,gradient_mode:"LinearGradientUpDown",z_index:0,listeners:null,originx:0,originy:0});this.variable.event={mouseover:!1};this.registerEvent("click","mousemove","mouseover","mouseout","beforedraw","draw")},is3D:function(){return this.dimension==c._3D},applyGradient:function(a,b,e,c){var f=this._();f.get("gradient")&&(f.push("f_color",f.T.gradient(a||f.x||0,b||f.y||0,e||f.get(f.W),c||f.get(f.H),[f.get("dark_color"),f.get("light_color")],f.get("gradient_mode"))),f.push("light_color",f.T.gradient(a||f.x||0,b||f.y||0,e||f.get(f.W),c||f.get(f.H),[f.get("background_color"),f.get("light_color")],f.get("gradient_mode"))),f.push("f_color_",f.get("f_color")))},draw:function(a){if(!this.fireEvent(this,"beforedraw",[this,a]))return this;this.commonDraw(this,a);this.fireEvent(this,"draw",[this,a])},doConfig:function(){var a=this._(),b=c.parsePadding(a.get("padding")),e=a.get("border.enable"),e=e?c.parsePadding(a.get("border.width")):[0,0,0,0],g=c.toRgb(a.get("background_color")),f=a.get("color_factor"),i=a.get("gradient")?0:null;a.set({border_top:e[0],border_right:e[1],border_bottom:e[2],border_left:e[3],hborder:e[1]+e[3],vborder:e[0]+e[2],padding_top:b[0]+e[0],padding_right:b[1]+e[1],padding_bottom:b[2]+e[2],padding_left:b[3]+e[3],hpadding:b[1]+b[3]+e[1]+e[3],vpadding:b[0]+b[2]+e[0]+e[2]});a.get("shadow")&&a.push("shadow",{color:a.get("shadow_color"),blur:a.get("shadow_blur"),offsetx:a.get("shadow_offsetx"),offsety:a.get("shadow_offsety")});a.push("f_color",g);a.push("f_color_",g);a.push("light_color",c.light(g,f,i));a.push("dark_color",c.dark(g,0.8*f,i));a.push("light_color2",c.light(g,2*f,i));a.id=a.get("id");a.is3D()&&!a.get("xAngle_")&&(b=c.vectorP2P(a.get("xAngle"),a.get("yAngle")),a.push("xAngle_",b.x),a.push("yAngle_",b.y))}});c.Component=c.extend(c.Painter,{configure:function(a){c.Component.superclass.configure.apply(this,arguments);this.type="component";this.set({fontsize:12,font:"Verdana",fontweight:"normal",tip:{enable:!1,border:{width:2}}});this.proxy=this.atomic=!1;this.inject(a)},initialize:function(){c.DefineAbstract("isEventValid",this);c.DefineAbstract("doDraw",this);this.doConfig();this.initialization=!0},getDimension:function(){return{x:this.x,y:this.y,width:this.get("width"),height:this.get("height")}},doConfig:function(){c.Component.superclass.doConfig.call(this);var a=this._();a.x=a.push(a.X,a.get(a.X)+a.get("offsetx"));a.y=a.push(a.Y,a.get(a.Y)+a.get("offsety"));a.push("fontStyle",c.getFont(a.get("fontweight"),a.get("fontsize"),a.get("font")));a.data=a.get("data");a.get("tip.enable")&&(a.pushIf("tip.border.color",a.get("f_color")),c.isFunction(a.get("tip.invokeOffset"))||a.push("tip.invokeOffset",a.tipInvoke()))},isMouseOver:function(a){return this.isEventValid(a,this)},redraw:function(a){this.container.draw(a)},commonDraw:function(a){a.proxy||a.doDraw.call(a,a)},inject:function(a){a&&(this.container=a,this.target=this.T=a.T)}});c.Scale=c.extend(c.Component,{configure:function(){c.Scale.superclass.configure.apply(this,arguments);this.type="scale";this.set({position:"left",which:"h",basic_value:0,scale2grid:!0,distance:void 0,start_scale:0,end_scale:void 0,min_scale:void 0,max_scale:void 0,scale_space:void 0,scale_share:5,scale_enable:!0,scale_size:1,scale_width:4,scale_color:"#333333",scaleAlign:"center",labels:[],label:{},text_space:6,textAlign:"left",decimalsnum:0,join_style:"none",join_size:2});this.registerEvent("parseText")},isEventValid:function(){return{valid:!1}},doDraw:function(a){a.get("scale_enable")&&a.items.each(function(b){a.T.line(b.x0,b.y0,b.x1,b.y1,a.get("scale_size"),a.get("scale_color"),!1)});a.labels.each(function(a){a.draw()})},doLayout:function(a,b,e){e.get("scale_enable")&&e.items.each(function(e){e.x0+=a;e.y0+=b;e.x1+=a;e.y1+=b});e.labels.each(function(e){e.doLayout(a,b,0,e)})},doConfig:function(){c.Scale.superclass.doConfig.call(this);c.Assert.isNumber(this.get("distance"),"distance");var a=this._(),b=Math.abs,e=a.get("labels").length,g=a.get("min_scale"),f=a.get("max_scale"),i=a.get("scale_space"),j=a.get("end_scale"),o=a.get("start_scale");a.items=[];a.labels=[];a.number=0;if(0<e)a.number=e-1;else{c.Assert.isTrue(c.isNumber(f)||c.isNumber(j),"max_scale&end_scale");if(!c.isNumber(j)||j<f)j=a.push("end_scale",c.ceil(f));o>g&&(o=a.push("start_scale",c.floor(g)));i&&b(i)<b(j-o)&&a.push("scale_share",(j-o)/i);a.number=a.push("scale_share",b(a.get("scale_share")));if(!i||i>j-o)i=a.push("scale",(j-o)/a.get("scale_share"));parseInt(i)!=i&&0==a.get("decimalsnum")&&(b=i+"",b=b.substring(b.indexOf(".")+1),a.push("decimalsnum",b.length))}a.push("distanceOne",a.get("valid_distance")/a.number);var t,s,q,u=j=f=g=b=0,n=0;t=a.get("scale_width");s=t/2;q=a.get("scaleAlign");var z=a.get("position"),v=a.get("text_space"),y="",w=a.get("coo").get("axis.width");a.push("which",a.get("which").toLowerCase());a.isH="h"==a.get("which");a.isH?(q==a.O?j=-t:q==a.C?(j=-s,g=s):g=t,z==a.O?(n=-v-w[0],y=a.B):(n=v+w[2],y=a.O),z=a.C):(q==a.L?f=-t:q==a.C?(f=-s,b=s):b=t,y="middle",z==a.R)?(z=a.L,u=v+w[1]):(z=a.R,u=-v-w[3]);for(v=0;v<=a.number;v++)t=e?a.get("labels")[v]:(i*v+o).toFixed(a.get("decimalsnum")),s=a.isH?a.get("valid_x")+v*a.get("distanceOne"):a.x,q=a.isH?a.y:a.get("valid_y")+a.get("distance")-v*a.get("distanceOne"),a.items.push({x:s,y:q,x0:s+f,y0:q+j,x1:s+b,y1:q+g}),a.labels.push(new c.Text(c.applyIf(c.apply(a.get("label"),c.merge({text:t,x:s,y:q,originx:s+u,originy:q+n},a.fireEvent(a,"parseText",[t,s+u,q+n,v,a.number==v]))),{textAlign:z,textBaseline:y}),a))}});c.Coordinate={coordinate_:function(){var a=this._(),b=a.get("coordinate.scale"),e=a.get("scaleAlign"),g=!0;c.isObject(b)&&(b=[b]);c.isArray(b)?(b.each(function(a){if(a.position==e)return g=!1}),g&&(e=e==a.L?a.R:e==a.R?a.L:e==a.O?a.B:a.O,a.push("scaleAlign",e)),b.each(function(b){if(b.position==e){if(!b.start_scale)b.min_scale=a.get("minValue");if(!b.end_scale)b.max_scale=a.get("maxValue");return false}})):a.push("coordinate.scale",{position:e,scaleAlign:e,max_scale:a.get("maxValue"),min_scale:a.get("minValue")});a.is3D()&&(a.push("coordinate.xAngle_",a.get("xAngle_")),a.push("coordinate.yAngle_",a.get("yAngle_")),a.push("coordinate.zHeight",a.get("zHeight")*a.get("bottom_scale")));return new (c[a.is3D()?"Coordinate3D":"Coordinate2D"])(a.get("coordinate"),a)},coordinate:function(){var a=this._(),b=a.get("client_width"),e=a.get("client_height"),g=a.push("coordinate.width",c.parsePercent(a.get("coordinate.width"),b)),f=a.push("coordinate.height",c.parsePercent(a.get("coordinate.height"),e)),i=a.get("coordinate.valid_width"),j=a.get("coordinate.valid_height");if(!f||f>e)f=a.push("coordinate.height",Math.floor(0.8*e));if(!g||g>b)g=a.push("coordinate.width",Math.floor(0.8*b));i=a.push("coordinate.valid_width",c.parsePercent(i,g));j=a.push("coordinate.valid_height",c.parsePercent(j,f));a.is3D()&&(b=a.get("coordinate.pedestal_height"),e=a.get("coordinate.board_deep"),b=c.isNumber(b)?b:22,e=c.isNumber(e)?e:20,f=a.push("coordinate.height",f-b-e));a.get("align")==a.L?a.push(a.X,a.get("l_originx")):a.get("align")==a.R?a.push(a.X,a.get("r_originx")-g):a.push(a.X,a.get("centerx")-g/2);a.x=a.push(a.X,a.get(a.X)+a.get("offsetx"));a.y=a.push(a.Y,a.get("centery")-f/2+a.get("offsety"));(!i||i>g)&&a.push("coordinate.valid_width",g);(!j||j>f)&&a.push("coordinate.valid_height",f);a.push("coordinate.originx",a.x);a.push("coordinate.originy",a.y)}};c.Coordinate2D=c.extend(c.Component,{configure:function(){c.Coordinate2D.superclass.configure.apply(this,arguments);this.type="coordinate2d";this.set({sign_size:12,sign_space:5,scale:[],width:"80%",height:"80%",valid_width:"100%",valid_height:"100%",grid_line_width:1,grid_color:"#dbe1e1",gridHStyle:{},gridVStyle:{},gridlinesVisible:!0,scale2grid:!0,grids:void 0,ignoreOverlap:!0,ignoreEdge:!1,xlabel:"",ylabel:"",background_color:0,striped:!0,striped_direction:"v",striped_factor:0.01,crosshair:{enable:!1},width:void 0,height:void 0,z_index:-1,axis:{enable:!0,color:"#666666",width:1}});this.scale=[];this.gridlines=[]},getScale:function(a){for(var b=0;b<this.scale.length;b++){var e=this.scale[b];if(e.get("position")==a)return a=[e.get("basic_value"),e.get("start_scale"),e.get("end_scale"),e.get("end_scale")-e.get("start_scale"),0],a[4]=c.inRange(a[1],a[2]+1,a[0])||c.inRange(a[2]-1,a[1],a[0]),{range:a[4],basic:a[4]?(a[0]-a[1])/a[3]:0,start:a[4]?a[0]:a[1],end:a[2],distance:a[3]}}return{start:0,end:0,distance:0}},isEventValid:function(a,b){return{valid:a.x>b.x&&a.x<b.x+b.get(b.W)&&a.y<b.y+b.get(b.H)&&a.y>b.y}},doDraw:function(a){a.T.box(a.x,a.y,a.get(a.W),a.get(a.H),0,a.get("f_color"));if(a.get("striped")){var b,e,g=!1;a.get("axis.width");var f=c.dark(a.get("background_color"),a.get("striped_factor"),0)}var i="v"==a.get("striped_direction");a.gridlines.each(function(c){a.get("striped")&&(g&&(i?a.T.box(c.x1,c.y1+c.width,c.x2-c.x1,e-c.y1-c.width,0,f):a.T.box(b+c.width,c.y2,c.x1-b,c.y1-c.y2,0,f)),b=c.x1,e=c.y1,g=!g)}).each(function(b){b.overlap||(b.solid?a.T.line(b.x1,b.y1,b.x2,b.y2,b.width,b.color):a.T.dotted(b.x1,b.y1,b.x2,b.y2,b.width,b.color,b.size,b.fator))});a.T.box(a.x,a.y,a.get(a.W),a.get(a.H),a.get("axis"),!1,a.get("shadow"),!0);a.scale.each(function(a){a.draw()})},doConfig:function(){c.Coordinate2D.superclass.doConfig.call(this);var a=this._();c.Assert.isNumber(a.get(a.W),a.W);c.Assert.isNumber(a.get(a.H),a.H);a.atomic=!1;a.get("gradient")&&c.isString(a.get("f_color"))&&a.push("f_color",a.T.avgLinearGradient(a.x,a.y,a.x,a.y+a.get(a.H),[a.get("dark_color"),a.get("light_color")]));if(a.get("axis.enable")){var b=a.get("axis.width");c.isArray(b)||a.push("axis.width",[b,b,b,b])}else a.push("axis.width",[0,0,0,0]);a.get("crosshair.enable")&&(a.push("crosshair.wrap",a.container.shell),a.push("crosshair.height",a.get(a.H)),a.push("crosshair.width",a.get(a.W)),a.push("crosshair.top",a.y),a.push("crosshair.left",a.x),a.crosshair=new c.CrossHair(a.get("crosshair"),a));var e,g=(b=!(!a.get("gridlinesVisible")||!a.get("grids")))&&!!a.get("grids.horizontal"),f=b&&!!a.get("grids.vertical"),i=a.get(a.H),j=a.get(a.W),o=a.get("valid_width"),t=a.get("valid_height"),b=a.get("gridlinesVisible")&&a.get("scale2grid")&&!(g&&f),s=(j-o)/2,q=(i-t)/2,u=a.get("axis.width");a.push("x_start",a.x+(j-o)/2);a.push("x_end",a.x+(j+o)/2);a.push("y_start",a.y+(i-t)/2);a.push("y_end",a.y+(i+t)/2);c.isArray(a.get("scale"))||(c.isObject(a.get("scale"))?a.push("scale",[a.get("scale")]):a.push("scale",[]));a.get("scale").each(function(d){e=(e=d.position)||a.L;e=e.toLowerCase();d[a.X]=a.x;d.coo=a;d[a.Y]=a.y;d.valid_x=a.x+s;d.valid_y=a.y+q;d.position=e;if(e==a.O){d.which="h";d.distance=j;d.valid_distance=o}else if(e==a.R){d.which="v";d.distance=i;d.valid_distance=t;d[a.X]=d[a.X]+j;d.valid_x=d.valid_x+o}else if(e==a.B){d.which="h";d.distance=j;d.valid_distance=o;d[a.Y]=d[a.Y]+i;d.valid_y=d.valid_y+t}else{d.which="v";d.distance=i;d.valid_distance=t}a.scale.push(new c.Scale(d,a.container))},a);var n=a.push("ignoreOverlap",a.get("ignoreOverlap")&&a.get("axis.enable")||a.get("ignoreEdge"));if(n)var z=a.get("ignoreEdge")?function(d,b,m){return d=="v"?m==a.y||m==a.y+i:b==a.x||b==a.x+d}:function(d,b,m){return d=="v"?m==a.y&&u[0]>0||m==a.y+i&&u[2]>0:b==a.x&&u[3]>0||b==a.x+j&&u[1]>0};var v={solid:!0,size:10,fator:1,width:a.get("grid_line_width"),color:a.get("grid_color")},y=c.applyIf(a.get("gridHStyle"),v),w=c.applyIf(a.get("gridVStyle"),v);if(b){var d,m,h;a.scale.each(function(b){h=b.get("position");if(!c.isFalse(b.get("scale2grid"))&&!(g&&b.get("which")=="v"||f&&b.get("which")=="h")){d=m=0;h==a.O?m=i:h==a.R?d=-j:h==a.B?m=-i:d=j;b.items.each(function(h){n&&a.gridlines.push(c.applyIf({overlap:z.call(a,b.get("which"),h.x,h.y),x1:h.x,y1:h.y,x2:h.x+d,y2:h.y+m},b.isH?w:y))})}})}if(f){var p=a.get("grids.vertical");c.Assert.gt(p.value,0,"value");b=j/p.value;v=p.value;"given_value"==p.way&&(v=b,b=p.value,b=b>j?j:b);for(p=0;p<=v;p++)n&&a.gridlines.push(c.applyIf({overlap:z.call(a,"h",a.x+p*b,a.y),x1:a.x+p*b,y1:a.y,x2:a.x+p*b,y2:a.y+i,H:!1,width:w.width,color:w.color},w))}if(g){p=a.get("grids.horizontal");c.Assert.gt(p.value,0,"value");b=i/p.value;v=p.value;"given_value"==p.way&&(v=b,b=p.value,b=b>i?i:b);for(p=0;p<=v;p++)n&&a.gridlines.push(c.applyIf({overlap:z.call(a,"v",a.x,a.y+p*b),x1:a.x,y1:a.y+p*b,x2:a.x+j,y2:a.y+p*b,H:!0,width:y.width,color:y.color},y))}}});c.Coordinate3D=c.extend(c.Coordinate2D,{configure:function(){c.Coordinate3D.superclass.configure.apply(this,arguments);this.type="coordinate3d";this.dimension=c._3D;this.set({xAngle:60,yAngle:20,xAngle_:void 0,yAngle_:void 0,zHeight:0,pedestal_height:22,board_deep:20,left_board:!0,gradient:!0,color_factor:0.18,ignoreEdge:!0,striped:!1,grid_color:"#a4ad96",background_color:"#d6dbd2",shadow_offsetx:4,shadow_offsety:2,wall_style:[],axis:{enable:!1}})},doDraw:function(a){var b=a.get(a.W),c=a.get(a.H),g=a.get("xAngle_"),f=a.get("yAngle_"),i=a.get("zHeight"),j=a.get("z_offx"),o=a.get("z_offy");a.get("pedestal_height")&&a.T.cube3D(a.x,a.y+c+a.get("pedestal_height"),g,f,!1,b,a.get("pedestal_height"),3*i/2,a.get("axis.enable"),a.get("axis.width"),a.get("axis.color"),a.get("bottom_style"));a.get("board_deep")&&a.T.cube3D(a.x+j,a.y+c-o,g,f,!1,b,c,a.get("board_deep"),a.get("axis.enable"),a.get("axis.width"),a.get("axis.color"),a.get("board_style"));a.T.cube3D(a.x,a.y+c,g,f,!1,b,c,i,a.get("axis.enable"),a.get("axis.width"),a.get("axis.color"),a.get("wall_style"));a.gridlines.each(function(b){b.solid?(a.get("left_board")&&a.T.line(b.x1,b.y1,b.x1+j,b.y1-o,b.width,b.color),a.T.line(b.x1+j,b.y1-o,b.x2+j,b.y2-o,b.width,b.color)):(a.get("left_board")&&a.T.dotted(b.x1,b.y1,b.x1+j,b.y1-o,b.width,b.color,b.size,b.fator),a.T.dotted(b.x1+j,b.y1-o,b.x2+j,b.y2-o,b.width,b.color,b.size,b.fator))});a.scale.each(function(a){a.draw()})},doConfig:function(){c.Coordinate3D.superclass.doConfig.call(this);for(var a=this._(),b=a.get("wall_style"),e=a.get("background_color"),g=a.get(a.H),f=a.get(a.W),i=a.get("color_factor"),j=a.push("z_offx",a.get("xAngle_")*a.get("zHeight")),o=a.push("z_offy",a.get("yAngle_")*a.get("zHeight"));6>b.length;)b.push({color:e});a.get("left_board")||(b[2]=!1,a.scale.each(function(a){a.doLayout(j,-o,a)}));a.push("bottom_style",[{color:a.get("shadow_color"),shadow:a.get("shadow")},!1,!1,{color:b[3].color},!1,{color:b[3].color}]);a.push("board_style",[!1,!1,!1,{color:b[4].color},{color:b[5].color},!1]);a.get("gradient")&&(c.isString(b[0].color)&&(b[0].color=a.T.avgLinearGradient(a.x,a.y+g,a.x+f,a.y+g,[c.dark(b[0].color,i/2+0.06),c.dark(b[0].color,i/2+0.06)])),c.isString(b[1].color)&&(b[1].color=a.T.avgLinearGradient(a.x+j,a.y-o,a.x+j,a.y+g-o,[c.dark(b[1].color,i),c.light(b[1].color,i)])),c.isString(b[2].color)&&(b[2].color=a.T.avgLinearGradient(a.x,a.y,a.x,a.y+g,[c.light(b[2].color,i/3),c.dark(b[2].color,i)])),a.get("bottom_style")[5].color=a.T.avgLinearGradient(a.x,a.y+g,a.x,a.y+g+a.get("pedestal_height"),[c.light(b[3].color,i/2+0.06),c.dark(b[3].color,i/2,0)]));a.push("wall_style",[b[0],b[1],b[2]])}});c.Custom=c.extend(c.Component,{configure:function(){c.Custom.superclass.configure.apply(this,arguments);this.type="custom";this.set({drawFn:c.emptyFn,eventValid:void 0,animating_draw:!0});this.registerEvent()},doDraw:function(a){a.get("drawFn").call(a,a)},isEventValid:function(a,b){return c.isFunction(this.get("eventValid"))?this.get("eventValid").call(this,a,b):{valid:!1}},doConfig:function(){c.Custom.superclass.doConfig.call(this);this.A_draw=this.get("animating_draw");this.variable.animation={animating:!1,time:0,duration:0}}});(function(a){function b(d){"string"===typeof d&&(d=a(d));if(!d||!d.tagName||"canvas"!=d.tagName.toLowerCase())throw Error("there not a canvas element");this.canvas=d;this.c=this.canvas.getContext("2d");this.width=this.canvas.width;this.height=this.canvas.height}var c=Math.PI,g=c/90,f=g/2,i=Math.ceil,j=Math.floor,o=2*c,t=Math.max,s=Math.min,q=Math.sin,u=Math.cos,n=function(a,b){return 1==a?j(b)+0.5:Math.round(b)},z=function(a,b,h,c){var e=b.x,l=b.y,g=a[h-1],f=a[h+1],i,k;if(h<a.length-1){var a=g.y,h=f.y,j;i=(c*e+g.x)/(c+1);k=(c*l+a)/(c+1);f=(c*e+f.x)/(c+1);c=(c*l+h)/(c+1);j=(c-k)*(f-e)/(f-i)+l-c;k+=j;c+=j;k>a&&k>l?(k=t(a,l),c=2*l-k):k<a&&k<l&&(k=s(a,l),c=2*l-k);c>h&&c>l?(c=t(h,l),k=2*l-c):c<h&&c<l&&(c=s(h,l),k=2*l-c);b.rcx=f;b.rcy=c}return[g.rcx||g.x,g.rcy||g.y,i||e,k||l,e,l]},v=function(d){return a.isNumber(d)?d:a.parseFloat(d,d)},y=function(d){var b,h=0,c,e=0;this.total=0;init=!1;d.each(function(d){h=d.value;if(a.isArray(h)){var g=0;e=h.length>e?h.length:e;for(var f=0;f<h.length;f++)h[f]=v(h[f]),g+=h[f],init||(b=c=h[f],init=!0),b=t(h[f],b),c=s(h[f],c);d.total=g}else h=v(h),d.value=h,this.total+=h,init||(b=c=h,init=!0),b=t(h,b),c=s(h,c)},this);this.get("minValue")&&(c=s(this.get("minValue"),c));this.get("maxValue")&&(b=t(this.get("maxValue"),b));a.isArray(this.get("labels"))&&(e=this.get("labels").length>e?this.get("labels").length:e);this.push("maxItemSize",e);this.push("minValue",c);this.push("maxValue",b)},w=function(a){var b=this._(),h,c,e,l,g,f=!1;b.labels=b.get("labels");g=b.labels.length;if(0==g){g=a[0].value.length;for(var i=0;i<g;i++)b.labels.push("")}b.columns=[];for(i=b.total=0;i<g;i++){for(var k=[],j=0;j<a.length;j++)if(l=a[j],e=l.value[i])e=v(e,e),l.value[i]=e,b.total+=e,f||(h=c=e,f=!0),h=t(e,h),c=s(e,c),k.push({name:l.name,value:l.value[i],color:l.color});b.columns.push({name:b.labels[i],item:k})}b.push("minValue",c);b.push("maxValue",h)};b.prototype={getContext:function(){return this.c},css:function(d,b){if(a.isDefined(b))this.canvas.style[d]=b;else return this.canvas.style[d]},ellipse:function(a,b,h,c,e,l,f,i,j,k,D,r,n,o){r=!!r;n=!!n;this.save().gCo(o).strokeStyle(i,j,k).shadowOn(D).fillStyle(f).moveTo(a,b).beginPath();for(n&&this.moveTo(a,b);e<=l;)this.lineTo(a+h*u(e),b+(r?-c*q(e):c*q(e))),e+=g;return this.lineTo(a+h*u(l),b+(r?-c*q(l):c*q(l))).closePath().stroke(i).fill(f).restore()},arc:function(a,b,h,c,e,l,g,f,i,k,j,r,n,o){if(!h)return this;r=!!r;n=!!n&&!c;this.save().gCo(o).strokeStyle(f,i,k).fillStyle(g).beginPath();c?(this.moveTo(a+u(e)*(h-c),b+q(e)*(h-c)).lineTo(a+u(e)*h,b+q(e)*h),this.c.arc(a,b,h,e,l,r),this.lineTo(a+u(l)*(h-c),b+q(l)*(h-c)),this.c.arc(a,b,h-c,l,e,!r)):this.c.arc(a,b,h,e,l,r);n&&this.lineTo(a,b);this.closePath();f?this.shadowOn(j).stroke(f).shadowOff().fill(g):this.shadowOn(j).fill(g);return this.restore()},sector:function(a,b,h,c,e,l,g,f,i,k,j,r){j&&this.arc(a,b,h,c,e,l,g,0,0,0,j,r,!0,!0);return this.arc(a,b,h,c,e,l,g,f,i,k,!1,r,!0)},sector3D:function(){var d=function(d,b,h,m,p,k,f,i,j){var n=a.quadrantd(p),o=a.quadrantd(k);if(!(2==n||3==n)||!(2==o||3==o)){n=function(a,c){this.lineTo(d+h*u(a),b+(c||0)+(f?-m*q(a):m*q(a)))};p=f&&k>c&&p<c?c:p;k=!f&&p<c&&k>c?c:k;o=p;for(this.fillStyle(a.dark(j)).moveTo(d+h*u(p),b+(f?-m*q(p):m*q(p))).beginPath();o<=k;)n.call(this,o),o+=g;n.call(this,k);this.lineTo(d+h*u(k),b+i+(f?-m*q(k):m*q(k)));for(o=k;o>=p;)n.call(this,o,i),o-=g;n.call(this,p,i);this.lineTo(d+h*u(p),b+(f?-m*q(p):m*q(p))).closePath().fill(!0)}},b=function(a,d,b,h,c,m,e,p){b=a+b*u(e);h=d+m+(c?-h*q(e):h*q(e));this.moveTo(a,d).beginPath().fillStyle(p).lineTo(a,d+m).lineTo(b,h).lineTo(b,h-m).lineTo(a,d).closePath().fill(!0)},h=function(d,h,p,g,f,k,i,j,n){var o=i?f<c/2||f>1.5*c:f>c/2&&f<1.5*c,q=i?k>c/2&&k<1.5*c:k<c/2||k>1.5*c;if(!o&&!q)return!1;n=a.dark(n);o&&b.call(this,d,h,p,g,i,j,f,n);q&&b.call(this,d,h,p,g,i,j,k,n)},p=function(a,b,c,m,e,p,g,f,i,j,n,o,q){this.ellipse(a,b+g,c,m,e,p,f,i,j,n,o,q,!0);h.call(this,a,b,c,m,e,p,q,g,f);this.ellipse(a,b,c,m,e,p,f,i,j,n,!1,q,!0);d.call(this,a,b,c,m,e,p,q,g,f);return this};p.layerPaint=h;p.sPaint=d;p.layerDraw=b;return p}(),textStyle:function(a,b,h){return this.textAlign(a).textBaseline(b).textFont(h)},strokeStyle:function(a,b,h,c){if(a&&(b&&(this.c.lineWidth=b),h&&(this.c.strokeStyle=h),c))this.c.lineJoin=c;return this},globalAlpha:function(a){a&&(this.c.globalAlpha=a);return this},fillStyle:function(a){a&&(this.c.fillStyle=a);return this},arc2:function(a,b,h,c,e,l){h&&this.c.arc(a,b,h,c,e,l);return this},textAlign:function(a){a&&(this.c.textAlign=a);return this},textBaseline:function(a){a&&(this.c.textBaseline=a);return this},textFont:function(a){a&&(this.c.font=a);return this},shadowOn:function(a){a&&(this.c.shadowColor=a.color,this.c.shadowBlur=a.blur,this.c.shadowOffsetX=a.offsetx,this.c.shadowOffsetY=a.offsety);return this},shadowOff:function(){this.c.shadowColor="white";this.c.shadowBlur=this.c.shadowOffsetX=this.c.shadowOffsetY=0;return this},gradient:function(a,b,h,c,e,l){var l=l.toLowerCase(),g=a,f=b,i=!l.indexOf("linear"),l=l.substring(14);if(i){switch(l){case "updown":f+=c;break;case "downup":b+=c;break;case "leftright":g+=h;break;case "rightleft":a+=h;break;default:return e[0]}return this.avgLinearGradient(a,b,g,f,e)}a+=h/2;b+=c/2;"outin"==l&&e.reverse();return this.avgRadialGradient(a,b,0,a,b,0.8*(h>c?c:h),e)},avgLinearGradient:function(a,b,h,c,e){a=this.createLinearGradient(a,b,h,c);for(b=0;b<e.length;b++)a.addColorStop(b/(e.length-1),e[b]);return a},createLinearGradient:function(a,b,h,c){return this.c.createLinearGradient(a,b,h,c)},avgRadialGradient:function(a,b,h,c,e,l,g){a=this.createRadialGradient(a,b,h,c,e,l);for(b=0;b<g.length;b++)a.addColorStop(b/(g.length-1),g[b]);return a},createRadialGradient:function(a,b,h,c,e,l){return this.c.createRadialGradient(a,b,h,c,e,l)},text:function(a,b,h,c,e,l,g,f,i,k,j,n){return""==a?this:this.save().textStyle(l,g,f).fillText(a,b,h,c,e,i,k,j,n).restore()},fillText:function(a,b,h,c,e,l,g,i,j){a=a.toString();c=c||!1;g=g||16;a=a.split("tb"==(l||"lr")?"":"\n");1<a.length&&("middle"==this.c.textBaseline?h-=(a.length-1)*g/2:"bottom"==this.c.textBaseline&&(h-=(a.length-1)*g));this.save().fillStyle(e).translate(b,h).rotate(f*j).shadowOn(i);a.each(function(a,d){try{c?this.c.fillText(a,0,d*g,c):this.c.fillText(a,0,d*g)}catch(e){console.log(e.message+"["+a+","+b+","+h+"]")}},this);return this.restore()},measureText:function(a){var a=a.split("\n"),b=0;a.each(function(a){b=t(this.measureText(a).width,b)},this.c);return b},moveTo:function(a,b){this.c.moveTo(a||0,b||0);return this},lineTo:function(a,b){this.c.lineTo(a||0,b||0);return this},save:function(){this.c.save();return this},restore:function(){this.c.restore();return this},beginPath:function(){this.c.beginPath();return this},closePath:function(){this.c.closePath();return this},stroke:function(a){a&&this.c.stroke();return this},fill:function(a){a&&this.c.fill();return this},cube:function(d,b,h,c,e,g,f,i,j,k,o,r){d=n(k,d);b=n(k,b);f=f&&0<f?f:e;c=b-f*c;h=n(k,d+f*h);c=n(k,c);r&&(this.polygon(i,j,k,o,r,!1,[{x:d,y:b},{x:h,y:c},{x:h+e,y:c},{x:d+e,y:b}]),this.polygon(i,j,k,o,r,!1,[{x:d,y:b},{x:d,y:b+g},{x:d+e,y:b+g},{x:d+e,y:b}]),this.polygon(i,j,k,o,r,!1,[{x:d+e,y:b},{x:h+e,y:c},{x:h+e,y:c+g},{x:d+e,y:b+g}]));this.polygon(a.dark(i),j,k,o,!1,!1,[{x:d,y:b},{x:h,y:c},{x:h+e,y:c},{x:d+e,y:b}]);this.polygon(i,j,k,o,!1,!1,[{x:d,y:b},{x:d,y:b+g},{x:d+e,y:b+g},{x:d+e,y:b}]);this.polygon(a.dark(i),j,k,o,!1,!1,[{x:d+e,y:b},{x:h+e,y:c},{x:h+e,y:c+g},{x:d+e,y:b+g}]);return this},cube3D:function(d,b,c,e,g,f,i,j,o,k,q,r){d=n(k,d);b=n(k,b);j=!j||0==j?f:j;g?(e=a.vectorP2P(c,e),c=d+j*e.x,e=b-j*e.y):(c=d+j*c,e=b-j*e);for(;6>r.length;)r.push(!1);c=n(k,c);e=n(k,e);j=[];0>e?a.isObject(r[4])&&j.push(a.applyIf({points:[{x:d,y:b-i},{x:c,y:e-i},{x:c+f,y:e-i},{x:d+f,y:b-i}]},r[4])):a.isObject(r[0])&&j.push(a.applyIf({points:[{x:d,y:b},{x:c,y:e},{x:c+f,y:e},{x:d+f,y:b}]},r[0]));a.isObject(r[1])&&j.push(a.applyIf({points:[{x:c,y:e},{x:c,y:e-i},{x:c+f,y:e-i},{x:c+f,y:e}]},r[1]));a.isObject(r[2])&&j.push(a.applyIf({points:[{x:d,y:b},{x:d,y:b-i},{x:c,y:e-i},{x:c,y:e}]},r[2]));a.isObject(r[3])&&j.push(a.applyIf({points:[{x:d+f,y:b},{x:d+f,y:b-i},{x:c+f,y:e-i},{x:c+f,y:e}]},r[3]));0>e?a.isObject(r[0])&&j.push(a.applyIf({points:[{x:d,y:b},{x:c,y:e},{x:c+f,y:e},{x:d+f,y:b}]},r[0])):a.isObject(r[4])&&j.push(a.applyIf({points:[{x:d,y:b-i},{x:c,y:e-i},{x:c+f,y:e-i},{x:d+f,y:b-i}]},r[4]));a.isObject(r[5])&&j.push(a.applyIf({points:[{x:d,y:b},{x:d,y:b-i},{x:d+f,y:b-i},{x:d+f,y:b}]},r[5]));j.each(function(a){this.polygon(a.color,o,k,q,a.shadow,a.alpha,a.points)},this);return this},polygon:function(a,b,c,e,g,f,i,j,o,k){this.save().strokeStyle(b,c,e).beginPath().fillStyle(a).globalAlpha(f).shadowOn(g).moveTo(i[0].x,i[0].y);if(j){this.moveTo(n(c,k[0].x),n(c,k[0].y)).lineTo(n(c,i[0].x),n(c,i[0].y));for(e=1;e<i.length;e++)this.bezierCurveTo(z(i,i[e],e,o));this.lineTo(n(c,k[1].x),n(c,k[1].y))}else for(e=1;e<i.length;e++)this.lineTo(n(c,i[e].x),n(c,i[e].y));return this.closePath().stroke(b).fill(a).restore()},lines:function(a,b,c,e){this.save().gCo(e).beginPath().strokeStyle(!0,b,c).moveTo(n(b,a[0]),n(b,a[1]));for(c=2;c<a.length-1;c+=2)this.lineTo(n(b,a[c]),n(b,a[c+1]));return this.stroke(!0).restore()},bezierCurveTo:function(a){this.c.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5]);return this},label:function(a,b,c){return this.save().beginPath().strokeStyle(!0,b,c).moveTo(n(b,a[0].x),n(b,a[0].y)).bezierCurveTo([a[1].x,a[1].y,a[2].x,a[2].y,a[3].x,a[3].y]).stroke(!0).restore()},lineArray:function(a,b,c,e,g){this.save().beginPath().strokeStyle(!0,b,c).moveTo(n(b,a[0].x),n(b,a[0].y));for(c=1;c<a.length;c++)e?this.bezierCurveTo(z(a,a[c],c,g||1.5)):this.lineTo(n(b,a[c].x),n(b,a[c].y));return this.stroke(!0).restore()},manyLine:function(a,b,c,e,g){var f=[],i=!1,g=g||1.5;a.each(function(a){a.ignored&&i?(this.lineArray(f,b,c,e,g),f=[],i=!1):a.ignored||(f.push(a),i=!0)},this);f.length&&this.lineArray(f,b,c,e,g)},dotted:function(b,c,e,g,f,i,o,q,s){if(!f)return this;var b=n(f,b),c=n(f,c),e=n(f,e),g=n(f,g),k=a.distanceP2P(b,c,e,g),t;if(0>=o||k<=o||b!=e&&c!=g)return this.line(b,c,e,g,f,i,s);if(b>e||c>g)t=b,b=e,e=t,t=c,c=g,g=t;this.save().gCo(s).strokeStyle(!0,f,i).beginPath().moveTo(b,c);f=o*(q||1);i=j(k/(o+f));k=k-i*(o+f)>o;q=c==g;i=k?i+1:i;for(s=1;s<=i;s++)this.lineTo(q?b+o*s+f*(s-1):b,q?c:c+o*s+f*(s-1)).moveTo(q?b+(o+f)*s:b,q?c:c+(o+f)*s);k||this.lineTo(e,g);return this.stroke(!0).restore()},line:function(a,b,c,e,f,g,i){if(!f)return this;this.save().gCo(i);return this.beginPath().strokeStyle(!0,f,g).moveTo(n(f,a),n(f,b)).lineTo(n(f,c),n(f,e)).stroke(!0).restore()},round:function(a,b,c,e,f,g){return this.arc(a,b,c,0,0,o,e,!!g,f,g)},fillRect:function(a,b,c,e){this.c.fillRect(a,b,c,e);return this},translate:function(a,b){this.c.translate(a,b);return this},rotate:function(a){this.c.rotate(a);return this},clearRect:function(a,b,c,e){c=c||this.width;e=e||this.height;this.c.clearRect(a||0,b||0,c,e);return this},gCo:function(a){return a?this.gCO(a):this},gCO:function(a){this.c.globalCompositeOperation=a?"destination-over":"source-over";return this},box:function(b,f,h,g,q,l,s,t,v){q=q||{enable:0};if(q.enable){var k=q.width,u=q.color,r=q.radius,w=a.isNumber(k),k=a.parsePadding(k);k[0]==k[1]&&k[1]==k[2]&&k[2]==k[3]&&(w=!0);t=t?1:-1;h+=t*(k[1]+k[3])/2;g+=t*(k[0]+k[2])/2;b-=t*(k[3]/2);f-=t*(k[0]/2);k=w?k[0]:k;r=!w||!r||0==r||"0"==r?0:a.parsePadding(r)}this.save().gCo(v).fillStyle(l).strokeStyle(w,k,u);r?this.beginPath().moveTo(n(k,b+r[0]),n(k,f)).lineTo(n(k,b+h-r[1]),n(k,f)).arc2(n(k,b+h-r[1]),n(k,f+r[1]),r[1],3*c/2,o).lineTo(n(k,b+h),n(k,f+g-r[2])).arc2(n(k,b+h-r[2]),n(k,f+g-r[2]),r[2],0,c/2).lineTo(n(k,b+r[3]),n(k,f+g)).arc2(n(k,b+r[3]),n(k,f+g-r[3]),r[3],c/2,c).lineTo(n(k,b),n(k,f+r[0])).arc2(n(k,b+r[0]),n(k,f+r[0]),r[0],c,3*c/2).closePath().shadowOn(s).stroke(k).shadowOff().fill(l):!q.enable||w?(k&&q.enable&&(this.shadowOn(s).c.strokeRect(b,f,h,g),this.shadowOff()),l&&this.fillRect(b,f,h,g)):(k&&(u=a.isArray(u)?u:[u,u,u,u],this.shadowOn(s).line(b+h,f+k[0]/2,b+h,f+g-k[0]/2,k[1],u[1],0).line(b,f+k[0]/2,b,f+g-k[0]/2,k[3],u[3],0).line(j(b-k[3]/2),f,b+h+k[1]/2,f,k[0],u[0],0).line(j(b-k[3]/2),f+g,b+h+k[1]/2,f+g,k[2],u[2],0).shadowOff()),l&&this.beginPath().moveTo(j(b+k[3]/2),j(f+k[0]/2)).lineTo(i(b+h-k[1]/2),f+k[0]/2).lineTo(i(b+h-k[1]/2),i(f+g-k[2]/2)).lineTo(j(b+k[3]/2),i(f+g-k[2]/2)).lineTo(j(b+k[3]/2),j(f+k[0]/2)).closePath().fill(l));return this.restore()},toDataURL:function(a){return this.canvas.toDataURL(a||"image/png")},addEvent:function(b,c,e){a.Event.addEvent(this.canvas,b,c,e)}};a.taylor={light:function(a,b){b.highlight=!1;a.on("mouseover",function(){b.highlight=!0;a.redraw("mouseover")}).on("mouseout",function(){b.highlight=!1;a.redraw("mouseout")}).on("beforedraw",function(){a.push("f_color",b.highlight?a.get("light_color"):a.get("f_color_"));return!0})}};a.Chart=a.extend(a.Painter,{configure:function(){a.Chart.superclass.configure.apply(this,arguments);this.type="chart";this.dataType="simple";this.set({render:"",data:[],width:void 0,height:void 0,lineJoin:"round",align:"center",default_mouseover_css:!0,turn_off_touchmove:!1,showpercent:!1,decimalsnum:1,title:{text:"",fontweight:"bold",fontsize:20,height:30},subtitle:{text:"",fontweight:"bold",fontsize:16,height:20},footnote:{text:"",color:"#5d7f97",textAlign:"right",height:20},title_align:"center",title_valign:"top",animation:!1,doAnimation:null,animation_timing_function:"easeInOut",duration_animation_duration:1E3,z_index:999,legend:{enable:!1},tip:{enable:!1}});this.registerEvent("beforeAnimation","afterAnimation","animating");this.T=null;this.animationed=this.RENDERED=!1;this.data=[];this.plugins=[];this.oneways=[];this.total=0},toDataURL:function(a){return this.T.toDataURL(a)},segmentRect:function(){this.T.clearRect(this.get("l_originx"),this.get("t_originy"),this.get("client_width"),this.get("client_height"))},resetCanvas:function(){this.T.box(this.get("l_originx"),this.get("t_originy"),this.get("client_width"),this.get("client_height"),0,this.get("f_color"),0,0,!0)},animation:function(b){b.segmentRect();b.doAnimation(b.variable.animation.time,b.duration,b);b.legend&&b.legend.draw();b.plugins.each(function(a){a.A_draw&&(a.variable.animation.animating=!0,a.variable.animation.time=b.variable.animation.time,a.variable.animation.duration=b.duration,a.draw(),a.variable.animation.animating=!1)});b.resetCanvas();b.variable.animation.time<b.duration?(b.variable.animation.time++,a.requestAnimFrame(function(){b.animation(b)})):a.requestAnimFrame(function(){b.variable.animation.time=0;b.animationed=!0;b.draw();b.processAnimation=!1;b.fireEvent(b,"afterAnimation",[b])})},runAnimation:function(){this.fireEvent(this,"beforeAnimation",[this]);this.animation(this)},doSort:function(){this.components.sor(function(b,c){return(a.isArray(b)?b.zIndex||0:b.get("z_index"))>(a.isArray(c)?c.zIndex||0:c.get("z_index"))})},commonDraw:function(b,c){a.Assert.isTrue(b.RENDERED,b.type+" has not rendered.");a.Assert.isTrue(b.initialization,b.type+" has initialize failed.");a.Assert.gt(b.data.length,0,b.type+"'s data is empty.");b.redraw||(b.doSort(),b.oneways.eachAll(function(a){a.draw()}));b.redraw=!0;!b.animationed&&b.get("animation")?b.runAnimation():(b.segmentRect(),b.components.eachAll(function(a){a.draw(c)}),b.resetCanvas())},plugin:function(a){a.inject(this);this.components.push(a);this.plugins.push(a)},getTitle:function(){return this.title},getSubTitle:function(){return this.subtitle},getFootNote:function(){return this.footnote},getDrawingArea:function(){return{x:this.get("l_originx"),x:this.get("t_originy"),width:this.get("client_width"),height:this.get("client_height")}},setUp:function(){this.redraw=!1;this.T.clearRect();this.initialization=!1;this.initialize()},create:function(d,c){if(d.get("fit")){var e=window.innerWidth,f=window.innerHeight,g=a.getDoc().body.style;g.padding="0px";g.margin="0px";g.overflow="hidden";d.push(d.W,e);d.push(d.H,f)}d.width=d.pushIf(d.W,400);d.height=d.pushIf(d.H,300);d.canvasid=a.iGather(d.type);d.shellid="shell-"+d.canvasid;e=[];e.push("<div id='");e.push(d.shellid);e.push("' style='width:");e.push(d.width);e.push("px;height:");e.push(d.height);e.push("px;padding:0px;margin:0px;overflow:hidden;position:relative;'>");e.push("<canvas id= '");e.push(d.canvasid);e.push("'  width='");e.push(d.width);e.push("' height='");e.push(d.height);e.push("'><p>Your browser does not support the canvas element</p></canvas></div>");c.innerHTML=e.join("");d.shell=a(d.shellid);d.T=d.target=new b(d.canvasid);d.RENDERED=!0},initialize:function(){var b=this._(),c=b.get("data"),e=b.get("render");b.RENDERED||("string"==typeof e&&a(e)?b.create(b,a(e)):"object"==typeof e&&b.create(b,e));0<c.length&&b.RENDERED&&!b.initialization&&("simple"==b.dataType?y.call(b,c):"complex"==b.dataType&&w.call(b,c),b.data=c,b.doConfig(),b.initialization=!0)},eventOff:function(){this.stopEvent=!0},eventOn:function(){this.stopEvent=!1},oneWay:function(b){var c=b.variable.event,e=!b.get("turn_off_touchmove"),f=!a.touch&&b.get("default_mouseover_css"),g,i,j=a.touch?["touchstart","touchmove"]:["click","mousemove"];b.stopEvent=!1;j.each(function(c){b.T.addEvent(c,function(e){b.processAnimation||b.stopEvent||e.targetTouches&&1!=e.targetTouches.length||b.fireEvent(b,c,[b,a.Event.fix(e)])},!1)});b.on(j[0],function(a,b){a.components.eachAll(function(a){var d=a.isMouseOver(b);if(d.valid)return c.click=!0,a.fireEvent(a,"click",[a,b,d]),!b.stopPropagation});c.click&&(e&&b.event.preventDefault(),c.click=!1)});if(!a.touch||e)b.on(j[1],function(a,b){g=i=!1;a.components.eachAll(function(d){var e=d.variable.event,h=d.isMouseOver(b);if(h.valid){if(g=!0,i=i||d.atomic,c.mouseover||(c.mouseover=!0,a.fireEvent(a,"mouseover",[d,b,h])),f&&i&&a.T.css("cursor","pointer"),e.mouseover||(e.mouseover=!0,d.fireEvent(d,"mouseover",[d,b,h])),d.fireEvent(d,"mousemove",[d,b,h]),h.stop)return!1}else e.mouseover&&(e.mouseover=!1,d.fireEvent(d,"mouseout",[d,b,h]));return!b.stopPropagation});c.mouseover&&(b.event.preventDefault(),f&&!i&&a.T.css("cursor","default"),!g&&c.mouseover&&(c.mouseover=!1,a.fireEvent(a,"mouseout",[a,b])))});b.oneWay=a.emptyFn},getPercent:function(b){return this.get("showpercent")?a.toPercent(b/this.total,this.get("decimalsnum")):b},doActing:function(b,c,e,f,g){f=!!b.get("communal_acting");b.push(f?"sub_option":"communal_acting",a.clone(b.get(f?"communal_acting":"sub_option"),!0));a.merge(b.get("sub_option"),c);a.merge(b.get("sub_option"),e);b.pushIf("sub_option.background_color",c.color);b.get("sub_option.tip.enable")&&(b.push("sub_option.tip.text",g||c.name+" "+b.getPercent(c.value)),b.push("sub_option.tip.name",c.name),b.push("sub_option.tip.value",c.value),b.push("sub_option.tip.total",b.total))},doConfig:function(){a.Chart.superclass.doConfig.call(this);var b=this._();a.Assert.isArray(b.data);b.T.strokeStyle(!0,0,b.get("strokeStyle"),b.get("lineJoin"));b.processAnimation=b.get("animation");b.push("communal_acting",0);b.duration=i(b.get("duration_animation_duration")*a.FRAME/1E3);a.isFunction(b.get("doAnimation"))&&(b.doAnimation=b.get("doAnimation"));b.variable.animation={type:0,time:0,queue:[]};b.components=[];b.oneways=[];b.oneways.push(new a.Custom({drawFn:function(){b.T.box(0,0,b.width,b.height,b.get("border"),b.get("f_color"),0,0,true)}}));b.plugins.each(function(a){b.components.push(a)});b.applyGradient();b.animationArithmetic=a.getAA(b.get("animation_timing_function"));b.oneWay(b);b.push("r_originx",b.width-b.get("padding_right"));b.push("b_originy",b.height-b.get("padding_bottom"));var c=0,e=b.push("l_originx",b.get("padding_left")),f=b.push("t_originy",b.get("padding_top")),g=b.push("client_width",b.get(b.W)-b.get("hpadding"));a.isString(b.get("title"))&&b.push("title",a.applyIf({text:b.get("title")},b.default_.title));a.isString(b.get("subtitle"))&&b.push("subtitle",a.applyIf({text:b.get("subtitle")},b.default_.subtitle));a.isString(b.get("footnote"))&&b.push("footnote",a.applyIf({text:b.get("footnote")},b.default_.footnote));if(""!=b.get("title.text")){var j=""!=b.get("subtitle.text"),c=j?b.get("title.height")+b.get("subtitle.height"):b.get("title.height"),f=b.push("t_originy",f+c);b.push("title.originx",e);b.push("title.originy",b.get("padding_top"));b.push("title.width",g);b.title=new a.Text(b.get("title"),b);b.oneways.push(b.title);j&&(b.push("subtitle.originx",e),b.push("subtitle.originy",b.get("title.originy")+b.get("title.height")),b.push("subtitle.width",g),b.subtitle=new a.Text(b.get("subtitle"),b),b.oneways.push(b.subtitle))}""!=b.get("footnote.text")&&(j=b.get("footnote.height"),c+=j,b.push("b_originy",b.get("b_originy")-j),b.push("footnote.originx",e),b.push("footnote.originy",b.get("b_originy")),b.push("footnote.width",g),b.footnote=new a.Text(b.get("footnote"),b),b.oneways.push(b.footnote));c=b.push("client_height",b.get(b.H)-b.get("vpadding")-c);b.push("minDistance",s(g,c));b.push("maxDistance",t(g,c));b.push("minstr",g<c?b.W:b.H);b.push("centerx",e+g/2);b.push("centery",f+c/2);a.applyIf(b.get("sub_option"),a.clone("shadow,shadow_color,shadow_blur,shadow_offsetx,shadow_offsety,tip".split(","),b.options,!0));b.get("legend.enable")&&(b.legend=new a.Legend(a.apply({maxwidth:g,data:b.data},b.get("legend")),b),b.components.push(b.legend));b.push("sub_option.tip.wrap",b.push("tip.wrap",b.shell))}})})(c);c.Legend=c.extend(c.Component,{configure:function(){c.Legend.superclass.configure.apply(this,arguments);this.type="legend";this.set({data:void 0,width:"auto",column:1,row:"max",maxwidth:0,line_height:16,sign:"square",sign_size:12,sign_space:5,legend_space:5,z_index:1009,text_with_sign_color:!1,align:"right",valign:"middle"});this.atomic=!0;this.registerEvent("parse")},isEventValid:function(a,b){var c={valid:!1};a.x>this.x&&a.x<b.x+b.width&&a.y>b.y&&a.y<b.y+b.height&&b.data.each(function(g,f){if(a.x>g.x&&a.x<g.x+g.width_+b.get("signwidth")&&a.y>g.y&&a.y<g.y+b.get("line_height"))return c={valid:!0,index:f,target:g},!1},b);return c},drawCell:function(a,b,c,g,f,i){var j=i.get("sign_size"),o=i.getPlugin("sign");if(!o||!o.call(i,i.T,f,a+j/2,b,j,g))-1!=f.indexOf("bar")&&i.T.box(a,b-j/12,j,j/6,0,g),"round"==f?i.T.round(a+j/2,b,j/2,g):"round-bar"==f?i.T.round(a+j/2,b,j/4,g):"square-bar"==f?i.T.box(a+j/4,b-j/4,j/2,j/2,0,g):"square"==f&&i.T.box(a,b-j/2,j,j,0,g);i.T.fillText(c,a+i.get("signwidth"),b,0,i.get("text_with_sign_color")?g:i.get("color"),"lr",i.get("line_height"))},doDraw:function(a){a.T.box(a.x,a.y,a.width,a.height,a.get("border"),a.get("f_color"),!1,a.get("shadow"));a.T.textStyle(a.L,"middle",c.getFont(a.get("fontweight"),a.get("fontsize"),a.get("font")));a.data.each(function(b){a.drawCell(b.x,b.y,b.text,b.color,b.sign,a)})},doLayout:function(a,b){var e=a.get("sign_size"),g=0,f=0,i=0,j=a.get("column"),o=a.get("row"),t=a.data.length;a.T.textFont(a.get("fontStyle"));a.get("line_height")<e&&a.push("line_height",e+e/5);a.push("signwidth",e+a.get("sign_space"));a.data.each(function(b){b.width_=a.T.measureText(b.text)},a);for(var s=0;s<j;s++){for(var i=0,q=s;q<t;q+=j)i=Math.max(i,a.data[q].width_);a.columnwidth[s]=i;g+=i}for(s=0;s<o;s++){i=0;for(q=s*j;q<t;q++)i=Math.max(i,a.data[q].text.split("\n").length);a.columnheight[s]=i;f+=i}g=a.push(a.W,g+a.get("hpadding")+a.get("signwidth")*j+(j-1)*a.get("legend_space"));if(g>a.get("maxwidth"))j=a.get("maxwidth")/g,o=c.lowTo,t=Math.floor,a.push("fontsize",o(6,t(a.get("fontsize")*j))),a.push("sign_size",o(6,t(e*j))),a.push("sign_space",o(4,t(a.get("sign_space")*j))),a.push("legend_space",o(4,t(a.get("legend_space")*j))),a.push("fontStyle",c.getFont(a.get("fontweight"),a.get("fontsize"),a.get("font"))),a.doLayout(a,b);else{var u;a.width=g;a.height=f=a.push(a.H,f*a.get("line_height")+a.get("vpadding"));a.y=a.get("valign")==a.O?b.get("t_originy"):a.get("valign")==a.B?b.get("b_originy")-f:b.get("centery")-f/2;a.x=a.get("align")==a.L?b.get("l_originx"):a.get("align")==a.C?b.get("centerx")-g/2:b.get("r_originx")-g;a.x=a.push(a.X,a.x+a.get("offsetx"));a.y=a.push(a.Y,a.y+a.get("offsety"));i=a.y+a.get("padding_top");e=a.get("legend_space")+a.get("signwidth");for(s=0;s<o;s++){f=a.x+a.get("padding_left");u=a.columnheight[s]/2*a.get("line_height");i+=u;for(q=0;q<j&&s*j+q<t;q++)g=a.data[s*j+q],g.y=i,g.x=f,f+=a.columnwidth[q]+e;i+=u}}},doConfig:function(){c.Legend.superclass.doConfig.call(this);var a=this._(),b=a.container,e=c.isNumber(a.get("column")),g=c.isNumber(a.get("row")),f=a.data.length;a.get("align")==a.C&&"middle"==a.get("valign")&&a.push("valign",a.O);b.get("align")==a.L&&"middle"==a.get("valign")&&a.push("align",a.R);a.data.each(function(b,e){c.merge(b,a.fireEvent(a,"parse",[a,b.name,e]));b.text=b.text||b.name;b.sign=b.sign||a.get("sign")},a);!e&&!g&&(e=a.push("column",1));e&&!g&&(g=a.push("row",Math.ceil(f/a.get("column"))));!e&&g&&(e=a.push("column",Math.ceil(f/a.get("row"))));e=a.get("column");g=a.get("row");f>g*e&&(g+=Math.ceil((f-g*e)/e),g=a.push("row",g));a.columnwidth=Array(e);a.columnheight=Array(g);a.doLayout(a,b)}});c.CrossHair=c.extend(c.Html,{configure:function(){c.CrossHair.superclass.configure.apply(this,arguments);this.type="crosshair";this.set({top:0,left:0,hcross:!0,vcross:!0,invokeOffset:null,line_width:1,line_color:"#1A1A1A",delay:200})},follow:function(a,b){if(this.get("invokeOffset")){var c=this.get("invokeOffset")(a,b);c&&c.hit&&this.position(c.top-this.top,c.left-this.left);return!1}this.position(a.y-this.top-1,a.x-this.left-1);return!0},position:function(a,b){this.horizontal.style.top=a-this.size+"px";this.vertical.style.left=b-this.size+"px"},beforeshow:function(a,b){this.follow(a,b)||this.position(-99,-99)},doCreate:function(a,b,e){var g=document.createElement("div");g.style.width=c.toPixel(b);g.style.height=c.toPixel(e);g.style.backgroundColor=a.get("line_color");g.style.position="absolute";a.dom.appendChild(g);return g},initialize:function(){c.CrossHair.superclass.initialize.call(this);var a=this._(),b=c.toPixel(a.get("line_width"));a.top=c.fixPixel(a.get(a.O));a.left=c.fixPixel(a.get(a.L));a.dom=document.createElement("div");a.dom.style.zIndex=a.get("index");a.dom.style.position="absolute";a.dom.style.width=c.toPixel(0);a.dom.style.height=c.toPixel(0);a.dom.style.top=c.toPixel(a.get(a.O));a.dom.style.left=c.toPixel(a.get(a.L));a.css("visibility","hidden");a.horizontal=a.doCreate(a,a.get("hcross")?c.toPixel(a.get(a.W)):"0px",b);a.vertical=a.doCreate(a,b,a.get("vcross")?c.toPixel(a.get(a.H)):"0px");a.size=a.get("line_width")/2;a.get("shadow")&&(a.dom.style.boxShadow=a.get("shadowStyle"));a.wrap.appendChild(a.dom);a.T.on("mouseover",function(b,c,f){a.show(c,f)}).on("mouseout",function(b,c,f){a.hidden(c,f)}).on("mousemove",function(b,c,f){a.follow(c,f)})}});c.Tip=c.extend(c.Html,{configure:function(){c.Tip.superclass.configure.apply(this,arguments);this.type="tip";this.set({name:"",value:"",text:"",showType:"follow",invokeOffset:null,fade_duration:300,move_duration:100,timing_function:"ease-out",invokeOffsetDynamic:!1,style:"textAlign:left;padding:4px 5px;cursor:pointer;backgroundColor:rgba(239,239,239,.85);fontSize:12px;color:black;",border:{enable:!0,radius:5},delay:200});this.registerEvent("parseText")},position:function(a,b){this.style.top=(0>a?0:a)+"px";this.style.left=(0>b?0:b)+"px"},follow:function(a,b){var e=this._();e.style.width="";if(e.get("invokeOffsetDynamic")){if(b.hit){(c.isString(b.text)||c.isNumber(b.text))&&e.text(b.name,b.value,b.text,b.i,e);var g=e.get("invokeOffset")(e.width(),e.height(),b);e.position(g.top,g.left)}}else"follow"!=e.get("showType")&&c.isFunction(e.get("invokeOffset"))?(g=e.get("invokeOffset")(e.width(),e.height(),b),e.position(g.top,g.left)):e.position(a.y-1.1*e.height()-2,a.x+2)},text:function(a,b,c,g,f){f.dom.innerHTML=f.fireString(f,"parseText",[f,a,b,c,g],c)},beforeshow:function(a,b){this.follow(a,b)},hidden:function(){this.get("animation")?this.css("opacity",0):this.css("visibility","hidden")},initialize:function(){c.Tip.superclass.initialize.call(this);var a=this._();a.css("position","absolute");a.text(a.get("name"),a.get("value"),a.get("text"),0,a);a.style=a.dom.style;a.hidden();if(a.get("animation")){var b=a.get("move_duration")/1E3+"s "+a.get("timing_function")+" 0s";a.transition("opacity "+a.get("fade_duration")/1E3+"s "+a.get("timing_function")+" 0s");a.transition("top "+b);a.transition("left "+b);a.onTransitionEnd(function(){0==a.css("opacity")&&a.css("visibility","hidden")},!1)}a.wrap.appendChild(a.dom);a.T.on("mouseover",function(b,c,f){a.show(c,f)}).on("mouseout",function(b,c){a.hidden(c)});if("follow"==a.get("showType"))a.T.on("mousemove",function(b,c,f){a.T.variable.event.mouseover&&setTimeout(function(){a.T.variable.event.mouseover&&a.follow(c,f)},a.get("delay"))})}});c.Text=c.extend(c.Component,{configure:function(){c.Text.superclass.configure.apply(this,arguments);this.type="text";this.set({text:"",textAlign:"center",background_color:0,textBaseline:"top",border:{enable:!1},width:0,height:0,padding:0,writingmode:"lr",line_height:16,rotate:0});this.registerEvent()},doDraw:function(a){a.get("box_feature")&&a.T.box(a.x,a.y,a.get(a.W),a.get(a.H),a.get("border"),a.get("f_color"));""!=a.get("text")&&a.T.text(a.get("text"),a.get("textx"),a.get("texty"),a.get(a.W),a.get("color"),a.get("textAlign"),a.get("textBaseline"),a.get("fontStyle"),a.get("writingmode"),a.get("line_height"),a.get("shadow"),a.get("rotate"))},isEventValid:function(){return{valid:!1}},doLayout:function(a,b,c,g){g.x=g.push(g.X,g.x+a);g.y=g.push(g.Y,g.y+b);g.push("textx",g.get("textx")+a);g.push("texty",g.get("texty")+b)},doConfig:function(){c.Text.superclass.doConfig.call(this);var a=this._(),b=a.x,e=a.y+a.get("padding_top"),g=a.get(a.W),f=a.get(a.H),i=a.get("textAlign"),b=b+(i==a.C?g/2:i==a.R?g-a.get("padding_right"):a.get("padding_left"));f&&(e+=f/2,a.push("textBaseline","middle"));a.push("textx",b);a.push("texty",e);a.push("box_feature",g&&f);a.applyGradient()}})})(iChart);