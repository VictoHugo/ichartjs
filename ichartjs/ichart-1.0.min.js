(function(c){var a=navigator.userAgent.toLowerCase(),b=Object.prototype.toString,d=/opera/.test(a),e=/\bchrome\b/.test(a),f=/webkit/.test(a),g=!e&&/safari/.test(a),h=!d&&/msie/.test(a),k=!!document.createElement("canvas").getContext,m=!f&&/gecko/.test(a),l=/ipod|ipad|iphone|android/gi.test(a),s={Linear:function(a,b,c,d){return c*a/d+b},Quad:{easeIn:function(a,b,c,d){return c*(a/=d)*a+b},easeOut:function(a,b,c,d){return-c*(a/=d)*(a-2)+b},easeInOut:function(a,b,c,d){return 1>(a/=d/2)?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b}},Cubic:{easeIn:function(a,b,c,d){return c*(a/=d)*a*a+b},easeOut:function(a,b,c,d){return c*((a=a/d-1)*a*a+1)+b},easeInOut:function(a,b,c,d){return 1>(a/=d/2)?c/2*a*a*a+b:c/2*((a-=2)*a*a+2)+b}},Quart:{easeIn:function(a,b,c,d){return c*(a/=d)*a*a*a+b},easeOut:function(a,b,c,d){return-c*((a=a/d-1)*a*a*a-1)+b},easeInOut:function(a,b,c,d){return 1>(a/=d/2)?c/2*a*a*a*a+b:-c/2*((a-=2)*a*a*a-2)+b}},Bounce:{easeOut:function(a,b,c,d){return(a/=d)<1/2.75?c*7.5625*a*a+b:a<2/2.75?c*(7.5625*(a-=1.5/2.75)*a+0.75)+b:a<2.5/2.75?c*(7.5625*(a-=2.25/2.75)*a+0.9375)+b:c*(7.5625*(a-=2.625/2.75)*a+0.984375)+b}}},n=function(a){var c=!1,A=!1,E=[],j=function(){if(document.addEventListener)return function(){document.removeEventListener("DOMContentLoaded",j,!1);v()};if(document.attachEvent)return function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",j),v())}}(),z=function(){if(!c){try{document.documentElement.doScroll("left")}catch(a){setTimeout(z,1);return}v()}},v=function(){if(!c){c=!0;for(var a=0;a<E.length;a++)E[a].call(document);E=[]}},C=function(){if(!A){A=!0;if("complete"===document.readyState)return setTimeout(v,1);if(document.addEventListener)document.addEventListener("DOMContentLoaded",j,!1),a.addEventListener("load",v,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",j);a.attachEvent("onload",v);var b=!1;try{b=null==a.frameElement}catch(c){}document.documentElement.doScroll&&b&&z()}}},F=function(a){C();c?a.call(document,r):E.push(function(){return a.call(this)})},r=function(a){if(!a||a.nodeType)return a;if("string"===typeof a)return-1!=a.indexOf("#")&&(a=a.substring(1)),document.getElementById(a);"function"===typeof a&&F(a)};r.apply=function(a,b){if(a&&b&&"object"==typeof b)for(var j in b)"undefined"!=typeof b[j]&&(a[j]=b[j]);if(!b&&a){var c={};for(j in a)c[j]=a[j];return c}return a};r.apply(r,{version:"1.0",email:"taylor@ichartjs.com",isEmpty:function(a,b){return null===a||void 0===a||r.isArray(a)&&!a.length||(!b?""===a:!1)},isArray:function(a){return"[object Array]"===b.apply(a)},isDate:function(a){return"[object Date]"===b.apply(a)},isObject:function(a){return!!a&&"[object Object]"===b.apply(a)},isFunction:function(a){return"[object Function]"===b.apply(a)},isNumber:function(a){return"number"===typeof a&&isFinite(a)},isString:function(a){return"string"===typeof a},isBoolean:function(a){return"boolean"===typeof a},isFalse:function(a){return"boolean"===typeof a&&!a},isElement:function(a){return a?!!a.tagName:!1},isDefined:function(a){return"undefined"!==typeof a}});r.applyIf=function(a,b){if(a&&r.isObject(b))for(var j in b)r.isDefined(b[j])&&!r.isDefined(a[j])&&(a[j]=b[j]);return!b&&a?r.apply(a):a};r.merge=function(a,b,j){if(a&&r.isObject(b)){for(var c in b)r.isDefined(b[c])&&(r.isObject(b[c])?r.isObject(a[c])?r.merge(a[c],b[c]):a[c]=r.clone(b[c],!0):a[c]=b[c]);if(r.isObject(j))return r.merge(a,j)}return a};r.clone=function(a,b,j){var c={};if(r.isArray(a)&&r.isObject(b))for(var d=0;d<a.length;d++)c[a[d]]=j&&r.isObject(b[a[d]])?r.clone(b[a[d]]):b[a[d]];else if(r.isObject(a))for(d in a)c[d]=b&&r.isObject(a[d])&&!(a[d]instanceof r.Painter)?r.clone(a[d],b):a[d];return c};r.override=function(a,b){if(b){var j=a.prototype;r.apply(j,b);r.isIE&&b.hasOwnProperty("toString")&&(j.toString=b.toString)}};r.extend=function(){var a=function(a){for(var b in a)this[b]=a[b]},b=Object.prototype.constructor;return function(j,c){var d=function(){j.apply(this,arguments)},e=function(){},v=j.prototype;e.prototype=v;e=d.prototype=new e;e.constructor=d;d.superclass=v;v.constructor==b&&(v.constructor=j);d.override=function(a){r.override(d,a)};e.superclass=e.supr=function(){return v};e.override=a;r.override(d,c);d.extend=function(a){return r.extend(d,a)};d.plugin_={};return d}}();var H=Math.sin,L=Math.cos,I=Math.atan,T=Math.sqrt,B=Math.abs,u=Math.PI,J=2*u,U=Math.ceil,K=Math.round,V=Math.floor,M=Math.max,N=Math.min,D=parseFloat,O=function(a,b){if(0==a)return a;b=b||5;return 0==parseInt(a)?D((a/b+"").substring(0,(a+"").length+1)):Math.ceil(a/b)},P={navy:"rgb(0,0,128)",olive:"rgb(128,128,0)",orange:"rgb(255,165,0)",silver:"rgb(192,192,192)",white:"rgb(255,255,255)",gold:"rgb(255,215,0)",lime:"rgb(0,255,0)",fuchsia:"rgb(255,0,255)",aqua:"rgb(0,255,255)",green:"rgb(0,128,0)",gray:"rgb(80,80,80)",red:"rgb(255,0,0)",blue:"rgb(0,0,255)",pink:"rgb(255,192,203)",purple:"rgb(128,0,128)",yellow:"rgb(255,255,0)",maroon:"rgb(128,0,0)",black:"rgb(0,0,0)",azure:"rgb(240,255,255)",beige:"rgb(245,245,220)",brown:"rgb(165,42,42)",cyan:"rgb(0,255,255)",darkblue:"rgb(0,0,139)",darkcyan:"rgb(0,139,139)",darkgrey:"rgb(169,169,169)",darkgreen:"rgb(0,100,0)",darkkhaki:"rgb(189,183,107)",darkmagenta:"rgb(139,0,139)",darkolivegreen:"rgb(85,107,47)",darkorange:"rgb(255,140,0)",darkorchid:"rgb(153,50,204)",darkred:"rgb(139,0,0)",darksalmon:"rgb(233,150,122)",darkviolet:"rgb(148,0,211)",indigo:"rgb(75,0,130)",khaki:"rgb(240,230,140)",lightblue:"rgb(173,216,230)",lightcyan:"rgb(224,255,255)",lightgreen:"rgb(144,238,144)",lightgrey:"rgb(211,211,211)",lightpink:"rgb(255,182,193)",lightyellow:"rgb(255,255,224)",magenta:"rgb(255,0,255)",violet:"rgb(128,0,128)"},W=function(a){a=a.replace(/\s/g,"").toLowerCase();if(/rgb\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3}\)/.exec(a)||/rgba\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3},(0(\.[0-9])?|1(\.0)?)\)/.exec(a))return a;if(/#(([a-fA-F0-9]{6})|([a-fA-F0-9]{3}))/.exec(a))return a=a.replace(/#/g,"").replace(/^(\w)(\w)(\w)$/,"$1$1$2$2$3$3"),"rgb("+parseInt(a.substring(0,2),16)+","+parseInt(a.substring(2,4),16)+","+parseInt(a.substring(4,6),16)+")";if(P[a])return P[a];throw Error("invalid colors value '"+a+"'");},R=function(a,b){b=b||0.14;return 0.5<a?b-(1-a)/10:0.1<a?b-0.16+a/5:a>b?b:a/2},S=function(a,b,j,c){if(!b)return b;var b=W(b),d=/rgb\((\w*),(\w*),(\w*)\)/.exec(b);if(d)b=[d[1],d[2],d[3]];else if(d=/rgba\((\w*),(\w*),(\w*),(.*)\)/.exec(b))b=[d[1],d[2],d[3],d[4]];else throw Error("invalid colors value '"+b+"'");var e;var d=b,v=void 0,f=void 0;r.isArray(d)&&(v=d[1],f=d[2],d=d[0]);var d=d/255,v=v/255,f=f/255,z=M(M(d,v),f),C=N(N(d,v),f),C=z-C;0==C?e=[0,0,z]:(d==z?e=(v-f)/C:v==z?e=(f-d)/C+2:f==z&&(e=(d-v)/C+4),e*=60,0>e&&(e+=360),e=[e,C/z,z]);e[1]-=c||0;a?(e[2]-=R(e[2],j),e[1]=r.upTo(e[1],1),e[2]=r.lowTo(e[2],0)):(e[2]+=R(1-e[2],j),e[1]=r.lowTo(e[1],0),e[2]=r.upTo(e[2],1));a=e;j=b[3];b=c=void 0;r.isArray(a)&&(b=j,j=a[1],c=a[2],a=a[0]);var g,h,F;e=V(a/60)%6;a=a/60-e;p=c*(1-j);q=c*(1-j*a);t=c*(1-j*(1-a));switch(e){case 0:g=c;h=t;F=p;break;case 1:g=q;h=c;F=p;break;case 2:g=p;h=c;F=t;break;case 3:g=p;h=q;F=c;break;case 4:g=t;h=p;F=c;break;case 5:g=c,h=p,F=q}return"rgb"+(b?"a":"")+"("+K(255*g)+","+K(255*h)+","+K(255*F)+(b?","+b+")":")")};r.apply(r,{getFont:function(a,b,j){return a+" "+b+"px "+j},getDoc:function(){return a.contentWindow?a.contentWindow.document:a.contentDocument?a.contentDocument:a.document},DefineAbstract:function(a,b){if(!b[a])throw Error("Cannot instantiate the type '"+b.type+"'.you must implements it with method '"+a+"'.");},getAnimationArithmetic:function(a){return"linear"==a?s.Linear:"bounce"==a?s.Bounce.easeOut:"easeInOut"==a||"easeIn"==a||"easeOut"==a?s[r.DefaultAnimationArithmetic][a]:s.Linear},noConflict:function(){return n},plugin:function(a,b,j){r.isFunction(a)&&r.isString(b)&&r.isFunction(j)&&(a.plugin_[b]=j)},parsePadding:function(a,b){if(r.isNumber(a))return[a,a,a,a];if(r.isArray(a))return a;b=b||0;a=a.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g,/\s/).replace(/\s/g,",").split(",");1==a.length?a[0]=a[1]=a[2]=a[3]=D(a[0])||b:2==a.length?(a[0]=a[2]=D(a[0])||b,a[1]=a[3]=D(a[1])||b):3==a.length?(a[0]=D(a[0])||b,a[1]=a[3]=D(a[1])||b,a[2]=D(a[2])||b):(a[0]=D(a[0])||b,a[1]=D(a[1])||b,a[2]=D(a[2])||b,a[3]=D(a[3])||b);return a},distanceP2P:function(a,b,j,c){return T((j-a)*(j-a)+(c-b)*(c-b))},atan2Radian:function(a,b,j,c){if(a==j)return c>b?u/2:3*u/2;var d=r.quadrant(a,b,j,c),a=I(B((b-c)/(a-j)));1==d?a=u-a:2==d?a=u+a:3==d&&(a=J-a);return a},angle2Radian:function(a){return a*u/180},radian2Angle:function(a){return 180*a/u},quadrant:function(a,b,j,c){return a<j?b<c?3:0:b<c?2:1},quadrantd:function(a){return U(2*(a%(2*u))/u)},upTo:function(a,b){return b>a?a:b},lowTo:function(a,b){return b<a?a:b},between:function(a,b,j){return j>b?b:j<a?a:j},inRange:function(a,b,j){return b>j&&a<j},angleInRange:function(a,b,j){a%=J;b%=J;return b>a?b>j&&a<j:b<a?j<b||j>a:j==b},inRangeClosed:function(a,b,j){return b>=j&&a<=j},inEllipse:function(a,b,j,c){return 1>=a*a/j/j+b*b/c/c},p2Point:function(a,b,j,c){return{x:a+L(j)*c,y:b+H(j)*c}},vectorP2P:function(a,b,j){j||(b=r.angle2Radian(b),a=r.angle2Radian(a));b=H(b);return{x:b*H(a),y:b*L(a)}},iGather:function(a){return(a||"ichartjs")+"-"+(new Date).getTime().toString()},toPercent:function(a,b){return(100*a).toFixed(b)+"%"},parseFloat:function(a,b){if(!r.isNumber(a)&&(a=D(a),!r.isNumber(a)))throw Error("'"+b+"'is not a valid number.");return a},ceil:function(a,b){return a+O(a,b)},floor:function(a,b){return a-O(a,b)},_2D:"2d",_3D:"3d",light:function(a,b,j){return S(!1,a,b,j)},dark:function(a,b,j){return S(!0,a,b,j)},fixPixel:function(a){return r.isNumber(a)?a:D(a.replace("px",""))||0},toPixel:function(a){return r.isNumber(a)?a+"px":r.fixPixel(a)+"px"},emptyFn:function(){return!0},supportCanvas:k,isOpera:d,isWebKit:f,isChrome:e,isSafari:g,isIE:h,isGecko:m,isMobile:l,FRAME:l?30:60,DefaultAnimationArithmetic:"Cubic"});r.Assert={gtZero:function(a,b){r.Assert.gt(a,0,b)},gt:function(a,b,j){if(!r.isNumber(a)&&a>=b)throw Error(j+" required Number gt "+b+",given:"+a);},isNumber:function(a,b){if(!r.isNumber(a))throw Error(b+" required Number,given:"+a);},isArray:function(a,b){if(!r.isArray(a))throw Error(b+" required Array,given:"+a);},isTrue:function(a,b){if(!0!==a)throw Error(b);},equal:function(a,b,j){if(a!==b)throw Error(j);}};a.requestAnimFrame=function(){return a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(b){a.setTimeout(b,1E3/60)}}();r.Event={addEvent:function(a,b,j,c){a.addEventListener?a.addEventListener(b,j,c):a.attachEvent?a.attachEvent("on"+b,j):a["on"+b]=j},fix:function(b){"undefined"==typeof b&&(b=a.event);b.target||(b.target=b.srcElement||document);if(null==b.pageX&&null!=b.clientX){var j=document.documentElement,c=document.body;b.pageX=b.clientX+(j&&j.scrollLeft||c&&c.scrollLeft||0)-(j&&j.clientLeft||c&&c.clientLeft||0);b.pageY=b.clientY+(j&&j.scrollTop||c&&c.scrollTop||0)-(j&&j.clientTop||c&&c.clientTop||0)}if("undefined"==typeof b.offsetX&&"undefined"==typeof b.offsetY&&"number"!=typeof b.offsetX){for(var c=j=0,d=b.target;d!=document.body&&d;)j+=d.offsetLeft,c+=d.offsetTop,d=d.offsetParent;b.offsetX=b.pageX-j;b.offsetY=b.pageY-c}b.x=b.offsetX;b.y=b.offsetY;b.stopPropagation||(b.stopPropagation=function(){a.event.cancelBubble=true});return b}};return r}(c);Array.prototype.each=function(a,b){for(var c=this.length,d,j=0;j<c&&!(d=b?a.call(b,this[j],j):a(this[j],j),"boolean"===typeof d&&!d);j++);};Array.prototype.eachAll=function(a,b){this.each(function(c,d){return n.isArray(c)?c.eachAll(a,b):b?a.call(b,c,d):a(c,d)},b)};c.iChart=n;c.$||(c.$=c.iChart)})(window);(function(c){c.Element=function(a){this.type="element";c.DefineAbstract("configure",this);c.DefineAbstract("afterConfiguration",this);this.options={};this.set({id:"",fontsize:12,font:"Verdana",fontweight:"normal",border:{enable:!1,color:"#BCBCBC",style:"solid",width:1,radius:0},shadow:!1,shadow_color:"#666666",shadow_blur:4,shadow_offsetx:0,shadow_offsety:0});this.variable={};this.events={};this.initialization=this.preventEvent=!1;this.configure.apply(this,Array.prototype.slice.call(arguments,1));this.default_=c.clone(this.options,!0);this.set(a);this.afterConfiguration()};c.Element.prototype={_:function(){return this},getPlugin:function(a){return this.constructor.plugin_[a]},set:function(a){c.isObject(a)&&c.merge(this.options,a)},pushIf:function(a,b){return!c.isDefined(this.get(a))?this.push(a,b):this.get(a)},push:function(a,b){var c=a.split("."),e=this.options;for(i=0;i<c.length-1;i++)e[c[i]]||(e[c[i]]={}),e=e[c[i]];return e[c[c.length-1]]=b},get:function(a){var a=a.split("."),b=this.options[a[0]];for(i=1;i<a.length;i++){if(!b)return null;b=b[a[i]]}return b}};c.Painter=c.extend(c.Element,{configure:function(){this.type="painter";this.dimension=c._2D;c.DefineAbstract("commonDraw",this);c.DefineAbstract("initialize",this);this.set({brushsize:1,strokeStyle:"gray",padding:10,color:"black",offsetx:0,offsety:0,background_color:"#FEFEFE",color_factor:0.15,gradient:!1,style:"",border:{enable:!0},z_index:0,listeners:null,originx:0,originy:0});this.variable.event={mouseover:!1};this.registerEvent("initialize","click","dblclick","mousemove","mouseover","mouseout","beforedraw","draw")},afterConfiguration:function(){},registerEvent:function(){for(var a=0;a<arguments.length;a++)this.events[arguments[a]]=[]},init:function(){if(!this.initialization){if(c.isObject(this.get("listeners")))for(var a in this.get("listeners"))this.on(a,this.get("listeners")[a]);this.initialize();this.fireEvent(this,"initialize",[this])}},is3D:function(){return this.dimension==c._3D},draw:function(a){this.init();this.draw=function(a){if(!this.fireEvent(this,"beforedraw",[this]))return this;this.commonDraw(a);this.fireEvent(this,"draw",[this])};this.draw(a)},fireString:function(a,b,d,e){a=this.fireEvent(a,b,d);return c.isString(a)?a:e},fireEvent:function(a,b,c){var e=this.events[b].length;if(1==e)return this.events[b][0].apply(a,c);for(var f=!0,g=0;g<e;g++)f=this.events[b][g].apply(a,c);return f},on:function(a,b){c.isString(a)&&c.isFunction(b)&&(this.events[a]||console.log(a));this.events[a].push(b);return this},doConfig:function(){var a=this._(),b=c.parsePadding(a.get("padding")),d=a.get("border.enable"),d=d?c.parsePadding(a.get("border.width")):[0,0,0,0],e=a.get("background_color"),f=a.get("color_factor");a.push("border_top",d[0]);a.push("border_right",d[1]);a.push("border_bottom",d[2]);a.push("border_left",d[3]);a.push("hborder",d[1]+d[3]);a.push("vborder",d[0]+d[2]);a.push("padding_top",b[0]+d[0]);a.push("padding_right",b[1]+d[1]);a.push("padding_bottom",b[2]+d[2]);a.push("padding_left",b[3]+d[3]);a.push("hpadding",b[1]+b[3]+d[1]+d[3]);a.push("vpadding",b[0]+b[2]+d[0]+d[2]);a.get("shadow")&&a.push("shadow",{color:a.get("shadow_color"),blur:a.get("shadow_blur"),offsetx:a.get("shadow_offsetx"),offsety:a.get("shadow_offsety")});a.push("fontStyle",c.getFont(a.get("fontweight"),a.get("fontsize"),a.get("font")));a.push("f_color",e);a.push("light_color",c.light(e,f));a.push("dark_color",c.dark(e,f));a.push("light_color2",c.light(e,2*f));a.push("dark_color2",2*c.dark(e,f));a.id=a.get("id");a.is3D()&&!a.get("xAngle_")&&(b=c.vectorP2P(a.get("xAngle"),a.get("yAngle")),a.push("xAngle_",b.x),a.push("yAngle_",b.y))}});c.Html=c.extend(c.Element,{configure:function(a){this.type="html";this.T=a;c.DefineAbstract("beforeshow",this);this.set({animation:!0,width:0,height:0,style:"",index:999,offset_top:0,offset_left:0});this.transitions=""},afterConfiguration:function(){this.initialize()},initialize:function(){this.wrap=this.get("wrap");this.dom=document.createElement("div");this.get("shadow")&&this.css("boxShadow",this.get("shadow_offsetx")+"px "+this.get("shadow_offsety")+"px "+this.get("shadow_blur")+"px "+this.get("shadow_color"));this.get("border.enable")&&(this.css("border",this.get("border.width")+"px "+this.get("border.style")+" "+this.get("border.color")),this.css("borderRadius",this.get("border.radius")+"px"));this.css("zIndex",this.get("index"));this.applyStyle()},width:function(){return this.dom.offsetWidth},height:function(){return this.dom.offsetHeight},onTransitionEnd:function(a,b){var d="transitionend";c.isWebKit?d="webkitTransitionEnd":c.isOpera&&(d="oTransitionEnd");c.Event.addEvent(this.dom,d,a,b)},transition:function(a){this.transitions=""==this.transitions?a:this.transitions+","+a;c.isWebKit?this.css("WebkitTransition",this.transitions):c.isGecko?this.css("MozTransition",this.transitions):c.isOpera?this.css("OTransition",this.transitions):this.css("transition",this.transitions)},show:function(a,b){this.beforeshow(a,b);this.css("visibility","visible")},hidden:function(){this.css("visibility","hidden")},getDom:function(){return this.dom},css:function(a,b){if(c.isString(a))if(c.isDefined(b))this.dom.style[a]=b;else return this.dom.style[a]},applyStyle:function(){for(var a=this.get("style").split(";"),b,c=0;c<a.length;c++)b=a[c].split(":"),1<b.length&&this.css(b[0],b[1])}});c.Component=c.extend(c.Painter,{configure:function(a){c.Component.superclass.configure.apply(this,arguments);this.type="component";this.set({tip:{enable:!1,border:{width:2}}});this.proxy=this.atomic=!1;this.inject(a);this.final_parameter={}},afterConfiguration:function(){this.init()},initialize:function(){this.preventEvent||c.DefineAbstract("isEventValid",this);c.DefineAbstract("doDraw",this);this.doConfig();this.initialization=!0},doConfig:function(){c.Component.superclass.doConfig.call(this);var a=this._();a.x=a.get("originx")+a.get("offsetx");a.y=a.get("originy")+a.get("offsety");a.data=a.get("data");a.get("tip.enable")&&(a.pushIf("tip.border.color",a.get("f_color")),c.isFunction(a.get("tip.invokeOffset"))||a.push("tip.invokeOffset",a.tipInvoke()))},isMouseOver:function(a){return this.isEventValid(a)},redraw:function(){this.container.draw()},commonDraw:function(a){this.proxy||this.doDraw.call(this,a)},inject:function(a){a&&(this.container=a,this.target=this.T=a.T)}});c.Tip=c.extend(c.Html,{configure:function(){c.Tip.superclass.configure.apply(this,arguments);this.type="tip";this.set({text:"",showType:"follow",invokeOffset:null,fade_duration:300,move_duration:100,invokeOffsetDynamic:!1,style:"textAlign:left;padding:4px 5px;cursor:pointer;backgroundColor:rgba(239,239,239,.85);fontSize:12px;color:black;",border:{enable:!0,radius:5},delay:200})},follow:function(a,b){var d=this.dom.style;if(this.get("invokeOffsetDynamic")){if(b.hit){if(c.isString(b.text)||c.isNumber(b.text))this.dom.innerHTML=b.text;var e=this.get("invokeOffset")(this.width(),this.height(),b);d.top=e.top+"px";d.left=e.left+"px"}}else"follow"==this.get("showType")?(d.top=a.y-1.1*this.height()-2+"px",d.left=a.x+2+"px"):c.isFunction(this.get("invokeOffset"))?(e=this.get("invokeOffset")(this.width(),this.height(),b),d.top=e.top+"px",d.left=e.left+"px"):(d.top=a.y-1.1*this.height()-2+"px",d.left=a.x+2+"px")},text:function(a){this.dom.innerHTML=a},beforeshow:function(a,b){this.follow(a,b)},show:function(a,b){this.beforeshow(a,b);this.css("visibility","visible");this.get("animation")&&this.css("opacity",1)},hidden:function(){this.get("animation")?this.css("opacity",0):this.css("visibility","hidden")},initialize:function(){c.Tip.superclass.initialize.call(this);var a=this._();a.css("position","absolute");a.dom.innerHTML=a.get("text");a.hidden();if(a.get("animation")){var b=a.get("move_duration")/1E3+"s ease-in 0s";a.transition("opacity "+a.get("fade_duration")/1E3+"s ease-in 0s");a.transition("top "+b);a.transition("left "+b);a.onTransitionEnd(function(){0==a.css("opacity")&&a.css("visibility","hidden")},!1)}a.wrap.appendChild(a.dom);a.T.on("mouseover",function(b,c){a.show(b,c)}).on("mouseout",function(b){a.hidden(b)});if("follow"==a.get("showType"))a.T.on("mousemove",function(b,c){a.T.variable.event.mouseover&&setTimeout(function(){a.T.variable.event.mouseover&&a.follow(b,c)},a.get("delay"))})}});c.CrossHair=c.extend(c.Html,{configure:function(){c.CrossHair.superclass.configure.apply(this,arguments);this.type="crosshair";this.set({yAngle_:void 0,top:0,left:0,hcross:!0,vcross:!0,invokeOffset:null,line_width:1,line_color:"#1A1A1A",delay:200})},follow:function(a,b){if(this.get("invokeOffset")){var c=this.get("invokeOffset")(a,b);c&&c.hit&&(this.horizontal.style.top=c.top-this.top+"px",this.vertical.style.left=c.left-this.left+"px")}else this.horizontal.style.top=a.y-this.top-1+"px",this.vertical.style.left=a.x-this.left-1+"px"},beforeshow:function(a,b){this.follow(a,b)},initialize:function(){c.CrossHair.superclass.initialize.call(this);var a=this._();a.top=c.fixPixel(a.get("top"));a.left=c.fixPixel(a.get("left"));a.dom=document.createElement("div");a.dom.style.zIndex=a.get("index");a.dom.style.position="absolute";a.dom.style.width=c.toPixel(0);a.dom.style.height=c.toPixel(0);a.dom.style.top=c.toPixel(a.get("top"));a.dom.style.left=c.toPixel(a.get("left"));a.css("visibility","hidden");a.horizontal=document.createElement("div");a.vertical=document.createElement("div");a.horizontal.style.width=c.toPixel(a.get("width"));a.horizontal.style.height=c.toPixel(a.get("line_width"));a.horizontal.style.backgroundColor=a.get("line_color");a.horizontal.style.position="absolute";a.vertical.style.width=c.toPixel(a.get("line_width"));a.vertical.style.height=c.toPixel(a.get("height"));a.vertical.style.backgroundColor=a.get("line_color");a.vertical.style.position="absolute";a.dom.appendChild(a.horizontal);a.dom.appendChild(a.vertical);a.get("shadow")&&(a.dom.style.boxShadow=a.get("shadowStyle"));a.wrap.appendChild(a.dom);a.T.on("mouseover",function(b,c){a.show(b,c)}).on("mouseout",function(b,c){a.hidden(b,c)}).on("mousemove",function(b,c){a.follow(b,c)})}});c.Legend=c.extend(c.Component,{configure:function(){c.Legend.superclass.configure.apply(this,arguments);this.type="legend";this.set({data:void 0,width:"auto",column:1,row:"max",maxwidth:0,line_height:16,sign:"square",sign_size:12,sign_space:5,legend_space:5,text_with_sign_color:!1,align:"right",valign:"middle"});this.atomic=!0;this.registerEvent("parse","drawRaw","drawCell")},drawCell:function(a,b,c,e){var f=this.get("sign_size"),g=this.get("sign"),h=this.getPlugin(g);h?h.call(this,this.T,a,b,f,e):"round"==g?this.T.round(a+f/2,b+f/2,f/2,e):"round-bar"==g?(this.T.box(a,b+5*f/12,f,f/6,0,e),this.T.round(a+f/2,b+f/2,f/4,e)):"square-bar"==g?(this.T.box(a,b+5*f/12,f,f/6,0,e),this.T.box(a+f/4,b+f/4,f/2,f/2,0,e)):this.T.box(a,b,f,f,0,e);g=this.get("color");this.get("text_with_sign_color")&&(g=e);this.T.fillText(c,a+this.get("signwidth"),b+f/2,this.get("textwidth"),g);this.fireEvent(this,"drawCell",[this])},drawRow:function(a,b,c){for(var e,f=0;f<this.get("column");f++)e=this.data[a],a<this.data.length&&(this.fireEvent(this,"drawCell",[e]),this.drawCell(b,c,e.text,e.color),e.x=b,e.y=c),b+=this.columnwidth[f]+this.get("signwidth")+this.get("legend_space"),a++},isEventValid:function(a){var b={valid:!1},c=this._();a.x>this.x&&a.x<c.x+c.width&&a.y>c.y&&a.y<c.y+c.height&&c.data.each(function(e,f){a.x>e.x&&a.x<e.x+e.width+c.get("signwidth")&&a.y>e.y&&a.y<e.y+c.get("line_height")&&(b={valid:!0,index:f,target:e})},c);return b},doDraw:function(){this.T.box(this.x,this.y,this.width,this.height,this.get("border"),this.get("f_color"),!1,this.get("shadow"));this.T.textStyle("left","middle",c.getFont(this.get("fontweight"),this.get("fontsize"),this.get("font")));for(var a=this.x+this.get("padding_left"),b=this.y+this.get("padding_top"),d=this.get("column"),e=this.get("row"),f=0;f<e;f++)this.drawRow(f*d,a,b),b+=this.get("line_height"),this.fireEvent(this,"drawRaw",[this,f*d])},doConfig:function(){c.Legend.superclass.doConfig.call(this);var a=this._(),b=a.get("sign_size"),d=a.container;a.T.textFont(a.get("fontStyle"));a.push("signwidth",b+a.get("sign_space"));a.get("line_height")<b&&a.push("line_height",b+b/5);"center"==a.get("align")&&"middle"==a.get("valign")&&a.push("valign","top");"left"==d.get("align")&&"middle"==a.get("valign")&&a.push("align","right");var b=0,e=w=a.get("width"),f=0,g="auto"==w,h=c.isNumber(a.get("column")),k=c.isNumber(a.get("row")),m=a.data.length;!h&&!k&&(h=1);h&&!k&&a.push("row",Math.ceil(m/a.get("column")));!h&&k&&a.push("column",Math.ceil(m/a.get("row")));h=a.get("column");k=a.get("row");m>k*h&&(k+=Math.ceil((m-k*h)/h),a.push("row",k));a.columnwidth=Array(h);g&&(e=0);a.data.each(function(b,d){c.merge(b,a.fireEvent(a,"parse",[a,b.name,d]));b.text=b.text||b.name;b.width=a.T.measureText(b.text)},a);for(var l=0;l<h;l++){f=0;for(b=l;b<m;)f=Math.max(f,a.data[b].width),b+=h;a.columnwidth[l]=f;e+=f}g&&(w=a.push("width",e+a.get("hpadding")+a.get("signwidth")*h+(h-1)*a.get("legend_space")));w>a.get("maxwidth")&&(w=a.push("width",a.get("maxwidth")));a.push("textwidth",w-a.get("hpadding")-a.get("signwidth"));a.width=w;a.height=b=a.push("height",k*a.get("line_height")+a.get("vpadding"));a.y="top"==a.get("valign")?d.get("t_originy"):"bottom"==a.get("valign")?d.get("b_originy")-b:d.get("centery")-b/2;a.x="left"==a.get("align")?d.get("l_originx"):"center"==a.get("align")?d.get("centerx")-a.get("textwidth")/2:d.get("r_originx")-w;a.x=a.push("originx",a.x+a.get("offsetx"));a.y=a.push("originy",a.y+a.get("offsety"))}});c.Label=c.extend(c.Component,{configure:function(){c.Label.superclass.configure.apply(this,arguments);this.type="legend";this.set({text:"",line_height:12,line_thickness:1,sign:"square",sign_size:12,padding:"2 5",offsety:2,sign_space:5,background_color:"#efefef",text_with_sign_color:!1});this.atomic=!0;this.registerEvent()},isEventValid:function(a){return{valid:c.inRange(this.labelx,this.labelx+this.get("width"),a.x)&&c.inRange(this.labely,this.labely+this.get("height"),a.y)}},text:function(a){a&&this.push("text",a);this.push("width",this.T.measureText(this.get("text"))+this.get("hpadding")+this.get("sign_size")+this.get("sign_space"))},localizer:function(){var a=this.get("quadrantd");this.labelx=2<=a&&3>=a?this.get("labelx")-this.get("width"):this.get("labelx");this.labely=3<=a?this.get("labely")-this.get("height"):this.get("labely")},doDraw:function(){var a=this._();a.localizer();var b=a.get("line_potins"),c=a.get("sign_size"),e=a.labelx+a.get("padding_left"),f=a.labely+a.get("padding_top");a.T.lines(b,a.get("line_thickness"),a.get("border.color"),a.get("line_globalComposite"));a.T.box(a.labelx,a.labely,a.get("width"),a.get("height"),a.get("border"),a.get("f_color"),!1,a.get("shadow"),a.get("shadow_color"),a.get("shadow_blur"),a.get("shadow_offsetx"),a.get("shadow_offsety"));a.T.textStyle("left","top",a.get("fontStyle"));b=a.get("color");a.get("text_with_sign_color")&&(b=a.get("scolor"));"square"==a.get("sign")?a.T.box(e,f,c,c,0,a.get("scolor")):a.T.round(e+c/2,f+c/2,c/2,a.get("scolor"));a.T.fillText(a.get("text"),e+c+a.get("sign_space"),f,a.get("textwidth"),b)},doConfig:function(){c.Label.superclass.doConfig.call(this);var a=this._();a.T.textFont(c.getFont(a.get("fontweight"),a.get("fontsize"),a.get("font")));a.get("fontsize")>a.get("line_height")&&a.push("line_height",a.get("fontsize"));a.push("height",a.get("line_height")+a.get("vpadding"));a.text();a.localizer()}});c.Text=c.extend(c.Component,{configure:function(){c.Text.superclass.configure.apply(this,arguments);this.type="text";this.set({text:"",textAlign:"center",background_color:0,textBaseline:"top",border:{enable:!1},width:0,height:0,writingmode:"lr",line_height:16});this.registerEvent();this.preventEvent=!0},doDraw:function(){this.get("box_feature")&&this.T.box(this.x,this.y,this.get("width"),this.get("height"),this.get("border"),this.get("f_color"));""!=this.get("text")&&this.T.text(this.get("text"),this.get("textx"),this.get("texty"),this.get("width"),this.get("color"),this.get("textAlign"),this.get("textBaseline"),this.get("fontStyle"),0,0,this.get("shadow"))},doConfig:function(){c.Text.superclass.doConfig.call(this);var a=this._(),b=a.x,d=a.y,e=a.get("width"),f=a.get("height"),g=a.get("textAlign"),b=b+("center"==g?e/2:"right"==g?e:0);f&&(d+=f/2,a.push("textBaseline","middle"));a.push("textx",b);a.push("texty",d);a.push("box_feature",e&&f)}});(function(a){function b(a){"string"===typeof a&&(a=document.getElementById(a));if(!a||!a.tagName||"canvas"!=a.tagName.toLowerCase())throw Error("there not a canvas element");this.canvas=a;this.c=this.canvas.getContext("2d");this.width=this.canvas.width;this.height=this.canvas.height}var c=Math.PI/90,e=Math.PI,f=Math.ceil,g=Math.floor,h=2*Math.PI,k=Math.max,m=Math.min,l=Math.sin,s=Math.cos,n=function(a,b){return 1==a?g(b)+0.5:Math.round(b)},o=function(a,b,c,d){var e=b.x,f=b.y,g=a[c-1],h=a[c+1],n,l;if(c<a.length-1){var a=g.y,c=h.y,B;n=(d*e+g.x)/(d+1);l=(d*f+a)/(d+1);h=(d*e+h.x)/(d+1);d=(d*f+c)/(d+1);B=(d-l)*(h-e)/(h-n)+f-d;l+=B;d+=B;l>a&&l>f?(l=k(a,f),d=2*f-l):l<a&&l<f&&(l=m(a,f),d=2*f-l);d>c&&d>f?(d=k(c,f),l=2*f-d):d<c&&d<f&&(d=m(c,f),l=2*f-d);b.rcx=h;b.rcy=d}return[g.rcx||g.x,g.rcy||g.y,n||e,l||f,e,f]},G=function(b){return a.isNumber(b)?b:a.parseFloat(b,b)},A=function(b){var c=0,d=0,e,f=0;b.each(function(b){d=b.value;if(a.isArray(d)){var j=0;f=d.length>f?d.length:f;for(var g=0;g<d.length;g++)d[g]=G(d[g]),j+=d[g],e||(e=d),c=d[g]>c?d[g]:c,e=d[g]<e?d[g]:e;b.total=j}else d=G(d),b.value=d,this.total+=d,c=d>c?d:c,e||(e=d),e=d<e?d:e},this);this.get("minValue")&&(e=this.get("minValue")<e?this.get("minValue"):e);this.get("maxValue")&&(c=this.get("maxValue")<c?this.get("maxValue"):c);a.isArray(this.get("data_labels"))&&(f=this.get("data_labels").length>f?this.get("data_labels").length:f);this.push("maxItemSize",f);this.push("minValue",e);this.push("maxValue",c);this.push("total",this.total)},E=function(a){this.data_labels=this.get("data_labels");for(var b=0,c=0,d,e,f=this.data_labels.length,g=0;g<f;g++){for(var h=[],n=0;n<a.length;n++)e=a[n],d=e.value[g],d=G(d,d),e.value[g]=d,this.total+=d,b=d>b?d:b,c=d<c?d:c,h.push({name:e.name,value:e.value[g],color:e.color});this.columns.push({name:this.data_labels[g],item:h})}this.push("minValue",c);this.push("maxValue",b);this.push("total",this.total)};b.prototype={css:function(b,c){if(a.isDefined(c))this.canvas.style[b]=c;else return this.canvas.style[b]},ellipse:function(a,b,e,f,g,r,h,n,I,m,B,k,o,A){k=!!k;o=!!o;this.save().gCo(A).strokeStyle(n,I,m).shadowOn(B).fillStyle(h).moveTo(a,b).beginPath();for(o&&this.moveTo(a,b);g<=r;)this.lineTo(a+e*s(g),b+(k?-f*l(g):f*l(g))),g+=c;return this.lineTo(a+e*s(r),b+(k?-f*l(r):f*l(r))).closePath().stroke(n).fill(h).restore()},arc:function(a,b,c,d,e,f,g,h,n,m,k,u,o,A){u=!!u;o=!!o&&!d;this.save().gCo(A).strokeStyle(h,n,m).shadowOn(k).fillStyle(g).beginPath();d?(this.moveTo(a+s(e)*(c-d),b+l(e)*(c-d)).lineTo(a+s(e)*c,b+l(e)*c),this.c.arc(a,b,c,e,f,u),this.lineTo(a+s(f)*(c-d),b+l(f)*(c-d)),this.c.arc(a,b,c-d,f,e,!u)):this.c.arc(a,b,c,e,f,u);o&&this.lineTo(a,b);return this.closePath().fill(g).stroke(h).restore()},sector:function(a,b,c,d,e,f,g,h,n,l,m,k){m&&this.arc(a,b,c,d,e,f,g,0,0,0,m,k,!0,!0);return this.arc(a,b,c,d,e,f,g,h,n,l,!1,k,!0)},sector3D:function(){var b=function(b,j,f,g,v,h,z,n,C){var m=function(a,c){this.lineTo(b+f*s(a),j+(c||0)+(z?-g*l(a):g*l(a)))},v=z&&h>e&&v<e?e:v,h=!z&&v<e&&h>e?e:h,k=v;for(this.fillStyle(a.dark(C)).moveTo(b+f*s(v),j+(z?-g*l(v):g*l(v))).beginPath();k<=h;)m.call(this,k),k+=c;m.call(this,h);this.lineTo(b+f*s(h),j+n+(z?-g*l(h):g*l(h)));for(k=h;k>=v;)m.call(this,k,n),k-=c;m.call(this,v,n);this.lineTo(b+f*s(v),j+(z?-g*l(v):g*l(v))).closePath().fill(!0)},f=function(a,b,c,j,d,e,f,g){c=a+c*s(f);j=b+e+(d?-j*l(f):j*l(f));this.moveTo(a,b).beginPath().fillStyle(g).lineTo(a,b+e).lineTo(c,j).lineTo(c,j-e).lineTo(a,b).closePath().fill(!0)},g=function(b,c,j,d,g,v,h,n,C){var m=h?g<e/2||g>1.5*e:g>e/2&&g<1.5*e,l=h?v>e/2&&v<1.5*e:v<e/2||v>1.5*e;if(!m&&!l)return!1;C=a.dark(C);m&&f.call(this,b,c,j,d,h,n,g,C);l&&f.call(this,b,c,j,d,h,n,v,C)},h=function(a,c,d,e,f,h,z,n,C,m,l,k,o){this.ellipse(a,c+z,d,e,f,h,n,C,m,l,k,o,!0);g.call(this,a,c,d,e,f,h,o,z,n);this.ellipse(a,c,d,e,f,h,n,C,m,l,!1,o,!0);b.call(this,a,c,d,e,f,h,o,z,n);return this};h.layerPaint=g;h.sPaint=b;h.layerDraw=f;return h}(),textStyle:function(a,b,c){return this.textAlign(a).textBaseline(b).textFont(c)},strokeStyle:function(a,b,c,d){if(a&&(b&&(this.c.lineWidth=b),c&&(this.c.strokeStyle=c),d))this.c.lineJoin=d;return this},globalAlpha:function(a){a&&(this.c.globalAlpha=a);return this},fillStyle:function(a){a&&(this.c.fillStyle=a);return this},arc2:function(a,b,c,d,e){this.c.arcTo(a,b,c,d,e);return this},textAlign:function(a){a&&(this.c.textAlign=a);return this},textBaseline:function(a){a&&(this.c.textBaseline=a);return this},textFont:function(a){a&&(this.c.font=a);return this},shadowOn:function(a){a&&(this.c.shadowColor=a.color,this.c.shadowBlur=a.blur,this.c.shadowOffsetX=a.offsetx,this.c.shadowOffsetY=a.offsety);return this},shadowOff:function(){this.c.shadowColor="white";this.c.shadowBlur=this.c.shadowOffsetX=this.c.shadowOffsetY=0;return this},avgLinearGradient:function(a,b,c,d,e){a=this.createLinearGradient(a,b,c,d);for(b=0;b<e.length;b++)a.addColorStop(b/(e.length-1),e[b]);return a},createLinearGradient:function(a,b,c,d){return this.c.createLinearGradient(a,b,c,d)},avgRadialGradient:function(a,b,c,d,e,f,g){a=this.createRadialGradient(a,b,c,d,e,f);for(b=0;b<g.length;b++)a.addColorStop(b/(g.length-1),g[b]);return a},createRadialGradient:function(a,b,c,d,e,f){return this.c.createRadialGradient(a,b,c,d,e,f)},text:function(a,b,c,d,e,f,g,h,n,m,l){return this.save().textStyle(f,g,h).fillText(a,b,c,d,e,n,m,l).restore()},fillText:function(a,b,c,d,e,f,g,h){a+="";d=d||!1;f=f||"lr";g=g||16;this.save().fillStyle(e).shadowOn(h);a.split("tb"==f?"":"\n").each(function(a){try{d?this.c.fillText(a,b,c,d):this.c.fillText(a,b,c),c+=g}catch(j){console.log(j.message+"["+a+","+b+","+c+"]")}},this);return this.restore()},measureText:function(a){return this.c.measureText(a).width},moveTo:function(a,b){this.c.moveTo(a||0,b||0);return this},lineTo:function(a,b){this.c.lineTo(a||0,b||0);return this},save:function(){this.c.save();return this},restore:function(){this.c.restore();return this},beginPath:function(){this.c.beginPath();return this},closePath:function(){this.c.closePath();return this},stroke:function(a){a&&this.c.stroke();return this},fill:function(a){a&&this.c.fill();return this},cube:function(b,c,d,e,f,g,h,m,l,k,o,u){b=n(k,b);c=n(k,c);h=h&&0<h?h:f;e=c-h*e;d=n(k,b+h*d);e=n(k,e);u&&(this.polygon(m,l,k,o,u,!1,[b,c,d,e,d+f,e,b+f,c]),this.polygon(m,l,k,o,u,!1,[b,c,b,c+g,b+f,c+g,b+f,c]),this.polygon(m,l,k,o,u,!1,[b+f,c,d+f,e,d+f,e+g,b+f,c+g]));this.polygon(a.dark(m),l,k,o,!1,!1,[b,c,d,e,d+f,e,b+f,c]);this.polygon(m,l,k,o,!1,!1,[b,c,b,c+g,b+f,c+g,b+f,c]);this.polygon(a.dark(m),l,k,o,!1,!1,[b+f,c,d+f,e,d+f,e+g,b+f,c+g]);return this},cube3D:function(b,c,d,e,f,g,h,m,l,k,o,u){b=n(k,b);c=n(k,c);m=!m||0==m?g:m;f?(e=a.vectorP2P(d,e),d=b+m*e.x,e=c-m*e.y):(d=b+m*d,e=c-m*e);for(;6>u.length;)u.push(!1);d=n(k,d);e=n(k,e);m=[];0>e?a.isObject(u[4])&&m.push(a.applyIf({points:[b,c-h,d,e-h,d+g,e-h,b+g,c-h]},u[4])):a.isObject(u[0])&&m.push(a.applyIf({points:[b,c,d,e,d+g,e,b+g,c]},u[0]));a.isObject(u[1])&&m.push(a.applyIf({points:[d,e,d,e-h,d+g,e-h,d+g,e]},u[1]));a.isObject(u[2])&&m.push(a.applyIf({points:[b,c,b,c-h,d,e-h,d,e]},u[2]));a.isObject(u[3])&&m.push(a.applyIf({points:[b+g,c,b+g,c-h,d+g,e-h,d+g,e]},u[3]));0>e?a.isObject(u[0])&&m.push(a.applyIf({points:[b,c,d,e,d+g,e,b+g,c]},u[0])):a.isObject(u[4])&&m.push(a.applyIf({points:[b,c-h,d,e-h,d+g,e-h,b+g,c-h]},u[4]));a.isObject(u[5])&&m.push(a.applyIf({points:[b,c,b,c-h,b+g,c-h,b+g,c]},u[5]));m.each(function(a){this.polygon(a.color,l,k,o,a.shadow,a.alpha,a.points)},this);return this},polygon:function(a,b,c,d,e,f,g){if(!(2>g.length)){this.save().strokeStyle(b,c,d).beginPath().fillStyle(a).globalAlpha(f).shadowOn(e).moveTo(g[0],g[1]);for(a=2;a<g.length;a+=2)this.lineTo(g[a],g[a+1]);return this.closePath().stroke(b).fill(!0).restore()}},lines:function(a,b,c,d){if(4>a.length)return this;this.save().gCo(d).beginPath().strokeStyle(!0,b,c).moveTo(n(b,a[0]),n(b,a[1]));for(c=2;c<a.length-1;c+=2)this.lineTo(n(b,a[c]),n(b,a[c+1]));return this.stroke(!0).restore()},bezierCurveTo:function(a){this.c.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5]);return this},lineArray:function(a,b,c,d,e){if(2>a.length)return this;this.strokeStyle(!0,b,c).moveTo(n(b,a[0].x),n(b,a[0].y));if(d)for(c=1;c<a.length;c++)this.bezierCurveTo(o(a,a[c],c,e));else for(c=1;c<a.length;c++)this.lineTo(n(b,a[c].x),n(b,a[c].y));return this.stroke(!0)},manyLine:function(a,b,c,d,e){var f=[],g=!1;a.each(function(a){a.ignored&&g?(this.lineArray(f,b,c,d,e),f=[],g=!1):(f.push(a),g=!0)},this)},line:function(a,b,c,d,e,f,g){if(!e||0==e)return this;this.save().gCo(g);return this.beginPath().strokeStyle(!0,e,f).moveTo(n(e,a),n(e,b)).lineTo(n(e,c),n(e,d)).stroke(!0).restore()},round:function(a,b,c,d,e,f){return this.arc(a,b,c,0,0,h,d,!!f,e,f)},fillRect:function(a,b,c,d){this.c.fillRect(a,b,c,d);return this},translate:function(a,b){this.c.translate(a,b);return this},clearRect:function(a,b,c,d){c=c||this.width;d=d||this.height;this.c.clearRect(a||0,b||0,c,d);return this},gCo:function(a){return a?this.gCO(a):this},gCO:function(a){this.c.globalCompositeOperation=a?"destination-over":"source-over";return this},box:function(b,c,d,e,h,m,l,k){h=h||{enable:0};if(h.enable)var o=h.width,s=h.color,B=h.radius,u=a.isNumber(o),o=a.parsePadding(o),d=d-(o[1]+o[3])/2,e=e-(o[0]+o[2])/2,b=b+o[3]/2,c=c+o[0]/2,b=g(b),c=g(c),o=u?o[0]:o,B=!u||0==B||"0"==B?0:a.parsePadding(B);this.save().translate(b,c).shadowOn(l).gCo(k).fillStyle(m).strokeStyle(u,o,s);B?this.beginPath().moveTo(B[0],n(o,0)).lineTo(d-B[1],n(o,0)).arc2(d,n(o,0),d,B[1],B[1]).lineTo(n(o,d),e-B[2]).arc2(n(o,d),e,d-B[2],e,B[2]).lineTo(B[3],n(o,e)).arc2(0,n(o,e),0,e-B[3],B[3]).lineTo(n(o,0),B[0]).arc2(n(o,0),0,B[0],0,B[0]).closePath().fill(m).stroke(o):!h.enable||u?(h.enable&&this.c.strokeRect(0,0,n(o,d),n(o,e)),m&&this.fillRect(0,0,d,e)):(m&&this.beginPath().moveTo(g(o[3]/2),g(o[0]/2)).lineTo(f(d-o[1]/2),o[0]/2).lineTo(f(d-o[1]/2),f(e-o[2]/2)).lineTo(g(o[3]/2),f(e-o[2]/2)).lineTo(g(o[3]/2),g(o[0]/2)).closePath().fill(!0),o&&(s=a.isArray(s)?s:[s,s,s,s],this.line(d,o[0]/2,d,e-o[0]/2,o[1],s[1],0).line(0,o[0]/2,0,e-o[0]/2,o[3],s[3],0).line(g(-o[3]/2),0,d+o[1]/2,0,o[0],s[0],0).line(g(-o[3]/2),e,d+o[1]/2,e,o[2],s[2],0)));return this.restore()},toImageURL:function(a){return this.canvas.toDataURL(a||"image/png")},addEvent:function(b,c,d){a.Event.addEvent(this.canvas,b,c,d)}};a.Chart=a.extend(a.Painter,{configure:function(){a.Chart.superclass.configure.apply(this,arguments);this.type="chart";this.set({render:"",data:[],width:void 0,height:void 0,lineJoin:"round",align:"center",default_mouseover_css:!0,showpercent:!1,decimalsnum:1,title:{text:"",fontweight:"bold",fontsize:20,height:30},subtitle:{text:"",fontweight:"bold",fontsize:16,height:20},footnote:{text:"",color:"#5d7f97",textAlign:"right",height:20},footnote_align:"right",title_align:"center",title_valign:"top",animation:!1,doAnimationFn:a.emptyFn,animation_timing_function:"easeInOut",duration_animation_duration:1E3,z_index:999,legend:{enable:!1},tip:{enable:!1}});this.registerEvent("parseTipText","beforeAnimation","afterAnimation","animating");this.T=null;this.animationed=this.rendered=!1;this.data=[];this.components=[];this.total=0},plugin:function(a){a.inject(this);this.components.push(a)},toImageURL:function(){return this.T.toImageURL()},segmentRect:function(){this.T.clearRect(this.get("l_originx"),this.get("t_originy"),this.get("client_width"),this.get("client_height"))},resetCanvas:function(){this.T.box(this.get("l_originx"),this.get("t_originy"),this.get("client_width"),this.get("client_height"),0,this.get("f_color"),0,!0)},animation:function(a){a.segmentRect();a.doAnimation(a.variable.animation.time,a.duration);a.resetCanvas();a.variable.animation.time<a.duration?(a.variable.animation.time++,requestAnimFrame(function(){a.animation(a)})):requestAnimFrame(function(){a.variable.animation.time=0;a.animationed=!0;a.draw();a.processAnimation=!1;a.fireEvent(a,"afterAnimation",[a])})},doAnimation:function(a,b){this.get("doAnimationFn").call(this,a,b)},doSort:function(){this.components.sort(function(b,c){return(a.isArray(b)?b.zIndex||0:b.get("z_index"))>(a.isArray(c)?c.zIndex||0:c.get("z_index"))})},commonDraw:function(){a.Assert.isTrue(this.rendered,this.type+" has not rendered.");a.Assert.isTrue(this.initialization,this.type+" has initialize failed.");a.Assert.gtZero(this.data.length,this.type+"'s data is empty.");this.redraw||(this.doSort(),this.title&&this.title.draw(),this.subtitle&&this.subtitle.draw(),this.footnote&&this.footnote.draw(),this.T.box(0,0,this.width,this.height,this.get("border"),this.get("f_color"),0,!0));this.redraw=!0;!this.animationed&&this.get("animation")?(this.fireEvent(this,"beforeAnimation",[this]),this.animation(this)):(this.segmentRect(),this.components.eachAll(function(a){a.draw()},this),this.resetCanvas())},create:function(c){this.width=this.pushIf("width",400);this.height=this.pushIf("height",300);var d="width:"+this.width+"px;height:"+this.height+"px;padding:0px;overflow:hidden;position:relative;",e=a.iGather(this.type);this.shellid=a.iGather(this.type+"-shell");c.innerHTML="<div id='"+this.shellid+"' style='"+d+"'><canvas id= '"+e+"'  width='"+this.width+"' height="+this.height+"'><p>Your browser does not support the canvas element</p></canvas></div>";this.element=document.getElementById(e);this.shell=document.getElementById(this.shellid);this.T=this.target=new b(this.element);this.rendered=!0},render:function(a){this.push("render",a)},initialize:function(){var a=this._(),b=a.get("data");if(!a.rendered){var c=a.get("render");"string"==typeof c&&document.getElementById(c)?a.create(document.getElementById(c)):"object"==typeof c&&a.create(c)}0<b.length&&a.rendered&&!a.initialization&&("simple"==a.dataType?A.call(a,b):"complex"==a.dataType&&E.call(a,b),a.data=b,a.doConfig(),a.initialization=!0)},doConfig:function(){a.Chart.superclass.doConfig.call(this);var b=this._(),c=b.variable.event,d=b.get("default_mouseover_css"),e,g;a.Assert.isArray(b.data);b.T.strokeStyle(!0,b.get("brushsize"),b.get("strokeStyle"),b.get("lineJoin"));b.processAnimation=b.get("animation");b.duration=f(b.get("duration_animation_duration")*a.FRAME/1E3);b.variable.animation={type:0,time:0,queue:[]};b.animationArithmetic=a.getAnimationArithmetic(b.get("animation_timing_function"));b.on("afterAnimation",function(){var a=b.variable.animation.queue.shift();a&&b[a.handler].apply(b,a.arguments)});["click","dblclick","mousemove"].each(function(c){b.T.addEvent(c,function(d){b.processAnimation||b.fireEvent(b,c,[b,a.Event.fix(d)])},!1)});b.on("click",function(a,b){a.components.eachAll(function(a){if(!a.preventEvent){var c=a.isMouseOver(b);c.valid&&a.fireEvent(a,"click",[a,b,c])}})});b.on("mousemove",function(a,b){e=g=!1;a.components.eachAll(function(f){if(!f.preventEvent){var h=f.variable.event,n=f.isMouseOver(b);if(n.valid){if(e=!0,g=g||f.atomic,c.mouseover||(c.mouseover=!0,a.fireEvent(a,"mouseover",[b])),d&&g&&a.T.css("cursor","pointer"),h.mouseover||(h.mouseover=!0,f.fireEvent(f,"mouseover",[b,n])),f.fireEvent(f,"mousemove",[b,n]),n.stop)return!1}else h.mouseover&&(h.mouseover=!1,f.fireEvent(f,"mouseout",[b,n]))}});d&&!g&&c.mouseover&&a.T.css("cursor","default");!e&&c.mouseover&&(c.mouseover=!1,a.fireEvent(a,"mouseout",[b]))});b.push("r_originx",b.width-b.get("padding_right"));b.push("b_originy",b.height-b.get("padding_bottom"));var h=0,n=b.push("l_originx",b.get("padding_left")),l=b.push("t_originy",b.get("padding_top")),o=b.push("client_width",b.get("width")-b.get("hpadding"));a.isString(b.get("title"))&&b.push("title",a.applyIf({text:b.get("title")},b.default_.title));a.isString(b.get("subtitle"))&&b.push("subtitle",a.applyIf({text:b.get("subtitle")},b.default_.subtitle));a.isString(b.get("footnote"))&&b.push("footnote",a.applyIf({text:b.get("footnote")},b.default_.footnote));if(""!=b.get("title.text")){var s=""!=b.get("subtitle.text"),h=s?b.get("title.height")+b.get("subtitle.height"):b.get("title.height"),l=b.push("t_originy",l+h);b.push("title.originx",n);b.push("title.originy",b.get("padding_top"));b.push("title.width",o);b.title=new a.Text(b.get("title"),b);s&&(b.push("subtitle.originx",n),b.push("subtitle.originy",b.get("title.originy")+b.get("title.height")),b.push("subtitle.width",o),b.subtitle=new a.Text(b.get("subtitle"),b))}""!=b.get("footnote.text")&&(s=b.get("footnote.height"),h+=s,b.push("b_originy",b.get("b_originy")-s),b.push("footnote.originx",n),b.push("footnote.originy",b.get("b_originy")),b.push("footnote.width",o),b.footnote=new a.Text(b.get("footnote"),b));h=b.push("client_height",b.get("height")-b.get("vpadding")-h);b.push("minDistance",m(o,h));b.push("maxDistance",k(o,h));b.push("minstr",o<h?"width":"height");b.push("centerx",n+o/2);b.push("centery",l+h/2);b.push("communal_option","shadow,shadow_color,shadow_blur,shadow_offsetx,shadow_offsety,tip".split(","));b.get("legend.enable")&&(b.legend=new a.Legend(a.apply({maxwidth:o,data:b.data},b.get("legend")),b),b.components.push(b.legend));b.get("tip.enable")&&b.push("tip.wrap",b.shell)}})})(c);c.Custom=c.extend(c.Component,{configure:function(){c.Custom.superclass.configure.apply(this,arguments);this.type="custom";this.set({drawFn:c.emptyFn,eventValid:void 0});this.registerEvent()},doDraw:function(a){this.get("drawFn").call(this,a)},isEventValid:function(a){return c.isFunction(this.get("eventValid"))?this.get("eventValid").call(this,a):{valid:!1}},doConfig:function(){c.Custom.superclass.doConfig.call(this)}});c.Scale=c.extend(c.Component,{configure:function(){c.Scale.superclass.configure.apply(this,arguments);this.type="scale";this.set({position:"left",which:"h",distance:void 0,start_scale:0,end_scale:void 0,min_scale:void 0,max_scale:void 0,scale_space:void 0,scale_share:5,scale_enable:!0,scale_size:1,scale_width:4,scale_color:"#333333",scaleAlign:"center",labels:[],scale2grid:!0,text_height:16,text_space:4,textAlign:"left",decimalsnum:0,join_style:"none",join_size:2});this.registerEvent("parseText");this.items=[];this.number=0},isEventValid:function(){return{valid:!1}},doDraw:function(){var a=this._(),b=0,c=0,e=0,f=0,g=0,h=0,k=a.get("scale_width"),m=k/2,l=a.get("scaleAlign"),s=a.get("textAlign"),n=a.get("text_space");a.isH?("top"==l?c=-k:"center"==l?(c=-m,f=m):f=k,a.T.textAlign("center"),"top"==s)?(h=-n,a.T.textBaseline("bottom")):(h=n,a.T.textBaseline("top")):("left"==l?b=-k:"center"==l?(b=-m,e=m):e=k,a.T.textBaseline("middle"),"right"==s)?(a.T.textAlign("left"),g=n):(a.T.textAlign("right"),g=-n);a.T.textFont(a.get("fontStyle"));a.items.each(function(n){a.get("scale_enable")&&a.T.line(n.x+b,n.y+c,n.x+e,n.y+f,a.get("scale_size"),a.get("scale_color"),!1);a.T.fillText(n.text,n.textX+g,n.textY+h,!1,a.get("color"),"lr",a.get("text_height"))})},doConfig:function(){c.Scale.superclass.doConfig.call(this);c.Assert.isNumber(this.get("distance"),"distance");var a=this._(),b=a.get("labels").length,d=a.get("min_scale"),e=a.get("max_scale"),f=a.get("scale_space"),g=a.get("end_scale"),h=a.get("start_scale");if(0<b)a.number=b-1;else{c.Assert.isTrue(c.isNumber(e)||c.isNumber(g),"max_scale&end_scale");if(!g||g<e)g=a.push("end_scale",c.ceil(e));h>d&&a.push("start_scale",c.floor(d));f&&f<g-h&&a.push("scale_share",(g-h)/f);if(!f||f>g-h)f=a.push("scale",(g-h)/a.get("scale_share"));a.number=a.get("scale_share");if(1>f&&0==a.get("decimalsnum"))for(d=f;1>d;)d*=10,a.push("decimalsnum",a.get("decimalsnum")+1)}a.push("distanceOne",a.get("valid_distance")/a.number);var d=0,k;a.T.textFont(a.get("fontStyle"));a.push("which",a.get("which").toLowerCase());a.isH="h"==a.get("which");for(var m=0;m<=a.number;m++)e=b?a.get("labels")[m]:(f*m+h).toFixed(a.get("decimalsnum")),g=a.isH?a.get("valid_x")+m*a.get("distanceOne"):a.x,k=a.isH?a.y:a.get("valid_y")+a.get("distance")-m*a.get("distanceOne"),a.items.push(c.merge({text:e,x:g,y:k,textX:g,textY:k},a.fireEvent(a,"parseText",[e,g,k,m]))),d=Math.max(d,a.T.measureText(e));a.left=a.right=a.top=a.bottom=0;b=a.get("text_space");f=a.get("textAlign");h=a.get("scaleAlign");e=a.get("scale_width");g=e/2;a.isH?(a.top="top"==h?e:"center"==h?g:0,a.bottom=e-a.top,"top"==f?a.top+=a.get("text_height")+b:a.bottom+=a.get("text_height")+b):(a.left="left"==h?e:"center"==h?g:0,a.right=e-a.left,"left"==f?a.left+=d+b:a.right+=d+b)}});c.Coordinate={coordinate_:function(){var a=this._();return a.is3D()?(a.push("coordinate.xAngle_",a.get("xAngle_")),a.push("coordinate.yAngle_",a.get("yAngle_")),a.push("coordinate.zHeight",a.get("zHeight")*a.get("bottom_scale")),new c.Coordinate3D(c.apply({scale:{position:a.get("scaleAlign"),scaleAlign:a.get("scaleAlign"),max_scale:a.get("maxValue"),min_scale:a.get("minValue")}},a.get("coordinate")),a)):new c.Coordinate2D(c.apply({scale:{position:a.get("scaleAlign"),max_scale:a.get("maxValue"),min_scale:a.get("minValue")}},a.get("coordinate")),a)},coordinate:function(){var a=this._(),b=a.get("client_width"),c=a.get("client_height"),e=a.pushIf("coordinate.width",Math.floor(0.9*b)),f=a.pushIf("coordinate.height",Math.floor(0.9*c));f>c&&(f=a.push("coordinate.height",0.9*c));e>b&&(e=a.push("coordinate.width",0.9*b));a.is3D()&&(f=a.push("coordinate.height",f-(a.get("coordinate.pedestal_height")||22)-(a.get("coordinate.board_deep")||20)));"left"==a.get("align")?a.push("originx",a.get("l_originx")):"right"==a.get("align")?a.push("originx",a.get("r_originx")-e):a.push("originx",a.get("centerx")-e/2);a.push("originx",a.get("originx")+a.get("offsetx"));a.push("originy",a.get("centery")-f/2+a.get("offsety"));(!a.get("coordinate.valid_width")||a.get("coordinate.valid_width")>e)&&a.push("coordinate.valid_width",e);(!a.get("coordinate.valid_height")||a.get("coordinate.valid_height")>f)&&a.push("coordinate.valid_height",f);a.x=a.get("originx");a.y=a.get("originy");a.push("coordinate.originx",a.x);a.push("coordinate.originy",a.y)}};c.Coordinate2D=c.extend(c.Component,{configure:function(){c.Coordinate2D.superclass.configure.apply(this,arguments);this.type="coordinate2d";this.set({sign_size:12,sign_space:5,scale:[],valid_width:void 0,valid_height:void 0,grid_line_width:1,grid_color:"#dbe1e1",gridlinesVisible:!0,scale2grid:!0,grids:void 0,ignoreOverlap:!0,ignoreEdge:!1,xlabel:"",ylabel:"",alternate_color:!0,alternate_direction:"v",alternate_color_factor:0.01,crosshair:{enable:!1},width:void 0,height:void 0,z_index:-1,axis:{enable:!0,color:"#666666",width:1}});this.registerEvent();this.scale=[];this.gridlines=[]},getScale:function(a){for(var b=0;b<this.scale.length;b++){var c=this.scale[b];if(c.get("position")==a)return{start:c.get("start_scale"),end:c.get("end_scale"),distance:c.get("end_scale")-c.get("start_scale")}}return{start:0,end:0,distance:0}},isEventValid:function(a){return{valid:a.x>this.x&&a.x<this.x+this.get("width")&&a.y<this.y+this.get("height")&&a.y>this.y}},doDraw:function(){var a=this._();a.T.box(a.x,a.y,a.get("width"),a.get("height"),0,a.get("f_color"));if(a.get("alternate_color")){var b,d,e=!1,f=[0,0,0,0],g=c.dark(a.get("f_color"),a.get("alternate_color_factor"));a.get("axis.enable")&&(f=a.get("axis.width"))}var h=a.get("grid_line_width"),k="v"==a.get("alternate_direction");a.gridlines.each(function(c){c.x1=Math.round(c.x1);c.y1=Math.round(c.y1);c.x2=Math.round(c.x2);c.y2=Math.round(c.y2);a.get("alternate_color")&&(e&&(k?a.T.box(c.x1+f[3],c.y1+h,c.x2-c.x1-f[3]-f[1],d-c.y1-h,0,g):a.T.box(b+h,c.y2+f[0],c.x1-b,c.y1-c.y2-f[0]-f[2],0,g)),b=c.x1,d=c.y1,e=!e);a.T.line(c.x1,c.y1,c.x2,c.y2,h,a.get("grid_color"))});a.T.box(a.x,a.y,a.get("width"),a.get("height"),a.get("axis"),!1,a.get("shadow"));a.scale.each(function(a){a.draw()})},doConfig:function(){c.Coordinate2D.superclass.doConfig.call(this);var a=this._();c.Assert.isNumber(a.get("width"),"width");c.Assert.isNumber(a.get("height"),"height");a.atomic=!1;a.get("gradient")&&c.isString(a.get("f_color"))&&a.push("f_color",a.T.avgLinearGradient(a.x,a.y,a.x,a.y+a.get("height"),[a.get("dark_color"),a.get("light_color")]));if(a.get("axis.enable")){var b=a.get("axis.width");c.isArray(b)||a.push("axis.width",[b,b,b,b])}a.get("crosshair.enable")&&(a.push("crosshair.wrap",a.container.shell),a.push("crosshair.height",a.get("height")),a.push("crosshair.width",a.get("width")),a.push("crosshair.top",a.y),a.push("crosshair.left",a.x),a.crosshair=new c.CrossHair(a.get("crosshair"),a));var d,e=!(!a.get("gridlinesVisible")||!a.get("grids")),b=e&&!!a.get("grids.horizontal"),f=e&&!!a.get("grids.vertical"),g=a.get("height"),h=a.get("width"),k=a.get("valid_width"),m=a.get("valid_height"),l=a.get("gridlinesVisible")&&a.get("scale2grid")&&!(b&&f),s=(h-k)/2,n=(g-m)/2,o=a.get("axis.width");c.isArray(a.get("scale"))||(c.isObject(a.get("scale"))?a.push("scale",[a.get("scale")]):a.push("scale",[]));a.get("scale").each(function(b){d=(d=b.position)||"left";d=d.toLowerCase();b.originx=a.x;b.originy=a.y;b.valid_x=a.x+s;b.valid_y=a.y+n;b.position=d;if(d=="top"){b.which="h";b.distance=h;b.valid_distance=k}else if(d=="right"){b.which="v";b.distance=g;b.valid_distance=m;b.originx=b.originx+h;b.valid_x=b.valid_x+k}else if(d=="bottom"){b.which="h";b.distance=h;b.valid_distance=k;b.originy=b.originy+g;b.valid_y=b.valid_y+m}else{b.which="v";b.distance=g;b.valid_distance=m}a.scale.push(new c.Scale(b,a.container))},a);if(e=a.push("ignoreOverlap",a.get("ignoreOverlap")&&a.get("axis.enable")||a.get("ignoreEdge")))var G=a.get("ignoreEdge")?function(b,c,d){return b=="v"?d==a.y||d==a.y+g:c==a.x||c==a.x+b}:function(b,c,d){return b=="v"?d==a.y&&o[0]>0||d==a.y+g&&o[2]>0:c==a.x&&o[3]>0||c==a.x+h&&o[1]>0};if(l)for(var A,E,j,z,l=0;l<a.scale.length;l++)if(A=a.scale[l],z=A.get("position"),!c.isFalse(A.get("scale2grid"))&&!(b&&"v"==A.get("which")||f&&"h"==A.get("which"))){E=j=0;"top"==z?j=g:"right"==z?E=-h:"bottom"==z?j=-g:E=h;for(z=0;z<A.items.length;z++)(!e||!G.call(a,A.get("which"),A.items[z].x,A.items[z].y))&&a.gridlines.push({x1:A.items[z].x,y1:A.items[z].y,x2:A.items[z].x+E,y2:A.items[z].y+j})}if(f){l=a.get("grids.vertical");c.Assert.gtZero(l.value,"value");f=h/l.value;A=l.value;"given_value"==l.way&&(A=f,f=l.value,f=f>h?h:f);for(l=0;l<=A;l++)(!e||!G.call(a,"h",a.x+l*f,a.y))&&a.gridlines.push({x1:a.x+l*f,y1:a.y,x2:a.x+l*f,y2:a.y+g})}if(b){b=a.get("grids.horizontal");c.Assert.gtZero(b.value,"value");f=g/b.value;A=b.value;"given_value"==b.way&&(A=f,f=b.value,f=f>g?g:f);for(l=0;l<=A;l++)(!e||!G.call(a,"v",a.x,a.y+l*f))&&a.gridlines.push({x1:a.x,y1:a.y+l*f,x2:a.x+h,y2:a.y+l*f})}}});c.Coordinate3D=c.extend(c.Coordinate2D,{configure:function(){c.Coordinate3D.superclass.configure.apply(this,arguments);this.type="coordinate3d";this.dimension=c._3D;this.set({xAngle:60,yAngle:20,xAngle_:void 0,yAngle_:void 0,zHeight:0,pedestal_height:22,board_deep:20,gradient:!0,color_factor:0.18,ignoreEdge:!0,alternate_color:!1,grid_color:"#7a8d44",background_color:"#d6dbd2",shadow_offsetx:4,shadow_offsety:2,wall_style:[],axis:{enable:!1}})},doDraw:function(){var a=this._(),b=a.get("width"),c=a.get("height"),e=a.get("xAngle_"),f=a.get("yAngle_"),g=a.get("zHeight"),h=e*g,k=f*g;a.T.cube3D(a.x,a.y+c+a.get("pedestal_height"),e,f,!1,b,a.get("pedestal_height"),3*g/2,a.get("axis.enable"),a.get("axis.width"),a.get("axis.color"),a.get("bottom_style"));a.T.cube3D(a.x+a.get("board_deep")*e,a.y+c-a.get("board_deep")*f,e,f,!1,b,c,g,a.get("axis.enable"),a.get("axis.width"),a.get("axis.color"),a.get("board_style"));a.T.cube3D(a.x,a.y+c,e,f,!1,b,c,g,a.get("axis.enable"),a.get("axis.width"),a.get("axis.color"),a.get("wall_style"));a.gridlines.each(function(b){a.T.line(b.x1,b.y1,b.x1+h,b.y1-k,a.get("grid_line_width"),a.get("grid_color"));a.T.line(b.x1+h,b.y1-k,b.x2+h,b.y2-k,a.get("grid_line_width"),a.get("grid_color"))});a.scale.each(function(a){a.draw()})},doConfig:function(){c.Coordinate3D.superclass.doConfig.call(this);var a=this._(),b=a.get("background_color"),d=c.dark(b,0.1),e=a.get("dark_color"),f=a.get("height"),g=a.get("width");3>a.get("wall_style").length&&a.push("wall_style",[{color:d},{color:b},{color:d}]);var h=a.get("wall_style")[0].color;a.push("bottom_style",[{shadow:a.get("shadow")},!1,!1,{color:h},{color:h},{color:h}]);a.push("board_style",[!1,!1,!1,{color:h},{color:b},!1]);if(a.get("gradient")){var k=a.get("xAngle_")*a.get("zHeight"),m=a.get("yAngle_")*a.get("zHeight"),l=a.get("wall_style"),s=a.get("bottom_style");c.isString(l[0].color)&&(l[0].color=a.T.avgLinearGradient(a.x,a.y+f,a.x+g,a.y+f,[h,e]));c.isString(l[1].color)&&(l[1].color=a.T.avgLinearGradient(a.x+k,a.y-m,a.x+k,a.y+f-m,[e,a.get("light_color")]));c.isString(l[2].color)&&(l[2].color=a.T.avgLinearGradient(a.x,a.y,a.x,a.y+f,[b,e]));s[5].color=a.T.avgLinearGradient(a.x,a.y+f,a.x,a.y+f+a.get("pedestal_height"),[b,d])}}});c.Rectangle=c.extend(c.Component,{configure:function(){c.Rectangle.superclass.configure.apply(this,arguments);this.type="rectangle";this.set({width:0,height:0,value_space:4,value:"",name:"",tipAlign:"top",valueAlign:"top",textAlign:"center",textBaseline:"top",shadow_blur:3,shadow_offsety:-1});this.atomic=!0;this.registerEvent("drawText")},doDraw:function(){this.drawRectangle();this.drawValue()},doConfig:function(){c.Rectangle.superclass.doConfig.call(this);c.Assert.gtZero(this.get("width"),"width");var a=this._(),b=a.variable.event;a.width=a.get("width");a.height=a.get("height");a.centerX=a.x+a.width/2;a.centerY=a.y+a.height/2;a.get("tip.enable")&&("follow"!=a.get("tip.showType")&&a.push("tip.invokeOffsetDynamic",!1),a.tip=new c.Tip(a.get("tip"),a));b.highlight=!1;a.on("mouseover",function(){b.highlight=true;a.redraw();b.highlight=false}).on("mouseout",function(){b.highlight=false;a.redraw()});a.on("beforedraw",function(){a.push("f_color",b.highlight?a.get("light_color"):a.get("background_color"));return true})}});c.Rectangle2D=c.extend(c.Rectangle,{configure:function(){c.Rectangle2D.superclass.configure.apply(this,arguments);this.type="rectangle2d";this.set({shadow_offsety:-2})},drawValue:function(){""!=this.get("value")&&this.T.text(this.fireString(this,"drawText",[this,this.get("value")],this.get("value")),this.get("value_x"),this.get("value_y"),!1,this.get("color"),this.get("textAlign"),this.get("textBaseline"),this.get("fontStyle"))},drawRectangle:function(){this.T.box(this.get("originx"),this.get("originy"),this.get("width"),this.get("height"),this.get("border"),this.get("f_color"),this.get("shadow"))},isEventValid:function(a){return{valid:a.x>this.x&&a.x<this.x+this.width&&a.y<this.y+this.height&&a.y>this.y}},tipInvoke:function(){var a=this;return function(b,c){return{left:a.tipX(b,c),top:a.tipY(b,c)}}},doConfig:function(){c.Rectangle2D.superclass.doConfig.call(this);var a=this,b=a.get("tipAlign"),d=a.get("valueAlign");"left"==b||"right"==b?a.tipY=function(b,c){return a.centerY-c/2}:a.tipX=function(b){return a.centerX-b/2};"left"==b?a.tipX=function(b){return a.x-a.get("value_space")-b}:"right"==b?a.tipX=function(){return a.x+a.width+a.get("value_space")}:a.tipY="bottom"==b?function(){return a.y+a.height+3}:function(b,c){return a.y-c-3};"left"==d?(a.push("textAlign","right"),a.push("value_x",a.x-a.get("value_space")),a.push("value_y",a.centerY)):"right"==d?(a.push("textAlign","left"),a.push("textBaseline","middle"),a.push("value_x",a.x+a.width+a.get("value_space")),a.push("value_y",a.centerY)):"bottom"==d?(a.push("value_x",a.centerX),a.push("value_y",a.y+a.height+a.get("value_space")),a.push("textBaseline","top")):(a.push("value_x",a.centerX),a.push("value_y",a.y-a.get("value_space")),a.push("textBaseline","bottom"));a.valueX=a.get("value_x");a.valueY=a.get("value_y")}});c.Rectangle3D=c.extend(c.Rectangle,{configure:function(){c.Rectangle3D.superclass.configure.apply(this,arguments);this.type="rectangle3d";this.dimension=c._3D;this.set({zHeight:void 0,xAngle:60,yAngle:20,xAngle_:void 0,yAngle_:void 0,shadow_offsetx:2})},drawValue:function(){""!=this.get("value")&&this.T.text(this.get("value"),this.centerX,this.topCenterY+this.get("value_space"),!1,this.get("color"),"center","top",this.get("fontStyle"))},drawRectangle:function(){this.T.cube(this.get("originx"),this.get("originy"),this.get("xAngle_"),this.get("yAngle_"),this.get("width"),this.get("height"),this.get("zHeight"),this.get("f_color"),this.get("border.enable"),this.get("border.width"),this.get("light_color"),this.get("shadow"))},isEventValid:function(a){return{valid:!this.preventEvent&&a.x>this.x&&a.x<this.x+this.get("width")&&a.y<this.y+this.get("height")&&a.y>this.y}},tipInvoke:function(){var a=this;return function(b,c){return{left:a.topCenterX-b/2,top:a.topCenterY-c}}},doConfig:function(){c.Rectangle3D.superclass.doConfig.call(this);var a=this._();a.pushIf("zHeight",a.get("width"));a.centerX=a.x+a.get("width")/2;a.topCenterX=a.x+(a.get("width")+a.get("width")*a.get("xAngle_"))/2;a.topCenterY=a.y-a.get("width")*a.get("yAngle_")/2}});c.Sector=c.extend(c.Component,{configure:function(){c.Sector.superclass.configure.apply(this,arguments);this.type="sector";this.set({value:"",name:"",counterclockwise:!1,startAngle:0,middleAngle:0,endAngle:0,totalAngle:0,bound_event:"click",expand:!1,donutwidth:0,mutex:!1,increment:void 0,label:{enable:!0}});this.atomic=!0;this.registerEvent("changed");this.tip=this.label=null},bound:function(){this.expanded||this.toggle()},rebound:function(){this.expanded&&this.toggle()},toggle:function(){this.fireEvent(this,this.get("bound_event"),[this])},doDraw:function(){this.drawSector();this.label&&this.label.draw()},labelInvoke:function(a){this.get("middleAngle");var b=this.label;x=this.get("inc_x")*a;y=-this.get("inc_y")*a;b.push("originx",b.get("originx")+x);b.push("originy",b.get("originy")+y);b.push("labelx",b.get("labelx")+x);b.push("labely",b.get("labely")+y);var c=[];b.get("line_potins").each(function(a,b){c.push(0==b%2?a+x:a+y)},b);b.push("line_potins",c)},doConfig:function(){c.Sector.superclass.doConfig.call(this);var a=this._(),b=a.variable.event;a.push("totalAngle",a.get("endAngle")-a.get("startAngle"));a.get("label.enable")&&(a.pushIf("label.border.color",a.get("border.color")),a.push("label.scolor",a.get("f_color")));a.variable.event.status=a.expanded=a.get("expand");a.get("tip.enable")&&("follow"!=a.get("tip.showType")&&a.push("tip.invokeOffsetDynamic",!1),a.tip=new c.Tip(a.get("tip"),a));b.poped=!1;a.on(a.get("bound_event"),function(a){b.poped=true;a.expanded=!a.expanded;a.redraw();b.poped=false});a.on("mouseover",function(){b.highlight=true;a.redraw();b.highlight=false}).on("mouseout",function(){b.highlight=false;a.redraw()});a.on("beforedraw",function(){a.push("f_color",b.highlight?a.get("light_color"):a.get("background_color"));a.x=a.get("originx");a.y=a.get("originy");if(b.status!=a.expanded){a.fireEvent(a,"changed",[a,a.expanded]);a.get("label.enable")&&a.labelInvoke(a.expanded?1:-1)}if(b.status=a.expanded)if(a.get("mutex")&&!b.poped)a.expanded=false;else{a.x=a.x+a.get("inc_x");a.y=a.y-a.get("inc_y")}return true})}});c.Sector2D=c.extend(c.Sector,{configure:function(){c.Sector2D.superclass.configure.apply(this,arguments);this.type="sector2d";this.set({radius:0})},drawSector:function(){this.T.sector(this.x,this.y,this.r,this.get("donutwidth"),this.get("startAngle"),this.get("endAngle"),this.get("f_color"),this.get("border.enable"),this.get("border.width"),this.get("border.color"),this.get("shadow"),this.get("counterclockwise"))},isEventValid:function(a){if(this.label&&this.label.isEventValid(a).valid)return{valid:!0};var b=c.distanceP2P(this.x,this.y,a.x,a.y),d=this.get("donutwidth");return this.r<b||d&&this.r-d>b?{valid:!1}:c.angleInRange(this.get("startAngle"),this.get("endAngle"),2*Math.PI-c.atan2Radian(this.x,this.y,a.x,a.y))?{valid:!0}:{valid:!1}},tipInvoke:function(){return function(a,b){var d=c.p2Point(this.x,this.y,this.get("middleAngle"),0.8*this.r),e=c.quadrantd(this.get("middleAngle"));return{left:2<=e&&3>=e?d.x-a:d.x,top:3<=e?d.y-b:d.y}}},doConfig:function(){c.Sector2D.superclass.doConfig.call(this);var a=this._();a.r=a.get("radius");c.Assert.gtZero(a.r);a.get("donutwidth")>a.r&&a.push("donutwidth",0);a.get("gradient")&&a.push("f_color",a.T.avgRadialGradient(a.x,a.y,0,a.x,a.y,a.r,[a.get("light_color"),a.get("dark_color")]));a.pushIf("increment",c.lowTo(5,a.r/10));var b=a.get("middleAngle"),d=a.get("increment");a.push("inc_x",d*Math.cos(2*Math.PI-b));a.push("inc_y",d*Math.sin(2*Math.PI-b));a.get("label.enable")&&(a.pushIf("label.linelength",c.lowTo(10,a.r/8)),Q=c.quadrantd(b),P2=c.p2Point(a.x,a.y,b,a.get("donutwidth")?a.r-a.get("donutwidth")/2:a.r/2),a.push("label.originx",P2.x),a.push("label.originy",P2.y),a.push("label.quadrantd",Q),b=c.p2Point(a.x,a.y,b,a.r+a.get("label.linelength")),a.push("label.line_potins",[P2.x,P2.y,b.x,b.y]),a.push("label.labelx",b.x),a.push("label.labely",b.y),a.label=new c.Label(a.get("label"),a))}});c.Sector3D=c.extend(c.Sector,{configure:function(){c.Sector3D.superclass.configure.apply(this,arguments);this.type="sector3d";this.dimension=c._3D;this.set({semi_major_axis:0,semi_minor_axis:0,cylinder_height:0})},drawSector:function(){this.T.sector3D(this.x,this.y,this.a,this.b,this.get("startAngle"),this.get("endAngle"),this.h,this.get("f_color"),this.get("border.enable"),this.get("border.width"),this.get("border.color"),this.get("shadow"),this.get("shadow_color"),this.get("shadow_blur"),this.get("shadow_offsetx"),this.get("shadow_offsety"),this.get("counterclockwise"))},isEventValid:function(a){return this.get("label.enable")&&this.label.isEventValid(a).valid?{valid:!0}:!c.inEllipse(a.x-this.x,a.y-this.y,this.a,this.b)?{valid:!1}:c.angleInRange(this.sA,this.eA,2*Math.PI-c.atan2Radian(this.x,this.y,a.x,a.y))?{valid:!0}:{valid:!1}},p2p:function(a,b,c,e){return{x:a+this.a*Math.cos(c)*e,y:b+this.b*Math.sin(c)*e}},tipInvoke:function(){var a=this,b=a.get("middleAngle"),d=c.quadrantd(b);return function(c,f){var g=a.p2p(a.x,a.y,b,0.6);return{left:2<=d&&3>=d?g.x-c:g.x,top:3<=d?g.y-f:g.y}}},doConfig:function(){c.Sector3D.superclass.doConfig.call(this);var a=this._(),b=a.get("counterclockwise"),d=a.get("middleAngle");a.a=a.get("semi_major_axis");a.b=a.get("semi_minor_axis");a.h=a.get("cylinder_height");c.Assert.gtZero(a.a);c.Assert.gtZero(a.b);a.pushIf("increment",c.lowTo(5,a.a/8));var e=function(d){d=c.atan2Radian(0,0,a.a*Math.cos(d),b?-a.b*Math.sin(d):a.b*Math.sin(d));!b&&0!=d&&(d=2*Math.PI-d);return d},f=a.get("increment");a.sA=e.call(a,a.get("startAngle"));a.eA=e.call(a,a.get("endAngle"));a.mA=e.call(a,d);a.push("inc_x",f*Math.cos(2*Math.PI-a.mA));a.push("inc_y",f*Math.sin(2*Math.PI-a.mA));if(a.get("label.enable")){a.pushIf("label.linelength",c.lowTo(10,a.a/8));a.Z=a.get("label.linelength")/a.a+1;var e=c.quadrantd(d),f=a.p2p(a.x,a.y,d,a.Z),g=a.p2p(a.x,a.y,d,1);a.push("label.originx",g.x);a.push("label.originy",g.y);a.push("label.quadrantd",e);a.push("label.line_potins",[g.x,g.y,f.x,f.y]);a.push("label.line_globalComposite",b&&d<Math.PI||!b&&d>Math.PI);a.push("label.labelx",f.x);a.push("label.labely",f.y);a.label=new c.Label(a.get("label"),a)}}});c.Pie=c.extend(c.Chart,{configure:function(){c.Pie.superclass.configure.call(this);this.type="pie";this.dataType="simple";this.set({radius:0,offsetAngle:0,bound_event:"click",counterclockwise:!1,intellectLayout:!0,pop_animate:!1,mutex:!1,increment:void 0,label:{enable:!0},sector:{}});this.registerEvent("bound","rebound","parseLabelText");this.sectors=[]},toggle:function(a){this.data[a||0].reference.toggle()},bound:function(a){this.data[a||0].reference.bound()},rebound:function(a){this.data[a||0].reference.rebound()},getSectors:function(){return this.sectors},doAnimation:function(a,b){var c,e=0,f=this.oA;this.data.each(function(g){c=g.reference;e=this.animationArithmetic(a,0,c.get("totalAngle"),b);c.push("startAngle",f);c.push("endAngle",f+e);f+=e;this.is3D()||c.drawSector()},this);this.is3D()&&this.proxy.drawSector()},localizer:function(a){this.sectors.each(function(b){var b=b.label,c=b.labelx,e=b.labely;if(a.labely<=e&&e-a.labely<a.get("height")||a.labely>e&&a.labely-e<b.get("height"))if(a.labelx<c&&c-a.labelx<a.get("width")||a.labelx>c&&a.labelx-c<b.get("width"))c=a.get("quadrantd"),2==c||3==c?a.push("labely",a.get("labely")-a.get("height")+e-a.labely-2):a.push("labely",a.get("labely")+b.get("height")-a.labely+e+2),a.push("line_potins",a.get("line_potins").concat(a.get("labelx"),a.get("labely"))),a.localizer()},this)},doParse:function(a,b){var d=this,e=a.name+(d.get("showpercent")?" "+c.toPercent(a.value/d.total,d.get("decimalsnum")):a.value);d.get("label.enable")&&d.push("sector.label.text",d.fireString(d,"parseLabelText",[a,b],e));d.get("tip.enable")&&d.push("sector.tip.text",d.fireString(d,"parseTipText",[a,b],e));d.push("sector.id",b);d.push("sector.value",a.value);d.push("sector.name",a.name);d.push("sector.listeners.changed",function(a,b){d.fireEvent(d,b?"bound":"rebound",[d,a.get("name")])});d.push("sector.startAngle",a.startAngle);d.push("sector.middleAngle",a.middleAngle);d.push("sector.endAngle",a.endAngle);d.push("sector.background_color",a.color);a.reference=this.doSector(a);this.sectors.push(a.reference);this.get("label.enable")&&this.get("intellectLayout")&&this.localizer(a.reference.label)},doConfig:function(){c.Pie.superclass.doConfig.call(this);c.Assert.gtZero(this.total,"this.total");var a=this._(),b=a.get("radius"),d=a.get("label.enable")?0.35:0.44;a.sectors.zIndex=a.get("z_index");a.oA=c.angle2Radian(a.get("offsetAngle"));a.is3D()&&(d+=0.06);var d=a.get("minDistance")*d,e=a.oA,f=e,g=a.data.length;a.data.each(function(b,c){e+=2*b.value/a.total*Math.PI;c==g-1&&(e=2*Math.PI+a.oA);b.startAngle=f;b.endAngle=e;b.totalAngle=e-f;b.middleAngle=(f+e)/2;f=e},a);if(0>=b||b>d)b=a.push("radius",Math.floor(d));a.r=b;"left"==a.get("align")?a.push("originx",b+a.get("l_originx")+a.get("offsetx")):"right"==a.get("align")?a.push("originx",a.get("r_originx")-b+a.get("offsetx")):a.push("originx",a.get("centerx")+a.get("offsetx"));a.push("originy",a.get("centery")+a.get("offsety"));c.apply(a.get("sector"),c.clone(a.get("communal_option").concat("originx,originy,bound_event,customize_layout,counterclockwise,mutex,increment,label".split(",")),a.options))}});c.Pie2D=c.extend(c.Pie,{configure:function(){c.Pie2D.superclass.configure.call(this);this.type="pie2d"},doSector:function(){return new c.Sector2D(this.get("sector"),this)},doConfig:function(){c.Pie2D.superclass.doConfig.call(this);this.push("sector.radius",this.r);this.data.each(function(a,b){this.doParse(a,b)},this);this.components.push(this.sectors)}});c.Pie3D=c.extend(c.Pie,{configure:function(){c.Pie3D.superclass.configure.apply(this,arguments);this.type="pie3d";this.dimension=c._3D;this.set({zRotate:45,yHeight:30})},doSector:function(a){this.push("sector.cylinder_height",a.height?a.height*Math.cos(c.angle2Radian(this.get("zRotate"))):this.get("cylinder_height"));a=new c.Sector3D(this.get("sector"),this);a.proxy=!0;return a},doConfig:function(){c.Pie3D.superclass.doConfig.call(this);var a=this,b=a.get("zRotate");a.push("zRotate",c.between(0,90,90-b));a.push("cylinder_height",a.get("yHeight")*Math.cos(c.angle2Radian(b)));a.push("sector.semi_major_axis",a.r);a.push("sector.semi_minor_axis",a.r*b/90);a.push("sector.semi_major_axis",a.r);a.push("sector.originy",a.get("originy")-a.get("yHeight")/2);a.data.each(function(b,c){a.doParse(b,c)},a);a.components.push(a.sectors);a.proxy=new c.Custom({z_index:a.get("z_index"),drawFn:function(){this.drawSector();a.get("label.enable")&&a.sectors.each(function(a){a.label.draw()},a)}});var d=[],e=Math.PI,f=2*e,g=e/2,h=1.5*e,k=a.get("counterclockwise"),m=function(a,b){a=Math.abs(a-b);return a>e?f-a:a};a.proxy.drawSector=function(){a.sectors.each(function(b){a.T.ellipse(b.x,b.y+b.h,b.a,b.b,b.get("startAngle"),b.get("endAngle"),b.get("f_color"),b.get("border.enable"),b.get("border.width"),b.get("border.color"),b.get("shadow"),k,!0)},a);d=[];var b,e;a.sectors.each(function(a){b=a.get("startAngle");e=a.get("endAngle");fc=c.dark(a.get("f_color"));(k?b<g||b>h:b>g&&b<h)&&d.push({g:b,x:a.x,y:a.y,a:a.a,b:a.b,color:fc,h:a.h});(k?e>g&&e<h:e<g||e>h)&&d.push({g:e,x:a.x,y:a.y,a:a.a,b:a.b,color:fc,h:a.h})},a);d.sort(function(a,b){return m(a.g,h)-m(b.g,h)});d.each(function(b){a.T.sector3D.layerDraw.call(a.T,b.x,b.y,b.a,b.b,k,b.h,b.g,b.color)},a);a.sectors.sort(function(a,b){return m(b.get("startAngle"),g)-m(a.get("startAngle"),g)});a.sectors.each(function(b){a.T.sector3D.sPaint.call(a.T,b.x,b.y,b.a,b.b,b.get("startAngle"),b.get("endAngle"),!1,b.h,b.get("f_color"))},a);a.sectors.each(function(b){a.T.ellipse(b.x,b.y,b.a,b.b,b.get("startAngle"),b.get("endAngle"),b.get("f_color"),b.get("border.enable"),b.get("border.width"),b.get("border.color"),!1,!1,!0)},a)};a.components.push(a.proxy)}});c.Donut2D=c.extend(c.Pie,{configure:function(){c.Donut2D.superclass.configure.call(this);this.type="pie2d";this.set({donutwidth:0.3})},doSector:function(){return new c.Sector2D(this.get("sector"),this)},doConfig:function(){c.Donut2D.superclass.doConfig.call(this);var a=this._(),b=a.r;a.push("sector.radius",b);0<a.get("donutwidth")&&(1>a.get("donutwidth")?a.push("donutwidth",Math.floor(b*a.get("donutwidth"))):a.get("donutwidth")>=b&&a.push("donutwidth",0),a.push("sector.donutwidth",a.get("donutwidth")));a.data.each(function(b,c){a.doParse(b,c)},a);a.components.push(a.sectors)}});c.Column=c.extend(c.Chart,{configure:function(){c.Column.superclass.configure.call(this);this.type="column";this.dataType="simple";this.set({coordinate:{},colwidth:void 0,text_space:6,scaleAlign:"left",rectangle:{}});this.registerEvent();this.rectangles=[];this.labels=[];this.labels.ignore=!0},doAnimation:function(a,b){var c=this._(),e;c.coo.draw();c.labels.each(function(a){a.draw()});c.rectangles.each(function(f){e=Math.ceil(c.animationArithmetic(a,0,f.height,b));f.push("originy",f.y+(f.height-e));f.push("height",e);f.drawRectangle()})},getCoordinate:function(){return this.coo},doParse:function(a,b,d,e,f,g,h){var k=a.get("showpercent")?c.toPercent(b.value/a.total,a.get("decimalsnum")):b.value;a.get("tip.enable")&&a.push("rectangle.tip.text",a.fireString(a,"parseTipText",[b,b.value,d],b.name+" "+k));a.set({rectangle:{id:e,name:b.name,value:k,background_color:b.color,originx:f,originy:g,height:h}})},doConfig:function(){c.Column.superclass.doConfig.call(this);var a=this._();c.Coordinate.coordinate.call(a);a.rectangles.zIndex=a.get("z_index");a.labels.zIndex=a.get("z_index")+1;if("simple"==a.dataType){var b=a.data.length,d=a.get("coordinate.width"),e=a.pushIf("colwidth",d/(2*b+1));e*b>d&&(e=a.push("colwidth",d/(2*b+1)));a.push("hispace",(d-e*b)/(b+1))}a.is3D()&&a.push("zHeight",a.get("colwidth")*a.get("zScale"));a.coo=c.Coordinate.coordinate_.call(a);a.components.push(a.coo);c.applyIf(a.get("rectangle"),c.clone(a.get("communal_option"),a.options));a.push("rectangle.width",a.get("colwidth"))}});c.Column2D=c.extend(c.Column,{configure:function(){c.Column2D.superclass.configure.call(this);this.type="column2d"},doConfig:function(){c.Column2D.superclass.doConfig.call(this);var a=this._(),b=a.coo.getScale(a.get("scaleAlign")),d=a.coo.get("brushsize"),e=a.coo.get("height"),f=a.get("colwidth")/2,g=a.get("colwidth")+a.get("hispace"),h;a.data.each(function(k,m){h=(k.value-b.start)*e/b.distance;a.doParse(a,k,m,m,a.x+a.get("hispace")+m*g,a.y+e-h-d,h);k.reference=new c.Rectangle2D(a.get("rectangle"),a);a.rectangles.push(k.reference);a.labels.push(new c.Text({id:m,text:k.name,originx:a.x+a.get("hispace")+g*m+f,originy:a.y+e+a.get("text_space")},a))},a);a.components.push(a.labels);a.components.push(a.rectangles)}});c.Column3D=c.extend(c.Column,{configure:function(){c.Column3D.superclass.configure.call(this);this.type="column3d";this.dimension=c._3D;this.set({xAngle:60,yAngle:20,zScale:1,bottom_scale:1.4})},doConfig:function(){c.Column3D.superclass.doConfig.call(this);var a=this._(),b=a.coo.getScale(a.get("scaleAlign")),d=a.get("zHeight")*(a.get("bottom_scale")-1)/2*a.get("yAngle_"),e=a.get("colwidth")/2,f=a.get("colwidth")+a.get("hispace"),g=a.coo.get("height"),h;a.push("rectangle.xAngle_",a.get("xAngle_"));a.push("rectangle.yAngle_",a.get("yAngle_"));a.data.each(function(k,m){h=(k.value-b.start)*g/b.distance;a.doParse(a,k,m,m,a.x+a.get("hispace")+m*f,a.y+(g-h)-d,h);k.reference=new c.Rectangle3D(a.get("rectangle"),a);a.rectangles.push(k.reference);a.labels.push(new c.Text({id:m,text:k.name,originx:a.x+a.get("hispace")+f*m+e,originy:a.y+g+a.get("text_space")},a))},a);a.components.push(a.labels);a.components.push(a.rectangles)}});c.ColumnMulti2D=c.extend(c.Column,{configure:function(){c.ColumnMulti2D.superclass.configure.call(this);this.type="columnmulti2d";this.dataType="complex";this.columns=[]},doRectangle:function(a,b,d,e,f,g){this.doParse(a,b,d,e,f,g);a.reference=new c.Rectangle2D(this.get("rectangle"),this);this.rectangles.push(a.reference)},doConfig:function(){c.ColumnMulti2D.superclass.doConfig.call(this);var a=this._(),b=a.data.length,d=a.data_labels.length,e=a.get("coordinate.width"),f=a.get("coordinate.height"),b=d*b,g=a.pushIf("colwidth",e/(d+1+b));g*b>e&&(g=a.push("colwidth",e/(d+1+b)));a.push("hispace",(e-g*b)/(d+1));var h=a.coo.getScale(a.get("scaleAlign")),k=a.coo.get("brushsize"),m=a.data.length*g+a.get("hispace"),l;a.push("rectangle.width",g);a.columns.each(function(b,d){b.item.each(function(b,e){l=(b.value-h.start)*f/h.distance;a.doParse(a,b,e,d+"-"+e,a.x+a.get("hispace")+e*g+d*m,a.y+f-l-k,l);b.reference=new c.Rectangle2D(a.get("rectangle"),this);a.rectangles.push(b.reference)},a);a.labels.push(new c.Text({id:d,text:b.name,originx:a.x+0.5*a.get("hispace")+(d+0.5)*m,originy:a.get("originy")+f+a.get("text_space")},a))},a);a.components.push(a.labels);a.components.push(a.rectangles)}});c.Bar=c.extend(c.Chart,{configure:function(){c.Bar.superclass.configure.call(this);this.type="bar";this.dataType="simple";this.set({coordinate:{alternate_direction:"h"},barheight:void 0,text_space:6,scaleAlign:"bottom",rectangle:{}});this.registerEvent();this.rectangles=[];this.labels=[]},doParse:function(a,b,d,e,f,g,h){f=a.get("showpercent")?c.toPercent(b.value/a.total,a.get("decimalsnum")):b.value;a.get("tip.enable")&&a.push("rectangle.tip.text",a.fireString(a,"parseTipText",[b,b.value,d],b.name+" "+f));a.set({rectangle:{id:e,name:b.name,value:f,background_color:b.color,originy:g,width:h}})},doAnimation:function(a,b){this.coo.draw();this.labels.each(function(a){a.draw()},this);this.rectangles.each(function(c){c.push("width",Math.ceil(this.animationArithmetic(a,0,c.width,b)));c.drawRectangle()},this)},doConfig:function(){c.Bar.superclass.doConfig.call(this);var a=this._();c.Coordinate.coordinate.call(a);a.rectangles.zIndex=a.get("z_index");a.labels.zIndex=a.get("z_index")+1;if("simple"==a.dataType){var b=a.data.length,d=a.get("coordinate.height"),e=a.pushIf("barheight",d/(2*b+1));e*b>d&&(e=a.push("barheight",d/(2*b+1)));a.push("barspace",(d-e*b)/(b+1))}a.is3D();a.coo=c.Coordinate.coordinate_.call(a);a.components.push(a.coo);c.applyIf(a.get("rectangle"),c.clone(a.get("communal_option"),a.options));a.push("rectangle.height",e);a.push("rectangle.valueAlign","right");a.push("rectangle.tipAlign","right");a.push("rectangle.originx",a.x+a.coo.get("brushsize"))}});c.Bar2D=c.extend(c.Bar,{configure:function(){c.Bar2D.superclass.configure.call(this);this.type="bar2d"},doConfig:function(){c.Bar2D.superclass.doConfig.call(this);var a=this._(),b=a.coo.getScale(a.get("scaleAlign")),d=a.coo.get("width"),e=a.get("barheight")/2,f=a.get("barheight")+a.get("barspace");a.data.each(function(g,h){a.doParse(a,g,h,h,0,a.y+a.get("barspace")+h*f,(g.value-b.start)*d/b.distance);g.reference=new c.Rectangle2D(a.get("rectangle"),a);a.rectangles.push(g.reference);a.labels.push(new c.Text({id:h,textAlign:"right",textBaseline:"middle",text:g.name,originx:a.x-a.get("text_space"),originy:a.y+a.get("barspace")+h*f+e},a))},a);a.components.push(a.labels);a.components.push(a.rectangles)}});c.BarMulti2D=c.extend(c.Bar,{configure:function(){c.BarMulti2D.superclass.configure.call(this);this.type="barmulti2d";this.dataType="complex";this.columns=[]},doConfig:function(){c.BarMulti2D.superclass.doConfig.call(this);var a=this._(),b=a.data.length,d=a.data_labels.length,e=a.coo.get("width"),f=a.coo.get("height"),g=d*b,h=a.pushIf("barheight",f/(d+1+g));h*b>f&&(h=a.push("barheight",f/(d+1+g)));a.push("barspace",(f-h*g)/(d+1));var k=a.coo.getScale(a.get("scaleAlign")),m=b*h+a.get("barspace");a.get("barheight");var l;a.push("rectangle.height",h);a.columns.each(function(b,d){b.item.each(function(b,f){l=(b.value-k.start)*e/k.distance;a.doParse(a,b,f,d+"-"+f,a.x+a.get("hispace")+f*h+d*m,a.y+a.get("barspace")+f*h+d*m,l);b.reference=new c.Rectangle2D(a.get("rectangle"),a);a.rectangles.push(b.reference)},a);a.labels.push(new c.Text({id:d,text:b.name,textAlign:"right",textBaseline:"middle",originx:a.x-a.get("text_space"),originy:a.y+0.5*a.get("barspace")+(d+0.5)*m},a))},a);a.components.push(a.labels);a.components.push(a.rectangles)}});c.LineSegment=c.extend(c.Component,{configure:function(){c.LineSegment.superclass.configure.apply(this,arguments);this.type="linesegment";this.set({intersection:!0,label:!1,point_style:"round",point_hollow:!0,smooth:!1,smoothing:1.5,point_size:3,points:[],keep_with_coordinate:!1,shadow_blur:1,shadow_offsety:1,point_space:0,coordinate:null,event_range_x:0,limit_y:!1,tip_offset:2,event_range_y:0});this.tip=this.label=null;this.ignored_=!1},drawSegment:function(){this.T.shadowOn(this.get("shadow"));var a=this.get("points");if(this.get("area")){for(var b=[this.x,this.y],c=0;c<a.length;c++)b.push(a[c].x),b.push(a[c].y);b.push(this.x+this.get("width"));b.push(this.y);c=this.get("light_color");this.get("gradient")&&(c=this.T.avgLinearGradient(this.x,this.y-this.get("height"),this.x,this.y,[this.get("light_color2"),c]));this.T.polygon(c,!1,1,"",!1,this.get("area_opacity"),b)}this.T[this.ignored_?"manyLine":"lineArray"](a,this.get("brushsize"),this.get("f_color"),this.get("smooth"),this.get("smoothing"));this.get("intersection")&&a.each(function(a){a.ignored||(this.get("point_hollow")?this.T.round(a.x,a.y,this.get("point_size"),"#FEFEFE",this.get("brushsize"),this.get("f_color")):this.T.round(a.x,a.y,this.get("point_size"),this.get("f_color")))},this);this.get("shadow")&&this.T.shadowOff()},doDraw:function(){this.drawSegment();this.get("intersection")&&this.get("label")&&this.get("points").each(function(a){a.ignored||this.T.text(a.value,a.x,a.y-3*this.get("point_size")/2,!1,this.get("f_color"),"center","bottom",this.get("fontStyle"))},this)},isEventValid:function(){return{valid:!1}},tipInvoke:function(){var a=this.x,b=this.get("tip_offset"),c=this.get("point_size")+b,e=this;return function(f,g,h){var k=h.left,m=h.top,k=3>e.tipPosition&&0<h.left-f-a-b||2<e.tipPosition&&0>h.left-f-a-b?k-(f+b):k+b,m=0==e.tipPosition%2?h.top+c:h.top-g-c;return{left:k,top:m}}},doConfig:function(){c.LineSegment.superclass.doConfig.call(this);c.Assert.gtZero(this.get("point_space"),"point_space");for(var a=this,b=this.get("point_space"),d=a.get("event_range_y"),e=a.get("event_range_x"),f=a.get("tipInvokeHeap"),g=a.get("points"),h=0;h<g.length;h++)g[h].x_=g[h].x,g[h].y_=g[h].y,g[h].ignored&&(this.ignored_=!0);e=0==e?a.push("event_range_x",Math.floor(b/2)):a.push("event_range_x",c.between(1,Math.floor(b/2),e));0==d&&(d=a.push("event_range_y",Math.floor(a.get("point_size"))));a.get("tip.enable")&&(a.on("mouseover",function(){f.push(a);a.tipPosition=f.length}).on("mouseout",function(){f.pop()}),a.push("tip.invokeOffsetDynamic",!0),a.tip=new c.Tip(a.get("tip"),a));var k=a.get("coordinate"),m=a.get("limit_y"),l=a.get("keep_with_coordinate"),s=function(a,b,c){return!a.ignored&&Math.abs(b-a.x)<e&&(!m||m&&Math.abs(c-a.y)<d)?true:false},n=function(a){return{valid:true,text:g[a].text,value:g[a].value,top:g[a].y,left:g[a].x,i:a,hit:true}};a.isEventValid=function(d){if(k&&!k.isEventValid(d).valid)return{valid:false};var e=Math.floor((d.x-a.x)/b);if(e<0||e>=g.length-1){e=c.between(0,g.length-1,e);return s(g[e],d.x,d.y)?n(e):{valid:l}}for(var f=e;f<=e+1;f++)if(s(g[f],d.x,d.y))return n(f);return{valid:l}}}});c.Line=c.extend(c.Chart,{configure:function(){c.Line.superclass.configure.call(this);this.type="line";this.dataType="simple";this.set({coordinate:{axis:{width:[0,0,2,2]}},crosshair:{enable:!1},scaleAlign:"left",labelAlign:"bottom",data_labels:[],label_space:6,proportional_spacing:!0,label_spacing:0,segment_style:{},legend:{sign:"round-bar",sign_size:14}});this.registerEvent("parsePoint");this.lines=[]},getCoordinate:function(){return this.coo},doConfig:function(){c.Line.superclass.doConfig.call(this);this.lines.zIndex=this.get("z_index");c.Coordinate.coordinate.call(this);var a=this,b=1==a.data.length;a.push("line_start",(a.get("coordinate.width")-a.get("coordinate.valid_width"))/2);a.push("line_end",a.get("coordinate.width")-a.get("line_start"));a.get("proportional_spacing")&&a.push("label_spacing",a.get("coordinate.valid_width")/(a.get("maxItemSize")-1));a.push("segment_style.originx",a.get("originx")+a.get("line_start"));a.push("segment_style.originy",a.get("originy")+a.get("coordinate.height"));a.push("segment_style.width",a.get("coordinate.valid_width"));a.push("segment_style.height",a.get("coordinate.valid_height"));a.push("segment_style.limit_y",!b);a.pushIf("segment_style.keep_with_coordinate",b);a.get("crosshair.enable")&&(a.push("coordinate.crosshair",a.get("crosshair")),a.push("coordinate.crosshair.hcross",b),a.push("coordinate.crosshair.invokeOffset",function(b){b=a.lines[0].isEventValid(b);return b.valid?b:!1}));c.applyIf(a.get("segment_style"),c.clone(a.get("communal_option"),a.options))}});c.LineBasic2D=c.extend(c.Line,{configure:function(){c.LineBasic2D.superclass.configure.call(this);this.type="basicline2d";this.tipInvokeHeap=[]},doAnimation:function(a,b){var c,e;this.coo.draw();for(var f=0;f<this.lines.length;f++){c=this.lines[f];e=c.get("points");for(var g=0;g<e.length;g++)e[g].y=c.y-Math.ceil(this.animationArithmetic(a,0,c.y-e[g].y_,b));c.drawSegment()}},doConfig:function(){c.LineBasic2D.superclass.doConfig.call(this);var a=this._();a.coo=new c.Coordinate2D(c.merge({scale:[{position:a.get("scaleAlign"),max_scale:a.get("maxValue")},{position:a.get("labelAlign"),scaleEnable:!1,start_scale:1,scale:1,end_scale:a.get("maxItemSize"),labels:a.get("data_labels")}]},a.get("coordinate")),a);a.components.push(a.coo);var b=a.coo.getScale(a.get("scaleAlign")),d=a.get("coordinate.valid_height"),e=a.get("label_spacing"),f,g,h,k=a.get("segment_style.originx"),m=a.get("segment_style.originy"),l;a.push("segment_style.tip.showType","follow");a.push("segment_style.coordinate",a.coo);a.push("segment_style.tipInvokeHeap",a.tipInvokeHeap);a.push("segment_style.point_space",e);a.data.each(function(s){f=[];s.value.each(function(n,o){g=e*o;h=(n-b.start)*d/b.distance;l={x:k+g,y:m-h,value:n,text:n};c.merge(l,a.fireEvent(a,"parsePoint",[s,n,g,h,o]));a.get("tip.enable")&&(l.text=a.fireString(a,"parseTipText",[s,n,o],n));f.push(l)},a);a.push("segment_style.points",f);a.push("segment_style.brushsize",s.linewidth||1);a.push("segment_style.background_color",s.color);a.lines.push(new c.LineSegment(a.get("segment_style"),a))},this);a.components.push(a.lines)}});c.Area2D=c.extend(c.LineBasic2D,{configure:function(){c.Area2D.superclass.configure.call(this);this.type="area2d";this.set({area_opacity:0.3})},doConfig:function(){this.push("segment_style.area",!0);this.push("segment_style.area_opacity",this.get("area_opacity"));c.Area2D.superclass.doConfig.call(this)}})})(iChart);