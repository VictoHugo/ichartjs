(function(b){var a=navigator.userAgent.toLowerCase(),d=Object.prototype.toString,c=/opera/.test(a),e=/\bchrome\b/.test(a),f=/webkit/.test(a),g=!e&&/safari/.test(a),i=!c&&/msie/.test(a),l=!!document.createElement("canvas").getContext,j=!f&&/gecko/.test(a),m=/ipod|ipad|iphone|android/gi.test(a),n={Linear:function(a,c,d,b){return d*a/b+c},Quad:{easeIn:function(a,c,d,b){return d*(a/=b)*a+c},easeOut:function(a,c,d,b){return-d*(a/=b)*(a-2)+c},easeInOut:function(a,c,d,b){return 1>(a/=b/2)?d/2*a*a+c:-d/2*(--a*(a-2)-1)+c}},Cubic:{easeIn:function(a,c,d,b){return d*(a/=b)*a*a+c},easeOut:function(a,c,d,b){return d*((a=a/b-1)*a*a+1)+c},easeInOut:function(a,c,d,b){return 1>(a/=b/2)?d/2*a*a*a+c:d/2*((a-=2)*a*a+2)+c}},Quart:{easeIn:function(a,c,d,b){return d*(a/=b)*a*a*a+c},easeOut:function(a,c,d,b){return-d*((a=a/b-1)*a*a*a-1)+c},easeInOut:function(a,c,d,b){return 1>(a/=b/2)?d/2*a*a*a*a+c:-d/2*((a-=2)*a*a*a-2)+c}},Bounce:{easeOut:function(a,c,d,b){return(a/=b)<1/2.75?d*7.5625*a*a+c:a<2/2.75?d*(7.5625*(a-=1.5/2.75)*a+0.75)+c:a<2.5/2.75?d*(7.5625*(a-=2.25/2.75)*a+0.9375)+c:d*(7.5625*(a-=2.625/2.75)*a+0.984375)+c}}},p=function(a){var b=!1,r=!1,y=[],z=function(){if(document.addEventListener)return function(){document.removeEventListener("DOMContentLoaded",z,!1);o()};if(document.attachEvent)return function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",z),o())}}(),h=function(){if(!b){try{document.documentElement.doScroll("left")}catch(a){setTimeout(h,1);return}o()}},o=function(){if(!b){b=!0;for(var a=0;a<y.length;a++)y[a].call(document);y=[]}},t=function(){if(!r){r=!0;if("complete"===document.readyState)return setTimeout(o,1);if(document.addEventListener)document.addEventListener("DOMContentLoaded",z,!1),a.addEventListener("load",o,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",z);a.attachEvent("onload",o);var c=!1;try{c=null==a.frameElement}catch(d){}document.documentElement.doScroll&&c&&h()}}},s=function(a){t();b?a.call(document,q):y.push(function(){return a.call(this)})},q=function(a){if(!a||a.nodeType)return a;if("string"===typeof a)return-1!=a.indexOf("#")&&(a=a.substring(1)),document.getElementById(a);"function"===typeof a&&s(a)};q.apply=function(a,h){if(a&&h&&"object"==typeof h)for(var c in h)"undefined"!=typeof h[c]&&(a[c]=h[c]);if(!h&&a){var d={};for(c in a)d[c]=a[c];return d}return a};q.apply(q,{version:"1.0",email:"taylor@ichartjs.com",isEmpty:function(a,h){return null===a||void 0===a||q.isArray(a)&&!a.length||(!h?""===a:!1)},isArray:function(a){return"[object Array]"===d.apply(a)},isDate:function(a){return"[object Date]"===d.apply(a)},isObject:function(a){return!!a&&"[object Object]"===d.apply(a)},isFunction:function(a){return"[object Function]"===d.apply(a)},isNumber:function(a){return"number"===typeof a&&isFinite(a)},isString:function(a){return"string"===typeof a},isBoolean:function(a){return"boolean"===typeof a},isFalse:function(a){return"boolean"===typeof a&&!a},isElement:function(a){return a?!!a.tagName:!1},isDefined:function(a){return"undefined"!==typeof a}});q.applyIf=function(a,h){if(a&&q.isObject(h))for(var c in h)q.isDefined(h[c])&&!q.isDefined(a[c])&&(a[c]=h[c]);return!h&&a?q.apply(a):a};q.merge=function(a,h,c){if(a&&q.isObject(h)){for(var d in h)q.isDefined(h[d])&&(q.isObject(h[d])?q.isObject(a[d])?q.merge(a[d],h[d]):a[d]=q.clone(h[d],!0):a[d]=h[d]);if(q.isObject(c))return q.merge(a,c)}return a};q.clone=function(a,h,c){var d={};if(q.isArray(a)&&q.isObject(h))for(var b=0;b<a.length;b++)d[a[b]]=c&&q.isObject(h[a[b]])?q.clone(h[a[b]]):h[a[b]];else if(q.isObject(a))for(b in a)d[b]=h&&q.isObject(a[b])&&!(a[b]instanceof q.Painter)?q.clone(a[b],h):a[b];return d};q.override=function(a,h){if(h){var c=a.prototype;q.apply(c,h);q.isIE&&h.hasOwnProperty("toString")&&(c.toString=h.toString)}};q.extend=function(){var a=function(a){for(var h in a)this[h]=a[h]},h=Object.prototype.constructor;return function(c,d){var b=function(){c.apply(this,arguments)},o=function(){},e=c.prototype;o.prototype=e;o=b.prototype=new o;o.constructor=b;b.superclass=e;e.constructor==h&&(e.constructor=c);b.override=function(a){q.override(b,a)};o.superclass=o.supr=function(){return e};o.override=a;q.override(b,d);b.extend=function(a){return q.extend(b,a)};b.plugin_={};b.plugin=function(a,h){q.isString(a)&&q.isFunction(h)&&(b.plugin_[a]=h)};return b}}();var A=Math.sin,G=Math.cos,N=Math.atan,D=Math.sqrt,u=Math.abs,C=Math.PI,B=2*C,E=Math.ceil,F=Math.round,O=Math.floor,H=Math.max,I=Math.min,v=parseFloat,J=function(a,h){if(0==a)return a;h=h||5;return 0==parseInt(a)?v((a/h+"").substring(0,(a+"").length+1)):E(a/h)},K={navy:"rgb(0,0,128)",olive:"rgb(128,128,0)",orange:"rgb(255,165,0)",silver:"rgb(192,192,192)",white:"rgb(255,255,255)",gold:"rgb(255,215,0)",lime:"rgb(0,255,0)",fuchsia:"rgb(255,0,255)",aqua:"rgb(0,255,255)",green:"rgb(0,128,0)",gray:"rgb(80,80,80)",red:"rgb(255,0,0)",blue:"rgb(0,0,255)",pink:"rgb(255,192,203)",purple:"rgb(128,0,128)",yellow:"rgb(255,255,0)",maroon:"rgb(128,0,0)",black:"rgb(0,0,0)",azure:"rgb(240,255,255)",beige:"rgb(245,245,220)",brown:"rgb(165,42,42)",cyan:"rgb(0,255,255)",darkblue:"rgb(0,0,139)",darkcyan:"rgb(0,139,139)",darkgrey:"rgb(169,169,169)",darkgreen:"rgb(0,100,0)",darkkhaki:"rgb(189,183,107)",darkmagenta:"rgb(139,0,139)",darkolivegreen:"rgb(85,107,47)",darkorange:"rgb(255,140,0)",darkorchid:"rgb(153,50,204)",darkred:"rgb(139,0,0)",darksalmon:"rgb(233,150,122)",darkviolet:"rgb(148,0,211)",indigo:"rgb(75,0,130)",khaki:"rgb(240,230,140)",lightblue:"rgb(173,216,230)",lightcyan:"rgb(224,255,255)",lightgreen:"rgb(144,238,144)",lightgrey:"rgb(211,211,211)",lightpink:"rgb(255,182,193)",lightyellow:"rgb(255,255,224)",magenta:"rgb(255,0,255)",violet:"rgb(128,0,128)"},P=function(a){a=a.replace(/\s/g,"").toLowerCase();if(/rgb\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3}\)/.exec(a)||/rgba\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3},(0(\.[0-9])?|1(\.0)?)\)/.exec(a))return a;if(/#(([a-fA-F0-9]{6})|([a-fA-F0-9]{3}))/.exec(a))return a=a.replace(/#/g,"").replace(/^(\w)(\w)(\w)$/,"$1$1$2$2$3$3"),"rgb("+parseInt(a.substring(0,2),16)+","+parseInt(a.substring(2,4),16)+","+parseInt(a.substring(4,6),16)+")";if(K[a])return K[a];throw Error("invalid colors value '"+a+"'");},L=function(a,h){h=h||0.14;return 0.5<a?h-(1-a)/10:0.1<a?h-0.16+a/5:a>h?h:a/2},M=function(a,h,c,d){if(!h)return h;var h=P(h),b=/rgb\((\w*),(\w*),(\w*)\)/.exec(h);if(b)h=[b[1],b[2],b[3]];else if(b=/rgba\((\w*),(\w*),(\w*),(.*)\)/.exec(h))h=[b[1],b[2],b[3],b[4]];else throw Error("invalid colors value '"+h+"'");var o;var b=h,e=void 0,t=void 0;q.isArray(b)&&(e=b[1],t=b[2],b=b[0]);var b=b/255,e=e/255,t=t/255,f=H(H(b,e),t),s=I(I(b,e),t),s=f-s;0==s?o=[0,0,f]:(b==f?o=(e-t)/s:e==f?o=(t-b)/s+2:t==f&&(o=(b-e)/s+4),o*=60,0>o&&(o+=360),o=[o,s/f,f]);o[1]-=d||0;a?(o[2]-=L(o[2],c),o[1]=q.upTo(o[1],1),o[2]=q.lowTo(o[2],0)):(o[2]+=L(1-o[2],c),o[1]=q.lowTo(o[1],0),o[2]=q.upTo(o[2],1));h=h[3];c=a=void 0;q.isArray(o)&&(c=h,h=o[1],a=o[2],o=o[0]);var g,k,A,d=O(o/60)%6,e=o/60-d;o=a*(1-h);b=a*(1-h*e);h=a*(1-h*(1-e));switch(d){case 0:g=a;k=h;A=o;break;case 1:g=b;k=a;A=o;break;case 2:g=o;k=a;A=h;break;case 3:g=o;k=b;A=a;break;case 4:g=h;k=o;A=a;break;case 5:g=a,k=o,A=b}return"rgb"+(c?"a":"")+"("+F(255*g)+","+F(255*k)+","+F(255*A)+(c?","+c+")":")")};q.apply(q,{getFont:function(a,h,c){return a+" "+h+"px "+c},getDoc:function(){return a.contentWindow?a.contentWindow.document:a.contentDocument?a.contentDocument:a.document},DefineAbstract:function(a,h){if(!h[a])throw Error("Cannot instantiate the type '"+h.type+"'.you must implements it with method '"+a+"'.");},getAA:function(a){return"linear"==a?n.Linear:"bounce"==a?n.Bounce.easeOut:"easeInOut"==a||"easeIn"==a||"easeOut"==a?n[q.DefaultAA][a]:n.Linear},noConflict:function(){return p},plugin:function(a,h,c){q.isFunction(a)&&a.plugin(h,c)},isLR:function(a){return"left"==a||"right"==a},parsePadding:function(a,h){if(q.isNumber(a))return[a,a,a,a];if(q.isArray(a))return a;h=h||0;a=a.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g,/\s/).replace(/\s/g,",").split(",");1==a.length?a[0]=a[1]=a[2]=a[3]=v(a[0])||h:2==a.length?(a[0]=a[2]=v(a[0])||h,a[1]=a[3]=v(a[1])||h):3==a.length?(a[0]=v(a[0])||h,a[1]=a[3]=v(a[1])||h,a[2]=v(a[2])||h):(a[0]=v(a[0])||h,a[1]=v(a[1])||h,a[2]=v(a[2])||h,a[3]=v(a[3])||h);return a},distanceP2P:function(a,h,c,b){return D((c-a)*(c-a)+(b-h)*(b-h))},atan2Radian:function(a,h,c,b){if(a==c)return b>h?C/2:3*C/2;var d=q.quadrant(a,h,c,b),a=N(u((h-b)/(a-c)));1==d?a=C-a:2==d?a=C+a:3==d&&(a=B-a);return a},angle2Radian:function(a){return a*C/180},radian2Angle:function(a){return 180*a/C},quadrant:function(a,h,c,b){return a<c?h<b?3:0:h<b?2:1},quadrantd:function(a){return 0==a?0:0==a%B?3:E(2*(a%B)/C)-1},upTo:function(a,h){return h>a?a:h},lowTo:function(a,h){return h<a?a:h},between:function(a,h,c){return c>h?h:c<a?a:c},inRange:function(a,h,c){return h>c&&a<c},angleInRange:function(a,h,c){a%=B;h%=B;return h>a?h>c&&a<c:h<a?c<h||c>a:c==h},inRangeClosed:function(a,h,c){return h>=c&&a<=c},inEllipse:function(a,h,c,b){return 1>=a*a/c/c+h*h/b/b},p2Point:function(a,h,c,b){return{x:a+G(c)*b,y:h+A(c)*b}},vectorP2P:function(a,h,c){c||(h=q.angle2Radian(h),a=q.angle2Radian(a));h=A(h);return{x:h*A(a),y:h*G(a)}},iGather:function(a){return(a||"ichartjs")+"-"+E(1E4*Math.random())+(new Date).getTime().toString().substring(4)},toPercent:function(a,h){return(100*a).toFixed(h)+"%"},parseFloat:function(a,h){if(!q.isNumber(a)&&(a=v(a),!q.isNumber(a)))throw Error("'"+h+"'is not a valid number.");return a},ceil:function(a,h){return a+J(a,h)},floor:function(a,h){return a-J(a,h)},_2D:"2d",_3D:"3d",light:function(a,h,c){return M(!1,a,h,c)},dark:function(a,h,c){return M(!0,a,h,c)},fixPixel:function(a){return q.isNumber(a)?a:v(a.replace("px",""))||0},toPixel:function(a){return q.isNumber(a)?a+"px":q.fixPixel(a)+"px"},emptyFn:function(){return!0},supportCanvas:l,isOpera:c,isWebKit:f,isChrome:e,isSafari:g,isIE:i,isGecko:j,isMobile:m,touch:"ontouchend"in document,FRAME:m?30:60,DefaultAA:"Cubic"});q.Assert={gtZero:function(a,h){q.Assert.gt(a,0,h)},gt:function(a,h,c){if(!q.isNumber(a)&&a>=h)throw Error(c+" required Number gt "+h+",given:"+a);},isNumber:function(a,h){if(!q.isNumber(a))throw Error(h+" required Number,given:"+a);},isArray:function(a,h){if(!q.isArray(a))throw Error(h+" required Array,given:"+a);},isTrue:function(a,h){if(!0!==a)throw Error(h);},equal:function(a,h,c){if(a!==h)throw Error(c);}};q.requestAnimFrame=function(){var h=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(h){a.setTimeout(h,1E3/60)};return function(a){h(a)}}();q.Event={addEvent:function(a,h,c,b){a.addEventListener?a.addEventListener(h,c,b):a.attachEvent?a.attachEvent("on"+h,c):a["on"+h]=c},fix:function(h){"undefined"==typeof h&&(h=a.event);var c={target:h.target,pageX:h.pageX,pageY:h.pageY,offsetX:h.offsetX,offsetY:h.offsetY,event:h};if("undefined"==typeof h.offsetX){h.target||(c.target=h.srcElement||document);h.targetTouches&&(c.pageX=h.targetTouches[0].pageX,c.pageY=h.targetTouches[0].pageY);if(null==c.pageX&&null!=h.clientX){var b=document.documentElement,d=document.body;c.pageX=h.clientX+(b&&b.scrollLeft||d&&d.scrollLeft||0)-(b&&b.clientLeft||d&&d.clientLeft||0);c.pageY=h.clientY+(b&&b.scrollTop||d&&d.scrollTop||0)-(b&&b.clientTop||d&&d.clientTop||0)}for(var d=b=0,o=h.target;o!=document.body&&o;)b+=o.offsetLeft,d+=o.offsetTop,o=o.offsetParent;c.offsetX=c.pageX-b;c.offsetY=c.pageY-d}c.x=c.offsetX;c.y=c.offsetY;h.stopPropagation||(h.stopPropagation=function(){a.event.cancelBubble=true});return c}};return q}(b);Array.prototype.each=function(a,c){for(var b=this.length,d,e=0;e<b&&!(d=c?a.call(c,this[e],e):a(this[e],e),"boolean"===typeof d&&!d);e++);};Array.prototype.eachAll=function(a,c){this.each(function(b,d){return p.isArray(b)?b.eachAll(a,c):c?a.call(c,b,d):a(b,d)},c)};Array.prototype.sor=function(a){for(var c=this.length-1,b,d=0;d<c;d++)for(var e=c;e>d;e--)if(a?!a(this[e],this[e-1]):this[e]<this[e-1])b=this[e],this[e]=this[e-1],this[e-1]=b};b.iChart=p;b.$||(b.$=b.iChart)})(window);(function(b){b.Element=function(a){this.type="element";b.DefineAbstract("configure",this);b.DefineAbstract("afterConfiguration",this);this.options={};this.set({id:"",fontsize:12,font:"Verdana",fontweight:"normal",border:{enable:!1,color:"#BCBCBC",style:"solid",width:1,radius:0},shadow:!1,shadow_color:"#666666",shadow_blur:4,shadow_offsetx:0,shadow_offsety:0});this.variable={};this.events={mouseup:[],touchstart:[],touchmove:[],touchend:[],mousedown:[],dblclick:[]};this.initialization=!1;this.configure.apply(this,Array.prototype.slice.call(arguments,1));this.default_=b.clone(this.options,!0);this.set(a);this.afterConfiguration()};b.Element.prototype={_:function(){return this},getPlugin:function(a){return this.constructor.plugin_[a]},set:function(a){b.isObject(a)&&b.merge(this.options,a)},pushIf:function(a,d){return!b.isDefined(this.get(a))?this.push(a,d):this.get(a)},push:function(a,b){for(var c=a.split("."),e=c.length-1,f=this.options,g=0;g<e;g++)f[c[g]]||(f[c[g]]={}),f=f[c[g]];return f[c[e]]=b},get:function(a){for(var a=a.split("."),b=this.options[a[0]],c=1;c<a.length;c++){if(!b)return null;b=b[a[c]]}return b}};b.Painter=b.extend(b.Element,{configure:function(){this.type="painter";this.dimension=b._2D;b.DefineAbstract("commonDraw",this);b.DefineAbstract("initialize",this);this.set({brushsize:1,strokeStyle:"gray",padding:10,color:"black",offsetx:0,offsety:0,background_color:"#FEFEFE",color_factor:0.15,style:"",border:{enable:!0},gradient:!1,gradient_mode:"LinearGradientUpDown",z_index:0,listeners:null,originx:0,originy:0});this.variable.event={mouseover:!1};this.registerEvent("initialize","click","mousemove","mouseover","mouseout","beforedraw","draw")},afterConfiguration:function(){if(b.isObject(this.get("listeners")))for(var a in this.get("listeners"))this.on(a,this.get("listeners")[a]);this.initialize();this.fireEvent(this,"initialize",[this])},registerEvent:function(){for(var a=0;a<arguments.length;a++)this.events[arguments[a]]=[]},is3D:function(){return this.dimension==b._3D},applyGradient:function(a,b,c,e){this.get("gradient")&&(this.push("f_color",this.T.gradient(a||this.x||0,b||this.y||0,c||this.get("width"),e||this.get("height"),[this.get("dark_color"),this.get("light_color")],this.get("gradient_mode"))),this.push("light_color",this.T.gradient(a||this.x||0,b||this.y||0,c||this.get("width"),e||this.get("height"),[this.get("background_color"),this.get("light_color")],this.get("gradient_mode"))),this.push("f_color_",this.get("f_color")))},draw:function(a){if(!this.fireEvent(this,"beforedraw",[this]))return this;this.commonDraw(this,a);this.fireEvent(this,"draw",[this])},fireString:function(a,d,c,e){a=this.fireEvent(a,d,c);return b.isString(a)?a:!0!==a&&b.isDefined(a)?a.toString():e},fireEvent:function(a,b,c){var e=this.events[b].length;if(1==e)return this.events[b][0].apply(a,c);for(var f=!0,g=0;g<e;g++)f=this.events[b][g].apply(a,c);return f},on:function(a,d){if(b.isString(a)){if(!this.events[a])throw Error("["+this.type+"] invalid event:'"+a+"'");this.events[a].push(d)}else b.isArray(a)&&a.each(function(a){this.on(a,d)},this);return this},doConfig:function(){var a=this._(),d=b.parsePadding(a.get("padding")),c=a.get("border.enable"),c=c?b.parsePadding(a.get("border.width")):[0,0,0,0],e=a.get("background_color"),f=a.get("color_factor");a.set({border_top:c[0],border_right:c[1],border_bottom:c[2],border_left:c[3],hborder:c[1]+c[3],vborder:c[0]+c[2],padding_top:d[0]+c[0],padding_right:d[1]+c[1],padding_bottom:d[2]+c[2],padding_left:d[3]+c[3],hpadding:d[1]+d[3]+c[1]+c[3],vpadding:d[0]+d[2]+c[0]+c[2]});a.get("shadow")&&a.push("shadow",{color:a.get("shadow_color"),blur:a.get("shadow_blur"),offsetx:a.get("shadow_offsetx"),offsety:a.get("shadow_offsety")});a.push("fontStyle",b.getFont(a.get("fontweight"),a.get("fontsize"),a.get("font")));a.push("f_color",e);a.push("f_color_",e);a.push("light_color",b.light(e,f));a.push("dark_color",b.dark(e,0.8*f));a.push("light_color2",b.light(e,2*f));a.id=a.get("id");a.is3D()&&!a.get("xAngle_")&&(d=b.vectorP2P(a.get("xAngle"),a.get("yAngle")),a.push("xAngle_",d.x),a.push("yAngle_",d.y))}});b.Html=b.extend(b.Element,{configure:function(a){this.type="html";this.T=a;b.DefineAbstract("beforeshow",this);this.set({animation:!0,width:0,height:0,style:"",index:999,offset_top:0,offset_left:0});this.transitions=""},afterConfiguration:function(){this.initialize()},initialize:function(){this.wrap=this.get("wrap");this.dom=document.createElement("div");this.get("shadow")&&this.css("boxShadow",this.get("shadow_offsetx")+"px "+this.get("shadow_offsety")+"px "+this.get("shadow_blur")+"px "+this.get("shadow_color"));this.get("border.enable")&&(this.css("border",this.get("border.width")+"px "+this.get("border.style")+" "+this.get("border.color")),this.css("borderRadius",this.get("border.radius")+"px"));this.css("zIndex",this.get("index"));this.applyStyle()},width:function(){return this.dom.offsetWidth},height:function(){return this.dom.offsetHeight},onTransitionEnd:function(a,d){var c="transitionend";b.isWebKit?c="webkitTransitionEnd":b.isOpera&&(c="oTransitionEnd");b.Event.addEvent(this.dom,c,a,d)},transition:function(a){this.transitions=""==this.transitions?a:this.transitions+","+a;b.isWebKit?this.css("WebkitTransition",this.transitions):b.isGecko?this.css("MozTransition",this.transitions):b.isOpera?this.css("OTransition",this.transitions):this.css("transition",this.transitions)},show:function(a,b){this.beforeshow(a,b);this.css("visibility","visible")},hidden:function(){this.css("visibility","hidden")},getDom:function(){return this.dom},css:function(a,d){if(b.isString(a))if(b.isDefined(d))this.dom.style[a]=d;else return this.dom.style[a]},applyStyle:function(){for(var a=this.get("style").split(";"),b,c=0;c<a.length;c++)b=a[c].split(":"),1<b.length&&this.css(b[0],b[1])}});b.Component=b.extend(b.Painter,{configure:function(a){b.Component.superclass.configure.apply(this,arguments);this.type="component";this.set({tip:{enable:!1,border:{width:2}}});this.proxy=this.atomic=!1;this.inject(a);this.final_parameter={}},initialize:function(){b.DefineAbstract("isEventValid",this);b.DefineAbstract("doDraw",this);this.doConfig();this.initialization=!0},getDimension:function(){return{x:this.x,x:this.y,width:this.get("width"),height:this.get("height")}},doConfig:function(){b.Component.superclass.doConfig.call(this);var a=this._();a.x=a.push("originx",a.get("originx")+a.get("offsetx"));a.y=a.push("originy",a.get("originy")+a.get("offsety"));a.data=a.get("data");a.get("tip.enable")&&(a.pushIf("tip.border.color",a.get("f_color")),b.isFunction(a.get("tip.invokeOffset"))||a.push("tip.invokeOffset",a.tipInvoke()))},isMouseOver:function(a){return this.isEventValid(a)},redraw:function(){this.container.draw()},commonDraw:function(a){this.proxy||this.doDraw.call(this,a)},inject:function(a){a&&(this.container=a,this.target=this.T=a.T)}});b.Tip=b.extend(b.Html,{configure:function(){b.Tip.superclass.configure.apply(this,arguments);this.type="tip";this.set({text:"",showType:"follow",invokeOffset:null,fade_duration:300,move_duration:100,invokeOffsetDynamic:!1,style:"textAlign:left;padding:4px 5px;cursor:pointer;backgroundColor:rgba(239,239,239,.85);fontSize:12px;color:black;",border:{enable:!0,radius:5},delay:200})},follow:function(a,d){var c=this.dom.style;if(this.get("invokeOffsetDynamic")){if(d.hit){if(b.isString(d.text)||b.isNumber(d.text))this.dom.innerHTML=d.text;var e=this.get("invokeOffset")(this.width(),this.height(),d);c.top=e.top+"px";c.left=e.left+"px"}}else"follow"==this.get("showType")?(c.top=a.y-1.1*this.height()-2+"px",c.left=a.x+2+"px"):b.isFunction(this.get("invokeOffset"))?(e=this.get("invokeOffset")(this.width(),this.height(),d),c.top=e.top+"px",c.left=e.left+"px"):(c.top=a.y-1.1*this.height()-2+"px",c.left=a.x+2+"px")},text:function(a){this.dom.innerHTML=a},beforeshow:function(a,b){this.follow(a,b)},show:function(a,b){this.beforeshow(a,b);this.css("visibility","visible");this.get("animation")&&this.css("opacity",1)},hidden:function(){this.get("animation")?this.css("opacity",0):this.css("visibility","hidden")},initialize:function(){b.Tip.superclass.initialize.call(this);var a=this._();a.css("position","absolute");a.dom.innerHTML=a.get("text");a.hidden();if(a.get("animation")){var d=a.get("move_duration")/1E3+"s ease-in 0s";a.transition("opacity "+a.get("fade_duration")/1E3+"s ease-in 0s");a.transition("top "+d);a.transition("left "+d);a.onTransitionEnd(function(){0==a.css("opacity")&&a.css("visibility","hidden")},!1)}a.wrap.appendChild(a.dom);a.T.on("mouseover",function(c,b,d){a.show(b,d)}).on("mouseout",function(c,b){a.hidden(b)});if("follow"==a.get("showType"))a.T.on("mousemove",function(c,b,d){a.T.variable.event.mouseover&&setTimeout(function(){a.T.variable.event.mouseover&&a.follow(b,d)},a.get("delay"))})}});b.CrossHair=b.extend(b.Html,{configure:function(){b.CrossHair.superclass.configure.apply(this,arguments);this.type="crosshair";this.set({yAngle_:void 0,top:0,left:0,hcross:!0,vcross:!0,invokeOffset:null,line_width:1,line_color:"#1A1A1A",delay:200})},follow:function(a,b){if(this.get("invokeOffset")){var c=this.get("invokeOffset")(a,b);c&&c.hit&&(this.horizontal.style.top=c.top-this.top+"px",this.vertical.style.left=c.left-this.left+"px")}else this.horizontal.style.top=a.y-this.top-1+"px",this.vertical.style.left=a.x-this.left-1+"px"},beforeshow:function(a,b){this.follow(a,b)},initialize:function(){b.CrossHair.superclass.initialize.call(this);var a=this._();a.top=b.fixPixel(a.get("top"));a.left=b.fixPixel(a.get("left"));a.dom=document.createElement("div");a.dom.style.zIndex=a.get("index");a.dom.style.position="absolute";a.dom.style.width=b.toPixel(0);a.dom.style.height=b.toPixel(0);a.dom.style.top=b.toPixel(a.get("top"));a.dom.style.left=b.toPixel(a.get("left"));a.css("visibility","hidden");a.horizontal=document.createElement("div");a.vertical=document.createElement("div");a.horizontal.style.width=b.toPixel(a.get("width"));a.horizontal.style.height=b.toPixel(a.get("line_width"));a.horizontal.style.backgroundColor=a.get("line_color");a.horizontal.style.position="absolute";a.vertical.style.width=b.toPixel(a.get("line_width"));a.vertical.style.height=b.toPixel(a.get("height"));a.vertical.style.backgroundColor=a.get("line_color");a.vertical.style.position="absolute";a.dom.appendChild(a.horizontal);a.dom.appendChild(a.vertical);a.get("shadow")&&(a.dom.style.boxShadow=a.get("shadowStyle"));a.wrap.appendChild(a.dom);a.T.on("mouseover",function(b,c,e){a.show(c,e)}).on("mouseout",function(b,c,e){a.hidden(c,e)}).on("mousemove",function(b,c,e){a.follow(c,e)})}});b.Legend=b.extend(b.Component,{configure:function(){b.Legend.superclass.configure.apply(this,arguments);this.type="legend";this.set({data:void 0,width:"auto",column:1,row:"max",maxwidth:0,line_height:16,sign:"square",sign_size:12,sign_space:5,legend_space:5,z_index:1009,text_with_sign_color:!1,align:"right",valign:"middle"});this.atomic=!0;this.registerEvent("parse","drawRaw","drawCell")},drawCell:function(a,b,c,e,f){var g=this.get("sign_size"),i=this.getPlugin("sign");if(!i||!i.call(this,this.T,f,a+g/2,b+g/2,g,e))"round"==f?this.T.round(a+g/2,b+g/2,g/2,e):"round-bar"==f?(this.T.box(a,b+5*g/12,g,g/6,0,e),this.T.round(a+g/2,b+g/2,g/4,e)):"square-bar"==f?(this.T.box(a,b+5*g/12,g,g/6,0,e),this.T.box(a+g/4,b+g/4,g/2,g/2,0,e)):this.T.box(a,b,g,g,0,e);f=this.get("color");this.get("text_with_sign_color")&&(f=e);this.T.fillText(c,a+this.get("signwidth"),b+g/2,this.get("textwidth"),f)},drawRow:function(a,b,c){for(var e,f=0;f<this.get("column");f++)e=this.data[a],a<this.data.length&&(this.fireEvent(this,"drawCell",[this,e]),this.drawCell(b,c,e.text,e.color,e.sign||this.get("sign")),e.x=b,e.y=c),b+=this.columnwidth[f]+this.get("signwidth")+this.get("legend_space"),a++},isEventValid:function(a){var b={valid:!1},c=this._();a.x>this.x&&a.x<c.x+c.width&&a.y>c.y&&a.y<c.y+c.height&&c.data.each(function(e,f){a.x>e.x&&a.x<e.x+e.width_+c.get("signwidth")&&a.y>e.y&&a.y<e.y+c.get("line_height")&&(b={valid:!0,index:f,target:e})},c);return b},doDraw:function(){this.push("border.radius",5);this.T.box(this.x,this.y,this.width,this.height,this.get("border"),this.get("f_color"),!1,this.get("shadow"));this.T.textStyle("left","middle",b.getFont(this.get("fontweight"),this.get("fontsize"),this.get("font")));for(var a=this.x+this.get("padding_left"),d=this.y+this.get("padding_top"),c=this.get("column"),e=this.get("row"),f=0;f<e;f++)this.drawRow(f*c,a,d),d+=this.get("line_height"),this.fireEvent(this,"drawRaw",[this,f*c])},doConfig:function(){b.Legend.superclass.doConfig.call(this);var a=this._(),d=a.get("sign_size"),c=a.container;a.T.textFont(a.get("fontStyle"));a.push("signwidth",d+a.get("sign_space"));a.get("line_height")<d&&a.push("line_height",d+d/5);"center"==a.get("align")&&"middle"==a.get("valign")&&a.push("valign","top");"left"==c.get("align")&&"middle"==a.get("valign")&&a.push("align","right");var d=0,e=w=a.get("width"),f=0,g="auto"==w,i=b.isNumber(a.get("column")),l=b.isNumber(a.get("row")),j=a.data.length;!i&&!l&&(i=1);i&&!l&&a.push("row",Math.ceil(j/a.get("column")));!i&&l&&a.push("column",Math.ceil(j/a.get("row")));i=a.get("column");l=a.get("row");j>l*i&&(l+=Math.ceil((j-l*i)/i),a.push("row",l));a.columnwidth=Array(i);g&&(e=0);a.data.each(function(c,d){b.merge(c,a.fireEvent(a,"parse",[a,c.name,d]));c.text=c.text||c.name;c.width_=a.T.measureText(c.text)},a);for(var m=0;m<i;m++){f=0;for(d=m;d<j;)f=Math.max(f,a.data[d].width_),d+=i;a.columnwidth[m]=f;e+=f}g&&(w=a.push("width",e+a.get("hpadding")+a.get("signwidth")*i+(i-1)*a.get("legend_space")));w>a.get("maxwidth")&&(w=a.push("width",a.get("maxwidth")));a.push("textwidth",w-a.get("hpadding")-a.get("signwidth"));a.width=w;a.height=d=a.push("height",l*a.get("line_height")+a.get("vpadding"));a.y="top"==a.get("valign")?c.get("t_originy"):"bottom"==a.get("valign")?c.get("b_originy")-d:c.get("centery")-d/2;a.x="left"==a.get("align")?c.get("l_originx"):"center"==a.get("align")?c.get("centerx")-a.get("textwidth")/2:c.get("r_originx")-w;a.x=a.push("originx",a.x+a.get("offsetx"));a.y=a.push("originy",a.y+a.get("offsety"))}});b.Label=b.extend(b.Component,{configure:function(){b.Label.superclass.configure.apply(this,arguments);this.type="label";this.set({text:"",line_height:12,line_thickness:1,sign:"square",sign_size:12,padding:"2 5",offsety:2,sign_space:5,background_color:"#efefef",text_with_sign_color:!1});this.atomic=!0;this.registerEvent()},isEventValid:function(a){return{valid:b.inRange(this.labelx,this.labelx+this.get("width"),a.x)&&b.inRange(this.labely,this.labely+this.get("height"),a.y)}},text:function(a){a&&this.push("text",a);this.push("width",this.T.measureText(this.get("text"))+this.get("hpadding")+this.get("sign_size")+this.get("sign_space"))},localizer:function(){var a=this.get("quadrantd");this.labelx=1<=a&&2>=a?this.get("labelx")-this.get("width"):this.get("labelx");this.labely=2<=a?this.get("labely")-this.get("height"):this.get("labely")},doLayout:function(a,b){var c=this._();c.push("labelx",c.get("labelx")+a);c.push("labely",c.get("labely")+b);c.get("line_potins").each(function(c){c.x+=a;c.y+=b},c)},doDraw:function(){var a=this._();a.localizer();var b=a.get("line_potins"),c=a.get("sign_size"),e=a.labelx+a.get("padding_left"),f=a.labely+a.get("padding_top");a.T.lineArray(b,a.get("line_thickness"),a.get("border.color"));a.T.box(a.labelx,a.labely,a.get("width"),a.get("height"),a.get("border"),a.get("f_color"),!1,a.get("shadow"),a.get("shadow_color"),a.get("shadow_blur"),a.get("shadow_offsetx"),a.get("shadow_offsety"));a.T.textStyle("left","top",a.get("fontStyle"));b=a.get("color");a.get("text_with_sign_color")&&(b=a.get("scolor"));"square"==a.get("sign")?a.T.box(e,f,c,c,0,a.get("scolor")):a.T.round(e+c/2,f+c/2,c/2,a.get("scolor"));a.T.fillText(a.get("text"),e+c+a.get("sign_space"),f,a.get("textwidth"),b)},doConfig:function(){b.Label.superclass.doConfig.call(this);var a=this._();a.T.textFont(b.getFont(a.get("fontweight"),a.get("fontsize"),a.get("font")));a.get("fontsize")>a.get("line_height")&&a.push("line_height",a.get("fontsize"));a.push("height",a.get("line_height")+a.get("vpadding"));a.text();a.localizer()}});b.Text=b.extend(b.Component,{configure:function(){b.Text.superclass.configure.apply(this,arguments);this.type="text";this.set({text:"",textAlign:"center",background_color:0,textBaseline:"top",border:{enable:!1},width:0,height:0,writingmode:"lr",line_height:16,rotate:0});this.registerEvent()},doDraw:function(){this.get("box_feature")&&this.T.box(this.x,this.y,this.get("width"),this.get("height"),this.get("border"),this.get("f_color"));""!=this.get("text")&&this.T.text(this.get("text"),this.get("textx"),this.get("texty"),this.get("width"),this.get("color"),this.get("textAlign"),this.get("textBaseline"),this.get("fontStyle"),0,0,this.get("shadow"),this.get("rotate"))},isEventValid:function(){return{valid:!1}},doLayout:function(a,b){var c=this._();c.push("textx",c.get("textx")+a);c.push("texty",c.get("texty")+b)},doConfig:function(){b.Text.superclass.doConfig.call(this);var a=this._(),d=a.x,c=a.y,e=a.get("width"),f=a.get("height"),g=a.get("textAlign"),d=d+("center"==g?e/2:"right"==g?e:0);f&&(c+=f/2,a.push("textBaseline","middle"));a.push("textx",d);a.push("texty",c);a.push("box_feature",e&&f);a.applyGradient()}});(function(a){function b(h){"string"===typeof h&&(h=a(h));if(!h||!h.tagName||"canvas"!=h.tagName.toLowerCase())throw Error("there not a canvas element");this.canvas=h;this.c=this.canvas.getContext("2d");this.width=this.canvas.width;this.height=this.canvas.height}var c=Math.PI,e=c/90,f=e/2,g=Math.ceil,i=Math.floor,l=2*c,j=Math.max,m=Math.min,n=Math.sin,p=Math.cos,k=function(a,b){return 1==a?i(b)+0.5:Math.round(b)},x=function(a,b,c,d){var e=b.x,f=b.y,g=a[c-1],k=a[c+1],i,u;if(c<a.length-1){var a=g.y,c=k.y,l;i=(d*e+g.x)/(d+1);u=(d*f+a)/(d+1);k=(d*e+k.x)/(d+1);d=(d*f+c)/(d+1);l=(d-u)*(k-e)/(k-i)+f-d;u+=l;d+=l;u>a&&u>f?(u=j(a,f),d=2*f-u):u<a&&u<f&&(u=m(a,f),d=2*f-u);d>c&&d>f?(d=j(c,f),u=2*f-d):d<c&&d<f&&(d=m(c,f),u=2*f-d);b.rcx=k;b.rcy=d}return[g.rcx||g.x,g.rcy||g.y,i||e,u||f,e,f]},r=function(h){return a.isNumber(h)?h:a.parseFloat(h,h)},y=function(h){var b=0,c=0,d,e=0;this.total=0;h.each(function(h){c=h.value;if(a.isArray(c)){var f=0;e=c.length>e?c.length:e;for(var g=0;g<c.length;g++)c[g]=r(c[g]),f+=c[g],d||(d=c),b=c[g]>b?c[g]:b,d=c[g]<d?c[g]:d;h.total=f}else c=r(c),h.value=c,this.total+=c,b=c>b?c:b,d||(d=c),d=c<d?c:d},this);this.get("minValue")&&(d=this.get("minValue")<d?this.get("minValue"):d);this.get("maxValue")&&(b=this.get("maxValue")<b?this.get("maxValue"):b);a.isArray(this.get("labels"))&&(e=this.get("labels").length>e?this.get("labels").length:e);this.push("maxItemSize",e);this.push("minValue",d);this.push("maxValue",b)},z=function(a){this.labels=this.get("labels");var c=0,b=0,d,e,f=this.labels.length;this.columns=[];for(var g=this.total=0;g<f;g++){for(var k=[],i=0;i<a.length;i++)e=a[i],d=e.value[g],d=r(d,d),e.value[g]=d,this.total+=d,c=d>c?d:c,b=d<b?d:b,k.push({name:e.name,value:e.value[g],color:e.color});this.columns.push({name:this.labels[g],item:k})}this.push("minValue",b);this.push("maxValue",c)};b.prototype={getContext:function(){return this.c},css:function(h,c){if(a.isDefined(c))this.canvas.style[h]=c;else return this.canvas.style[h]},ellipse:function(a,c,b,d,f,g,k,i,D,j,l,B,m,r){B=!!B;m=!!m;this.save().gCo(r).strokeStyle(i,D,j).shadowOn(l).fillStyle(k).moveTo(a,c).beginPath();for(m&&this.moveTo(a,c);f<=g;)this.lineTo(a+b*p(f),c+(B?-d*n(f):d*n(f))),f+=e;return this.lineTo(a+b*p(g),c+(B?-d*n(g):d*n(g))).closePath().stroke(i).fill(k).restore()},arc:function(a,c,b,d,e,f,g,k,i,j,l,m,r,x){m=!!m;r=!!r&&!d;this.save().gCo(x).strokeStyle(k,i,j).shadowOn(l).fillStyle(g).beginPath();d?(this.moveTo(a+p(e)*(b-d),c+n(e)*(b-d)).lineTo(a+p(e)*b,c+n(e)*b),this.c.arc(a,c,b,e,f,m),this.lineTo(a+p(f)*(b-d),c+n(f)*(b-d)),this.c.arc(a,c,b-d,f,e,!m)):this.c.arc(a,c,b,e,f,m);r&&this.lineTo(a,c);return this.closePath().fill(g).stroke(k).restore()},sector:function(a,c,b,d,e,f,g,k,i,j,l,m){l&&this.arc(a,c,b,d,e,f,g,0,0,0,l,m,!0,!0);return this.arc(a,c,b,d,e,f,g,k,i,j,!1,m,!0)},sector3D:function(){var h=function(h,b,d,o,f,g,k,t,i){var s=a.quadrantd(f),j=a.quadrantd(g);if(!(2==s||3==s)||!(2==j||3==j)){s=function(a,c){this.lineTo(h+d*p(a),b+(c||0)+(k?-o*n(a):o*n(a)))};f=k&&g>c&&f<c?c:f;g=!k&&f<c&&g>c?c:g;j=f;for(this.fillStyle(a.dark(i)).moveTo(h+d*p(f),b+(k?-o*n(f):o*n(f))).beginPath();j<=g;)s.call(this,j),j+=e;s.call(this,g);this.lineTo(h+d*p(g),b+t+(k?-o*n(g):o*n(g)));for(j=g;j>=f;)s.call(this,j,t),j-=e;s.call(this,f,t);this.lineTo(h+d*p(f),b+(k?-o*n(f):o*n(f))).closePath().fill(!0)}},b=function(a,h,b,c,d,e,o,f){b=a+b*p(o);c=h+e+(d?-c*n(o):c*n(o));this.moveTo(a,h).beginPath().fillStyle(f).lineTo(a,h+e).lineTo(b,c).lineTo(b,c-e).lineTo(a,h).closePath().fill(!0)},d=function(h,d,e,f,g,k,t,i,s){var j=t?g<c/2||g>1.5*c:g>c/2&&g<1.5*c,l=t?k>c/2&&k<1.5*c:k<c/2||k>1.5*c;if(!j&&!l)return!1;s=a.dark(s);j&&b.call(this,h,d,e,f,t,i,g,s);l&&b.call(this,h,d,e,f,t,i,k,s)},f=function(a,b,c,e,o,f,g,k,i,s,j,l,m){this.ellipse(a,b+g,c,e,o,f,k,i,s,j,l,m,!0);d.call(this,a,b,c,e,o,f,m,g,k);this.ellipse(a,b,c,e,o,f,k,i,s,j,!1,m,!0);h.call(this,a,b,c,e,o,f,m,g,k);return this};f.layerPaint=d;f.sPaint=h;f.layerDraw=b;return f}(),textStyle:function(a,b,c){return this.textAlign(a).textBaseline(b).textFont(c)},strokeStyle:function(a,b,c,d){if(a&&(b&&(this.c.lineWidth=b),c&&(this.c.strokeStyle=c),d))this.c.lineJoin=d;return this},globalAlpha:function(a){a&&(this.c.globalAlpha=a);return this},fillStyle:function(a){a&&(this.c.fillStyle=a);return this},arc2:function(a,b,c,d,e){this.c.arcTo(a,b,c,d,e);return this},textAlign:function(a){a&&(this.c.textAlign=a);return this},textBaseline:function(a){a&&(this.c.textBaseline=a);return this},textFont:function(a){a&&(this.c.font=a);return this},shadowOn:function(a){a&&(this.c.shadowColor=a.color,this.c.shadowBlur=a.blur,this.c.shadowOffsetX=a.offsetx,this.c.shadowOffsetY=a.offsety);return this},shadowOff:function(){this.c.shadowColor="white";this.c.shadowBlur=this.c.shadowOffsetX=this.c.shadowOffsetY=0;return this},gradient:function(a,b,c,d,e,f){var f=f.toLowerCase(),g=a,k=b,i=!f.indexOf("linear"),f=f.substring(14);if(i){switch(f){case "updown":k+=d;break;case "downup":b+=d;break;case "leftright":g+=c;break;case "rightleft":a+=c;break;default:return e[0]}return this.avgLinearGradient(a,b,g,k,e)}a+=c/2;b+=d/2;"outin"==f&&e.reverse();return this.avgRadialGradient(a,b,0,a,b,0.8*(c>d?d:c),e)},avgLinearGradient:function(a,b,c,d,e){a=this.createLinearGradient(a,b,c,d);for(b=0;b<e.length;b++)a.addColorStop(b/(e.length-1),e[b]);return a},createLinearGradient:function(a,b,c,d){return this.c.createLinearGradient(a,b,c,d)},avgRadialGradient:function(a,b,c,d,e,f,g){a=this.createRadialGradient(a,b,c,d,e,f);for(b=0;b<g.length;b++)a.addColorStop(b/(g.length-1),g[b]);return a},createRadialGradient:function(a,b,c,d,e,f){return this.c.createRadialGradient(a,b,c,d,e,f)},text:function(a,b,c,d,e,f,g,k,i,j,l,m){return""==a?this:this.save().textStyle(f,g,k).fillText(a,b,c,d,e,i,j,l,m).restore()},fillText:function(a,b,c,d,e,g,k,i,j){a=a.toString();d=d||!1;g=g||"lr";k=k||16;this.save().fillStyle(e).translate(b,c).rotate(f*j).shadowOn(i);a.split("tb"==g?"":"\n").each(function(a){try{d?this.c.fillText(a,0,0,d):this.c.fillText(a,0,0),c+=k}catch(h){console.log(h.message+"["+a+","+b+","+c+"]")}},this);return this.restore()},measureText:function(a){return this.c.measureText(a).width},moveTo:function(a,b){this.c.moveTo(a||0,b||0);return this},lineTo:function(a,b){this.c.lineTo(a||0,b||0);return this},save:function(){this.c.save();return this},restore:function(){this.c.restore();return this},beginPath:function(){this.c.beginPath();return this},closePath:function(){this.c.closePath();return this},stroke:function(a){a&&this.c.stroke();return this},fill:function(a){a&&this.c.fill();return this},cube:function(b,c,d,e,f,g,i,j,l,m,n,p){b=k(m,b);c=k(m,c);i=i&&0<i?i:f;e=c-i*e;d=k(m,b+i*d);e=k(m,e);p&&(this.polygon(j,l,m,n,p,!1,[b,c,d,e,d+f,e,b+f,c]),this.polygon(j,l,m,n,p,!1,[b,c,b,c+g,b+f,c+g,b+f,c]),this.polygon(j,l,m,n,p,!1,[b+f,c,d+f,e,d+f,e+g,b+f,c+g]));this.polygon(a.dark(j),l,m,n,!1,!1,[b,c,d,e,d+f,e,b+f,c]);this.polygon(j,l,m,n,!1,!1,[b,c,b,c+g,b+f,c+g,b+f,c]);this.polygon(a.dark(j),l,m,n,!1,!1,[b+f,c,d+f,e,d+f,e+g,b+f,c+g]);return this},cube3D:function(b,c,d,e,f,g,i,j,l,m,n,p){b=k(m,b);c=k(m,c);j=!j||0==j?g:j;f?(e=a.vectorP2P(d,e),d=b+j*e.x,e=c-j*e.y):(d=b+j*d,e=c-j*e);for(;6>p.length;)p.push(!1);d=k(m,d);e=k(m,e);j=[];0>e?a.isObject(p[4])&&j.push(a.applyIf({points:[b,c-i,d,e-i,d+g,e-i,b+g,c-i]},p[4])):a.isObject(p[0])&&j.push(a.applyIf({points:[b,c,d,e,d+g,e,b+g,c]},p[0]));a.isObject(p[1])&&j.push(a.applyIf({points:[d,e,d,e-i,d+g,e-i,d+g,e]},p[1]));a.isObject(p[2])&&j.push(a.applyIf({points:[b,c,b,c-i,d,e-i,d,e]},p[2]));a.isObject(p[3])&&j.push(a.applyIf({points:[b+g,c,b+g,c-i,d+g,e-i,d+g,e]},p[3]));0>e?a.isObject(p[0])&&j.push(a.applyIf({points:[b,c,d,e,d+g,e,b+g,c]},p[0])):a.isObject(p[4])&&j.push(a.applyIf({points:[b,c-i,d,e-i,d+g,e-i,b+g,c-i]},p[4]));a.isObject(p[5])&&j.push(a.applyIf({points:[b,c,b,c-i,b+g,c-i,b+g,c]},p[5]));j.each(function(a){this.polygon(a.color,l,m,n,a.shadow,a.alpha,a.points)},this);return this},polygon:function(a,b,c,d,e,f,g){if(!(2>g.length)){this.save().strokeStyle(b,c,d).beginPath().fillStyle(a).globalAlpha(f).shadowOn(e).moveTo(g[0],g[1]);for(c=2;c<g.length;c+=2)this.lineTo(g[c],g[c+1]);return this.closePath().stroke(b).fill(a).restore()}},lines:function(a,b,c,d){if(4>a.length||!b)return this;this.save().gCo(d).beginPath().strokeStyle(!0,b,c).moveTo(k(b,a[0]),k(b,a[1]));for(c=2;c<a.length-1;c+=2)this.lineTo(k(b,a[c]),k(b,a[c+1]));return this.stroke(!0).restore()},bezierCurveTo:function(a){this.c.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5]);return this},lineArray:function(a,b,c,d,e){if(2>a.length||!b)return this;this.strokeStyle(!0,b,c).moveTo(k(b,a[0].x),k(b,a[0].y));if(d)for(c=1;c<a.length;c++)this.bezierCurveTo(x(a,a[c],c,e));else for(c=1;c<a.length;c++)this.lineTo(k(b,a[c].x),k(b,a[c].y));return this.stroke(!0)},manyLine:function(a,b,c,d,e){var f=[],g=!1;a.each(function(a){a.ignored&&g?(this.lineArray(f,b,c,d,e),f=[],g=!1):(f.push(a),g=!0)},this)},line:function(a,b,c,d,e,f,g){if(!e||0==e)return this;this.save().gCo(g);return this.beginPath().strokeStyle(!0,e,f).moveTo(k(e,a),k(e,b)).lineTo(k(e,c),k(e,d)).stroke(!0).restore()},round:function(a,b,c,d,e,f){return this.arc(a,b,c,0,0,l,d,!!f,e,f)},fillRect:function(a,b,c,d){this.c.fillRect(a,b,c,d);return this},translate:function(a,b){this.c.translate(a,b);return this},rotate:function(a){this.c.rotate(a);return this},clearRect:function(a,b,c,d){c=c||this.width;d=d||this.height;this.c.clearRect(a||0,b||0,c,d);return this},gCo:function(a){return a?this.gCO(a):this},gCO:function(a){this.c.globalCompositeOperation=a?"destination-over":"source-over";return this},box:function(b,c,d,e,f,j,l,m){f=f||{enable:0};if(f.enable)var n=f.width,p=f.color,r=f.radius,x=a.isNumber(n),n=a.parsePadding(n),d=d-(n[1]+n[3])/2,e=e-(n[0]+n[2])/2,b=b+n[3]/2,c=c+n[0]/2,b=i(b),c=i(c),n=x?n[0]:n,r=!x||0==r||"0"==r?0:a.parsePadding(r);this.save().shadowOn(l).gCo(m).fillStyle(j).strokeStyle(x,n,p);r?this.beginPath().moveTo(b+r[0],k(n,c)).lineTo(b+d-r[1],k(n,c)).arc2(b+d,k(n,c),b+d,c+r[1],r[1]).lineTo(k(n,b+d),c+e-r[2]).arc2(k(n,b+d),c+e,b+d-r[2],c+e,r[2]).lineTo(b+r[3],k(n,c+e)).arc2(b,k(n,c+e),b,c+e-r[3],r[3]).lineTo(k(n,b),c+r[0]).arc2(k(n,b),c,b+r[0],c,r[0]).closePath().fill(j).stroke(n):!f.enable||x?(f.enable&&this.c.strokeRect(b,c,k(n,d),k(n,e)),j&&this.fillRect(b,c,d,e)):(j&&this.beginPath().moveTo(i(b+n[3]/2),i(c+n[0]/2)).lineTo(g(b+d-n[1]/2),c+n[0]/2).lineTo(g(b+d-n[1]/2),g(c+e-n[2]/2)).lineTo(i(b+n[3]/2),g(c+e-n[2]/2)).lineTo(i(b+n[3]/2),i(c+n[0]/2)).closePath().fill(j),n&&(p=a.isArray(p)?p:[p,p,p,p],this.line(b+d,c+n[0]/2,b+d,c+e-n[0]/2,n[1],p[1],0).line(b,c+n[0]/2,b,c+e-n[0]/2,n[3],p[3],0).line(i(b-n[3]/2),c,b+d+n[1]/2,c,n[0],p[0],0).line(i(b-n[3]/2),c+e,b+d+n[1]/2,c+e,n[2],p[2],0)));return this.restore()},toImageURL:function(a){return this.canvas.toDataURL(a||"image/png")},addEvent:function(b,c,d){a.Event.addEvent(this.canvas,b,c,d)}};a.Chart=a.extend(a.Painter,{configure:function(){a.Chart.superclass.configure.apply(this,arguments);this.type="chart";this.dataType="simple";this.set({render:"",data:[],width:void 0,height:void 0,lineJoin:"round",align:"center",default_mouseover_css:!0,turn_off_touchmove:!1,showpercent:!1,decimalsnum:1,title:{text:"",fontweight:"bold",fontsize:20,height:30},subtitle:{text:"",fontweight:"bold",fontsize:16,height:20},footnote:{text:"",color:"#5d7f97",textAlign:"right",height:20},footnote_align:"right",title_align:"center",title_valign:"top",animation:!1,doAnimation:null,animation_timing_function:"easeInOut",duration_animation_duration:1E3,z_index:999,legend:{enable:!1},tip:{enable:!1}});this.registerEvent("parseTipText","beforeAnimation","afterAnimation","animating");this.T=null;this.animationed=this.RENDERED=!1;this.data=[];this.plugins=[];this.oneways=[];this.total=0},toImageURL:function(){return this.T.toImageURL()},segmentRect:function(){this.T.clearRect(this.get("l_originx"),this.get("t_originy"),this.get("client_width"),this.get("client_height"))},resetCanvas:function(){this.T.box(this.get("l_originx"),this.get("t_originy"),this.get("client_width"),this.get("client_height"),0,this.get("f_color"),0,!0)},animation:function(b){b.segmentRect();b.doAnimation(b.variable.animation.time,b.duration,b);b.resetCanvas();b.variable.animation.time<b.duration?(b.variable.animation.time++,a.requestAnimFrame(function(){b.animation(b)})):a.requestAnimFrame(function(){b.variable.animation.time=0;b.animationed=!0;b.draw();b.processAnimation=!1;b.fireEvent(b,"afterAnimation",[b])})},runAnimation:function(){this.fireEvent(this,"beforeAnimation",[this]);this.animation(this)},doSort:function(){this.components.sor(function(b,c){return(a.isArray(b)?b.zIndex||0:b.get("z_index"))>(a.isArray(c)?c.zIndex||0:c.get("z_index"))})},commonDraw:function(b){a.Assert.isTrue(b.RENDERED,b.type+" has not rendered.");a.Assert.isTrue(b.initialization,b.type+" has initialize failed.");a.Assert.gtZero(b.data.length,b.type+"'s data is empty.");b.redraw||(b.doSort(),b.oneways.eachAll(function(a){a.draw()}));b.redraw=!0;!b.animationed&&b.get("animation")?b.runAnimation():(b.components.each(function(){}),b.segmentRect(),b.components.eachAll(function(a){a.draw()}),b.resetCanvas())},plugin:function(a){a.inject(this);this.components.push(a);this.plugins(a)},getTitle:function(){return this.title},getSubTitle:function(){return this.subtitle},getFootNote:function(){return this.footnote},getDrawingArea:function(){return{x:this.get("l_originx"),x:this.get("t_originy"),width:this.get("client_width"),height:this.get("client_height")}},setUp:function(){this.redraw=!1;this.T.clearRect();this.initialization=!1;this.initialize()},create:function(c,e){c.width=c.pushIf("width",400);c.height=c.pushIf("height",300);c.canvasid=a.iGather(c.type);c.shellid="shell-"+c.canvasid;var f=[];f.push("<div id='");f.push(c.shellid);f.push("' style='width:");f.push(c.width);f.push("px;height:");f.push(c.height);f.push("px;padding:0px;margin:0px;overflow:hidden;position:relative;'>");f.push("<canvas id= '");f.push(c.canvasid);f.push("'  width='");f.push(c.width);f.push("' height='");f.push(c.height);f.push("'><p>Your browser does not support the canvas element</p></canvas></div>");e.innerHTML=f.join("");c.shell=a(c.shellid);c.T=c.target=new b(c.canvasid);c.RENDERED=!0},initialize:function(){var b=this._(),c=b.get("data");if(!b.RENDERED){var d=b.get("render");"string"==typeof d&&a(d)?b.create(b,a(d)):"object"==typeof d&&b.create(b,d)}0<c.length&&b.RENDERED&&!b.initialization&&("simple"==b.dataType?y.call(b,c):"complex"==b.dataType&&z.call(b,c),b.data=c,b.doConfig(),b.initialization=!0)},oneWay:function(b){var c=b.variable.event,d=!a.touch&&b.get("default_mouseover_css"),e,f,g=a.touch?["touchstart","touchmove"]:["click","mousemove"];g.each(function(c){b.T.addEvent(c,function(d){b.processAnimation||d.targetTouches&&1!=d.targetTouches.length||b.fireEvent(b,c,[b,a.Event.fix(d)])},!1)});b.on(g[0],function(a,b){a.components.eachAll(function(a){var d=a.isMouseOver(b);d.valid&&(c.click=!0,a.fireEvent(a,"click",[a,b,d]))});c.click&&(b.event.preventDefault(),c.click=!1)});if(!a.touch||!b.get("turn_off_touchmove"))b.on(g[1],function(a,b){e=f=!1;a.components.eachAll(function(h){var g=h.variable.event,k=h.isMouseOver(b);if(k.valid){if(e=!0,f=f||h.atomic,c.mouseover||(c.mouseover=!0,a.fireEvent(a,"mouseover",[h,b,k])),d&&f&&a.T.css("cursor","pointer"),g.mouseover||(g.mouseover=!0,h.fireEvent(h,"mouseover",[h,b,k])),h.fireEvent(h,"mousemove",[h,b,k]),k.stop)return!1}else g.mouseover&&(g.mouseover=!1,h.fireEvent(h,"mouseout",[h,b,k]))});c.mouseover&&(b.event.preventDefault(),d&&!f&&a.T.css("cursor","default"),!e&&c.mouseover&&(c.mouseover=!1,a.fireEvent(a,"mouseout",[a,b])))});b.oneWay=a.emptyFn},getPercent:function(b){return this.get("showpercent")?a.toPercent(b/this.total,this.get("decimalsnum")):b},doActing:function(b,c,d,e,f){var g=!!b.get("communal_acting");b.push(g?"sub_option":"communal_acting",a.clone(b.get(g?"communal_acting":"sub_option"),!0));a.merge(b.get("sub_option"),c);a.merge(b.get("sub_option"),d);b.pushIf("sub_option.background_color",c.color);b.get("sub_option.tip.enable")&&b.push("sub_option.tip.text",b.fireString(b,"parseTipText",[c,c.value,e],f||c.name+" "+b.getPercent(c.value)))},doConfig:function(){a.Chart.superclass.doConfig.call(this);var b=this._();a.Assert.isArray(b.data);b.T.strokeStyle(!0,b.get("brushsize"),b.get("strokeStyle"),b.get("lineJoin"));b.processAnimation=b.get("animation");b.push("communal_acting",0);b.duration=g(b.get("duration_animation_duration")*a.FRAME/1E3);a.isFunction(b.get("doAnimation"))&&(b.doAnimation=b.get("doAnimation"));b.variable.animation={type:0,time:0,queue:[]};b.components=[];b.oneways=[];b.oneways.push(new a.Custom({drawFn:function(){b.T.box(0,0,b.width,b.height,b.get("border"),b.get("f_color"),0,true)}}));b.plugins.each(function(a){b.components.push(a)});b.applyGradient();b.animationArithmetic=a.getAA(b.get("animation_timing_function"));b.oneWay(b);b.push("r_originx",b.width-b.get("padding_right"));b.push("b_originy",b.height-b.get("padding_bottom"));var c=0,d=b.push("l_originx",b.get("padding_left")),e=b.push("t_originy",b.get("padding_top")),f=b.push("client_width",b.get("width")-b.get("hpadding"));a.isString(b.get("title"))&&b.push("title",a.applyIf({text:b.get("title")},b.default_.title));a.isString(b.get("subtitle"))&&b.push("subtitle",a.applyIf({text:b.get("subtitle")},b.default_.subtitle));a.isString(b.get("footnote"))&&b.push("footnote",a.applyIf({text:b.get("footnote")},b.default_.footnote));if(""!=b.get("title.text")){var k=""!=b.get("subtitle.text"),c=k?b.get("title.height")+b.get("subtitle.height"):b.get("title.height"),e=b.push("t_originy",e+c);b.push("title.originx",d);b.push("title.originy",b.get("padding_top"));b.push("title.width",f);b.title=new a.Text(b.get("title"),b);b.oneways.push(b.title);k&&(b.push("subtitle.originx",d),b.push("subtitle.originy",b.get("title.originy")+b.get("title.height")),b.push("subtitle.width",f),b.subtitle=new a.Text(b.get("subtitle"),b),b.oneways.push(b.subtitle))}""!=b.get("footnote.text")&&(k=b.get("footnote.height"),c+=k,b.push("b_originy",b.get("b_originy")-k),b.push("footnote.originx",d),b.push("footnote.originy",b.get("b_originy")),b.push("footnote.width",f),b.footnote=new a.Text(b.get("footnote"),b),b.oneways.push(b.footnote));c=b.push("client_height",b.get("height")-b.get("vpadding")-c);b.push("minDistance",m(f,c));b.push("maxDistance",j(f,c));b.push("minstr",f<c?"width":"height");b.push("centerx",d+f/2);b.push("centery",e+c/2);a.applyIf(b.get("sub_option"),a.clone("shadow,shadow_color,shadow_blur,shadow_offsetx,shadow_offsety,tip".split(","),b.options));b.get("legend.enable")&&(b.legend=new a.Legend(a.apply({maxwidth:f,data:b.data},b.get("legend")),b),b.components.push(b.legend));b.push("sub_option.tip.wrap",b.shell)}})})(b);b.Custom=b.extend(b.Component,{configure:function(){b.Custom.superclass.configure.apply(this,arguments);this.type="custom";this.set({drawFn:b.emptyFn,eventValid:void 0});this.registerEvent()},doDraw:function(a){this.get("drawFn").call(this,a)},isEventValid:function(a){return b.isFunction(this.get("eventValid"))?this.get("eventValid").call(this,a):{valid:!1}},doConfig:function(){b.Custom.superclass.doConfig.call(this)}});b.Scale=b.extend(b.Component,{configure:function(){b.Scale.superclass.configure.apply(this,arguments);this.type="scale";this.set({position:"left",which:"h",distance:void 0,start_scale:0,end_scale:void 0,min_scale:void 0,max_scale:void 0,scale_space:void 0,scale_share:5,scale_enable:!0,scale_size:1,scale_width:4,scale_color:"#333333",scaleAlign:"center",labels:[],text_height:16,text_space:4,textAlign:"left",decimalsnum:0,join_style:"none",join_size:2});this.registerEvent("parseText");this.items=[];this.number=0},isEventValid:function(){return{valid:!1}},doDraw:function(){var a=this._(),b=0,c=0,e=0,f=0,g=0,i=0,l=a.get("scale_width"),j=l/2,m=a.get("scaleAlign"),n=a.get("textAlign"),p=a.get("text_space");a.isH?("top"==m?c=-l:"center"==m?(c=-j,f=j):f=l,a.T.textAlign("center"),"top"==n)?(i=-p,a.T.textBaseline("bottom")):(i=p,a.T.textBaseline("top")):("left"==m?b=-l:"center"==m?(b=-j,e=j):e=l,a.T.textBaseline("middle"),"right"==n)?(a.T.textAlign("left"),g=p):(a.T.textAlign("right"),g=-p);a.T.textFont(a.get("fontStyle"));a.items.each(function(k){a.get("scale_enable")&&a.T.line(k.x+b,k.y+c,k.x+e,k.y+f,a.get("scale_size"),a.get("scale_color"),!1);a.T.fillText(k.text,k.textX+g,k.textY+i,!1,a.get("color"),"lr",a.get("text_height"))})},doConfig:function(){b.Scale.superclass.doConfig.call(this);b.Assert.isNumber(this.get("distance"),"distance");var a=this._(),d=a.get("labels").length,c=a.get("min_scale"),e=a.get("max_scale"),f=a.get("scale_space"),g=a.get("end_scale"),i=a.get("start_scale");if(0<d)a.number=d-1;else{b.Assert.isTrue(b.isNumber(e)||b.isNumber(g),"max_scale&end_scale");if(!g||g<e)g=a.push("end_scale",b.ceil(e));i>c&&a.push("start_scale",b.floor(c));f&&f<g-i&&a.push("scale_share",(g-i)/f);if(!f||f>g-i)f=a.push("scale",(g-i)/a.get("scale_share"));a.number=a.get("scale_share");if(1>f&&0==a.get("decimalsnum"))for(c=f;1>c;)c*=10,a.push("decimalsnum",a.get("decimalsnum")+1)}a.push("distanceOne",a.get("valid_distance")/a.number);var c=0,l;a.T.textFont(a.get("fontStyle"));a.push("which",a.get("which").toLowerCase());a.isH="h"==a.get("which");for(var j=0;j<=a.number;j++)e=d?a.get("labels")[j]:(f*j+i).toFixed(a.get("decimalsnum")),g=a.isH?a.get("valid_x")+j*a.get("distanceOne"):a.x,l=a.isH?a.y:a.get("valid_y")+a.get("distance")-j*a.get("distanceOne"),a.items.push(b.merge({text:e,x:g,y:l,textX:g,textY:l},a.fireEvent(a,"parseText",[e,g,l,j]))),c=Math.max(c,a.T.measureText(e));a.left=a.right=a.top=a.bottom=0;d=a.get("text_space");f=a.get("textAlign");i=a.get("scaleAlign");e=a.get("scale_width");g=e/2;a.isH?(a.top="top"==i?e:"center"==i?g:0,a.bottom=e-a.top,"top"==f?a.top+=a.get("text_height")+d:a.bottom+=a.get("text_height")+d):(a.left="left"==i?e:"center"==i?g:0,a.right=e-a.left,"left"==f?a.left+=c+d:a.right+=c+d)}});b.Coordinate={coordinate_:function(){var a=this._();return a.is3D()?(a.push("coordinate.xAngle_",a.get("xAngle_")),a.push("coordinate.yAngle_",a.get("yAngle_")),a.push("coordinate.zHeight",a.get("zHeight")*a.get("bottom_scale")),new b.Coordinate3D(b.apply({scale:{position:a.get("scaleAlign"),scaleAlign:a.get("scaleAlign"),max_scale:a.get("maxValue"),min_scale:a.get("minValue")}},a.get("coordinate")),a)):new b.Coordinate2D(b.apply({scale:{position:a.get("scaleAlign"),max_scale:a.get("maxValue"),min_scale:a.get("minValue")}},a.get("coordinate")),a)},coordinate:function(){var a=this._(),b=a.get("client_width"),c=a.get("client_height"),e=a.pushIf("coordinate.width",Math.floor(0.9*b)),f=a.pushIf("coordinate.height",Math.floor(0.9*c));f>c&&(f=a.push("coordinate.height",0.9*c));e>b&&(e=a.push("coordinate.width",0.9*b));a.is3D()&&(f=a.push("coordinate.height",f-(a.get("coordinate.pedestal_height")||22)-(a.get("coordinate.board_deep")||20)));"left"==a.get("align")?a.push("originx",a.get("l_originx")):"right"==a.get("align")?a.push("originx",a.get("r_originx")-e):a.push("originx",a.get("centerx")-e/2);a.push("originx",a.get("originx")+a.get("offsetx"));a.push("originy",a.get("centery")-f/2+a.get("offsety"));(!a.get("coordinate.valid_width")||a.get("coordinate.valid_width")>e)&&a.push("coordinate.valid_width",e);(!a.get("coordinate.valid_height")||a.get("coordinate.valid_height")>f)&&a.push("coordinate.valid_height",f);a.x=a.get("originx");a.y=a.get("originy");a.push("coordinate.originx",a.x);a.push("coordinate.originy",a.y)}};b.Coordinate2D=b.extend(b.Component,{configure:function(){b.Coordinate2D.superclass.configure.apply(this,arguments);this.type="coordinate2d";this.set({sign_size:12,sign_space:5,scale:[],valid_width:void 0,valid_height:void 0,grid_line_width:1,grid_color:"#dbe1e1",gridlinesVisible:!0,scale2grid:!0,grids:void 0,ignoreOverlap:!0,ignoreEdge:!1,xlabel:"",ylabel:"",alternate_color:!0,alternate_direction:"v",alternate_color_factor:0.01,crosshair:{enable:!1},width:void 0,height:void 0,z_index:-1,axis:{enable:!0,color:"#666666",width:1}});this.registerEvent();this.scale=[];this.gridlines=[]},getScale:function(a){for(var b=0;b<this.scale.length;b++){var c=this.scale[b];if(c.get("position")==a)return{start:c.get("start_scale"),end:c.get("end_scale"),distance:c.get("end_scale")-c.get("start_scale")}}return{start:0,end:0,distance:0}},isEventValid:function(a){return{valid:a.x>this.x&&a.x<this.x+this.get("width")&&a.y<this.y+this.get("height")&&a.y>this.y}},doDraw:function(){var a=this._();a.T.box(a.x,a.y,a.get("width"),a.get("height"),0,a.get("f_color"));if(a.get("alternate_color")){var d,c,e=!1,f=[0,0,0,0],g=b.dark(a.get("background_color"),a.get("alternate_color_factor"));a.get("axis.enable")&&(f=a.get("axis.width"))}var i=a.get("grid_line_width"),l="v"==a.get("alternate_direction");a.gridlines.each(function(b){b.x1=Math.round(b.x1);b.y1=Math.round(b.y1);b.x2=Math.round(b.x2);b.y2=Math.round(b.y2);a.get("alternate_color")&&(e&&(l?a.T.box(b.x1+f[3],b.y1+i,b.x2-b.x1-f[3]-f[1],c-b.y1-i,0,g):a.T.box(d+i,b.y2+f[0],b.x1-d,b.y1-b.y2-f[0]-f[2],0,g)),d=b.x1,c=b.y1,e=!e);a.T.line(b.x1,b.y1,b.x2,b.y2,i,a.get("grid_color"))});a.T.box(a.x,a.y,a.get("width"),a.get("height"),a.get("axis"),!1,a.get("shadow"));a.scale.each(function(a){a.draw()})},doConfig:function(){b.Coordinate2D.superclass.doConfig.call(this);var a=this._();b.Assert.isNumber(a.get("width"),"width");b.Assert.isNumber(a.get("height"),"height");a.atomic=!1;a.get("gradient")&&b.isString(a.get("f_color"))&&a.push("f_color",a.T.avgLinearGradient(a.x,a.y,a.x,a.y+a.get("height"),[a.get("dark_color"),a.get("light_color")]));if(a.get("axis.enable")){var d=a.get("axis.width");b.isArray(d)||a.push("axis.width",[d,d,d,d])}a.get("crosshair.enable")&&(a.push("crosshair.wrap",a.container.shell),a.push("crosshair.height",a.get("height")),a.push("crosshair.width",a.get("width")),a.push("crosshair.top",a.y),a.push("crosshair.left",a.x),a.crosshair=new b.CrossHair(a.get("crosshair"),a));var c,e=!(!a.get("gridlinesVisible")||!a.get("grids")),d=e&&!!a.get("grids.horizontal"),f=e&&!!a.get("grids.vertical"),g=a.get("height"),i=a.get("width"),l=a.get("valid_width"),j=a.get("valid_height"),m=a.get("gridlinesVisible")&&a.get("scale2grid")&&!(d&&f),n=(i-l)/2,p=(g-j)/2,k=a.get("axis.width");b.isArray(a.get("scale"))||(b.isObject(a.get("scale"))?a.push("scale",[a.get("scale")]):a.push("scale",[]));a.get("scale").each(function(d){c=(c=d.position)||"left";c=c.toLowerCase();d.originx=a.x;d.originy=a.y;d.valid_x=a.x+n;d.valid_y=a.y+p;d.position=c;if(c=="top"){d.which="h";d.distance=i;d.valid_distance=l}else if(c=="right"){d.which="v";d.distance=g;d.valid_distance=j;d.originx=d.originx+i;d.valid_x=d.valid_x+l}else if(c=="bottom"){d.which="h";d.distance=i;d.valid_distance=l;d.originy=d.originy+g;d.valid_y=d.valid_y+j}else{d.which="v";d.distance=g;d.valid_distance=j}a.scale.push(new b.Scale(d,a.container))},a);if(e=a.push("ignoreOverlap",a.get("ignoreOverlap")&&a.get("axis.enable")||a.get("ignoreEdge")))var x=a.get("ignoreEdge")?function(b,c,d){return b=="v"?d==a.y||d==a.y+g:c==a.x||c==a.x+b}:function(b,c,d){return b=="v"?d==a.y&&k[0]>0||d==a.y+g&&k[2]>0:c==a.x&&k[3]>0||c==a.x+i&&k[1]>0};if(m)for(var r,y,z,h,m=0;m<a.scale.length;m++)if(r=a.scale[m],h=r.get("position"),!b.isFalse(r.get("scale2grid"))&&!(d&&"v"==r.get("which")||f&&"h"==r.get("which"))){y=z=0;"top"==h?z=g:"right"==h?y=-i:"bottom"==h?z=-g:y=i;for(h=0;h<r.items.length;h++)(!e||!x.call(a,r.get("which"),r.items[h].x,r.items[h].y))&&a.gridlines.push({x1:r.items[h].x,y1:r.items[h].y,x2:r.items[h].x+y,y2:r.items[h].y+z})}if(f){m=a.get("grids.vertical");b.Assert.gtZero(m.value,"value");f=i/m.value;r=m.value;"given_value"==m.way&&(r=f,f=m.value,f=f>i?i:f);for(m=0;m<=r;m++)(!e||!x.call(a,"h",a.x+m*f,a.y))&&a.gridlines.push({x1:a.x+m*f,y1:a.y,x2:a.x+m*f,y2:a.y+g})}if(d){d=a.get("grids.horizontal");b.Assert.gtZero(d.value,"value");f=g/d.value;r=d.value;"given_value"==d.way&&(r=f,f=d.value,f=f>g?g:f);for(m=0;m<=r;m++)(!e||!x.call(a,"v",a.x,a.y+m*f))&&a.gridlines.push({x1:a.x,y1:a.y+m*f,x2:a.x+i,y2:a.y+m*f})}}});b.Coordinate3D=b.extend(b.Coordinate2D,{configure:function(){b.Coordinate3D.superclass.configure.apply(this,arguments);this.type="coordinate3d";this.dimension=b._3D;this.set({xAngle:60,yAngle:20,xAngle_:void 0,yAngle_:void 0,zHeight:0,pedestal_height:22,board_deep:20,gradient:!0,color_factor:0.18,ignoreEdge:!0,alternate_color:!1,grid_color:"#7a8d44",background_color:"#d6dbd2",shadow_offsetx:4,shadow_offsety:2,wall_style:[],axis:{enable:!1}})},doDraw:function(){var a=this._(),b=a.get("width"),c=a.get("height"),e=a.get("xAngle_"),f=a.get("yAngle_"),g=a.get("zHeight"),i=e*g,l=f*g;a.T.cube3D(a.x,a.y+c+a.get("pedestal_height"),e,f,!1,b,a.get("pedestal_height"),3*g/2,a.get("axis.enable"),a.get("axis.width"),a.get("axis.color"),a.get("bottom_style"));a.T.cube3D(a.x+a.get("board_deep")*e,a.y+c-a.get("board_deep")*f,e,f,!1,b,c,g,a.get("axis.enable"),a.get("axis.width"),a.get("axis.color"),a.get("board_style"));a.T.cube3D(a.x,a.y+c,e,f,!1,b,c,g,a.get("axis.enable"),a.get("axis.width"),a.get("axis.color"),a.get("wall_style"));a.gridlines.each(function(b){a.T.line(b.x1,b.y1,b.x1+i,b.y1-l,a.get("grid_line_width"),a.get("grid_color"));a.T.line(b.x1+i,b.y1-l,b.x2+i,b.y2-l,a.get("grid_line_width"),a.get("grid_color"))});a.scale.each(function(a){a.draw()})},doConfig:function(){b.Coordinate3D.superclass.doConfig.call(this);var a=this._(),d=a.get("wall_style"),c=a.get("background_color"),e=b.dark(c,0.1),f=a.get("dark_color"),g=a.get("height"),i=a.get("width");3>d.length&&(d=a.push("wall_style",[{color:e},{color:c},{color:e}]));var l=d[0].color;a.push("bottom_style",[{shadow:a.get("shadow")},!1,!1,{color:l},{color:l},{color:l}]);a.push("board_style",[!1,!1,!1,{color:l},{color:c},!1]);if(a.get("gradient")){var j=a.get("xAngle_")*a.get("zHeight"),m=a.get("yAngle_")*a.get("zHeight"),n=a.get("bottom_style");b.isString(d[0].color)&&(d[0].color=a.T.avgLinearGradient(a.x,a.y+g,a.x+i,a.y+g,[l,f]));b.isString(d[1].color)&&(d[1].color=a.T.avgLinearGradient(a.x+j,a.y-m,a.x+j,a.y+g-m,[f,a.get("light_color")]));b.isString(d[2].color)&&(d[2].color=a.T.avgLinearGradient(a.x,a.y,a.x,a.y+g,[c,f]));n[5].color=a.T.avgLinearGradient(a.x,a.y+g,a.x,a.y+g+a.get("pedestal_height"),[c,e])}}});b.Rectangle=b.extend(b.Component,{configure:function(){b.Rectangle.superclass.configure.apply(this,arguments);this.type="rectangle";this.set({width:0,height:0,value_space:4,value:"",name:"",tipAlign:"top",valueAlign:"top",textAlign:"center",textBaseline:"top",shadow_blur:3,shadow_offsety:-1});this.atomic=!0;this.registerEvent("parseText")},drawValue:function(){this.T.text(this.get("value"),this.get("value_x"),this.get("value_y"),!1,this.get("color"),this.get("textAlign"),this.get("textBaseline"),this.get("fontStyle"))},doDraw:function(){this.drawRectangle();this.drawValue()},doConfig:function(){b.Rectangle.superclass.doConfig.call(this);b.Assert.gtZero(this.get("width"),"width");var a=this._(),d=a.variable.event,c=a.get("valueAlign");a.width=a.get("width");a.height=a.get("height");var e=a.push("centerx",a.x+a.width/2),f=a.push("centery",a.y+a.height/2),g="center",i="middle",l=a.get("value_space");a.push("value",a.fireString(a,"parseText",[a,a.get("value")],a.get("value")));"left"==c?(g="right",e=a.x-l):"right"==c?(g="left",e=a.x+a.width+l):"bottom"==c?(f=a.y+a.height+l,i="top"):(f=a.y-l,i="bottom");a.push("textAlign",g);a.push("textBaseline",i);a.push("value_x",e);a.push("value_y",f);a.get("tip.enable")&&("follow"!=a.get("tip.showType")&&a.push("tip.invokeOffsetDynamic",!1),a.tip=new b.Tip(a.get("tip"),a));d.highlight=!1;a.on("mouseover",function(){d.highlight=true;a.redraw();d.highlight=false}).on("mouseout",function(){d.highlight=false;a.redraw()});a.on("beforedraw",function(){a.push("f_color",d.highlight?a.get("light_color"):a.get("f_color_"));return true})}});b.Rectangle2D=b.extend(b.Rectangle,{configure:function(){b.Rectangle2D.superclass.configure.apply(this,arguments);this.type="rectangle2d";this.set({shadow_offsety:-2})},drawRectangle:function(){this.T.box(this.get("originx"),this.get("originy"),this.get("width"),this.get("height"),this.get("border"),this.get("f_color"),this.get("shadow"))},isEventValid:function(a){return{valid:a.x>this.x&&a.x<this.x+this.width&&a.y<this.y+this.height&&a.y>this.y}},tipInvoke:function(){var a=this;return function(b,c){return{left:a.tipX(b,c),top:a.tipY(b,c)}}},doConfig:function(){b.Rectangle2D.superclass.doConfig.call(this);var a=this,d=a.get("tipAlign");"left"==d||"right"==d?a.tipY=function(b,d){return a.get("centery")-d/2}:a.tipX=function(b){return a.get("centerx")-b/2};"left"==d?a.tipX=function(b){return a.x-a.get("value_space")-b}:"right"==d?a.tipX=function(){return a.x+a.width+a.get("value_space")}:a.tipY="bottom"==d?function(){return a.y+a.height+3}:function(b,d){return a.y-d-3};a.applyGradient()}});b.Rectangle3D=b.extend(b.Rectangle,{configure:function(){b.Rectangle3D.superclass.configure.apply(this,arguments);this.type="rectangle3d";this.dimension=b._3D;this.set({zHeight:void 0,xAngle:60,yAngle:20,xAngle_:void 0,yAngle_:void 0,shadow_offsetx:2})},drawRectangle:function(){this.T.cube(this.get("originx"),this.get("originy"),this.get("xAngle_"),this.get("yAngle_"),this.get("width"),this.get("height"),this.get("zHeight"),this.get("f_color"),this.get("border.enable"),this.get("border.width"),this.get("light_color"),this.get("shadow"))},isEventValid:function(a){return{valid:a.x>this.x&&a.x<this.x+this.get("width")&&a.y<this.y+this.get("height")&&a.y>this.y}},tipInvoke:function(){var a=this._();return function(b,c){return{left:a.topCenterX-b/2,top:a.topCenterY-c}}},doConfig:function(){b.Rectangle3D.superclass.doConfig.call(this);var a=this._();a.pushIf("zHeight",a.get("width"));a.topCenterX=a.x+(a.get("width")+a.get("width")*a.get("xAngle_"))/2;a.topCenterY=a.y-a.get("width")*a.get("yAngle_")/2;"top"==a.get("valueAlign")&&(a.push("value_x",a.topCenterX),a.push("value_y",a.topCenterY))}});b.Sector=b.extend(b.Component,{configure:function(){b.Sector.superclass.configure.apply(this,arguments);this.type="sector";this.set({value:"",name:"",ignored:!1,counterclockwise:!1,startAngle:0,middleAngle:0,endAngle:0,totalAngle:0,bound_event:"click",expand:!1,donutwidth:0,mutex:!1,increment:void 0,gradient_mode:"RadialGradientOutIn",mini_label_threshold_angle:15,mini_label:!1,label:{}});this.atomic=!0;this.registerEvent("changed","parseText");this.tip=this.label=null},bound:function(){this.expanded||this.toggle()},rebound:function(){this.expanded&&this.toggle()},toggle:function(){this.fireEvent(this,this.get("bound_event"),[this])},getDimension:function(){return{x:this.x,x:this.y,startAngle:this.get("startAngle"),middleAngle:this.get("middleAngle"),endAngle:this.get("endAngle")}},doDraw:function(){this.get("ignored")||(this.drawSector(),this.label&&this.label.draw())},doText:function(a,d,c){a.push("label.originx",d);a.push("label.originy",c);a.push("label.textBaseline","middle");a.label=new b.Text(a.get("label"),a)},doLabel:function(a,d,c,e,f,g,i){a.push("label.originx",d);a.push("label.originy",c);a.push("label.quadrantd",e);a.push("label.line_potins",f);a.push("label.labelx",g);a.push("label.labely",i);a.label=new b.Label(a.get("label"),a)},isLabel:function(){return this.get("label")&&!this.get("mini_label")},doConfig:function(){b.Sector.superclass.doConfig.call(this);var a=this._(),d=a.variable.event,c=a.get("label");a.push("totalAngle",a.get("endAngle")-a.get("startAngle"));c&&(a.get("mini_label")&&(a.get("mini_label_threshold_angle")*Math.PI/180>a.get("totalAngle")?a.push("mini_label",!1):b.apply(a.get("label"),a.get("mini_label"))),a.push("label.text",a.fireString(a,"parseText",[a],a.get("label.text"))),a.pushIf("label.border.color",a.get("border.color")),a.push("label.scolor",a.get("background_color")));a.variable.event.status=a.expanded=a.get("expand");a.get("tip.enable")&&("follow"!=a.get("tip.showType")&&a.push("tip.invokeOffsetDynamic",!1),a.tip=new b.Tip(a.get("tip"),a));d.poped=!1;a.on(a.get("bound_event"),function(){d.poped=true;a.expanded=!a.expanded;a.redraw();d.poped=false});a.on("mouseover",function(){d.highlight=true;a.redraw();d.highlight=false}).on("mouseout",function(){d.highlight=false;a.redraw()});a.on("beforedraw",function(){a.push("f_color",d.highlight?a.get("light_color"):a.get("f_color_"));a.x=a.get("originx");a.y=a.get("originy");if(d.status!=a.expanded){a.fireEvent(a,"changed",[a,a.expanded]);c&&a.label.doLayout(a.get("inc_x")*(a.expanded?1:-1),-a.get("inc_y")*(a.expanded?1:-1))}if(d.status=a.expanded)if(a.get("mutex")&&!d.poped)a.expanded=false;else{a.x=a.x+a.get("inc_x");a.y=a.y-a.get("inc_y")}return true})}});b.Sector2D=b.extend(b.Sector,{configure:function(){b.Sector2D.superclass.configure.apply(this,arguments);this.type="sector2d";this.set({radius:0})},drawSector:function(){this.T.sector(this.x,this.y,this.r,this.get("donutwidth"),this.get("startAngle"),this.get("endAngle"),this.get("f_color"),this.get("border.enable"),this.get("border.width"),this.get("border.color"),this.get("shadow"),this.get("counterclockwise"))},isEventValid:function(a){if(!this.get("ignored")){if(this.label&&this.label.isEventValid(a).valid)return{valid:!0};var d=b.distanceP2P(this.x,this.y,a.x,a.y),c=this.get("donutwidth");if(this.r<d||c&&this.r-c>d)return{valid:!1};if(b.angleInRange(this.get("startAngle"),this.get("endAngle"),2*Math.PI-b.atan2Radian(this.x,this.y,a.x,a.y)))return{valid:!0}}return{valid:!1}},tipInvoke:function(){return function(a,d){var c=b.p2Point(this.x,this.y,this.get("middleAngle"),0.8*this.r),e=b.quadrantd(this.get("middleAngle"));return{left:2<=e&&3>=e?c.x-a:c.x,top:3<=e?c.y-d:c.y}}},doConfig:function(){b.Sector2D.superclass.doConfig.call(this);var a=this._();a.r=a.get("radius");b.Assert.gtZero(a.r);a.get("donutwidth")>a.r&&a.push("donutwidth",0);a.applyGradient(a.x-a.r,a.y-a.r,2*a.r,2*a.r);a.pushIf("increment",b.lowTo(5,a.r/10));var d=a.get("middleAngle"),c=a.get("increment");a.push("inc_x",c*Math.cos(2*Math.PI-d));a.push("inc_y",c*Math.sin(2*Math.PI-d));if(a.get("label")){var e=b.p2Point(a.x,a.y,d,a.get("donutwidth")?a.r-a.get("donutwidth")/2:a.r/2);if(a.get("mini_label"))a.doText(a,e.x,e.y);else{var f=b.quadrantd(d),d=b.p2Point(a.x,a.y,d,a.r+c);a.doLabel(a,e.x,e.y,f,[{x:e.x,y:e.y},{x:d.x,y:d.y}],d.x,d.y)}}}});b.Sector3D=b.extend(b.Sector,{configure:function(){b.Sector3D.superclass.configure.apply(this,arguments);this.type="sector3d";this.dimension=b._3D;this.set({semi_major_axis:0,semi_minor_axis:0,cylinder_height:0})},drawSector:function(){this.T.sector3D(this.x,this.y,this.a,this.b,this.get("startAngle"),this.get("endAngle"),this.h,this.get("f_color"),this.get("border.enable"),this.get("border.width"),this.get("border.color"),this.get("shadow"),this.get("shadow_color"),this.get("shadow_blur"),this.get("shadow_offsetx"),this.get("shadow_offsety"),this.get("counterclockwise"))},isEventValid:function(a){if(!this.get("ignored")){if(this.isLabel()&&this.label.isEventValid(a).valid)return{valid:!0};if(!b.inEllipse(a.x-this.x,a.y-this.y,this.a,this.b))return{valid:!1};if(b.angleInRange(this.sA,this.eA,2*Math.PI-b.atan2Radian(this.x,this.y,a.x,a.y)))return{valid:!0}}return{valid:!1}},p2p:function(a,b,c,e){return{x:a+this.a*Math.cos(c)*e,y:b+this.b*Math.sin(c)*e}},tipInvoke:function(){var a=this,d=a.get("middleAngle"),c=b.quadrantd(d);return function(b,f){var g=a.p2p(a.x,a.y,d,0.6);return{left:2<=c&&3>=c?g.x-b:g.x,top:3<=c?g.y-f:g.y}}},doConfig:function(){b.Sector3D.superclass.doConfig.call(this);var a=this._(),d=a.get("counterclockwise"),c=a.get("middleAngle");a.a=a.get("semi_major_axis");a.b=a.get("semi_minor_axis");a.h=a.get("cylinder_height");b.Assert.gtZero(a.a);b.Assert.gtZero(a.b);a.pushIf("increment",b.lowTo(5,a.a/8));var e=function(c){c=b.atan2Radian(0,0,a.a*Math.cos(c),d?-a.b*Math.sin(c):a.b*Math.sin(c));!d&&0!=c&&(c=2*Math.PI-c);return c},f=a.get("increment");a.sA=e.call(a,a.get("startAngle"));a.eA=e.call(a,a.get("endAngle"));a.mA=e.call(a,c);a.push("inc_x",f*Math.cos(2*Math.PI-a.mA));a.push("inc_y",f*Math.sin(2*Math.PI-a.mA));a.get("label")&&(a.get("mini_label")?(c=a.p2p(a.x,a.y,c,0.5),a.doText(a,c.x,c.y)):(e=b.quadrantd(c),f=a.p2p(a.x,a.y,c,f/a.a+1),c=a.p2p(a.x,a.y,c,1),a.doLabel(a,c.x,c.y,e,[{x:c.x,y:c.y},{x:f.x,y:f.y}],f.x,f.y)))}});b.Pie=b.extend(b.Chart,{configure:function(){b.Pie.superclass.configure.call(this);this.type="pie";this.set({radius:0,offsetAngle:0,bound_event:"click",counterclockwise:!1,intellectLayout:!0,layout_distance:6,pop_animate:!1,mutex:!1,increment:void 0,sub_option:{label:{}}});this.registerEvent("bound","rebound")},toggle:function(a){this.data[a||0].reference.toggle()},bound:function(a){this.data[a||0].reference.bound()},rebound:function(a){this.data[a||0].reference.rebound()},getSectors:function(){return this.sectors},doAnimation:function(a,b,c){var e=0,f=c.oA;c.sectors.each(function(g){e=c.animationArithmetic(a,0,g.get("totalAngle"),b);g.push("startAngle",f);g.push("endAngle",f+e);f+=e;c.is3D()||g.drawSector()});c.is3D()&&c.proxy.drawSector()},localizer:function(a){var b=this.get("layout_distance");this.sectors.each(function(c){if(c.isLabel()){var c=c.label,e=c.labelx,f=c.labely;if(a.labely<=f&&f-a.labely-1<a.get("height")||a.labely>f&&a.labely-f-1<c.get("height"))if(a.labelx<e&&e-a.labelx<a.get("width")||a.labelx>e&&a.labelx-e<c.get("width"))a.push("labely",a.get("labely")+f-a.labely+(a.get("height")+b)*(2==a.get("quadrantd")?-1:1)),a.push("line_potins",a.get("line_potins").concat({x:a.get("labelx"),y:a.get("labely")})),a.localizer()}},this)},doParse:function(a,b,c){var e=b.name+" "+a.getPercent(b.value);a.doActing(a,b,c,e);a.push("sub_option.id",c);a.push("sub_option.label.text",e);a.push("sub_option.listeners.changed",function(b,c){a.fireEvent(a,c?"bound":"rebound",[a,b.get("name")])});b=this.doSector(b);b.isLabel()&&this.get("intellectLayout")&&this.localizer(b.label);this.sectors.push(b)},doConfig:function(){b.Pie.superclass.doConfig.call(this);b.Assert.gtZero(this.total,"this.total");var a=this._(),d=a.get("radius"),c=a.get("sub_option.label")?0.35:0.44;a.sectors=[];a.sectors.zIndex=a.get("z_index");a.components.push(a.sectors);a.oA=b.angle2Radian(a.get("offsetAngle"));a.is3D()&&(c+=0.06);var c=a.get("minDistance")*c,e=a.oA,f=e,g=a.data.length;a.data.each(function(b,c){e+=2*b.value/a.total*Math.PI;c==g-1&&(e=2*Math.PI+a.oA);b.startAngle=f;b.endAngle=e;b.totalAngle=e-f;b.middleAngle=(f+e)/2;f=e},a);if(0>=d||d>c)d=a.push("radius",Math.floor(c));a.r=d;"left"==a.get("align")?a.push("originx",d+a.get("l_originx")+a.get("offsetx")):"right"==a.get("align")?a.push("originx",a.get("r_originx")-d+a.get("offsetx")):a.push("originx",a.get("centerx")+a.get("offsetx"));a.push("originy",a.get("centery")+a.get("offsety"));b.apply(a.get("sub_option"),b.clone(["originx","originy","bound_event","mutex","increment"],a.options))}});b.Pie2D=b.extend(b.Pie,{configure:function(){b.Pie2D.superclass.configure.call(this);this.type="pie2d"},doSector:function(){return new b.Sector2D(this.get("sub_option"),this)},doConfig:function(){b.Pie2D.superclass.doConfig.call(this);var a=this._();a.push("sub_option.radius",a.r);a.data.each(function(b,c){a.doParse(a,b,c)},a)}});b.Pie3D=b.extend(b.Pie,{configure:function(){b.Pie3D.superclass.configure.apply(this,arguments);this.type="pie3d";this.dimension=b._3D;this.set({zRotate:45,yHeight:30})},doSector:function(a){this.push("sub_option.cylinder_height",a.cylinder_height?a.cylinder_height*Math.cos(b.angle2Radian(this.get("zRotate"))):this.get("cylinder_height"));a=new b.Sector3D(this.get("sub_option"),this);a.proxy=!0;return a},doConfig:function(){b.Pie3D.superclass.doConfig.call(this);var a=this._(),d=a.get("zRotate");a.push("zRotate",b.between(0,90,90-d));a.push("cylinder_height",a.get("yHeight")*Math.cos(b.angle2Radian(d)));a.push("sub_option.semi_major_axis",a.r);a.push("sub_option.semi_minor_axis",a.r*d/90);a.push("sub_option.semi_major_axis",a.r);a.push("sub_option.originy",a.get("originy")-a.get("yHeight")/2);a.data.each(function(b,c){a.doParse(a,b,c)},a);var c=[],e=[],f=Math.PI,g=2*f,i=f/2,l=1.5*f,j=a.get("counterclockwise"),m=function(a,b){a=Math.abs(a-b);return a>f?g-a:a};a.proxy=new b.Custom({z_index:a.get("z_index")+1,drawFn:function(){this.drawSector();e=[];a.sectors.each(function(a){a.get("label")&&(a.expanded?e.push(a.label):a.label.draw())});e.each(function(a){a.draw()})}});a.proxy.drawSector=function(){a.sectors.each(function(b){a.T.ellipse(b.x,b.y+b.h,b.a,b.b,b.get("startAngle"),b.get("endAngle"),b.get("f_color"),b.get("border.enable"),b.get("border.width"),b.get("border.color"),b.get("shadow"),j,!0)},a);c=[];var d,e;a.sectors.each(function(a){a.sPaint=!1;d=a.get("startAngle");e=a.get("endAngle");fc=b.dark(a.get("background_color"));(j?d<i||d>l:d>i&&d<l)&&c.push({g:d,x:a.x,y:a.y,a:a.a,b:a.b,color:fc,h:a.h,F:a});(j?e>i&&e<l:e<i||e>l)&&c.push({g:e,x:a.x,y:a.y,a:a.a,b:a.b,color:fc,h:a.h,F:a})},a);c.sor(function(a,b){return 0<m(a.g,l)-m(b.g,l)});c.each(function(b){a.T.sector3D.layerDraw.call(a.T,b.x,b.y,b.a+0.5,b.b+0.5,j,b.h,b.g,b.color);b.F.sPaint||(a.T.sector3D.sPaint.call(a.T,b.F.x,b.F.y,b.F.a,b.F.b,b.F.get("startAngle"),b.F.get("endAngle"),!1,b.F.h,b.color),b.F.sPaint=!0)},a);a.sectors.each(function(b){b.sPaint||a.T.sector3D.sPaint.call(a.T,b.x,b.y,b.a,b.b,b.get("startAngle"),b.get("endAngle"),!1,b.h,b.get("f_color"))},a);a.sectors.each(function(b){a.T.ellipse(b.x,b.y,b.a,b.b,b.get("startAngle"),b.get("endAngle"),b.get("f_color"),b.get("border.enable"),b.get("border.width"),b.get("border.color"),!1,!1,!0)},a)};a.components.push(a.proxy)}});b.Donut2D=b.extend(b.Pie,{configure:function(){b.Donut2D.superclass.configure.call(this);this.type="pie2d";this.set({donutwidth:0.3})},doSector:function(){return new b.Sector2D(this.get("sub_option"),this)},doConfig:function(){b.Donut2D.superclass.doConfig.call(this);var a=this._(),d=a.r;a.push("sub_option.radius",d);0<a.get("donutwidth")&&(1>a.get("donutwidth")?a.push("donutwidth",Math.floor(d*a.get("donutwidth"))):a.get("donutwidth")>=d&&a.push("donutwidth",0),a.push("sub_option.donutwidth",a.get("donutwidth")));a.data.each(function(b,d){a.doParse(b,d)},a);a.components.push(a.sectors)}});b.Column=b.extend(b.Chart,{configure:function(){b.Column.superclass.configure.call(this);this.type="column";this.set({coordinate:{},colwidth:void 0,text_space:6,scaleAlign:"left",sub_option:{},label:{}});this.registerEvent()},doAnimation:function(a,b,c){var e;c.coo.draw();c.labels.each(function(a){a.draw()});c.rectangles.each(function(f){e=Math.ceil(c.animationArithmetic(a,0,f.height,b));f.push("originy",f.y+(f.height-e));f.push("height",e);f.drawRectangle()})},getCoordinate:function(){return this.coo},doLabel:function(a,d,c,e){this.labels.push(new b.Text(b.apply(this.get("label"),{id:a,text:d,originx:c,originy:e}),this))},doParse:function(a,b,c,e){a.doActing(a,b,e,c)},doConfig:function(){b.Column.superclass.doConfig.call(this);var a=this._();a.rectangles=[];a.labels=[];a.components.push(a.labels);a.components.push(a.rectangles);b.Coordinate.coordinate.call(a);a.rectangles.zIndex=a.get("z_index");a.labels.zIndex=a.get("z_index")+1;if("simple"==a.dataType){var d=a.data.length,c=a.get("coordinate.width"),e=a.pushIf("colwidth",c/(2*d+1));e*d>c&&(e=a.push("colwidth",c/(2*d+1)));a.push("hispace",(c-e*d)/(d+1))}a.is3D()&&a.push("zHeight",a.get("colwidth")*a.get("zScale"));a.coo=b.Coordinate.coordinate_.call(a);a.components.push(a.coo);a.push("sub_option.width",a.get("colwidth"))}});b.Column2D=b.extend(b.Column,{configure:function(){b.Column2D.superclass.configure.call(this);this.type="column2d"},doConfig:function(){b.Column2D.superclass.doConfig.call(this);var a=this._(),d=a.coo.getScale(a.get("scaleAlign")),c=a.coo.get("brushsize"),e=a.coo.get("height"),f=a.get("colwidth")/2,g=a.get("colwidth")+a.get("hispace"),i;a.data.each(function(l,j){i=(l.value-d.start)*e/d.distance;a.doParse(a,l,j,{id:j,originx:a.x+a.get("hispace")+j*g,originy:a.y+e-i-c,height:i});a.rectangles.push(new b.Rectangle2D(a.get("sub_option"),a));a.doLabel(j,l.name,a.x+a.get("hispace")+g*j+f,a.y+e+a.get("text_space"))},a)}});b.Column3D=b.extend(b.Column,{configure:function(){b.Column3D.superclass.configure.call(this);this.type="column3d";this.dimension=b._3D;this.set({xAngle:60,yAngle:20,zScale:1,bottom_scale:1.4})},doConfig:function(){b.Column3D.superclass.doConfig.call(this);var a=this._(),d=a.coo.getScale(a.get("scaleAlign")),c=a.get("zHeight")*(a.get("bottom_scale")-1)/2*a.get("yAngle_"),e=a.get("colwidth")/2,f=a.get("colwidth")+a.get("hispace"),g=a.coo.get("height"),i;a.push("sub_option.xAngle_",a.get("xAngle_"));a.push("sub_option.yAngle_",a.get("yAngle_"));a.data.each(function(l,j){i=(l.value-d.start)*g/d.distance;a.doParse(a,l,j,{id:j,originx:a.x+a.get("hispace")+j*f,originy:a.y+(g-i)-c,height:i});a.rectangles.push(new b.Rectangle3D(a.get("sub_option"),a));a.doLabel(j,l.name,a.x+a.get("hispace")+f*j+e,a.y+g+a.get("text_space"))},a)}});b.ColumnMulti2D=b.extend(b.Column,{configure:function(){b.ColumnMulti2D.superclass.configure.call(this);this.type="columnmulti2d";this.dataType="complex";this.set({labels:[]})},doRectangle:function(a,d,c,e,f,g){this.doParse(a,d,c,e,f,g);a.reference=new b.Rectangle2D(this.get("sub_option"),this);this.rectangles.push(a.reference)},doConfig:function(){b.ColumnMulti2D.superclass.doConfig.call(this);var a=this._(),d=a.data.length,c=a.get("labels").length,e=a.get("coordinate.width"),f=a.get("coordinate.height"),d=c*d,g=a.pushIf("colwidth",e/(c+1+d));g*d>e&&(g=a.push("colwidth",e/(c+1+d)));a.push("hispace",(e-g*d)/(c+1));var i=a.coo.getScale(a.get("scaleAlign")),l=a.coo.get("brushsize"),j=a.data.length*g+a.get("hispace"),m;a.push("sub_option.width",g);a.columns.each(function(c,d){c.item.each(function(c,e){m=(c.value-i.start)*f/i.distance;a.doParse(a,c,e,{id:d+"-"+e,originx:a.x+a.get("hispace")+e*g+d*j,originy:a.y+f-m-l,height:m});a.rectangles.push(new b.Rectangle2D(a.get("sub_option"),this))},a);a.doLabel(d,c.name,a.x+0.5*a.get("hispace")+(d+0.5)*j,a.y+f+a.get("text_space"))},a)}});b.Bar=b.extend(b.Chart,{configure:function(){b.Bar.superclass.configure.call(this);this.type="bar";this.set({coordinate:{alternate_direction:"h"},barheight:void 0,text_space:6,scaleAlign:"bottom",sub_option:{},label:{}});this.registerEvent()},getCoordinate:function(){return this.coo},doLabel:function(a,d,c,e){this.labels.push(new b.Text(b.apply(this.get("label"),{id:a,text:d,textAlign:"right",textBaseline:"middle",originx:c,originy:e}),this))},doParse:function(a,b,c,e){a.doActing(a,b,e,c)},doAnimation:function(a,b,c){c.coo.draw();c.labels.each(function(a){a.draw()});c.rectangles.each(function(e){e.push("width",Math.ceil(c.animationArithmetic(a,0,e.width,b)));e.drawRectangle()})},doConfig:function(){b.Bar.superclass.doConfig.call(this);var a=this._();b.Coordinate.coordinate.call(a);a.rectangles=[];a.labels=[];a.rectangles.zIndex=a.get("z_index");a.labels.zIndex=a.get("z_index")+1;a.components.push(a.labels);a.components.push(a.rectangles);if("simple"==a.dataType){var d=a.data.length,c=a.get("coordinate.height"),e=a.pushIf("barheight",c/(2*d+1));e*d>c&&(e=a.push("barheight",c/(2*d+1)));a.push("barspace",(c-e*d)/(d+1))}a.is3D();a.coo=b.Coordinate.coordinate_.call(a);a.components.push(a.coo);a.push("sub_option.height",e);a.push("sub_option.valueAlign","right");a.push("sub_option.tipAlign","right");a.push("sub_option.originx",a.x+a.coo.get("brushsize"))}});b.Bar2D=b.extend(b.Bar,{configure:function(){b.Bar2D.superclass.configure.call(this);this.type="bar2d"},doConfig:function(){b.Bar2D.superclass.doConfig.call(this);var a=this._(),d=a.coo.getScale(a.get("scaleAlign")),c=a.coo.get("width"),e=a.get("barheight")/2,f=a.get("barheight")+a.get("barspace");a.data.each(function(g,i){a.doParse(a,g,i,{id:i,originy:a.y+a.get("barspace")+i*f,width:(g.value-d.start)*c/d.distance});a.rectangles.push(new b.Rectangle2D(a.get("sub_option"),a));a.doLabel(i,g.name,a.x-a.get("text_space"),a.y+a.get("barspace")+i*f+e)},a)}});b.BarMulti2D=b.extend(b.Bar,{configure:function(){b.BarMulti2D.superclass.configure.call(this);this.type="barmulti2d";this.dataType="complex";this.set({labels:[]})},doConfig:function(){b.BarMulti2D.superclass.doConfig.call(this);var a=this._(),d=a.data.length,c=a.get("labels").length,e=a.coo.get("width"),f=a.coo.get("height"),g=c*d,i=a.pushIf("barheight",f/(c+1+g));i*d>f&&(i=a.push("barheight",f/(c+1+g)));a.push("barspace",(f-i*g)/(c+1));var l=a.coo.getScale(a.get("scaleAlign")),j=d*i+a.get("barspace");a.get("barheight");a.push("sub_option.height",i);a.columns.each(function(c,d){c.item.each(function(c,f){a.doParse(a,c,f,{id:d+"-"+f,originy:a.y+a.get("barspace")+f*i+d*j,width:(c.value-l.start)*e/l.distance});a.rectangles.push(new b.Rectangle2D(a.get("sub_option"),a))},a);a.doLabel(d,c.name,a.x-a.get("text_space"),a.y+0.5*a.get("barspace")+(d+0.5)*j)},a)}});b.LineSegment=b.extend(b.Component,{configure:function(){b.LineSegment.superclass.configure.apply(this,arguments);this.type="linesegment";this.set({intersection:!0,label:!1,sign:"round",hollow:!0,hollow_color:"#FEFEFE",smooth:!1,smoothing:1.5,point_size:6,points:[],keep_with_coordinate:!1,shadow_blur:1,shadow_offsety:1,point_space:0,coordinate:null,event_range_x:0,limit_y:!1,tip_offset:2,event_range_y:0});this.tip=this.label=null;this.ignored_=!1},drawSegment:function(){var a=this._(),b=a.get("points"),c=a.get("f_color"),e=a.get("brushsize");a.T.shadowOn(a.get("shadow"));if(a.get("area")){var f=[a.x,a.y];b.each(function(a){f.push(a.x);f.push(a.y)});f.push(a.x+a.get("width"));f.push(a.y);a.T.polygon(a.get("light_color2"),!1,1,"",!1,a.get("area_opacity"),f)}a.T[a.ignored_?"manyLine":"lineArray"](b,e,c,a.get("smooth"),a.get("smoothing"));if(a.get("intersection")){var g=a.getPlugin("sign"),i=a.get("point_size");a.get("hollow_color");b.each(function(b){if(!b.ignored&&(!g||!g.call(a,a.T,a.get("sign"),b.x,b.y,i,c)))a.get("hollow")?a.T.round(b.x,b.y,3*i/8,a.get("hollow_color"),i/4,c):a.T.round(b.x,b.y,i/2,c)},a)}a.get("shadow")&&a.T.shadowOff()},doDraw:function(){this.drawSegment();this.get("intersection")&&this.get("label")&&this.get("points").each(function(a){a.ignored||this.T.text(a.value,a.x,a.y-3*this.get("point_size")/2,!1,this.get("f_color"),"center","bottom",this.get("fontStyle"))},this)},isEventValid:function(){return{valid:!1}},tipInvoke:function(){var a=this.x,b=this.get("tip_offset"),c=this.get("point_size")+b,e=this;return function(f,g,i){var l=i.left,j=i.top,l=3>e.tipPosition&&0<i.left-f-a-b||2<e.tipPosition&&0>i.left-f-a-b?l-(f+b):l+b,j=0==e.tipPosition%2?i.top+c:i.top-g-c;return{left:l,top:j}}},doConfig:function(){b.LineSegment.superclass.doConfig.call(this);b.Assert.gtZero(this.get("point_space"),"point_space");for(var a=this,d=this.get("point_space"),c=a.get("event_range_y"),e=a.get("event_range_x"),f=a.get("tipInvokeHeap"),g=a.get("points"),i=0;i<g.length;i++)g[i].x_=g[i].x,g[i].y_=g[i].y,g[i].ignored&&(this.ignored_=!0);e=0==e?a.push("event_range_x",Math.floor(d/2)):a.push("event_range_x",b.between(1,Math.floor(d/2),e));0==c&&(c=a.push("event_range_y",Math.floor(a.get("point_size")/2)));a.get("tip.enable")&&(a.on("mouseover",function(){f.push(a);a.tipPosition=f.length}).on("mouseout",function(){f.pop()}),a.push("tip.invokeOffsetDynamic",!0),a.tip=new b.Tip(a.get("tip"),a));var l=a.get("coordinate"),j=a.get("limit_y"),m=a.get("keep_with_coordinate"),n=function(a,b,d){return!a.ignored&&Math.abs(b-a.x)<e&&(!j||j&&Math.abs(d-a.y)<c)?true:false},p=function(a){return{valid:true,text:g[a].text,value:g[a].value,top:g[a].y,left:g[a].x,i:a,hit:true}};a.isEventValid=function(c){if(l&&!l.isEventValid(c).valid)return{valid:false};var e=Math.floor((c.x-a.x)/d);if(e<0||e>=g.length-1){e=b.between(0,g.length-1,e);return n(g[e],c.x,c.y)?p(e):{valid:m}}for(var f=e;f<=e+1;f++)if(n(g[f],c.x,c.y))return p(f);return{valid:m}}}});b.Line=b.extend(b.Chart,{configure:function(){b.Line.superclass.configure.call(this);this.type="line";this.set({coordinate:{axis:{width:[0,0,2,2]}},crosshair:{enable:!1},scaleAlign:"left",labelAlign:"bottom",labels:[],label_space:6,proportional_spacing:!0,label_spacing:0,sub_option:{},legend:{sign:"round-bar",sign_size:14},label:{}});this.registerEvent("parsePoint")},getCoordinate:function(){return this.coo},doConfig:function(){b.Line.superclass.doConfig.call(this);var a=this._(),d=1==a.data.length;b.Coordinate.coordinate.call(a);a.lines=[];a.lines.zIndex=a.get("z_index");a.components.push(a.lines);a.push("line_start",(a.get("coordinate.width")-a.get("coordinate.valid_width"))/2);a.push("line_end",a.get("coordinate.width")-a.get("line_start"));a.get("proportional_spacing")&&a.push("label_spacing",a.get("coordinate.valid_width")/(a.get("maxItemSize")-1));a.push("sub_option.originx",a.get("originx")+a.get("line_start"));a.push("sub_option.originy",a.get("originy")+a.get("coordinate.height"));a.push("sub_option.width",a.get("coordinate.valid_width"));a.push("sub_option.height",a.get("coordinate.valid_height"));a.push("sub_option.limit_y",!d);a.pushIf("sub_option.keep_with_coordinate",d);a.get("crosshair.enable")&&(a.push("coordinate.crosshair",a.get("crosshair")),a.push("coordinate.crosshair.hcross",d),a.push("coordinate.crosshair.invokeOffset",function(b){b=a.lines[0].isEventValid(b);return b.valid?b:!1}));a.pushIf("coordinate.scale",[{position:a.get("scaleAlign"),max_scale:a.get("maxValue")},{position:a.get("labelAlign"),start_scale:1,scale:1,end_scale:a.get("maxItemSize"),labels:a.get("labels")}]);a.coo=b.Coordinate.coordinate_.call(a);a.components.push(a.coo);b.applyIf(a.get("sub_option"),b.clone(["area_opacity"],a.options))}});b.LineBasic2D=b.extend(b.Line,{configure:function(){b.LineBasic2D.superclass.configure.call(this);this.type="basicline2d";this.tipInvokeHeap=[]},doAnimation:function(a,b,c){c.coo.draw();c.lines.each(function(e){e.get("points").each(function(f){f.y=e.y-Math.ceil(c.animationArithmetic(a,0,e.y-f.y_,b))});e.drawSegment()})},doConfig:function(){b.LineBasic2D.superclass.doConfig.call(this);var a=this._(),d=a.coo.getScale(a.get("scaleAlign")),c=a.get("coordinate.valid_height"),e=a.get("label_spacing"),f,g,i,l=a.get("sub_option.originx"),j=a.get("sub_option.originy"),m;a.push("sub_option.tip.showType","follow");a.push("sub_option.coordinate",a.coo);a.push("sub_option.tipInvokeHeap",a.tipInvokeHeap);a.push("sub_option.point_space",e);a.data.each(function(n){f=[];n.value.each(function(p,k){g=e*k;i=(p-d.start)*c/d.distance;m={x:l+g,y:j-i,value:p,text:p};b.merge(m,a.fireEvent(a,"parsePoint",[n,p,g,i,k]));a.get("tip.enable")&&(m.text=a.fireString(a,"parseTipText",[n,p,k],p));f.push(m)},a);a.push("sub_option.points",f);a.push("sub_option.brushsize",n.linewidth||1);a.push("sub_option.background_color",n.background_color||n.color);a.lines.push(new b.LineSegment(a.get("sub_option"),a))},this)}});b.Area2D=b.extend(b.LineBasic2D,{configure:function(){b.Area2D.superclass.configure.call(this);this.type="area2d";this.set({area_opacity:0.3})},doConfig:function(){this.push("sub_option.area",!0);b.Area2D.superclass.doConfig.call(this)}})})(iChart);