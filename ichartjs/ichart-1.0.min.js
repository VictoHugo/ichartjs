(function(b){var a=navigator.userAgent.toLowerCase(),c=Object.prototype.toString,d=/opera/.test(a),e=/\bchrome\b/.test(a),f=/webkit/.test(a),g=!e&&/safari/.test(a),j=!d&&/msie/.test(a),l=!!document.createElement("canvas").getContext,n=!f&&/gecko/.test(a),k=/ipod|ipad|iphone|android/gi.test(a),s={Linear:function(a,c,b,d){return b*a/d+c},Quad:{easeIn:function(a,c,b,d){return b*(a/=d)*a+c},easeOut:function(a,c,b,d){return-b*(a/=d)*(a-2)+c},easeInOut:function(a,c,b,d){return 1>(a/=d/2)?b/2*a*a+c:-b/2*(--a*(a-2)-1)+c}},Cubic:{easeIn:function(a,c,b,d){return b*(a/=d)*a*a+c},easeOut:function(a,c,b,d){return b*((a=a/d-1)*a*a+1)+c},easeInOut:function(a,c,b,d){return 1>(a/=d/2)?b/2*a*a*a+c:b/2*((a-=2)*a*a+2)+c}},Quart:{easeIn:function(a,c,b,d){return b*(a/=d)*a*a*a+c},easeOut:function(a,c,b,d){return-b*((a=a/d-1)*a*a*a-1)+c},easeInOut:function(a,c,b,d){return 1>(a/=d/2)?b/2*a*a*a*a+c:-b/2*((a-=2)*a*a*a-2)+c}},Bounce:{easeOut:function(a,c,b,d){return(a/=d)<1/2.75?b*7.5625*a*a+c:a<2/2.75?b*(7.5625*(a-=1.5/2.75)*a+0.75)+c:a<2.5/2.75?b*(7.5625*(a-=2.25/2.75)*a+0.9375)+c:b*(7.5625*(a-=2.625/2.75)*a+0.984375)+c}}},o=function(a){var b=!1,A=!1,E=[],h=function(){if(document.addEventListener)return function(){document.removeEventListener("DOMContentLoaded",h,!1);z()};if(document.attachEvent)return function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",h),z())}}(),v=function(){if(!b){try{document.documentElement.doScroll("left")}catch(a){setTimeout(v,1);return}z()}},z=function(){if(!b){b=!0;for(var a=0;a<E.length;a++)E[a].call(document);E=[]}},C=function(){if(!A){A=!0;if("complete"===document.readyState)return setTimeout(z,1);if(document.addEventListener)document.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",z,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",h);a.attachEvent("onload",z);var c=!1;try{c=null==a.frameElement}catch(b){}document.documentElement.doScroll&&c&&v()}}},F=function(a){C();b?a.call(document,r):E.push(function(){return a.call(this)})},r=function(a){if(!a||a.nodeType)return a;if("string"===typeof a)return-1!=a.indexOf("#")&&(a=a.substring(1)),document.getElementById(a);"function"===typeof a&&F(a)};r.apply=function(a,h){if(a&&h&&"object"==typeof h)for(var c in h)"undefined"!=typeof h[c]&&(a[c]=h[c]);if(!h&&a){var b={};for(c in a)b[c]=a[c];return b}return a};r.apply(r,{version:"1.0",email:"taylor@ichartjs.com",isEmpty:function(a,h){return null===a||void 0===a||r.isArray(a)&&!a.length||(!h?""===a:!1)},isArray:function(a){return"[object Array]"===c.apply(a)},isDate:function(a){return"[object Date]"===c.apply(a)},isObject:function(a){return!!a&&"[object Object]"===c.apply(a)},isFunction:function(a){return"[object Function]"===c.apply(a)},isNumber:function(a){return"number"===typeof a&&isFinite(a)},isString:function(a){return"string"===typeof a},isBoolean:function(a){return"boolean"===typeof a},isFalse:function(a){return"boolean"===typeof a&&!a},isElement:function(a){return a?!!a.tagName:!1},isDefined:function(a){return"undefined"!==typeof a}});r.applyIf=function(a,h){if(a&&r.isObject(h))for(var c in h)r.isDefined(h[c])&&!r.isDefined(a[c])&&(a[c]=h[c]);return!h&&a?r.apply(a):a};r.merge=function(a,h,c){if(a&&r.isObject(h)){for(var b in h)r.isDefined(h[b])&&(r.isObject(h[b])?r.isObject(a[b])?r.merge(a[b],h[b]):a[b]=r.clone(h[b],!0):a[b]=h[b]);if(r.isObject(c))return r.merge(a,c)}return a};r.clone=function(a,h,c){var b={};if(r.isArray(a)&&r.isObject(h))for(var d=0;d<a.length;d++)b[a[d]]=c&&r.isObject(h[a[d]])?r.clone(h[a[d]]):h[a[d]];else if(r.isObject(a))for(d in a)b[d]=h&&r.isObject(a[d])&&!(a[d]instanceof r.Painter)?r.clone(a[d],h):a[d];return b};r.override=function(a,h){if(h){var c=a.prototype;r.apply(c,h);r.isIE&&h.hasOwnProperty("toString")&&(c.toString=h.toString)}};r.extend=function(){var a=function(a){for(var h in a)this[h]=a[h]},h=Object.prototype.constructor;return function(c,b){var d=function(){c.apply(this,arguments)},e=function(){},z=c.prototype;e.prototype=z;e=d.prototype=new e;e.constructor=d;d.superclass=z;z.constructor==h&&(z.constructor=c);d.override=function(a){r.override(d,a)};e.superclass=e.supr=function(){return z};e.override=a;r.override(d,b);d.extend=function(a){return r.extend(d,a)};d.plugin_={};d.plugin=function(a,h){r.isString(a)&&r.isFunction(h)&&(d.plugin_[a]=h)};return d}}();var J=Math.sin,L=Math.cos,H=Math.atan,T=Math.sqrt,B=Math.abs,u=Math.PI,I=2*u,U=Math.ceil,K=Math.round,V=Math.floor,M=Math.max,N=Math.min,D=parseFloat,O=function(a,h){if(0==a)return a;h=h||5;return 0==parseInt(a)?D((a/h+"").substring(0,(a+"").length+1)):Math.ceil(a/h)},P={navy:"rgb(0,0,128)",olive:"rgb(128,128,0)",orange:"rgb(255,165,0)",silver:"rgb(192,192,192)",white:"rgb(255,255,255)",gold:"rgb(255,215,0)",lime:"rgb(0,255,0)",fuchsia:"rgb(255,0,255)",aqua:"rgb(0,255,255)",green:"rgb(0,128,0)",gray:"rgb(80,80,80)",red:"rgb(255,0,0)",blue:"rgb(0,0,255)",pink:"rgb(255,192,203)",purple:"rgb(128,0,128)",yellow:"rgb(255,255,0)",maroon:"rgb(128,0,0)",black:"rgb(0,0,0)",azure:"rgb(240,255,255)",beige:"rgb(245,245,220)",brown:"rgb(165,42,42)",cyan:"rgb(0,255,255)",darkblue:"rgb(0,0,139)",darkcyan:"rgb(0,139,139)",darkgrey:"rgb(169,169,169)",darkgreen:"rgb(0,100,0)",darkkhaki:"rgb(189,183,107)",darkmagenta:"rgb(139,0,139)",darkolivegreen:"rgb(85,107,47)",darkorange:"rgb(255,140,0)",darkorchid:"rgb(153,50,204)",darkred:"rgb(139,0,0)",darksalmon:"rgb(233,150,122)",darkviolet:"rgb(148,0,211)",indigo:"rgb(75,0,130)",khaki:"rgb(240,230,140)",lightblue:"rgb(173,216,230)",lightcyan:"rgb(224,255,255)",lightgreen:"rgb(144,238,144)",lightgrey:"rgb(211,211,211)",lightpink:"rgb(255,182,193)",lightyellow:"rgb(255,255,224)",magenta:"rgb(255,0,255)",violet:"rgb(128,0,128)"},W=function(a){a=a.replace(/\s/g,"").toLowerCase();if(/rgb\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3}\)/.exec(a)||/rgba\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3},(0(\.[0-9])?|1(\.0)?)\)/.exec(a))return a;if(/#(([a-fA-F0-9]{6})|([a-fA-F0-9]{3}))/.exec(a))return a=a.replace(/#/g,"").replace(/^(\w)(\w)(\w)$/,"$1$1$2$2$3$3"),"rgb("+parseInt(a.substring(0,2),16)+","+parseInt(a.substring(2,4),16)+","+parseInt(a.substring(4,6),16)+")";if(P[a])return P[a];throw Error("invalid colors value '"+a+"'");},R=function(a,h){h=h||0.14;return 0.5<a?h-(1-a)/10:0.1<a?h-0.16+a/5:a>h?h:a/2},S=function(a,h,c,b){if(!h)return h;var h=W(h),d=/rgb\((\w*),(\w*),(\w*)\)/.exec(h);if(d)h=[d[1],d[2],d[3]];else if(d=/rgba\((\w*),(\w*),(\w*),(.*)\)/.exec(h))h=[d[1],d[2],d[3],d[4]];else throw Error("invalid colors value '"+h+"'");var e;var d=h,z=void 0,v=void 0;r.isArray(d)&&(z=d[1],v=d[2],d=d[0]);var d=d/255,z=z/255,v=v/255,f=M(M(d,z),v),C=N(N(d,z),v),C=f-C;0==C?e=[0,0,f]:(d==f?e=(z-v)/C:z==f?e=(v-d)/C+2:v==f&&(e=(d-z)/C+4),e*=60,0>e&&(e+=360),e=[e,C/f,f]);e[1]-=b||0;a?(e[2]-=R(e[2],c),e[1]=r.upTo(e[1],1),e[2]=r.lowTo(e[2],0)):(e[2]+=R(1-e[2],c),e[1]=r.lowTo(e[1],0),e[2]=r.upTo(e[2],1));a=e;c=h[3];h=b=void 0;r.isArray(a)&&(h=c,c=a[1],b=a[2],a=a[0]);var g,F,j;e=V(a/60)%6;a=a/60-e;p=b*(1-c);q=b*(1-c*a);t=b*(1-c*(1-a));switch(e){case 0:g=b;F=t;j=p;break;case 1:g=q;F=b;j=p;break;case 2:g=p;F=b;j=t;break;case 3:g=p;F=q;j=b;break;case 4:g=t;F=p;j=b;break;case 5:g=b,F=p,j=q}return"rgb"+(h?"a":"")+"("+K(255*g)+","+K(255*F)+","+K(255*j)+(h?","+h+")":")")};r.apply(r,{getFont:function(a,h,c){return a+" "+h+"px "+c},getDoc:function(){return a.contentWindow?a.contentWindow.document:a.contentDocument?a.contentDocument:a.document},DefineAbstract:function(a,h){if(!h[a])throw Error("Cannot instantiate the type '"+h.type+"'.you must implements it with method '"+a+"'.");},getAnimationArithmetic:function(a){return"linear"==a?s.Linear:"bounce"==a?s.Bounce.easeOut:"easeInOut"==a||"easeIn"==a||"easeOut"==a?s[r.DefaultAnimationArithmetic][a]:s.Linear},noConflict:function(){return o},plugin:function(a,h,c){r.isFunction(a)&&a.plugin(h,c)},parsePadding:function(a,h){if(r.isNumber(a))return[a,a,a,a];if(r.isArray(a))return a;h=h||0;a=a.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g,/\s/).replace(/\s/g,",").split(",");1==a.length?a[0]=a[1]=a[2]=a[3]=D(a[0])||h:2==a.length?(a[0]=a[2]=D(a[0])||h,a[1]=a[3]=D(a[1])||h):3==a.length?(a[0]=D(a[0])||h,a[1]=a[3]=D(a[1])||h,a[2]=D(a[2])||h):(a[0]=D(a[0])||h,a[1]=D(a[1])||h,a[2]=D(a[2])||h,a[3]=D(a[3])||h);return a},distanceP2P:function(a,h,c,b){return T((c-a)*(c-a)+(b-h)*(b-h))},atan2Radian:function(a,h,c,b){if(a==c)return b>h?u/2:3*u/2;var d=r.quadrant(a,h,c,b),a=H(B((h-b)/(a-c)));1==d?a=u-a:2==d?a=u+a:3==d&&(a=I-a);return a},angle2Radian:function(a){return a*u/180},radian2Angle:function(a){return 180*a/u},quadrant:function(a,h,c,b){return a<c?h<b?3:0:h<b?2:1},quadrantd:function(a){return 0==a?0:0==a%I?3:U(2*(a%I)/u)-1},upTo:function(a,h){return h>a?a:h},lowTo:function(a,h){return h<a?a:h},between:function(a,h,c){return c>h?h:c<a?a:c},inRange:function(a,h,c){return h>c&&a<c},angleInRange:function(a,h,c){a%=I;h%=I;return h>a?h>c&&a<c:h<a?c<h||c>a:c==h},inRangeClosed:function(a,h,c){return h>=c&&a<=c},inEllipse:function(a,h,c,b){return 1>=a*a/c/c+h*h/b/b},p2Point:function(a,h,c,b){return{x:a+L(c)*b,y:h+J(c)*b}},vectorP2P:function(a,h,c){c||(h=r.angle2Radian(h),a=r.angle2Radian(a));h=J(h);return{x:h*J(a),y:h*L(a)}},iGather:function(a){return(a||"ichartjs")+"-"+(new Date).getTime().toString()},toPercent:function(a,h){return(100*a).toFixed(h)+"%"},parseFloat:function(a,h){if(!r.isNumber(a)&&(a=D(a),!r.isNumber(a)))throw Error("'"+h+"'is not a valid number.");return a},ceil:function(a,h){return a+O(a,h)},floor:function(a,h){return a-O(a,h)},_2D:"2d",_3D:"3d",light:function(a,h,c){return S(!1,a,h,c)},dark:function(a,h,c){return S(!0,a,h,c)},fixPixel:function(a){return r.isNumber(a)?a:D(a.replace("px",""))||0},toPixel:function(a){return r.isNumber(a)?a+"px":r.fixPixel(a)+"px"},emptyFn:function(){return!0},supportCanvas:l,isOpera:d,isWebKit:f,isChrome:e,isSafari:g,isIE:j,isGecko:n,isMobile:k,FRAME:k?30:60,DefaultAnimationArithmetic:"Cubic"});r.Assert={gtZero:function(a,h){r.Assert.gt(a,0,h)},gt:function(a,h,c){if(!r.isNumber(a)&&a>=h)throw Error(c+" required Number gt "+h+",given:"+a);},isNumber:function(a,h){if(!r.isNumber(a))throw Error(h+" required Number,given:"+a);},isArray:function(a,h){if(!r.isArray(a))throw Error(h+" required Array,given:"+a);},isTrue:function(a,h){if(!0!==a)throw Error(h);},equal:function(a,h,c){if(a!==h)throw Error(c);}};a.requestAnimFrame=function(){return a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(h){a.setTimeout(h,1E3/60)}}();r.Event={addEvent:function(a,h,c,b){a.addEventListener?a.addEventListener(h,c,b):a.attachEvent?a.attachEvent("on"+h,c):a["on"+h]=c},fix:function(h){"undefined"==typeof h&&(h=a.event);var c={target:h.target,pageX:h.pageX,pageY:h.pageY,clientX:h.clientX,clientY:h.clientY,offsetX:h.offsetX,offsetY:h.offsetY,preventDefault:h.preventDefault,stopPropagation:h.stopPropagation};h.target||(c.target=h.srcElement||document);h.touches&&(c.pageX=h.touches[0].pageX,c.pageY=h.touches[0].pageY);if(null==c.pageX&&null!=h.clientX){var b=document.documentElement,d=document.body;c.pageX=h.clientX+(b&&b.scrollLeft||d&&d.scrollLeft||0)-(b&&b.clientLeft||d&&d.clientLeft||0);c.pageY=h.clientY+(b&&b.scrollTop||d&&d.scrollTop||0)-(b&&b.clientTop||d&&d.clientTop||0)}if("undefined"==typeof h.offsetX&&"undefined"==typeof h.offsetY&&"number"!=typeof h.offsetX){d=b=0;for(h=h.target;h!=document.body&&h;)b+=h.offsetLeft,d+=h.offsetTop,h=h.offsetParent;c.offsetX=c.pageX-b;c.offsetY=c.pageY-d}c.x=c.offsetX;c.y=c.offsetY;c.stopPropagation||(c.stopPropagation=function(){a.event.cancelBubble=true});return c}};return r}(b);Array.prototype.each=function(a,c){for(var b=this.length,d,h=0;h<b&&!(d=c?a.call(c,this[h],h):a(this[h],h),"boolean"===typeof d&&!d);h++);};Array.prototype.eachAll=function(a,c){this.each(function(b,d){return o.isArray(b)?b.eachAll(a,c):c?a.call(c,b,d):a(b,d)},c)};Array.prototype.sor=function(a){for(var c=this.length,b,d=0;d<c-2;d++)for(var h=c-1;1<=h;h--)if(a?!a(this[h],this[h-1]):this[h]<this[h-1])b=this[h],this[h]=this[h-1],this[h-1]=b};b.iChart=o;b.$||(b.$=b.iChart)})(window);(function(b){b.Element=function(a){this.type="element";b.DefineAbstract("configure",this);b.DefineAbstract("afterConfiguration",this);this.options={};this.set({id:"",fontsize:12,font:"Verdana",fontweight:"normal",border:{enable:!1,color:"#BCBCBC",style:"solid",width:1,radius:0},shadow:!1,shadow_color:"#666666",shadow_blur:4,shadow_offsetx:0,shadow_offsety:0});this.variable={};this.events={touchstart:[],touchmove:[],touchend:[]};this.initialization=this.preventEvent=!1;this.configure.apply(this,Array.prototype.slice.call(arguments,1));this.default_=b.clone(this.options,!0);this.set(a);this.afterConfiguration()};b.Element.prototype={_:function(){return this},getPlugin:function(a){return this.constructor.plugin_[a]},set:function(a){b.isObject(a)&&b.merge(this.options,a)},pushIf:function(a,c){return!b.isDefined(this.get(a))?this.push(a,c):this.get(a)},push:function(a,c){var b=a.split("."),e=this.options;for(i=0;i<b.length-1;i++)e[b[i]]||(e[b[i]]={}),e=e[b[i]];return e[b[b.length-1]]=c},get:function(a){var a=a.split("."),c=this.options[a[0]];for(i=1;i<a.length;i++){if(!c)return null;c=c[a[i]]}return c}};b.Painter=b.extend(b.Element,{configure:function(){this.type="painter";this.dimension=b._2D;b.DefineAbstract("commonDraw",this);b.DefineAbstract("initialize",this);this.set({brushsize:1,strokeStyle:"gray",padding:10,color:"black",offsetx:0,offsety:0,background_color:"#FEFEFE",color_factor:0.15,style:"",border:{enable:!0},gradient:!1,gradient_mode:"LinearGradientUpDown",z_index:0,listeners:null,originx:0,originy:0});this.variable.event={mouseover:!1};this.registerEvent("initialize","click","dblclick","mousemove","mousedown","mouseover","mouseout","beforedraw","draw")},afterConfiguration:function(){},registerEvent:function(){for(var a=0;a<arguments.length;a++)this.events[arguments[a]]=[]},init:function(){if(!this.initialization){if(b.isObject(this.get("listeners")))for(var a in this.get("listeners"))this.on(a,this.get("listeners")[a]);this.initialize();this.fireEvent(this,"initialize",[this])}},is3D:function(){return this.dimension==b._3D},applyGradient:function(a,c,b,e){this.get("gradient")&&(this.push("f_color",this.T.gradient(a||this.x||0,c||this.y||0,b||this.get("width"),e||this.get("height"),[this.get("dark_color"),this.get("light_color")],this.get("gradient_mode"))),this.push("light_color",this.T.gradient(a||this.x||0,c||this.y||0,b||this.get("width"),e||this.get("height"),[this.get("background_color"),this.get("light_color")],this.get("gradient_mode"))),this.push("f_color_",this.get("f_color")))},draw:function(a){this.init();this.draw=function(a){if(!this.fireEvent(this,"beforedraw",[this]))return this;this.commonDraw(a);this.fireEvent(this,"draw",[this])};this.draw(a)},fireString:function(a,c,d,e){a=this.fireEvent(a,c,d);return b.isString(a)?a:e},fireEvent:function(a,c,b){var e=this.events[c].length;if(1==e)return this.events[c][0].apply(a,b);for(var f=!0,g=0;g<e;g++)f=this.events[c][g].apply(a,b);return f},on:function(a,c){b.isString(a)?(this.events[a]||console.log(a),this.events[a].push(c)):b.isArray(a)&&a.each(function(a){this.on(a,c)},this);return this},doConfig:function(){var a=this._(),c=b.parsePadding(a.get("padding")),d=a.get("border.enable"),d=d?b.parsePadding(a.get("border.width")):[0,0,0,0],e=a.get("background_color"),f=a.get("color_factor");a.set({border_top:d[0],border_right:d[1],border_bottom:d[2],border_left:d[3],hborder:d[1]+d[3],vborder:d[0]+d[2],padding_top:c[0]+d[0],padding_right:c[1]+d[1],padding_bottom:c[2]+d[2],padding_left:c[3]+d[3],hpadding:c[1]+c[3]+d[1]+d[3],vpadding:c[0]+c[2]+d[0]+d[2]});a.get("shadow")&&a.push("shadow",{color:a.get("shadow_color"),blur:a.get("shadow_blur"),offsetx:a.get("shadow_offsetx"),offsety:a.get("shadow_offsety")});a.push("fontStyle",b.getFont(a.get("fontweight"),a.get("fontsize"),a.get("font")));a.push("f_color",e);a.push("f_color_",e);a.push("light_color",b.light(e,f));a.push("dark_color",b.dark(e,0.8*f));a.push("light_color2",b.light(e,2*f));a.id=a.get("id");a.is3D()&&!a.get("xAngle_")&&(c=b.vectorP2P(a.get("xAngle"),a.get("yAngle")),a.push("xAngle_",c.x),a.push("yAngle_",c.y))}});b.Html=b.extend(b.Element,{configure:function(a){this.type="html";this.T=a;b.DefineAbstract("beforeshow",this);this.set({animation:!0,width:0,height:0,style:"",index:999,offset_top:0,offset_left:0});this.transitions=""},afterConfiguration:function(){this.initialize()},initialize:function(){this.wrap=this.get("wrap");this.dom=document.createElement("div");this.get("shadow")&&this.css("boxShadow",this.get("shadow_offsetx")+"px "+this.get("shadow_offsety")+"px "+this.get("shadow_blur")+"px "+this.get("shadow_color"));this.get("border.enable")&&(this.css("border",this.get("border.width")+"px "+this.get("border.style")+" "+this.get("border.color")),this.css("borderRadius",this.get("border.radius")+"px"));this.css("zIndex",this.get("index"));this.applyStyle()},width:function(){return this.dom.offsetWidth},height:function(){return this.dom.offsetHeight},onTransitionEnd:function(a,c){var d="transitionend";b.isWebKit?d="webkitTransitionEnd":b.isOpera&&(d="oTransitionEnd");b.Event.addEvent(this.dom,d,a,c)},transition:function(a){this.transitions=""==this.transitions?a:this.transitions+","+a;b.isWebKit?this.css("WebkitTransition",this.transitions):b.isGecko?this.css("MozTransition",this.transitions):b.isOpera?this.css("OTransition",this.transitions):this.css("transition",this.transitions)},show:function(a,c){this.beforeshow(a,c);this.css("visibility","visible")},hidden:function(){this.css("visibility","hidden")},getDom:function(){return this.dom},css:function(a,c){if(b.isString(a))if(b.isDefined(c))this.dom.style[a]=c;else return this.dom.style[a]},applyStyle:function(){for(var a=this.get("style").split(";"),c,b=0;b<a.length;b++)c=a[b].split(":"),1<c.length&&this.css(c[0],c[1])}});b.Component=b.extend(b.Painter,{configure:function(a){b.Component.superclass.configure.apply(this,arguments);this.type="component";this.set({tip:{enable:!1,border:{width:2}}});this.proxy=this.atomic=!1;this.inject(a);this.final_parameter={}},afterConfiguration:function(){this.init()},initialize:function(){this.preventEvent||b.DefineAbstract("isEventValid",this);b.DefineAbstract("doDraw",this);this.doConfig();this.initialization=!0},doConfig:function(){b.Component.superclass.doConfig.call(this);var a=this._();a.x=a.get("originx")+a.get("offsetx");a.y=a.get("originy")+a.get("offsety");a.data=a.get("data");a.get("tip.enable")&&(a.pushIf("tip.border.color",a.get("f_color")),b.isFunction(a.get("tip.invokeOffset"))||a.push("tip.invokeOffset",a.tipInvoke()))},isMouseOver:function(a){return this.isEventValid(a)},redraw:function(){this.container.draw()},commonDraw:function(a){this.proxy||this.doDraw.call(this,a)},inject:function(a){a&&(this.container=a,this.target=this.T=a.T)}});b.Tip=b.extend(b.Html,{configure:function(){b.Tip.superclass.configure.apply(this,arguments);this.type="tip";this.set({text:"",showType:"follow",invokeOffset:null,fade_duration:300,move_duration:100,invokeOffsetDynamic:!1,style:"textAlign:left;padding:4px 5px;cursor:pointer;backgroundColor:rgba(239,239,239,.85);fontSize:12px;color:black;",border:{enable:!0,radius:5},delay:200})},follow:function(a,c){var d=this.dom.style;if(this.get("invokeOffsetDynamic")){if(c.hit){if(b.isString(c.text)||b.isNumber(c.text))this.dom.innerHTML=c.text;var e=this.get("invokeOffset")(this.width(),this.height(),c);d.top=e.top+"px";d.left=e.left+"px"}}else"follow"==this.get("showType")?(d.top=a.y-1.1*this.height()-2+"px",d.left=a.x+2+"px"):b.isFunction(this.get("invokeOffset"))?(e=this.get("invokeOffset")(this.width(),this.height(),c),d.top=e.top+"px",d.left=e.left+"px"):(d.top=a.y-1.1*this.height()-2+"px",d.left=a.x+2+"px")},text:function(a){this.dom.innerHTML=a},beforeshow:function(a,c){this.follow(a,c)},show:function(a,c){this.beforeshow(a,c);this.css("visibility","visible");this.get("animation")&&this.css("opacity",1)},hidden:function(){this.get("animation")?this.css("opacity",0):this.css("visibility","hidden")},initialize:function(){b.Tip.superclass.initialize.call(this);var a=this._();a.css("position","absolute");a.dom.innerHTML=a.get("text");a.hidden();if(a.get("animation")){var c=a.get("move_duration")/1E3+"s ease-in 0s";a.transition("opacity "+a.get("fade_duration")/1E3+"s ease-in 0s");a.transition("top "+c);a.transition("left "+c);a.onTransitionEnd(function(){0==a.css("opacity")&&a.css("visibility","hidden")},!1)}a.wrap.appendChild(a.dom);a.T.on("mouseover",function(c,b){a.show(c,b)}).on("mouseout",function(c){a.hidden(c)});if("follow"==a.get("showType"))a.T.on("mousemove",function(c,b){a.T.variable.event.mouseover&&setTimeout(function(){a.T.variable.event.mouseover&&a.follow(c,b)},a.get("delay"))})}});b.CrossHair=b.extend(b.Html,{configure:function(){b.CrossHair.superclass.configure.apply(this,arguments);this.type="crosshair";this.set({yAngle_:void 0,top:0,left:0,hcross:!0,vcross:!0,invokeOffset:null,line_width:1,line_color:"#1A1A1A",delay:200})},follow:function(a,c){if(this.get("invokeOffset")){var b=this.get("invokeOffset")(a,c);b&&b.hit&&(this.horizontal.style.top=b.top-this.top+"px",this.vertical.style.left=b.left-this.left+"px")}else this.horizontal.style.top=a.y-this.top-1+"px",this.vertical.style.left=a.x-this.left-1+"px"},beforeshow:function(a,c){this.follow(a,c)},initialize:function(){b.CrossHair.superclass.initialize.call(this);var a=this._();a.top=b.fixPixel(a.get("top"));a.left=b.fixPixel(a.get("left"));a.dom=document.createElement("div");a.dom.style.zIndex=a.get("index");a.dom.style.position="absolute";a.dom.style.width=b.toPixel(0);a.dom.style.height=b.toPixel(0);a.dom.style.top=b.toPixel(a.get("top"));a.dom.style.left=b.toPixel(a.get("left"));a.css("visibility","hidden");a.horizontal=document.createElement("div");a.vertical=document.createElement("div");a.horizontal.style.width=b.toPixel(a.get("width"));a.horizontal.style.height=b.toPixel(a.get("line_width"));a.horizontal.style.backgroundColor=a.get("line_color");a.horizontal.style.position="absolute";a.vertical.style.width=b.toPixel(a.get("line_width"));a.vertical.style.height=b.toPixel(a.get("height"));a.vertical.style.backgroundColor=a.get("line_color");a.vertical.style.position="absolute";a.dom.appendChild(a.horizontal);a.dom.appendChild(a.vertical);a.get("shadow")&&(a.dom.style.boxShadow=a.get("shadowStyle"));a.wrap.appendChild(a.dom);a.T.on("mouseover",function(c,b){a.show(c,b)}).on("mouseout",function(c,b){a.hidden(c,b)}).on("mousemove",function(c,b){a.follow(c,b)})}});b.Legend=b.extend(b.Component,{configure:function(){b.Legend.superclass.configure.apply(this,arguments);this.type="legend";this.set({data:void 0,width:"auto",column:1,row:"max",maxwidth:0,line_height:16,sign:"square",sign_size:12,sign_space:5,legend_space:5,z_index:1009,text_with_sign_color:!1,align:"right",valign:"middle"});this.atomic=!0;this.registerEvent("parse","drawRaw","drawCell")},drawCell:function(a,c,b,e,f){var g=this.get("sign_size"),j=this.getPlugin("sign");if(!j||!j.call(this,this.T,f,a+g/2,c+g/2,g,e))"round"==f?this.T.round(a+g/2,c+g/2,g/2,e):"round-bar"==f?(this.T.box(a,c+5*g/12,g,g/6,0,e),this.T.round(a+g/2,c+g/2,g/4,e)):"square-bar"==f?(this.T.box(a,c+5*g/12,g,g/6,0,e),this.T.box(a+g/4,c+g/4,g/2,g/2,0,e)):this.T.box(a,c,g,g,0,e);f=this.get("color");this.get("text_with_sign_color")&&(f=e);this.T.fillText(b,a+this.get("signwidth"),c+g/2,this.get("textwidth"),f)},drawRow:function(a,c,b){for(var e,f=0;f<this.get("column");f++)e=this.data[a],a<this.data.length&&(this.fireEvent(this,"drawCell",[this,e]),this.drawCell(c,b,e.text,e.color,e.sign||this.get("sign")),e.x=c,e.y=b),c+=this.columnwidth[f]+this.get("signwidth")+this.get("legend_space"),a++},isEventValid:function(a){var c={valid:!1},b=this._();a.x>this.x&&a.x<b.x+b.width&&a.y>b.y&&a.y<b.y+b.height&&b.data.each(function(e,f){a.x>e.x&&a.x<e.x+e.width+b.get("signwidth")&&a.y>e.y&&a.y<e.y+b.get("line_height")&&(c={valid:!0,index:f,target:e})},b);return c},doDraw:function(){this.push("border.radius",5);this.T.box(this.x,this.y,this.width,this.height,this.get("border"),this.get("f_color"),!1,this.get("shadow"));this.T.textStyle("left","middle",b.getFont(this.get("fontweight"),this.get("fontsize"),this.get("font")));for(var a=this.x+this.get("padding_left"),c=this.y+this.get("padding_top"),d=this.get("column"),e=this.get("row"),f=0;f<e;f++)this.drawRow(f*d,a,c),c+=this.get("line_height"),this.fireEvent(this,"drawRaw",[this,f*d])},doConfig:function(){b.Legend.superclass.doConfig.call(this);var a=this._(),c=a.get("sign_size"),d=a.container;a.T.textFont(a.get("fontStyle"));a.push("signwidth",c+a.get("sign_space"));a.get("line_height")<c&&a.push("line_height",c+c/5);"center"==a.get("align")&&"middle"==a.get("valign")&&a.push("valign","top");"left"==d.get("align")&&"middle"==a.get("valign")&&a.push("align","right");var c=0,e=w=a.get("width"),f=0,g="auto"==w,j=b.isNumber(a.get("column")),l=b.isNumber(a.get("row")),n=a.data.length;!j&&!l&&(j=1);j&&!l&&a.push("row",Math.ceil(n/a.get("column")));!j&&l&&a.push("column",Math.ceil(n/a.get("row")));j=a.get("column");l=a.get("row");n>l*j&&(l+=Math.ceil((n-l*j)/j),a.push("row",l));a.columnwidth=Array(j);g&&(e=0);a.data.each(function(c,d){b.merge(c,a.fireEvent(a,"parse",[a,c.name,d]));c.text=c.text||c.name;c.width=a.T.measureText(c.text)},a);for(var k=0;k<j;k++){f=0;for(c=k;c<n;)f=Math.max(f,a.data[c].width),c+=j;a.columnwidth[k]=f;e+=f}g&&(w=a.push("width",e+a.get("hpadding")+a.get("signwidth")*j+(j-1)*a.get("legend_space")));w>a.get("maxwidth")&&(w=a.push("width",a.get("maxwidth")));a.push("textwidth",w-a.get("hpadding")-a.get("signwidth"));a.width=w;a.height=c=a.push("height",l*a.get("line_height")+a.get("vpadding"));a.y="top"==a.get("valign")?d.get("t_originy"):"bottom"==a.get("valign")?d.get("b_originy")-c:d.get("centery")-c/2;a.x="left"==a.get("align")?d.get("l_originx"):"center"==a.get("align")?d.get("centerx")-a.get("textwidth")/2:d.get("r_originx")-w;a.x=a.push("originx",a.x+a.get("offsetx"));a.y=a.push("originy",a.y+a.get("offsety"))}});b.Label=b.extend(b.Component,{configure:function(){b.Label.superclass.configure.apply(this,arguments);this.type="legend";this.set({text:"",line_height:12,line_thickness:1,sign:"square",sign_size:12,padding:"2 5",offsety:2,sign_space:5,background_color:"#efefef",text_with_sign_color:!1});this.atomic=!0;this.registerEvent()},isEventValid:function(a){return{valid:b.inRange(this.labelx,this.labelx+this.get("width"),a.x)&&b.inRange(this.labely,this.labely+this.get("height"),a.y)}},text:function(a){a&&this.push("text",a);this.push("width",this.T.measureText(this.get("text"))+this.get("hpadding")+this.get("sign_size")+this.get("sign_space"))},localizer:function(){var a=this.get("quadrantd");this.labelx=1<=a&&2>=a?this.get("labelx")-this.get("width"):this.get("labelx");this.labely=2<=a?this.get("labely")-this.get("height"):this.get("labely")},doDraw:function(){var a=this._();a.localizer();var c=a.get("line_potins"),b=a.get("sign_size"),e=a.labelx+a.get("padding_left"),f=a.labely+a.get("padding_top");a.T.lines(c,a.get("line_thickness"),a.get("border.color"),a.get("line_globalComposite"));a.T.box(a.labelx,a.labely,a.get("width"),a.get("height"),a.get("border"),a.get("f_color"),!1,a.get("shadow"),a.get("shadow_color"),a.get("shadow_blur"),a.get("shadow_offsetx"),a.get("shadow_offsety"));a.T.textStyle("left","top",a.get("fontStyle"));c=a.get("color");a.get("text_with_sign_color")&&(c=a.get("scolor"));"square"==a.get("sign")?a.T.box(e,f,b,b,0,a.get("scolor")):a.T.round(e+b/2,f+b/2,b/2,a.get("scolor"));a.T.fillText(a.get("text"),e+b+a.get("sign_space"),f,a.get("textwidth"),c)},doConfig:function(){b.Label.superclass.doConfig.call(this);var a=this._();a.T.textFont(b.getFont(a.get("fontweight"),a.get("fontsize"),a.get("font")));a.get("fontsize")>a.get("line_height")&&a.push("line_height",a.get("fontsize"));a.push("height",a.get("line_height")+a.get("vpadding"));a.text();a.localizer()}});b.Text=b.extend(b.Component,{configure:function(){b.Text.superclass.configure.apply(this,arguments);this.type="text";this.set({text:"",textAlign:"center",background_color:0,textBaseline:"top",border:{enable:!1},width:0,height:0,writingmode:"lr",line_height:16});this.registerEvent();this.preventEvent=!0},doDraw:function(){this.get("box_feature")&&this.T.box(this.x,this.y,this.get("width"),this.get("height"),this.get("border"),this.get("f_color"));""!=this.get("text")&&this.T.text(this.get("text"),this.get("textx"),this.get("texty"),this.get("width"),this.get("color"),this.get("textAlign"),this.get("textBaseline"),this.get("fontStyle"),0,0,this.get("shadow"))},doConfig:function(){b.Text.superclass.doConfig.call(this);var a=this._(),c=a.x,d=a.y,e=a.get("width"),f=a.get("height"),g=a.get("textAlign"),c=c+("center"==g?e/2:"right"==g?e:0);f&&(d+=f/2,a.push("textBaseline","middle"));a.push("textx",c);a.push("texty",d);a.push("box_feature",e&&f);a.applyGradient()}});(function(a){function c(a){"string"===typeof a&&(a=document.getElementById(a));if(!a||!a.tagName||"canvas"!=a.tagName.toLowerCase())throw Error("there not a canvas element");this.canvas=a;this.c=this.canvas.getContext("2d");this.width=this.canvas.width;this.height=this.canvas.height}var b=Math.PI/90,e=Math.PI,f=Math.ceil,g=Math.floor,j=2*Math.PI,l=Math.max,n=Math.min,k=Math.sin,s=Math.cos,o=function(a,c){return 1==a?g(c)+0.5:Math.round(c)},m=function(a,c,b,d){var e=c.x,f=c.y,g=a[b-1],j=a[b+1],H,m;if(b<a.length-1){var a=g.y,b=j.y,B;H=(d*e+g.x)/(d+1);m=(d*f+a)/(d+1);j=(d*e+j.x)/(d+1);d=(d*f+b)/(d+1);B=(d-m)*(j-e)/(j-H)+f-d;m+=B;d+=B;m>a&&m>f?(m=l(a,f),d=2*f-m):m<a&&m<f&&(m=n(a,f),d=2*f-m);d>b&&d>f?(d=l(b,f),m=2*f-d):d<b&&d<f&&(d=n(b,f),m=2*f-d);c.rcx=j;c.rcy=d}return[g.rcx||g.x,g.rcy||g.y,H||e,m||f,e,f]},G=function(h){return a.isNumber(h)?h:a.parseFloat(h,h)},A=function(h){var c=0,b=0,d,e=0;h.each(function(h){b=h.value;if(a.isArray(b)){var f=0;e=b.length>e?b.length:e;for(var g=0;g<b.length;g++)b[g]=G(b[g]),f+=b[g],d||(d=b),c=b[g]>c?b[g]:c,d=b[g]<d?b[g]:d;h.total=f}else b=G(b),h.value=b,this.total+=b,c=b>c?b:c,d||(d=b),d=b<d?b:d},this);this.get("minValue")&&(d=this.get("minValue")<d?this.get("minValue"):d);this.get("maxValue")&&(c=this.get("maxValue")<c?this.get("maxValue"):c);a.isArray(this.get("data_labels"))&&(e=this.get("data_labels").length>e?this.get("data_labels").length:e);this.push("maxItemSize",e);this.push("minValue",d);this.push("maxValue",c);this.push("total",this.total)},E=function(a){this.data_labels=this.get("data_labels");for(var b=0,c=0,d,e,f=this.data_labels.length,g=0;g<f;g++){for(var j=[],m=0;m<a.length;m++)e=a[m],d=e.value[g],d=G(d,d),e.value[g]=d,this.total+=d,b=d>b?d:b,c=d<c?d:c,j.push({name:e.name,value:e.value[g],color:e.color});this.columns.push({name:this.data_labels[g],item:j})}this.push("minValue",c);this.push("maxValue",b);this.push("total",this.total)};c.prototype={css:function(h,b){if(a.isDefined(b))this.canvas.style[h]=b;else return this.canvas.style[h]},ellipse:function(a,c,e,f,g,r,j,m,H,n,l,u,o,A){u=!!u;o=!!o;this.save().gCo(A).strokeStyle(m,H,n).shadowOn(l).fillStyle(j).moveTo(a,c).beginPath();for(o&&this.moveTo(a,c);g<=r;)this.lineTo(a+e*s(g),c+(u?-f*k(g):f*k(g))),g+=b;return this.lineTo(a+e*s(r),c+(u?-f*k(r):f*k(r))).closePath().stroke(m).fill(j).restore()},arc:function(a,b,c,d,e,f,g,j,m,n,l,u,o,A){u=!!u;o=!!o&&!d;this.save().gCo(A).strokeStyle(j,m,n).shadowOn(l).fillStyle(g).beginPath();d?(this.moveTo(a+s(e)*(c-d),b+k(e)*(c-d)).lineTo(a+s(e)*c,b+k(e)*c),this.c.arc(a,b,c,e,f,u),this.lineTo(a+s(f)*(c-d),b+k(f)*(c-d)),this.c.arc(a,b,c-d,f,e,!u)):this.c.arc(a,b,c,e,f,u);o&&this.lineTo(a,b);return this.closePath().fill(g).stroke(j).restore()},sector:function(a,b,c,d,e,f,g,j,m,n,l,o){l&&this.arc(a,b,c,d,e,f,g,0,0,0,l,o,!0,!0);return this.arc(a,b,c,d,e,f,g,j,m,n,!1,o,!0)},sector3D:function(){var h=function(h,c,f,g,v,z,j,m,C){var n=a.quadrantd(v),l=a.quadrantd(z);if(!(2==n||3==n)||!(2==l||3==l)){n=function(a,b){this.lineTo(h+f*s(a),c+(b||0)+(j?-g*k(a):g*k(a)))};v=j&&z>e&&v<e?e:v;z=!j&&v<e&&z>e?e:z;l=v;for(this.fillStyle(a.dark(C)).moveTo(h+f*s(v),c+(j?-g*k(v):g*k(v))).beginPath();l<=z;)n.call(this,l),l+=b;n.call(this,z);this.lineTo(h+f*s(z),c+m+(j?-g*k(z):g*k(z)));for(l=z;l>=v;)n.call(this,l,m),l-=b;n.call(this,v,m);this.lineTo(h+f*s(v),c+(j?-g*k(v):g*k(v))).closePath().fill(!0)}},c=function(a,h,c,b,d,e,f,g){c=a+c*s(f);b=h+e+(d?-b*k(f):b*k(f));this.moveTo(a,h).beginPath().fillStyle(g).lineTo(a,h+e).lineTo(c,b).lineTo(c,b-e).lineTo(a,h).closePath().fill(!0)},f=function(h,b,d,f,g,z,j,m,C){var n=j?g<e/2||g>1.5*e:g>e/2&&g<1.5*e,l=j?z>e/2&&z<1.5*e:z<e/2||z>1.5*e;if(!n&&!l)return!1;C=a.dark(C);n&&c.call(this,h,b,d,f,j,m,g,C);l&&c.call(this,h,b,d,f,j,m,z,C)},g=function(a,b,c,d,e,g,v,j,m,C,n,l,o){this.ellipse(a,b+v,c,d,e,g,j,m,C,n,l,o,!0);f.call(this,a,b,c,d,e,g,o,v,j);this.ellipse(a,b,c,d,e,g,j,m,C,n,!1,o,!0);h.call(this,a,b,c,d,e,g,o,v,j);return this};g.layerPaint=f;g.sPaint=h;g.layerDraw=c;return g}(),textStyle:function(a,b,c){return this.textAlign(a).textBaseline(b).textFont(c)},strokeStyle:function(a,b,c,d){if(a&&(b&&(this.c.lineWidth=b),c&&(this.c.strokeStyle=c),d))this.c.lineJoin=d;return this},globalAlpha:function(a){a&&(this.c.globalAlpha=a);return this},fillStyle:function(a){a&&(this.c.fillStyle=a);return this},arc2:function(a,b,c,d,e){this.c.arcTo(a,b,c,d,e);return this},textAlign:function(a){a&&(this.c.textAlign=a);return this},textBaseline:function(a){a&&(this.c.textBaseline=a);return this},textFont:function(a){a&&(this.c.font=a);return this},shadowOn:function(a){a&&(this.c.shadowColor=a.color,this.c.shadowBlur=a.blur,this.c.shadowOffsetX=a.offsetx,this.c.shadowOffsetY=a.offsety);return this},shadowOff:function(){this.c.shadowColor="white";this.c.shadowBlur=this.c.shadowOffsetX=this.c.shadowOffsetY=0;return this},gradient:function(a,b,c,d,e,f){var f=f.toLowerCase(),g=a,j=b,m=!f.indexOf("linear"),f=f.substring(14);if(m){switch(f){case "updown":j+=d;break;case "downup":b+=d;break;case "leftright":g+=c;break;case "rightleft":a+=c;break;default:return e[0]}return this.avgLinearGradient(a,b,g,j,e)}a+=c/2;b+=d/2;"outin"==f&&e.reverse();return this.avgRadialGradient(a,b,0,a,b,0.8*(c>d?d:c),e)},avgLinearGradient:function(a,b,c,d,e){a=this.createLinearGradient(a,b,c,d);for(b=0;b<e.length;b++)a.addColorStop(b/(e.length-1),e[b]);return a},createLinearGradient:function(a,b,c,d){return this.c.createLinearGradient(a,b,c,d)},avgRadialGradient:function(a,b,c,d,e,f,g){a=this.createRadialGradient(a,b,c,d,e,f);for(b=0;b<g.length;b++)a.addColorStop(b/(g.length-1),g[b]);return a},createRadialGradient:function(a,b,c,d,e,f){return this.c.createRadialGradient(a,b,c,d,e,f)},text:function(a,b,c,d,e,f,g,j,m,n,l){return this.save().textStyle(f,g,j).fillText(a,b,c,d,e,m,n,l).restore()},fillText:function(a,b,c,d,e,f,g,j){a+="";d=d||!1;f=f||"lr";g=g||16;this.save().fillStyle(e).shadowOn(j);a.split("tb"==f?"":"\n").each(function(a){try{d?this.c.fillText(a,b,c,d):this.c.fillText(a,b,c),c+=g}catch(h){console.log(h.message+"["+a+","+b+","+c+"]")}},this);return this.restore()},measureText:function(a){return this.c.measureText(a).width},moveTo:function(a,b){this.c.moveTo(a||0,b||0);return this},lineTo:function(a,b){this.c.lineTo(a||0,b||0);return this},save:function(){this.c.save();return this},restore:function(){this.c.restore();return this},beginPath:function(){this.c.beginPath();return this},closePath:function(){this.c.closePath();return this},stroke:function(a){a&&this.c.stroke();return this},fill:function(a){a&&this.c.fill();return this},cube:function(b,c,d,e,f,g,j,m,n,l,k,u){b=o(l,b);c=o(l,c);j=j&&0<j?j:f;e=c-j*e;d=o(l,b+j*d);e=o(l,e);u&&(this.polygon(m,n,l,k,u,!1,[b,c,d,e,d+f,e,b+f,c]),this.polygon(m,n,l,k,u,!1,[b,c,b,c+g,b+f,c+g,b+f,c]),this.polygon(m,n,l,k,u,!1,[b+f,c,d+f,e,d+f,e+g,b+f,c+g]));this.polygon(a.dark(m),n,l,k,!1,!1,[b,c,d,e,d+f,e,b+f,c]);this.polygon(m,n,l,k,!1,!1,[b,c,b,c+g,b+f,c+g,b+f,c]);this.polygon(a.dark(m),n,l,k,!1,!1,[b+f,c,d+f,e,d+f,e+g,b+f,c+g]);return this},cube3D:function(b,c,d,e,f,g,j,m,l,n,k,u){b=o(n,b);c=o(n,c);m=!m||0==m?g:m;f?(e=a.vectorP2P(d,e),d=b+m*e.x,e=c-m*e.y):(d=b+m*d,e=c-m*e);for(;6>u.length;)u.push(!1);d=o(n,d);e=o(n,e);m=[];0>e?a.isObject(u[4])&&m.push(a.applyIf({points:[b,c-j,d,e-j,d+g,e-j,b+g,c-j]},u[4])):a.isObject(u[0])&&m.push(a.applyIf({points:[b,c,d,e,d+g,e,b+g,c]},u[0]));a.isObject(u[1])&&m.push(a.applyIf({points:[d,e,d,e-j,d+g,e-j,d+g,e]},u[1]));a.isObject(u[2])&&m.push(a.applyIf({points:[b,c,b,c-j,d,e-j,d,e]},u[2]));a.isObject(u[3])&&m.push(a.applyIf({points:[b+g,c,b+g,c-j,d+g,e-j,d+g,e]},u[3]));0>e?a.isObject(u[0])&&m.push(a.applyIf({points:[b,c,d,e,d+g,e,b+g,c]},u[0])):a.isObject(u[4])&&m.push(a.applyIf({points:[b,c-j,d,e-j,d+g,e-j,b+g,c-j]},u[4]));a.isObject(u[5])&&m.push(a.applyIf({points:[b,c,b,c-j,b+g,c-j,b+g,c]},u[5]));m.each(function(a){this.polygon(a.color,l,n,k,a.shadow,a.alpha,a.points)},this);return this},polygon:function(a,b,c,d,e,f,g){if(!(2>g.length)){this.save().strokeStyle(b,c,d).beginPath().fillStyle(a).globalAlpha(f).shadowOn(e).moveTo(g[0],g[1]);for(c=2;c<g.length;c+=2)this.lineTo(g[c],g[c+1]);return this.closePath().stroke(b).fill(a).restore()}},lines:function(a,b,c,d){if(4>a.length)return this;this.save().gCo(d).beginPath().strokeStyle(!0,b,c).moveTo(o(b,a[0]),o(b,a[1]));for(c=2;c<a.length-1;c+=2)this.lineTo(o(b,a[c]),o(b,a[c+1]));return this.stroke(!0).restore()},bezierCurveTo:function(a){this.c.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5]);return this},lineArray:function(a,b,c,d,e){if(2>a.length)return this;this.strokeStyle(!0,b,c).moveTo(o(b,a[0].x),o(b,a[0].y));if(d)for(c=1;c<a.length;c++)this.bezierCurveTo(m(a,a[c],c,e));else for(c=1;c<a.length;c++)this.lineTo(o(b,a[c].x),o(b,a[c].y));return this.stroke(!0)},manyLine:function(a,b,c,d,e){var f=[],g=!1;a.each(function(a){a.ignored&&g?(this.lineArray(f,b,c,d,e),f=[],g=!1):(f.push(a),g=!0)},this)},line:function(a,b,c,d,e,f,g){if(!e||0==e)return this;this.save().gCo(g);return this.beginPath().strokeStyle(!0,e,f).moveTo(o(e,a),o(e,b)).lineTo(o(e,c),o(e,d)).stroke(!0).restore()},round:function(a,b,c,d,e,f){return this.arc(a,b,c,0,0,j,d,!!f,e,f)},fillRect:function(a,b,c,d){this.c.fillRect(a,b,c,d);return this},translate:function(a,b){this.c.translate(a,b);return this},clearRect:function(a,b,c,d){c=c||this.width;d=d||this.height;this.c.clearRect(a||0,b||0,c,d);return this},gCo:function(a){return a?this.gCO(a):this},gCO:function(a){this.c.globalCompositeOperation=a?"destination-over":"source-over";return this},box:function(b,c,d,e,j,m,n,l){j=j||{enable:0};if(j.enable)var k=j.width,s=j.color,B=j.radius,u=a.isNumber(k),k=a.parsePadding(k),d=d-(k[1]+k[3])/2,e=e-(k[0]+k[2])/2,b=b+k[3]/2,c=c+k[0]/2,b=g(b),c=g(c),k=u?k[0]:k,B=!u||0==B||"0"==B?0:a.parsePadding(B);this.save().shadowOn(n).gCo(l).fillStyle(m).strokeStyle(u,k,s);B?this.beginPath().moveTo(b+B[0],o(k,c)).lineTo(b+d-B[1],o(k,c)).arc2(b+d,o(k,c),b+d,c+B[1],B[1]).lineTo(o(k,b+d),c+e-B[2]).arc2(o(k,b+d),c+e,b+d-B[2],c+e,B[2]).lineTo(b+B[3],o(k,c+e)).arc2(b,o(k,c+e),b,c+e-B[3],B[3]).lineTo(o(k,b),c+B[0]).arc2(o(k,b),c,b+B[0],c,B[0]).closePath().fill(m).stroke(k):!j.enable||u?(j.enable&&this.c.strokeRect(b,c,o(k,d),o(k,e)),m&&this.fillRect(b,c,d,e)):(m&&this.beginPath().moveTo(g(b+k[3]/2),g(c+k[0]/2)).lineTo(f(b+d-k[1]/2),c+k[0]/2).lineTo(f(b+d-k[1]/2),f(c+e-k[2]/2)).lineTo(g(b+k[3]/2),f(c+e-k[2]/2)).lineTo(g(b+k[3]/2),g(c+k[0]/2)).closePath().fill(m),k&&(s=a.isArray(s)?s:[s,s,s,s],this.line(b+d,c+k[0]/2,b+d,c+e-k[0]/2,k[1],s[1],0).line(b,c+k[0]/2,b,c+e-k[0]/2,k[3],s[3],0).line(g(b-k[3]/2),c,b+d+k[1]/2,c,k[0],s[0],0).line(g(b-k[3]/2),c+e,b+d+k[1]/2,c+e,k[2],s[2],0)));return this.restore()},toImageURL:function(a){return this.canvas.toDataURL(a||"image/png")},addEvent:function(b,c,d){a.Event.addEvent(this.canvas,b,c,d)}};a.Chart=a.extend(a.Painter,{configure:function(){a.Chart.superclass.configure.apply(this,arguments);this.type="chart";this.set({render:"",data:[],width:void 0,height:void 0,lineJoin:"round",align:"center",default_mouseover_css:!0,showpercent:!1,decimalsnum:1,title:{text:"",fontweight:"bold",fontsize:20,height:30},subtitle:{text:"",fontweight:"bold",fontsize:16,height:20},footnote:{text:"",color:"#5d7f97",textAlign:"right",height:20},footnote_align:"right",title_align:"center",title_valign:"top",animation:!1,doAnimationFn:a.emptyFn,animation_timing_function:"easeInOut",duration_animation_duration:1E3,z_index:999,legend:{enable:!1},tip:{enable:!1}});this.registerEvent("parseTipText","beforeAnimation","afterAnimation","animating");this.T=null;this.animationed=this.rendered=!1;this.data=[];this.components=[];this.total=0},plugin:function(a){a.inject(this);this.components.push(a)},toImageURL:function(){return this.T.toImageURL()},segmentRect:function(){this.T.clearRect(this.get("l_originx"),this.get("t_originy"),this.get("client_width"),this.get("client_height"))},resetCanvas:function(){this.T.box(this.get("l_originx"),this.get("t_originy"),this.get("client_width"),this.get("client_height"),0,this.get("f_color"),0,!0)},animation:function(a){a.segmentRect();a.doAnimation(a.variable.animation.time,a.duration);a.resetCanvas();a.variable.animation.time<a.duration?(a.variable.animation.time++,requestAnimFrame(function(){a.animation(a)})):requestAnimFrame(function(){a.variable.animation.time=0;a.animationed=!0;a.draw();a.processAnimation=!1;a.fireEvent(a,"afterAnimation",[a])})},doAnimation:function(a,b){this.get("doAnimationFn").call(this,a,b)},doSort:function(){this.components.sor(function(b,c){return(a.isArray(b)?b.zIndex||0:b.get("z_index"))>(a.isArray(c)?c.zIndex||0:c.get("z_index"))})},commonDraw:function(){a.Assert.isTrue(this.rendered,this.type+" has not rendered.");a.Assert.isTrue(this.initialization,this.type+" has initialize failed.");a.Assert.gtZero(this.data.length,this.type+"'s data is empty.");this.redraw||(this.doSort(),this.title&&this.title.draw(),this.subtitle&&this.subtitle.draw(),this.footnote&&this.footnote.draw(),this.T.box(0,0,this.width,this.height,this.get("border"),this.get("f_color"),0,!0));this.redraw=!0;!this.animationed&&this.get("animation")?(this.fireEvent(this,"beforeAnimation",[this]),this.animation(this)):(this.segmentRect(),this.components.eachAll(function(a){a.draw()},this),this.resetCanvas())},create:function(b){this.width=this.pushIf("width",400);this.height=this.pushIf("height",300);var d="width:"+this.width+"px;height:"+this.height+"px;padding:0px;overflow:hidden;position:relative;",e=a.iGather(this.type);this.shellid=a.iGather(this.type+"-shell");b.innerHTML="<div id='"+this.shellid+"' style='"+d+"'><canvas id= '"+e+"'  width='"+this.width+"' height="+this.height+"'><p>Your browser does not support the canvas element</p></canvas></div>";this.element=document.getElementById(e);this.shell=document.getElementById(this.shellid);this.T=this.target=new c(this.element);this.rendered=!0},render:function(a){this.push("render",a)},initialize:function(){var a=this._(),b=a.get("data");if(!a.rendered){var c=a.get("render");"string"==typeof c&&document.getElementById(c)?a.create(document.getElementById(c)):"object"==typeof c&&a.create(c)}0<b.length&&a.rendered&&!a.initialization&&("simple"==a.dataType?A.call(a,b):"complex"==a.dataType&&E.call(a,b),a.data=b,a.doConfig(),a.initialization=!0)},doConfig:function(){a.Chart.superclass.doConfig.call(this);var b=this._(),c=b.variable.event,d=b.get("default_mouseover_css"),e,g,j=a.isMobile?["touchstart","touchmove"]:["click","mousemove"];a.Assert.isArray(b.data);b.T.strokeStyle(!0,b.get("brushsize"),b.get("strokeStyle"),b.get("lineJoin"));b.processAnimation=b.get("animation");b.duration=f(b.get("duration_animation_duration")*a.FRAME/1E3);b.variable.animation={type:0,time:0,queue:[]};b.applyGradient();b.animationArithmetic=a.getAnimationArithmetic(b.get("animation_timing_function"));b.on("afterAnimation",function(){var a=b.variable.animation.queue.shift();a&&b[a.handler].apply(b,a.arguments)});j.each(function(c){b.T.addEvent(c,function(d){b.processAnimation||d.touches&&1!=d.touches.length||(d.preventDefault(),b.fireEvent(b,c,[b,a.Event.fix(d)]))},!1)});b.on(j[0],function(a,b){a.components.eachAll(function(a){if(!a.preventEvent){var c=a.isMouseOver(b);c.valid&&a.fireEvent(a,"click",[a,b,c])}})});b.on(j[1],function(a,b){e=g=!1;a.components.eachAll(function(f){if(!f.preventEvent){var h=f.variable.event,j=f.isMouseOver(b);if(j.valid){if(e=!0,g=g||f.atomic,c.mouseover||(c.mouseover=!0,a.fireEvent(a,"mouseover",[b])),d&&g&&a.T.css("cursor","pointer"),h.mouseover||(h.mouseover=!0,f.fireEvent(f,"mouseover",[b,j])),f.fireEvent(f,"mousemove",[b,j]),j.stop)return!1}else h.mouseover&&(h.mouseover=!1,f.fireEvent(f,"mouseout",[b,j]))}});d&&!g&&c.mouseover&&a.T.css("cursor","default");!e&&c.mouseover&&(c.mouseover=!1,a.fireEvent(a,"mouseout",[b]))});b.push("r_originx",b.width-b.get("padding_right"));b.push("b_originy",b.height-b.get("padding_bottom"));var m=0,j=b.push("l_originx",b.get("padding_left")),k=b.push("t_originy",b.get("padding_top")),o=b.push("client_width",b.get("width")-b.get("hpadding"));a.isString(b.get("title"))&&b.push("title",a.applyIf({text:b.get("title")},b.default_.title));a.isString(b.get("subtitle"))&&b.push("subtitle",a.applyIf({text:b.get("subtitle")},b.default_.subtitle));a.isString(b.get("footnote"))&&b.push("footnote",a.applyIf({text:b.get("footnote")},b.default_.footnote));if(""!=b.get("title.text")){var s=""!=b.get("subtitle.text"),m=s?b.get("title.height")+b.get("subtitle.height"):b.get("title.height"),k=b.push("t_originy",k+m);b.push("title.originx",j);b.push("title.originy",b.get("padding_top"));b.push("title.width",o);b.title=new a.Text(b.get("title"),b);s&&(b.push("subtitle.originx",j),b.push("subtitle.originy",b.get("title.originy")+b.get("title.height")),b.push("subtitle.width",o),b.subtitle=new a.Text(b.get("subtitle"),b))}""!=b.get("footnote.text")&&(s=b.get("footnote.height"),m+=s,b.push("b_originy",b.get("b_originy")-s),b.push("footnote.originx",j),b.push("footnote.originy",b.get("b_originy")),b.push("footnote.width",o),b.footnote=new a.Text(b.get("footnote"),b));m=b.push("client_height",b.get("height")-b.get("vpadding")-m);b.push("minDistance",n(o,m));b.push("maxDistance",l(o,m));b.push("minstr",o<m?"width":"height");b.push("centerx",j+o/2);b.push("centery",k+m/2);b.push("communal_option","shadow,shadow_color,shadow_blur,shadow_offsetx,shadow_offsety,tip".split(","));b.get("legend.enable")&&(b.legend=new a.Legend(a.apply({maxwidth:o,data:b.data},b.get("legend")),b),b.components.push(b.legend));b.get("tip.enable")&&b.push("tip.wrap",b.shell)}})})(b);b.Custom=b.extend(b.Component,{configure:function(){b.Custom.superclass.configure.apply(this,arguments);this.type="custom";this.set({drawFn:b.emptyFn,eventValid:void 0});this.registerEvent()},doDraw:function(a){this.get("drawFn").call(this,a)},isEventValid:function(a){return b.isFunction(this.get("eventValid"))?this.get("eventValid").call(this,a):{valid:!1}},doConfig:function(){b.Custom.superclass.doConfig.call(this)}});b.Scale=b.extend(b.Component,{configure:function(){b.Scale.superclass.configure.apply(this,arguments);this.type="scale";this.set({position:"left",which:"h",distance:void 0,start_scale:0,end_scale:void 0,min_scale:void 0,max_scale:void 0,scale_space:void 0,scale_share:5,scale_enable:!0,scale_size:1,scale_width:4,scale_color:"#333333",scaleAlign:"center",labels:[],scale2grid:!0,text_height:16,text_space:4,textAlign:"left",decimalsnum:0,join_style:"none",join_size:2});this.registerEvent("parseText");this.items=[];this.number=0},isEventValid:function(){return{valid:!1}},doDraw:function(){var a=this._(),b=0,d=0,e=0,f=0,g=0,j=0,l=a.get("scale_width"),n=l/2,k=a.get("scaleAlign"),s=a.get("textAlign"),o=a.get("text_space");a.isH?("top"==k?d=-l:"center"==k?(d=-n,f=n):f=l,a.T.textAlign("center"),"top"==s)?(j=-o,a.T.textBaseline("bottom")):(j=o,a.T.textBaseline("top")):("left"==k?b=-l:"center"==k?(b=-n,e=n):e=l,a.T.textBaseline("middle"),"right"==s)?(a.T.textAlign("left"),g=o):(a.T.textAlign("right"),g=-o);a.T.textFont(a.get("fontStyle"));a.items.each(function(m){a.get("scale_enable")&&a.T.line(m.x+b,m.y+d,m.x+e,m.y+f,a.get("scale_size"),a.get("scale_color"),!1);a.T.fillText(m.text,m.textX+g,m.textY+j,!1,a.get("color"),"lr",a.get("text_height"))})},doConfig:function(){b.Scale.superclass.doConfig.call(this);b.Assert.isNumber(this.get("distance"),"distance");var a=this._(),c=a.get("labels").length,d=a.get("min_scale"),e=a.get("max_scale"),f=a.get("scale_space"),g=a.get("end_scale"),j=a.get("start_scale");if(0<c)a.number=c-1;else{b.Assert.isTrue(b.isNumber(e)||b.isNumber(g),"max_scale&end_scale");if(!g||g<e)g=a.push("end_scale",b.ceil(e));j>d&&a.push("start_scale",b.floor(d));f&&f<g-j&&a.push("scale_share",(g-j)/f);if(!f||f>g-j)f=a.push("scale",(g-j)/a.get("scale_share"));a.number=a.get("scale_share");if(1>f&&0==a.get("decimalsnum"))for(d=f;1>d;)d*=10,a.push("decimalsnum",a.get("decimalsnum")+1)}a.push("distanceOne",a.get("valid_distance")/a.number);var d=0,l;a.T.textFont(a.get("fontStyle"));a.push("which",a.get("which").toLowerCase());a.isH="h"==a.get("which");for(var n=0;n<=a.number;n++)e=c?a.get("labels")[n]:(f*n+j).toFixed(a.get("decimalsnum")),g=a.isH?a.get("valid_x")+n*a.get("distanceOne"):a.x,l=a.isH?a.y:a.get("valid_y")+a.get("distance")-n*a.get("distanceOne"),a.items.push(b.merge({text:e,x:g,y:l,textX:g,textY:l},a.fireEvent(a,"parseText",[e,g,l,n]))),d=Math.max(d,a.T.measureText(e));a.left=a.right=a.top=a.bottom=0;c=a.get("text_space");f=a.get("textAlign");j=a.get("scaleAlign");e=a.get("scale_width");g=e/2;a.isH?(a.top="top"==j?e:"center"==j?g:0,a.bottom=e-a.top,"top"==f?a.top+=a.get("text_height")+c:a.bottom+=a.get("text_height")+c):(a.left="left"==j?e:"center"==j?g:0,a.right=e-a.left,"left"==f?a.left+=d+c:a.right+=d+c)}});b.Coordinate={coordinate_:function(){var a=this._();return a.is3D()?(a.push("coordinate.xAngle_",a.get("xAngle_")),a.push("coordinate.yAngle_",a.get("yAngle_")),a.push("coordinate.zHeight",a.get("zHeight")*a.get("bottom_scale")),new b.Coordinate3D(b.apply({scale:{position:a.get("scaleAlign"),scaleAlign:a.get("scaleAlign"),max_scale:a.get("maxValue"),min_scale:a.get("minValue")}},a.get("coordinate")),a)):new b.Coordinate2D(b.apply({scale:{position:a.get("scaleAlign"),max_scale:a.get("maxValue"),min_scale:a.get("minValue")}},a.get("coordinate")),a)},coordinate:function(){var a=this._(),b=a.get("client_width"),d=a.get("client_height"),e=a.pushIf("coordinate.width",Math.floor(0.9*b)),f=a.pushIf("coordinate.height",Math.floor(0.9*d));f>d&&(f=a.push("coordinate.height",0.9*d));e>b&&(e=a.push("coordinate.width",0.9*b));a.is3D()&&(f=a.push("coordinate.height",f-(a.get("coordinate.pedestal_height")||22)-(a.get("coordinate.board_deep")||20)));"left"==a.get("align")?a.push("originx",a.get("l_originx")):"right"==a.get("align")?a.push("originx",a.get("r_originx")-e):a.push("originx",a.get("centerx")-e/2);a.push("originx",a.get("originx")+a.get("offsetx"));a.push("originy",a.get("centery")-f/2+a.get("offsety"));(!a.get("coordinate.valid_width")||a.get("coordinate.valid_width")>e)&&a.push("coordinate.valid_width",e);(!a.get("coordinate.valid_height")||a.get("coordinate.valid_height")>f)&&a.push("coordinate.valid_height",f);a.x=a.get("originx");a.y=a.get("originy");a.push("coordinate.originx",a.x);a.push("coordinate.originy",a.y)}};b.Coordinate2D=b.extend(b.Component,{configure:function(){b.Coordinate2D.superclass.configure.apply(this,arguments);this.type="coordinate2d";this.set({sign_size:12,sign_space:5,scale:[],valid_width:void 0,valid_height:void 0,grid_line_width:1,grid_color:"#dbe1e1",gridlinesVisible:!0,scale2grid:!0,grids:void 0,ignoreOverlap:!0,ignoreEdge:!1,xlabel:"",ylabel:"",alternate_color:!0,alternate_direction:"v",alternate_color_factor:0.01,crosshair:{enable:!1},width:void 0,height:void 0,z_index:-1,axis:{enable:!0,color:"#666666",width:1}});this.registerEvent();this.scale=[];this.gridlines=[]},getScale:function(a){for(var b=0;b<this.scale.length;b++){var d=this.scale[b];if(d.get("position")==a)return{start:d.get("start_scale"),end:d.get("end_scale"),distance:d.get("end_scale")-d.get("start_scale")}}return{start:0,end:0,distance:0}},isEventValid:function(a){return{valid:a.x>this.x&&a.x<this.x+this.get("width")&&a.y<this.y+this.get("height")&&a.y>this.y}},doDraw:function(){var a=this._();a.T.box(a.x,a.y,a.get("width"),a.get("height"),0,a.get("f_color"));if(a.get("alternate_color")){var c,d,e=!1,f=[0,0,0,0],g=b.dark(a.get("background_color"),a.get("alternate_color_factor"));a.get("axis.enable")&&(f=a.get("axis.width"))}var j=a.get("grid_line_width"),l="v"==a.get("alternate_direction");a.gridlines.each(function(b){b.x1=Math.round(b.x1);b.y1=Math.round(b.y1);b.x2=Math.round(b.x2);b.y2=Math.round(b.y2);a.get("alternate_color")&&(e&&(l?a.T.box(b.x1+f[3],b.y1+j,b.x2-b.x1-f[3]-f[1],d-b.y1-j,0,g):a.T.box(c+j,b.y2+f[0],b.x1-c,b.y1-b.y2-f[0]-f[2],0,g)),c=b.x1,d=b.y1,e=!e);a.T.line(b.x1,b.y1,b.x2,b.y2,j,a.get("grid_color"))});a.T.box(a.x,a.y,a.get("width"),a.get("height"),a.get("axis"),!1,a.get("shadow"));a.scale.each(function(a){a.draw()})},doConfig:function(){b.Coordinate2D.superclass.doConfig.call(this);var a=this._();b.Assert.isNumber(a.get("width"),"width");b.Assert.isNumber(a.get("height"),"height");a.atomic=!1;a.get("gradient")&&b.isString(a.get("f_color"))&&a.push("f_color",a.T.avgLinearGradient(a.x,a.y,a.x,a.y+a.get("height"),[a.get("dark_color"),a.get("light_color")]));if(a.get("axis.enable")){var c=a.get("axis.width");b.isArray(c)||a.push("axis.width",[c,c,c,c])}a.get("crosshair.enable")&&(a.push("crosshair.wrap",a.container.shell),a.push("crosshair.height",a.get("height")),a.push("crosshair.width",a.get("width")),a.push("crosshair.top",a.y),a.push("crosshair.left",a.x),a.crosshair=new b.CrossHair(a.get("crosshair"),a));var d,e=!(!a.get("gridlinesVisible")||!a.get("grids")),c=e&&!!a.get("grids.horizontal"),f=e&&!!a.get("grids.vertical"),g=a.get("height"),j=a.get("width"),l=a.get("valid_width"),n=a.get("valid_height"),k=a.get("gridlinesVisible")&&a.get("scale2grid")&&!(c&&f),s=(j-l)/2,o=(g-n)/2,m=a.get("axis.width");b.isArray(a.get("scale"))||(b.isObject(a.get("scale"))?a.push("scale",[a.get("scale")]):a.push("scale",[]));a.get("scale").each(function(c){d=(d=c.position)||"left";d=d.toLowerCase();c.originx=a.x;c.originy=a.y;c.valid_x=a.x+s;c.valid_y=a.y+o;c.position=d;if(d=="top"){c.which="h";c.distance=j;c.valid_distance=l}else if(d=="right"){c.which="v";c.distance=g;c.valid_distance=n;c.originx=c.originx+j;c.valid_x=c.valid_x+l}else if(d=="bottom"){c.which="h";c.distance=j;c.valid_distance=l;c.originy=c.originy+g;c.valid_y=c.valid_y+n}else{c.which="v";c.distance=g;c.valid_distance=n}a.scale.push(new b.Scale(c,a.container))},a);if(e=a.push("ignoreOverlap",a.get("ignoreOverlap")&&a.get("axis.enable")||a.get("ignoreEdge")))var G=a.get("ignoreEdge")?function(b,c,d){return b=="v"?d==a.y||d==a.y+g:c==a.x||c==a.x+b}:function(b,c,d){return b=="v"?d==a.y&&m[0]>0||d==a.y+g&&m[2]>0:c==a.x&&m[3]>0||c==a.x+j&&m[1]>0};if(k)for(var A,E,h,v,k=0;k<a.scale.length;k++)if(A=a.scale[k],v=A.get("position"),!b.isFalse(A.get("scale2grid"))&&!(c&&"v"==A.get("which")||f&&"h"==A.get("which"))){E=h=0;"top"==v?h=g:"right"==v?E=-j:"bottom"==v?h=-g:E=j;for(v=0;v<A.items.length;v++)(!e||!G.call(a,A.get("which"),A.items[v].x,A.items[v].y))&&a.gridlines.push({x1:A.items[v].x,y1:A.items[v].y,x2:A.items[v].x+E,y2:A.items[v].y+h})}if(f){k=a.get("grids.vertical");b.Assert.gtZero(k.value,"value");f=j/k.value;A=k.value;"given_value"==k.way&&(A=f,f=k.value,f=f>j?j:f);for(k=0;k<=A;k++)(!e||!G.call(a,"h",a.x+k*f,a.y))&&a.gridlines.push({x1:a.x+k*f,y1:a.y,x2:a.x+k*f,y2:a.y+g})}if(c){c=a.get("grids.horizontal");b.Assert.gtZero(c.value,"value");f=g/c.value;A=c.value;"given_value"==c.way&&(A=f,f=c.value,f=f>g?g:f);for(k=0;k<=A;k++)(!e||!G.call(a,"v",a.x,a.y+k*f))&&a.gridlines.push({x1:a.x,y1:a.y+k*f,x2:a.x+j,y2:a.y+k*f})}}});b.Coordinate3D=b.extend(b.Coordinate2D,{configure:function(){b.Coordinate3D.superclass.configure.apply(this,arguments);this.type="coordinate3d";this.dimension=b._3D;this.set({xAngle:60,yAngle:20,xAngle_:void 0,yAngle_:void 0,zHeight:0,pedestal_height:22,board_deep:20,gradient:!0,color_factor:0.18,ignoreEdge:!0,alternate_color:!1,grid_color:"#7a8d44",background_color:"#d6dbd2",shadow_offsetx:4,shadow_offsety:2,wall_style:[],axis:{enable:!1}})},doDraw:function(){var a=this._(),b=a.get("width"),d=a.get("height"),e=a.get("xAngle_"),f=a.get("yAngle_"),g=a.get("zHeight"),j=e*g,l=f*g;a.T.cube3D(a.x,a.y+d+a.get("pedestal_height"),e,f,!1,b,a.get("pedestal_height"),3*g/2,a.get("axis.enable"),a.get("axis.width"),a.get("axis.color"),a.get("bottom_style"));a.T.cube3D(a.x+a.get("board_deep")*e,a.y+d-a.get("board_deep")*f,e,f,!1,b,d,g,a.get("axis.enable"),a.get("axis.width"),a.get("axis.color"),a.get("board_style"));a.T.cube3D(a.x,a.y+d,e,f,!1,b,d,g,a.get("axis.enable"),a.get("axis.width"),a.get("axis.color"),a.get("wall_style"));a.gridlines.each(function(b){a.T.line(b.x1,b.y1,b.x1+j,b.y1-l,a.get("grid_line_width"),a.get("grid_color"));a.T.line(b.x1+j,b.y1-l,b.x2+j,b.y2-l,a.get("grid_line_width"),a.get("grid_color"))});a.scale.each(function(a){a.draw()})},doConfig:function(){b.Coordinate3D.superclass.doConfig.call(this);var a=this._(),c=a.get("wall_style"),d=a.get("background_color"),e=b.dark(d,0.1),f=a.get("dark_color"),g=a.get("height"),j=a.get("width");3>c.length&&(c=a.push("wall_style",[{color:e},{color:d},{color:e}]));var l=c[0].color;a.push("bottom_style",[{shadow:a.get("shadow")},!1,!1,{color:l},{color:l},{color:l}]);a.push("board_style",[!1,!1,!1,{color:l},{color:d},!1]);if(a.get("gradient")){var n=a.get("xAngle_")*a.get("zHeight"),k=a.get("yAngle_")*a.get("zHeight"),s=a.get("bottom_style");b.isString(c[0].color)&&(c[0].color=a.T.avgLinearGradient(a.x,a.y+g,a.x+j,a.y+g,[l,f]));b.isString(c[1].color)&&(c[1].color=a.T.avgLinearGradient(a.x+n,a.y-k,a.x+n,a.y+g-k,[f,a.get("light_color")]));b.isString(c[2].color)&&(c[2].color=a.T.avgLinearGradient(a.x,a.y,a.x,a.y+g,[d,f]));s[5].color=a.T.avgLinearGradient(a.x,a.y+g,a.x,a.y+g+a.get("pedestal_height"),[d,e])}}});b.Rectangle=b.extend(b.Component,{configure:function(){b.Rectangle.superclass.configure.apply(this,arguments);this.type="rectangle";this.set({width:0,height:0,value_space:4,value:"",name:"",tipAlign:"top",valueAlign:"top",textAlign:"center",textBaseline:"top",shadow_blur:3,shadow_offsety:-1});this.atomic=!0;this.registerEvent("drawText")},doDraw:function(){this.drawRectangle();this.drawValue()},doConfig:function(){b.Rectangle.superclass.doConfig.call(this);b.Assert.gtZero(this.get("width"),"width");var a=this._(),c=a.variable.event;a.width=a.get("width");a.height=a.get("height");a.centerX=a.x+a.width/2;a.centerY=a.y+a.height/2;a.get("tip.enable")&&("follow"!=a.get("tip.showType")&&a.push("tip.invokeOffsetDynamic",!1),a.tip=new b.Tip(a.get("tip"),a));c.highlight=!1;a.on("mouseover",function(){c.highlight=true;a.redraw();c.highlight=false}).on("mouseout",function(){c.highlight=false;a.redraw()});a.on("beforedraw",function(){a.push("f_color",c.highlight?a.get("light_color"):a.get("f_color_"));return true})}});b.Rectangle2D=b.extend(b.Rectangle,{configure:function(){b.Rectangle2D.superclass.configure.apply(this,arguments);this.type="rectangle2d";this.set({shadow_offsety:-2})},drawValue:function(){""!=this.get("value")&&this.T.text(this.fireString(this,"drawText",[this,this.get("value")],this.get("value")),this.get("value_x"),this.get("value_y"),!1,this.get("color"),this.get("textAlign"),this.get("textBaseline"),this.get("fontStyle"))},drawRectangle:function(){this.T.box(this.get("originx"),this.get("originy"),this.get("width"),this.get("height"),this.get("border"),this.get("f_color"),this.get("shadow"))},isEventValid:function(a){return{valid:a.x>this.x&&a.x<this.x+this.width&&a.y<this.y+this.height&&a.y>this.y}},tipInvoke:function(){var a=this;return function(b,d){return{left:a.tipX(b,d),top:a.tipY(b,d)}}},doConfig:function(){b.Rectangle2D.superclass.doConfig.call(this);var a=this,c=a.get("tipAlign"),d=a.get("valueAlign");"left"==c||"right"==c?a.tipY=function(b,c){return a.centerY-c/2}:a.tipX=function(b){return a.centerX-b/2};"left"==c?a.tipX=function(b){return a.x-a.get("value_space")-b}:"right"==c?a.tipX=function(){return a.x+a.width+a.get("value_space")}:a.tipY="bottom"==c?function(){return a.y+a.height+3}:function(b,c){return a.y-c-3};a.applyGradient();"left"==d?(a.push("textAlign","right"),a.push("value_x",a.x-a.get("value_space")),a.push("value_y",a.centerY)):"right"==d?(a.push("textAlign","left"),a.push("textBaseline","middle"),a.push("value_x",a.x+a.width+a.get("value_space")),a.push("value_y",a.centerY)):"bottom"==d?(a.push("value_x",a.centerX),a.push("value_y",a.y+a.height+a.get("value_space")),a.push("textBaseline","top")):(a.push("value_x",a.centerX),a.push("value_y",a.y-a.get("value_space")),a.push("textBaseline","bottom"));a.valueX=a.get("value_x");a.valueY=a.get("value_y")}});b.Rectangle3D=b.extend(b.Rectangle,{configure:function(){b.Rectangle3D.superclass.configure.apply(this,arguments);this.type="rectangle3d";this.dimension=b._3D;this.set({zHeight:void 0,xAngle:60,yAngle:20,xAngle_:void 0,yAngle_:void 0,shadow_offsetx:2})},drawValue:function(){""!=this.get("value")&&this.T.text(this.get("value"),this.centerX,this.topCenterY+this.get("value_space"),!1,this.get("color"),"center","top",this.get("fontStyle"))},drawRectangle:function(){this.T.cube(this.get("originx"),this.get("originy"),this.get("xAngle_"),this.get("yAngle_"),this.get("width"),this.get("height"),this.get("zHeight"),this.get("f_color"),this.get("border.enable"),this.get("border.width"),this.get("light_color"),this.get("shadow"))},isEventValid:function(a){return{valid:!this.preventEvent&&a.x>this.x&&a.x<this.x+this.get("width")&&a.y<this.y+this.get("height")&&a.y>this.y}},tipInvoke:function(){var a=this;return function(b,d){return{left:a.topCenterX-b/2,top:a.topCenterY-d}}},doConfig:function(){b.Rectangle3D.superclass.doConfig.call(this);var a=this._();a.pushIf("zHeight",a.get("width"));a.centerX=a.x+a.get("width")/2;a.topCenterX=a.x+(a.get("width")+a.get("width")*a.get("xAngle_"))/2;a.topCenterY=a.y-a.get("width")*a.get("yAngle_")/2}});b.Sector=b.extend(b.Component,{configure:function(){b.Sector.superclass.configure.apply(this,arguments);this.type="sector";this.set({value:"",name:"",counterclockwise:!1,startAngle:0,middleAngle:0,endAngle:0,totalAngle:0,bound_event:"click",expand:!1,donutwidth:0,mutex:!1,increment:void 0,gradient_mode:"RadialGradientOutIn",label:{enable:!0}});this.atomic=!0;this.registerEvent("changed");this.tip=this.label=null},bound:function(){this.expanded||this.toggle()},rebound:function(){this.expanded&&this.toggle()},toggle:function(){this.fireEvent(this,this.get("bound_event"),[this])},doDraw:function(){this.drawSector();this.label&&this.label.draw()},labelInvoke:function(a){this.get("middleAngle");var b=this.label;x=this.get("inc_x")*a;y=-this.get("inc_y")*a;b.push("originx",b.get("originx")+x);b.push("originy",b.get("originy")+y);b.push("labelx",b.get("labelx")+x);b.push("labely",b.get("labely")+y);var d=[];b.get("line_potins").each(function(a,b){d.push(0==b%2?a+x:a+y)},b);b.push("line_potins",d)},doConfig:function(){b.Sector.superclass.doConfig.call(this);var a=this._(),c=a.variable.event;a.push("totalAngle",a.get("endAngle")-a.get("startAngle"));a.get("label.enable")&&(a.pushIf("label.border.color",a.get("border.color")),a.push("label.scolor",a.get("f_color")));a.variable.event.status=a.expanded=a.get("expand");a.get("tip.enable")&&("follow"!=a.get("tip.showType")&&a.push("tip.invokeOffsetDynamic",!1),a.tip=new b.Tip(a.get("tip"),a));c.poped=!1;a.on(a.get("bound_event"),function(a){c.poped=true;a.expanded=!a.expanded;a.redraw();c.poped=false});a.on("mouseover",function(){c.highlight=true;a.redraw();c.highlight=false}).on("mouseout",function(){c.highlight=false;a.redraw()});a.on("beforedraw",function(){a.push("f_color",c.highlight?a.get("light_color"):a.get("f_color_"));a.x=a.get("originx");a.y=a.get("originy");if(c.status!=a.expanded){a.fireEvent(a,"changed",[a,a.expanded]);a.get("label.enable")&&a.labelInvoke(a.expanded?1:-1)}if(c.status=a.expanded)if(a.get("mutex")&&!c.poped)a.expanded=false;else{a.x=a.x+a.get("inc_x");a.y=a.y-a.get("inc_y")}return true})}});b.Sector2D=b.extend(b.Sector,{configure:function(){b.Sector2D.superclass.configure.apply(this,arguments);this.type="sector2d";this.set({radius:0})},drawSector:function(){this.T.sector(this.x,this.y,this.r,this.get("donutwidth"),this.get("startAngle"),this.get("endAngle"),this.get("f_color"),this.get("border.enable"),this.get("border.width"),this.get("border.color"),this.get("shadow"),this.get("counterclockwise"))},isEventValid:function(a){if(this.label&&this.label.isEventValid(a).valid)return{valid:!0};var c=b.distanceP2P(this.x,this.y,a.x,a.y),d=this.get("donutwidth");return this.r<c||d&&this.r-d>c?{valid:!1}:b.angleInRange(this.get("startAngle"),this.get("endAngle"),2*Math.PI-b.atan2Radian(this.x,this.y,a.x,a.y))?{valid:!0}:{valid:!1}},tipInvoke:function(){return function(a,c){var d=b.p2Point(this.x,this.y,this.get("middleAngle"),0.8*this.r),e=b.quadrantd(this.get("middleAngle"));return{left:2<=e&&3>=e?d.x-a:d.x,top:3<=e?d.y-c:d.y}}},doConfig:function(){b.Sector2D.superclass.doConfig.call(this);var a=this._();a.r=a.get("radius");b.Assert.gtZero(a.r);a.get("donutwidth")>a.r&&a.push("donutwidth",0);a.applyGradient(a.x-a.r,a.y-a.r,2*a.r,2*a.r);a.pushIf("increment",b.lowTo(5,a.r/10));var c=a.get("middleAngle"),d=a.get("increment");a.push("inc_x",d*Math.cos(2*Math.PI-c));a.push("inc_y",d*Math.sin(2*Math.PI-c));a.get("label.enable")&&(a.pushIf("label.linelength",b.lowTo(10,a.r/8)),Q=b.quadrantd(c),P2=b.p2Point(a.x,a.y,c,a.get("donutwidth")?a.r-a.get("donutwidth")/2:a.r/2),a.push("label.originx",P2.x),a.push("label.originy",P2.y),a.push("label.quadrantd",Q),c=b.p2Point(a.x,a.y,c,a.r+a.get("label.linelength")),a.push("label.line_potins",[P2.x,P2.y,c.x,c.y]),a.push("label.labelx",c.x),a.push("label.labely",c.y),a.label=new b.Label(a.get("label"),a))}});b.Sector3D=b.extend(b.Sector,{configure:function(){b.Sector3D.superclass.configure.apply(this,arguments);this.type="sector3d";this.dimension=b._3D;this.set({semi_major_axis:0,semi_minor_axis:0,cylinder_height:0})},drawSector:function(){this.T.sector3D(this.x,this.y,this.a,this.b,this.get("startAngle"),this.get("endAngle"),this.h,this.get("f_color"),this.get("border.enable"),this.get("border.width"),this.get("border.color"),this.get("shadow"),this.get("shadow_color"),this.get("shadow_blur"),this.get("shadow_offsetx"),this.get("shadow_offsety"),this.get("counterclockwise"))},isEventValid:function(a){return this.get("label.enable")&&this.label.isEventValid(a).valid?{valid:!0}:!b.inEllipse(a.x-this.x,a.y-this.y,this.a,this.b)?{valid:!1}:b.angleInRange(this.sA,this.eA,2*Math.PI-b.atan2Radian(this.x,this.y,a.x,a.y))?{valid:!0}:{valid:!1}},p2p:function(a,b,d,e){return{x:a+this.a*Math.cos(d)*e,y:b+this.b*Math.sin(d)*e}},tipInvoke:function(){var a=this,c=a.get("middleAngle"),d=b.quadrantd(c);return function(b,f){var g=a.p2p(a.x,a.y,c,0.6);return{left:2<=d&&3>=d?g.x-b:g.x,top:3<=d?g.y-f:g.y}}},doConfig:function(){b.Sector3D.superclass.doConfig.call(this);var a=this._(),c=a.get("counterclockwise"),d=a.get("middleAngle");a.a=a.get("semi_major_axis");a.b=a.get("semi_minor_axis");a.h=a.get("cylinder_height");b.Assert.gtZero(a.a);b.Assert.gtZero(a.b);a.pushIf("increment",b.lowTo(5,a.a/8));var e=function(d){d=b.atan2Radian(0,0,a.a*Math.cos(d),c?-a.b*Math.sin(d):a.b*Math.sin(d));!c&&0!=d&&(d=2*Math.PI-d);return d},f=a.get("increment");a.sA=e.call(a,a.get("startAngle"));a.eA=e.call(a,a.get("endAngle"));a.mA=e.call(a,d);a.push("inc_x",f*Math.cos(2*Math.PI-a.mA));a.push("inc_y",f*Math.sin(2*Math.PI-a.mA));if(a.get("label.enable")){a.pushIf("label.linelength",b.lowTo(10,a.a/8));a.Z=a.get("label.linelength")/a.a+1;var e=b.quadrantd(d),f=a.p2p(a.x,a.y,d,a.Z),g=a.p2p(a.x,a.y,d,1);a.push("label.originx",g.x);a.push("label.originy",g.y);a.push("label.quadrantd",e);a.push("label.line_potins",[g.x,g.y,f.x,f.y]);a.push("label.line_globalComposite",c&&d<Math.PI||!c&&d>Math.PI);a.push("label.labelx",f.x);a.push("label.labely",f.y);a.label=new b.Label(a.get("label"),a)}}});b.Pie=b.extend(b.Chart,{configure:function(){b.Pie.superclass.configure.call(this);this.type="pie";this.dataType="simple";this.set({radius:0,offsetAngle:0,bound_event:"click",counterclockwise:!1,intellectLayout:!0,layout_distance:8,pop_animate:!1,mutex:!1,increment:void 0,label:{enable:!0},sector:{}});this.registerEvent("bound","rebound","parseLabelText");this.sectors=[]},toggle:function(a){this.data[a||0].reference.toggle()},bound:function(a){this.data[a||0].reference.bound()},rebound:function(a){this.data[a||0].reference.rebound()},getSectors:function(){return this.sectors},doAnimation:function(a,b){var d,e=0,f=this.oA;this.data.each(function(g){d=g.reference;e=this.animationArithmetic(a,0,d.get("totalAngle"),b);d.push("startAngle",f);d.push("endAngle",f+e);f+=e;this.is3D()||d.drawSector()},this);this.is3D()&&this.proxy.drawSector()},localizer:function(a){var b=this.get("layout_distance");this.sectors.each(function(d){var d=d.label,e=d.labelx,f=d.labely;if(a.labely<=f&&f-a.labely<a.get("height")||a.labely>f&&a.labely-f<d.get("height"))if(a.labelx<e&&e-a.labelx<a.get("width")||a.labelx>e&&a.labelx-e<d.get("width"))e=a.get("quadrantd"),1==e||2==e?a.push("labely",a.get("labely")-a.get("height")+f-a.labely-b):a.push("labely",a.get("labely")+d.get("height")-a.labely+f+b),a.push("line_potins",a.get("line_potins").concat(a.get("labelx"),a.get("labely"))),a.localizer()},this)},doParse:function(a,c){var d=this,e=a.name+(d.get("showpercent")?" "+b.toPercent(a.value/d.total,d.get("decimalsnum")):a.value);d.get("label.enable")&&d.push("sector.label.text",d.fireString(d,"parseLabelText",[a,c],e));d.get("tip.enable")&&d.push("sector.tip.text",d.fireString(d,"parseTipText",[a,c],e));d.push("sector.id",c);d.push("sector.value",a.value);d.push("sector.name",a.name);d.push("sector.listeners.changed",function(a,b){d.fireEvent(d,b?"bound":"rebound",[d,a.get("name")])});d.push("sector.startAngle",a.startAngle);d.push("sector.middleAngle",a.middleAngle);d.push("sector.endAngle",a.endAngle);d.push("sector.background_color",a.color);a.reference=this.doSector(a);this.sectors.push(a.reference);this.get("label.enable")&&this.get("intellectLayout")&&this.localizer(a.reference.label)},doConfig:function(){b.Pie.superclass.doConfig.call(this);b.Assert.gtZero(this.total,"this.total");var a=this._(),c=a.get("radius"),d=a.get("label.enable")?0.35:0.44;a.sectors.zIndex=a.get("z_index");a.oA=b.angle2Radian(a.get("offsetAngle"));a.is3D()&&(d+=0.06);var d=a.get("minDistance")*d,e=a.oA,f=e,g=a.data.length;a.data.each(function(b,c){e+=2*b.value/a.total*Math.PI;c==g-1&&(e=2*Math.PI+a.oA);b.startAngle=f;b.endAngle=e;b.totalAngle=e-f;b.middleAngle=(f+e)/2;f=e},a);if(0>=c||c>d)c=a.push("radius",Math.floor(d));a.r=c;"left"==a.get("align")?a.push("originx",c+a.get("l_originx")+a.get("offsetx")):"right"==a.get("align")?a.push("originx",a.get("r_originx")-c+a.get("offsetx")):a.push("originx",a.get("centerx")+a.get("offsetx"));a.push("originy",a.get("centery")+a.get("offsety"));b.apply(a.get("sector"),b.clone(a.get("communal_option").concat("originx,originy,bound_event,customize_layout,counterclockwise,mutex,increment,label".split(",")),a.options))}});b.Pie2D=b.extend(b.Pie,{configure:function(){b.Pie2D.superclass.configure.call(this);this.type="pie2d"},doSector:function(){return new b.Sector2D(this.get("sector"),this)},doConfig:function(){b.Pie2D.superclass.doConfig.call(this);this.push("sector.radius",this.r);this.data.each(function(a,b){this.doParse(a,b)},this);this.components.push(this.sectors)}});b.Pie3D=b.extend(b.Pie,{configure:function(){b.Pie3D.superclass.configure.apply(this,arguments);this.type="pie3d";this.dimension=b._3D;this.set({zRotate:45,yHeight:30})},doSector:function(a){this.push("sector.cylinder_height",a.height?a.height*Math.cos(b.angle2Radian(this.get("zRotate"))):this.get("cylinder_height"));a=new b.Sector3D(this.get("sector"),this);a.proxy=!0;return a},doConfig:function(){b.Pie3D.superclass.doConfig.call(this);var a=this,c=a.get("zRotate");a.push("zRotate",b.between(0,90,90-c));a.push("cylinder_height",a.get("yHeight")*Math.cos(b.angle2Radian(c)));a.push("sector.semi_major_axis",a.r);a.push("sector.semi_minor_axis",a.r*c/90);a.push("sector.semi_major_axis",a.r);a.push("sector.originy",a.get("originy")-a.get("yHeight")/2);a.data.each(function(b,c){a.doParse(b,c)},a);var d=[],e=[],f=Math.PI,g=2*f,j=f/2,l=1.5*f,n=a.get("counterclockwise"),k=function(a,b){a=Math.abs(a-b);return a>f?g-a:a};a.proxy=new b.Custom({z_index:a.get("z_index")+1,drawFn:function(){this.drawSector();a.get("label.enable")&&(e=[],a.sectors.each(function(a){a.expanded?e.push(a.label):a.label.draw()}),e.each(function(a){a.draw()}))}});a.proxy.drawSector=function(){a.sectors.each(function(b){a.T.ellipse(b.x,b.y+b.h,b.a,b.b,b.get("startAngle"),b.get("endAngle"),b.get("f_color"),b.get("border.enable"),b.get("border.width"),b.get("border.color"),b.get("shadow"),n,!0)},a);d=[];var c,e;a.sectors.each(function(a){a.sPaint=!1;c=a.get("startAngle");e=a.get("endAngle");fc=b.dark(a.get("background_color"));(n?c<j||c>l:c>j&&c<l)&&d.push({g:c,x:a.x,y:a.y,a:a.a,b:a.b,color:fc,h:a.h,F:a});(n?e>j&&e<l:e<j||e>l)&&d.push({g:e,x:a.x,y:a.y,a:a.a,b:a.b,color:fc,h:a.h,F:a})},a);d.sor(function(a,b){return 0<k(a.g,l)-k(b.g,l)});d.each(function(b){a.T.sector3D.layerDraw.call(a.T,b.x,b.y,b.a+0.5,b.b+0.5,n,b.h,b.g,b.color);b.F.sPaint||(a.T.sector3D.sPaint.call(a.T,b.F.x,b.F.y,b.F.a,b.F.b,b.F.get("startAngle"),b.F.get("endAngle"),!1,b.F.h,b.color),b.F.sPaint=!0)},a);a.sectors.each(function(b){b.sPaint||a.T.sector3D.sPaint.call(a.T,b.x,b.y,b.a,b.b,b.get("startAngle"),b.get("endAngle"),!1,b.h,b.get("f_color"))},a);a.sectors.each(function(b){a.T.ellipse(b.x,b.y,b.a,b.b,b.get("startAngle"),b.get("endAngle"),b.get("f_color"),b.get("border.enable"),b.get("border.width"),b.get("border.color"),!1,!1,!0)},a)};a.components.push(a.sectors);a.components.push(a.proxy)}});b.Donut2D=b.extend(b.Pie,{configure:function(){b.Donut2D.superclass.configure.call(this);this.type="pie2d";this.set({donutwidth:0.3})},doSector:function(){return new b.Sector2D(this.get("sector"),this)},doConfig:function(){b.Donut2D.superclass.doConfig.call(this);var a=this._(),c=a.r;a.push("sector.radius",c);0<a.get("donutwidth")&&(1>a.get("donutwidth")?a.push("donutwidth",Math.floor(c*a.get("donutwidth"))):a.get("donutwidth")>=c&&a.push("donutwidth",0),a.push("sector.donutwidth",a.get("donutwidth")));a.data.each(function(b,c){a.doParse(b,c)},a);a.components.push(a.sectors)}});b.Column=b.extend(b.Chart,{configure:function(){b.Column.superclass.configure.call(this);this.type="column";this.dataType="simple";this.set({coordinate:{},colwidth:void 0,text_space:6,scaleAlign:"left",rectangle:{}});this.registerEvent();this.rectangles=[];this.labels=[];this.labels.ignore=!0},doAnimation:function(a,b){var d=this._(),e;d.coo.draw();d.labels.each(function(a){a.draw()});d.rectangles.each(function(f){e=Math.ceil(d.animationArithmetic(a,0,f.height,b));f.push("originy",f.y+(f.height-e));f.push("height",e);f.drawRectangle()})},getCoordinate:function(){return this.coo},doParse:function(a,c,d,e,f,g,j){var l=a.get("showpercent")?b.toPercent(c.value/a.total,a.get("decimalsnum")):c.value;a.get("tip.enable")&&a.push("rectangle.tip.text",a.fireString(a,"parseTipText",[c,c.value,d],c.name+" "+l));a.set({rectangle:{id:e,name:c.name,value:l,background_color:c.color,originx:f,originy:g,height:j}})},doConfig:function(){b.Column.superclass.doConfig.call(this);var a=this._();b.Coordinate.coordinate.call(a);a.rectangles.zIndex=a.get("z_index");a.labels.zIndex=a.get("z_index")+1;if("simple"==a.dataType){var c=a.data.length,d=a.get("coordinate.width"),e=a.pushIf("colwidth",d/(2*c+1));e*c>d&&(e=a.push("colwidth",d/(2*c+1)));a.push("hispace",(d-e*c)/(c+1))}a.is3D()&&a.push("zHeight",a.get("colwidth")*a.get("zScale"));a.coo=b.Coordinate.coordinate_.call(a);a.components.push(a.coo);b.applyIf(a.get("rectangle"),b.clone(a.get("communal_option"),a.options));a.push("rectangle.width",a.get("colwidth"))}});b.Column2D=b.extend(b.Column,{configure:function(){b.Column2D.superclass.configure.call(this);this.type="column2d"},doConfig:function(){b.Column2D.superclass.doConfig.call(this);var a=this._(),c=a.coo.getScale(a.get("scaleAlign")),d=a.coo.get("brushsize"),e=a.coo.get("height"),f=a.get("colwidth")/2,g=a.get("colwidth")+a.get("hispace"),j;a.data.each(function(l,n){j=(l.value-c.start)*e/c.distance;a.doParse(a,l,n,n,a.x+a.get("hispace")+n*g,a.y+e-j-d,j);l.reference=new b.Rectangle2D(a.get("rectangle"),a);a.rectangles.push(l.reference);a.labels.push(new b.Text({id:n,text:l.name,originx:a.x+a.get("hispace")+g*n+f,originy:a.y+e+a.get("text_space")},a))},a);a.components.push(a.labels);a.components.push(a.rectangles)}});b.Column3D=b.extend(b.Column,{configure:function(){b.Column3D.superclass.configure.call(this);this.type="column3d";this.dimension=b._3D;this.set({xAngle:60,yAngle:20,zScale:1,bottom_scale:1.4})},doConfig:function(){b.Column3D.superclass.doConfig.call(this);var a=this._(),c=a.coo.getScale(a.get("scaleAlign")),d=a.get("zHeight")*(a.get("bottom_scale")-1)/2*a.get("yAngle_"),e=a.get("colwidth")/2,f=a.get("colwidth")+a.get("hispace"),g=a.coo.get("height"),j;a.push("rectangle.xAngle_",a.get("xAngle_"));a.push("rectangle.yAngle_",a.get("yAngle_"));a.data.each(function(l,n){j=(l.value-c.start)*g/c.distance;a.doParse(a,l,n,n,a.x+a.get("hispace")+n*f,a.y+(g-j)-d,j);l.reference=new b.Rectangle3D(a.get("rectangle"),a);a.rectangles.push(l.reference);a.labels.push(new b.Text({id:n,text:l.name,originx:a.x+a.get("hispace")+f*n+e,originy:a.y+g+a.get("text_space")},a))},a);a.components.push(a.labels);a.components.push(a.rectangles)}});b.ColumnMulti2D=b.extend(b.Column,{configure:function(){b.ColumnMulti2D.superclass.configure.call(this);this.type="columnmulti2d";this.dataType="complex";this.columns=[]},doRectangle:function(a,c,d,e,f,g){this.doParse(a,c,d,e,f,g);a.reference=new b.Rectangle2D(this.get("rectangle"),this);this.rectangles.push(a.reference)},doConfig:function(){b.ColumnMulti2D.superclass.doConfig.call(this);var a=this._(),c=a.data.length,d=a.data_labels.length,e=a.get("coordinate.width"),f=a.get("coordinate.height"),c=d*c,g=a.pushIf("colwidth",e/(d+1+c));g*c>e&&(g=a.push("colwidth",e/(d+1+c)));a.push("hispace",(e-g*c)/(d+1));var j=a.coo.getScale(a.get("scaleAlign")),l=a.coo.get("brushsize"),n=a.data.length*g+a.get("hispace"),k;a.push("rectangle.width",g);a.columns.each(function(c,d){c.item.each(function(c,e){k=(c.value-j.start)*f/j.distance;a.doParse(a,c,e,d+"-"+e,a.x+a.get("hispace")+e*g+d*n,a.y+f-k-l,k);c.reference=new b.Rectangle2D(a.get("rectangle"),this);a.rectangles.push(c.reference)},a);a.labels.push(new b.Text({id:d,text:c.name,originx:a.x+0.5*a.get("hispace")+(d+0.5)*n,originy:a.get("originy")+f+a.get("text_space")},a))},a);a.components.push(a.labels);a.components.push(a.rectangles)}});b.Bar=b.extend(b.Chart,{configure:function(){b.Bar.superclass.configure.call(this);this.type="bar";this.dataType="simple";this.set({coordinate:{alternate_direction:"h"},barheight:void 0,text_space:6,scaleAlign:"bottom",rectangle:{}});this.registerEvent();this.rectangles=[];this.labels=[]},doParse:function(a,c,d,e,f,g,j){f=a.get("showpercent")?b.toPercent(c.value/a.total,a.get("decimalsnum")):c.value;a.get("tip.enable")&&a.push("rectangle.tip.text",a.fireString(a,"parseTipText",[c,c.value,d],c.name+" "+f));a.set({rectangle:{id:e,name:c.name,value:f,background_color:c.color,originy:g,width:j}})},doAnimation:function(a,b){this.coo.draw();this.labels.each(function(a){a.draw()},this);this.rectangles.each(function(d){d.push("width",Math.ceil(this.animationArithmetic(a,0,d.width,b)));d.drawRectangle()},this)},doConfig:function(){b.Bar.superclass.doConfig.call(this);var a=this._();b.Coordinate.coordinate.call(a);a.rectangles.zIndex=a.get("z_index");a.labels.zIndex=a.get("z_index")+1;if("simple"==a.dataType){var c=a.data.length,d=a.get("coordinate.height"),e=a.pushIf("barheight",d/(2*c+1));e*c>d&&(e=a.push("barheight",d/(2*c+1)));a.push("barspace",(d-e*c)/(c+1))}a.is3D();a.coo=b.Coordinate.coordinate_.call(a);a.components.push(a.coo);b.applyIf(a.get("rectangle"),b.clone(a.get("communal_option"),a.options));a.push("rectangle.height",e);a.push("rectangle.valueAlign","right");a.push("rectangle.tipAlign","right");a.push("rectangle.originx",a.x+a.coo.get("brushsize"))}});b.Bar2D=b.extend(b.Bar,{configure:function(){b.Bar2D.superclass.configure.call(this);this.type="bar2d"},doConfig:function(){b.Bar2D.superclass.doConfig.call(this);var a=this._(),c=a.coo.getScale(a.get("scaleAlign")),d=a.coo.get("width"),e=a.get("barheight")/2,f=a.get("barheight")+a.get("barspace");a.data.each(function(g,j){a.doParse(a,g,j,j,0,a.y+a.get("barspace")+j*f,(g.value-c.start)*d/c.distance);g.reference=new b.Rectangle2D(a.get("rectangle"),a);a.rectangles.push(g.reference);a.labels.push(new b.Text({id:j,textAlign:"right",textBaseline:"middle",text:g.name,originx:a.x-a.get("text_space"),originy:a.y+a.get("barspace")+j*f+e},a))},a);a.components.push(a.labels);a.components.push(a.rectangles)}});b.BarMulti2D=b.extend(b.Bar,{configure:function(){b.BarMulti2D.superclass.configure.call(this);this.type="barmulti2d";this.dataType="complex";this.columns=[]},doConfig:function(){b.BarMulti2D.superclass.doConfig.call(this);var a=this._(),c=a.data.length,d=a.data_labels.length,e=a.coo.get("width"),f=a.coo.get("height"),g=d*c,j=a.pushIf("barheight",f/(d+1+g));j*c>f&&(j=a.push("barheight",f/(d+1+g)));a.push("barspace",(f-j*g)/(d+1));var l=a.coo.getScale(a.get("scaleAlign")),n=c*j+a.get("barspace");a.get("barheight");var k;a.push("rectangle.height",j);a.columns.each(function(c,d){c.item.each(function(c,f){k=(c.value-l.start)*e/l.distance;a.doParse(a,c,f,d+"-"+f,a.x+a.get("hispace")+f*j+d*n,a.y+a.get("barspace")+f*j+d*n,k);c.reference=new b.Rectangle2D(a.get("rectangle"),a);a.rectangles.push(c.reference)},a);a.labels.push(new b.Text({id:d,text:c.name,textAlign:"right",textBaseline:"middle",originx:a.x-a.get("text_space"),originy:a.y+0.5*a.get("barspace")+(d+0.5)*n},a))},a);a.components.push(a.labels);a.components.push(a.rectangles)}});b.LineSegment=b.extend(b.Component,{configure:function(){b.LineSegment.superclass.configure.apply(this,arguments);this.type="linesegment";this.set({intersection:!0,label:!1,sign:"round",hollow:!0,hollow_color:"#FEFEFE",smooth:!1,smoothing:1.5,point_size:6,points:[],keep_with_coordinate:!1,shadow_blur:1,shadow_offsety:1,point_space:0,coordinate:null,event_range_x:0,limit_y:!1,tip_offset:2,event_range_y:0});this.tip=this.label=null;this.ignored_=!1},drawSegment:function(){var a=this._(),b=a.get("points"),d=a.get("f_color"),e=a.get("brushsize");a.T.shadowOn(a.get("shadow"));if(a.get("area")){var f=[a.x,a.y];b.each(function(a){f.push(a.x);f.push(a.y)});f.push(a.x+a.get("width"));f.push(a.y);a.T.polygon(a.get("light_color2"),!1,1,"",!1,a.get("area_opacity"),f)}a.T[a.ignored_?"manyLine":"lineArray"](b,e,d,a.get("smooth"),a.get("smoothing"));if(a.get("intersection")){var g=a.getPlugin("sign"),j=a.get("point_size");a.get("hollow_color");b.each(function(b){if(!b.ignored&&(!g||!g.call(a,a.T,a.get("sign"),b.x,b.y,j,d)))a.get("hollow")?a.T.round(b.x,b.y,3*j/8,a.get("hollow_color"),j/4,d):a.T.round(b.x,b.y,j/2,d)},a)}a.get("shadow")&&a.T.shadowOff()},doDraw:function(){this.drawSegment();this.get("intersection")&&this.get("label")&&this.get("points").each(function(a){a.ignored||this.T.text(a.value,a.x,a.y-3*this.get("point_size")/2,!1,this.get("f_color"),"center","bottom",this.get("fontStyle"))},this)},isEventValid:function(){return{valid:!1}},tipInvoke:function(){var a=this.x,b=this.get("tip_offset"),d=this.get("point_size")+b,e=this;return function(f,g,j){var l=j.left,n=j.top,l=3>e.tipPosition&&0<j.left-f-a-b||2<e.tipPosition&&0>j.left-f-a-b?l-(f+b):l+b,n=0==e.tipPosition%2?j.top+d:j.top-g-d;return{left:l,top:n}}},doConfig:function(){b.LineSegment.superclass.doConfig.call(this);b.Assert.gtZero(this.get("point_space"),"point_space");for(var a=this,c=this.get("point_space"),d=a.get("event_range_y"),e=a.get("event_range_x"),f=a.get("tipInvokeHeap"),g=a.get("points"),j=0;j<g.length;j++)g[j].x_=g[j].x,g[j].y_=g[j].y,g[j].ignored&&(this.ignored_=!0);e=0==e?a.push("event_range_x",Math.floor(c/2)):a.push("event_range_x",b.between(1,Math.floor(c/2),e));0==d&&(d=a.push("event_range_y",Math.floor(a.get("point_size")/2)));a.get("tip.enable")&&(a.on("mouseover",function(){f.push(a);a.tipPosition=f.length}).on("mouseout",function(){f.pop()}),a.push("tip.invokeOffsetDynamic",!0),a.tip=new b.Tip(a.get("tip"),a));var l=a.get("coordinate"),n=a.get("limit_y"),k=a.get("keep_with_coordinate"),s=function(a,b,c){return!a.ignored&&Math.abs(b-a.x)<e&&(!n||n&&Math.abs(c-a.y)<d)?true:false},o=function(a){return{valid:true,text:g[a].text,value:g[a].value,top:g[a].y,left:g[a].x,i:a,hit:true}};a.isEventValid=function(d){if(l&&!l.isEventValid(d).valid)return{valid:false};var e=Math.floor((d.x-a.x)/c);if(e<0||e>=g.length-1){e=b.between(0,g.length-1,e);return s(g[e],d.x,d.y)?o(e):{valid:k}}for(var f=e;f<=e+1;f++)if(s(g[f],d.x,d.y))return o(f);return{valid:k}}}});b.Line=b.extend(b.Chart,{configure:function(){b.Line.superclass.configure.call(this);this.type="line";this.dataType="simple";this.set({coordinate:{axis:{width:[0,0,2,2]}},crosshair:{enable:!1},scaleAlign:"left",labelAlign:"bottom",data_labels:[],label_space:6,proportional_spacing:!0,label_spacing:0,segment:{},legend:{sign:"round-bar",sign_size:14}});this.registerEvent("parsePoint");this.lines=[]},getCoordinate:function(){return this.coo},doConfig:function(){b.Line.superclass.doConfig.call(this);var a=this._(),c=1==a.data.length;b.Coordinate.coordinate.call(a);a.lines.zIndex=a.get("z_index");a.push("line_start",(a.get("coordinate.width")-a.get("coordinate.valid_width"))/2);a.push("line_end",a.get("coordinate.width")-a.get("line_start"));a.get("proportional_spacing")&&a.push("label_spacing",a.get("coordinate.valid_width")/(a.get("maxItemSize")-1));a.push("segment.originx",a.get("originx")+a.get("line_start"));a.push("segment.originy",a.get("originy")+a.get("coordinate.height"));a.push("segment.width",a.get("coordinate.valid_width"));a.push("segment.height",a.get("coordinate.valid_height"));a.push("segment.limit_y",!c);a.pushIf("segment.keep_with_coordinate",c);a.get("crosshair.enable")&&(a.push("coordinate.crosshair",a.get("crosshair")),a.push("coordinate.crosshair.hcross",c),a.push("coordinate.crosshair.invokeOffset",function(b){b=a.lines[0].isEventValid(b);return b.valid?b:!1}));b.applyIf(a.get("segment"),b.clone(a.get("communal_option").concat("area_opacity"),a.options))}});b.LineBasic2D=b.extend(b.Line,{configure:function(){b.LineBasic2D.superclass.configure.call(this);this.type="basicline2d";this.tipInvokeHeap=[]},doAnimation:function(a,b){var d,e;this.coo.draw();for(var f=0;f<this.lines.length;f++){d=this.lines[f];e=d.get("points");for(var g=0;g<e.length;g++)e[g].y=d.y-Math.ceil(this.animationArithmetic(a,0,d.y-e[g].y_,b));d.drawSegment()}},doConfig:function(){b.LineBasic2D.superclass.doConfig.call(this);var a=this._();a.coo=new b.Coordinate2D(b.merge({scale:[{position:a.get("scaleAlign"),max_scale:a.get("maxValue")},{position:a.get("labelAlign"),scaleEnable:!1,start_scale:1,scale:1,end_scale:a.get("maxItemSize"),labels:a.get("data_labels")}]},a.get("coordinate")),a);a.components.push(a.coo);var c=a.coo.getScale(a.get("scaleAlign")),d=a.get("coordinate.valid_height"),e=a.get("label_spacing"),f,g,j,l=a.get("segment.originx"),n=a.get("segment.originy"),k;a.push("segment.tip.showType","follow");a.push("segment.coordinate",a.coo);a.push("segment.tipInvokeHeap",a.tipInvokeHeap);a.push("segment.point_space",e);a.data.each(function(s){f=[];s.value.each(function(o,m){g=e*m;j=(o-c.start)*d/c.distance;k={x:l+g,y:n-j,value:o,text:o};b.merge(k,a.fireEvent(a,"parsePoint",[s,o,g,j,m]));a.get("tip.enable")&&(k.text=a.fireString(a,"parseTipText",[s,o,m],o));f.push(k)},a);a.push("segment.points",f);a.push("segment.brushsize",s.linewidth||1);a.push("segment.background_color",s.color);a.lines.push(new b.LineSegment(a.get("segment"),a))},this);a.components.push(a.lines)}});b.Area2D=b.extend(b.LineBasic2D,{configure:function(){b.Area2D.superclass.configure.call(this);this.type="area2d";this.set({area_opacity:0.3})},doConfig:function(){this.push("segment.area",!0);b.Area2D.superclass.doConfig.call(this)}})})(iChart);