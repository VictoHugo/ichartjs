(function(a){a.undefined=a.undefined;var c=navigator.userAgent.toLowerCase(),b=function(a){return a.test(c)},d=Object.prototype.toString,e=document.documentMode,f=b(/opera/);f&&b(/version\/10\.5/);var g=b(/\bchrome\b/),j=b(/webkit/),l=!g&&b(/safari/),m=l&&b(/applewebkit\/4/),n=l&&b(/version\/3/),s=l&&b(/version\/4/),h=!f&&b(/msie/),k=h&&(b(/msie 8/)&&7!=e&&9!=e||8==e),u=h&&(b(/msie 9/)&&7!=e&&8!=e||9==e);h&&b(/msie 10/);var o=!!document.createElement("canvas").getContext,v=!j&&b(/gecko/),r=v&&b(/rv:1\.9/),
w=v&&b(/rv:2\.0/),C=r&&b(/rv:1\.9\.0/),A=r&&b(/rv:1\.9\.1/),B=r&&b(/rv:1\.9\.2/),D=w&&b(/rv:2\.0\.\d/),F=v&&b(/firefox/),E=b(/windows|win32/),H=b(/macintosh|mac os x/),I=b(/linux/),N={version:"0.9",email:"wanghetommy@163.com"},J={Linear:function(a,b,c,h){return c*a/h+b},Quad:{easeIn:function(a,b,c,h){return c*(a/=h)*a+b},easeOut:function(a,b,c,h){return-c*(a/=h)*(a-2)+b},easeInOut:function(a,b,c,h){return 1>(a/=h/2)?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b}},Cubic:{easeIn:function(a,b,c,h){return c*(a/=h)*
a*a+b},easeOut:function(a,b,c,h){return c*((a=a/h-1)*a*a+1)+b},easeInOut:function(a,b,c,h){return 1>(a/=h/2)?c/2*a*a*a+b:c/2*((a-=2)*a*a+2)+b}},Quart:{easeIn:function(a,b,c,h){return c*(a/=h)*a*a*a+b},easeOut:function(a,b,c,h){return-c*((a=a/h-1)*a*a*a-1)+b},easeInOut:function(a,b,c,h){return 1>(a/=h/2)?c/2*a*a*a*a+b:-c/2*((a-=2)*a*a*a-2)+b}},Bounce:{easeOut:function(a,b,c,h){return(a/=h)<1/2.75?c*7.5625*a*a+b:a<2/2.75?c*(7.5625*(a-=1.5/2.75)*a+0.75)+b:a<2.5/2.75?c*(7.5625*(a-=2.25/2.75)*a+0.9375)+
b:c*(7.5625*(a-=2.625/2.75)*a+0.984375)+b}}},L=function(a){var b=!1,c=!1,e=[],K=function(){if(document.addEventListener)return function(){document.removeEventListener("DOMContentLoaded",K,!1);G()};if(document.attachEvent)return function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",K),G())}}(),M=function(){if(!b){try{document.documentElement.doScroll("left")}catch(a){setTimeout(M,1);return}G()}},G=function(){if(!b){b=!0;for(var a=0;a<e.length;a++)e[a].call(document);
e=[]}},O=function(){if(!c){c=!0;if("complete"===document.readyState)return setTimeout(G,1);if(document.addEventListener)document.addEventListener("DOMContentLoaded",K,!1),a.addEventListener("load",G,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",K);a.attachEvent("onload",G);var b=!1;try{b=null==a.frameElement}catch(h){}document.documentElement.doScroll&&b&&M()}}},P=function(a){O();b?a.call(document,z):e.push(function(){return a.call(this)})},z=function(a){if(!a||a.nodeType)return a;
if("string"===typeof a)return-1!=a.indexOf("#")&&(a=a.substring(1)),document.getElementById(a);"function"===typeof a&&P(a)};z.apply=function(a,b){if(a&&b&&"object"==typeof b)for(var c in b)"undefined"!=typeof b[c]&&(a[c]=b[c]);if(!b&&a){var h={};for(c in a)h[c]=a[c];return h}return a};z.applyIf=function(a,b){if(a&&b&&"object"==typeof b)for(var c in b)"undefined"!=typeof b[c]&&"undefined"==typeof a[c]&&(a[c]=b[c]);return!b&&a?z.apply(a):a};z.merge=function(a,b,c){if(a&&b&&"object"==typeof b){for(var h in b)"undefined"!=
typeof b[h]&&("[object Object]"===d.apply(b[h])?"[object Object]"===d.apply(a[h])?z.merge(a[h],b[h]):a[h]=z.clone(b[h],!0):a[h]=b[h]);if("object"==typeof c)return z.merge(a,c)}return a};z.clone=function(a,b,c){var h={};if("[object Array]"===d.apply(a)&&"[object Object]"===d.apply(b))for(var g=0;g<a.length;g++)h[a[g]]=c&&"[object Object]"===d.apply(b[a[g]])?z.clone(b[a[g]]):b[a[g]];else if("[object Object]"===d.apply(a))for(g in a)h[g]=b&&"[object Object]"===d.apply(a[g])&&!(a[g]instanceof z.Painter)?
z.clone(a[g],b):a[g];return h};z.override=function(a,b){if(b){var c=a.prototype;z.apply(c,b);z.isIE&&b.hasOwnProperty("toString")&&(c.toString=b.toString)}};z.extend=function(){var a=function(a){for(var b in a)this[b]=a[b]},b=Object.prototype.constructor;return function(c,h){var g=function(){c.apply(this,arguments)},d=function(){},e=c.prototype;d.prototype=e;d=g.prototype=new d;d.constructor=g;g.superclass=e;e.constructor==b&&(e.constructor=c);g.override=function(a){z.override(g,a)};d.superclass=
d.supr=function(){return e};d.override=a;z.override(g,h);g.extend=function(a){return z.extend(g,a)};return g}}();z.apply(z,N);z.apply(z,{isEmpty:function(a,b){return null===a||void 0===a||z.isArray(a)&&!a.length||(!b?""===a:!1)},isArray:function(a){return"[object Array]"===d.apply(a)},isDate:function(a){return"[object Date]"===d.apply(a)},isObject:function(a){return!!a&&"[object Object]"===d.apply(a)},isFunction:function(a){return"[object Function]"===d.apply(a)},isNumber:function(a){return"number"===
typeof a&&isFinite(a)},isString:function(a){return"string"===typeof a},isBoolean:function(a){return"boolean"===typeof a},isFalse:function(a){return"boolean"===typeof a&&!a},isElement:function(a){return a?!!a.tagName:!1},isDefined:function(a){return"undefined"!==typeof a},getFont:function(a,b,c){return a+" "+b+"px "+c},getDoc:function(){return a.contentWindow?a.contentWindow.document:a.contentDocument?a.contentDocument:a.document},DefineAbstract:function(a,b){if(!b[a])throw Error("Cannot instantiate the type '"+
b.type+"'.you must implements it with method '"+a+"'.");},getAnimationArithmetic:function(a){return"linear"==a?J.Linear:"bounce"==a?J.Bounce.easeOut:"easeInOut"==a||"easeIn"==a||"easeOut"==a?J[z.DefaultAnimationArithmetic][a]:J.Linear},noConflict:function(){return L},emptyFn:function(){return!0},supportCanvas:o,isOpera:f,isWebKit:j,isChrome:g,isSafari:l,isSafari2:m,isSafari3:n,isSafari4:s,isIE:h,isIE8:k,isIE9:u,isGecko:v,isGecko3:r,isGecko4:w,isFF:F,isFF3_0:C,isFF3_5:A,isFF3_6:B,isFF4:D,isLinux:I,
isWindows:E,isMac:H,FRAME:20,INTERVAL:30,DefaultAnimationArithmetic:"Cubic"});return z}(a);L.Assert={gtZero:function(a,b){if(!Jidea.isNumber(a)&&0<=a)throw Error(b+" has required a type Number gt zero,but given:"+a);},gt:function(a,b,c){if(!Jidea.isNumber(a)&&a>=b)throw Error(c+" has required a type Number gt "+b+",but given:"+a);},isNumber:function(a,b){if(!Jidea.isNumber(a))throw Error(b+" has required a type Number,but given:"+a);},isNotEmpty:function(a,b){if(!a||""==a)throw Error("it has required not empty.cause:"+
b);if(Jidea.isArray(a)&&0==a.length)throw Error("Array has required must has one element at least.cause:"+b);},isArray:function(a,b){if(!Jidea.isArray(a))throw Error(b+" has required a type Array,but given:"+a);},isFunction:function(a,b){if(!Jidea.isFunction(a))throw Error(b+" has required a type Function,but given:"+a);},isTrue:function(a,b){if(!0!==a)throw Error(b);},equal:function(a,b,c){if(a!==b)throw Error(c);}};String.prototype.trim||(String.prototype.trim=function(){return(this||"").replace(/^\s+|\s+$/g,
"")});a.Jidea=a.$=L})(window);
(function(){Jidea.Event={addEvent:function(a,c,b,d){a.addEventListener?a.addEventListener(c,b,d):a.attachEvent?a.attachEvent("on"+c,b):a["on"+c]=b},fix:function(a){"undefined"==typeof a&&(a=window.event);a.target||(a.target=a.srcElement||document);!a.relatedTarget&&a.fromElement&&(a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement);if(null==a.pageX&&null!=a.clientX){var c=document.documentElement,b=document.body;a.pageX=a.clientX+(c&&c.scrollLeft||b&&b.scrollLeft||0)-(c&&c.clientLeft||
b&&b.clientLeft||0);a.pageY=a.clientY+(c&&c.scrollTop||b&&b.scrollTop||0)-(c&&c.clientTop||b&&b.clientTop||0)}if("undefined"==typeof a.offsetX&&"undefined"==typeof a.offsetY&&"number"!=typeof a.offsetX){for(var b=c=0,d=a.target;d!=document.body&&d;)c+=d.offsetLeft,b+=d.offsetTop,d=d.offsetParent;a.offsetX=a.pageX-c;a.offsetY=a.pageY-b}if(null==a.which&&(null!=a.charCode||null!=a.keyCode))a.which=null!=a.charCode?a.charCode:a.keyCode;!a.metaKey&&a.ctrlKey&&(a.metaKey=a.ctrlKey);!a.which&&void 0!==
a.button&&(a.which=a.button&1?1:a.button&2?3:a.button&4?2:0);a.stopPropagation||(a.stopPropagation=function(){window.event.cancelBubble=true});return a}}})();
(function(){var a=Math.sin,c=Math.cos,b=2*Math.PI,d=Math.ceil,e=function(a,b){if(Jidea.isNumber(a))return[a,a,a,a];a=a.trim().replace(/\s{2,}/g,/\s/).replace(/\s/g,",").split(",");1==a.length?a[0]=a[1]=a[2]=a[3]=parseFloat(a[0])||b:2==a.length?(a[0]=a[2]=parseFloat(a[0])||b,a[1]=a[3]=parseFloat(a[1])||b):3==a.length?(a[0]=parseFloat(a[0])||b,a[1]=a[3]=parseFloat(a[1])||b,a[2]=parseFloat(a[2])||b):(a[0]=parseFloat(a[0])||b,a[1]=parseFloat(a[1])||b,a[2]=parseFloat(a[2])||b,a[3]=parseFloat(a[3])||b);
return a},f=function(a){if(0==a)return a;for(var a=a/10,b=0;1>a;)a*=10,b++;for(;1<a/10;)a/=10,b--;for(a=Math.floor(a);0<b;)a/=10,b--;for(;0>b;)a*=10,b++;return a},g="navy,olive,silver,gold,lime,fuchsia,aqua,green,red,blue,pink,purple,yellow,maroon,black,gray,white".split(","),j={aqua:"rgb(0,255,255)",azure:"rgb(240,255,255)",beige:"rgb(245,245,220)",black:"rgb(0,0,0)",blue:"rgb(0,0,255)",brown:"rgb(165,42,42)",cyan:"rgb(0,255,255)",darkblue:"rgb(0,0,139)",darkcyan:"rgb(0,139,139)",darkgrey:"rgb(169,169,169)",
darkgreen:"rgb(0,100,0)",darkkhaki:"rgb(189,183,107)",darkmagenta:"rgb(139,0,139)",darkolivegreen:"rgb(85,107,47)",darkorange:"rgb(255,140,0)",darkorchid:"rgb(153,50,204)",darkred:"rgb(139,0,0)",darksalmon:"rgb(233,150,122)",darkviolet:"rgb(148,0,211)",fuchsia:"rgb(255,0,255)",gold:"rgb(255,215,0)",green:"rgb(0,128,0)",indigo:"rgb(75,0,130)",khaki:"rgb(240,230,140)",lightblue:"rgb(173,216,230)",lightcyan:"rgb(224,255,255)",lightgreen:"rgb(144,238,144)",lightgrey:"rgb(211,211,211)",lightpink:"rgb(255,182,193)",
lightyellow:"rgb(255,255,224)",lime:"rgb(0,255,0)",magenta:"rgb(255,0,255)",maroon:"rgb(128,0,0)",navy:"rgb(0,0,128)",olive:"rgb(128,128,0)",orange:"rgb(255,165,0)",pink:"rgb(255,192,203)",purple:"rgb(128,0,128)",violet:"rgb(128,0,128)",red:"rgb(255,0,0)",silver:"rgb(192,192,192)",white:"rgb(255,255,255)",yellow:"rgb(255,255,0)",transparent:"rgb(255,255,255)"},l=Math.round,m=Math.floor,n=function(a,b){b=b||0.14;return 0.5<a?b-(1-a)/10:0.1<a?b-0.16+a/5:a>b?b:a/2},s=function(a,b,c,g){var b=Jidea.Math.cToArray(Jidea.Math.toRgb(b)),
d=Jidea.Math.toHsv(b);d[1]-=g||0;a?(d[2]-=n(d[2],c),d[1]=Jidea.Math.upTo(d[1],1),d[2]=Jidea.Math.lowTo(d[2],0)):(d[2]+=n(1-d[2],c),d[1]=Jidea.Math.lowTo(d[1],0),d[2]=Jidea.Math.upTo(d[2],1));return Jidea.Math.hsvToRgb(d,b[3])};Jidea.Math={parseBorder:function(a,b){return e(a,b)},parsePadding:function(a,b){return e(a,b)},distanceP2P:function(a,b,c,g){return Math.sqrt((c-a)*(c-a)+(g-b)*(g-b))},atanToAngle:function(a,b,c,g){if(a==c)return g>b?90:270;var d=Jidea.Math.quadrant(a,b,c,g),a=Jidea.Math.radianToAngle(Math.atan(Math.abs((b-
g)/(a-c))));1==d?a=180-a:2==d?a=180+a:3==d&&(a=360-a);return a},atanToRadian:function(a,b,c,g){if(a==c)return g>b?Math.PI/2:3*Math.PI/2;var d=Jidea.Math.quadrant(a,b,c,g),a=Math.atan(Math.abs((b-g)/(a-c)));1==d?a=Math.PI-a:2==d?a=Math.PI+a:3==d&&(a=2*Math.PI-a);return a},angleToRadian:function(a){return a*Math.PI/180},radianToAngle:function(a){return 180*a/Math.PI},quadrant:function(a,b,c,g){return a<c?b<g?3:0:b<g?2:1},quadrantd:function(a){a=2*(a%(2*Math.PI));return d(a/Math.PI)},upTo:function(a,
b){return b>a?a:b},lowTo:function(a,b){return b<a?a:b},between:function(a,b,c){return Jidea.Math.lowTo(a,Jidea.Math.upTo(b,c))},inRange:function(a,b,c){return b>c&&a<c},angleInRange:function(a,c,g){a%=b;c%=b;return c>a?c>g&&a<g:c<a?g<c||g>a:g==c},inRangeClosed:function(a,b,c){return b>=c&&a<=c},inEllipse:function(a,b,c,g){return 1>=a*a/c/c+b*b/g/g},pToPoint:function(b,g,d,e){return{x:b+c(d)*e,y:g+a(d)*e}},vectorP2P:function(a,b,c){c||(b=Jidea.Math.angleToRadian(b),a=Jidea.Math.angleToRadian(a));b=
Math.sin(b);return{x:b*Math.sin(a),y:b*Math.cos(a)}},fixDeckle:function(a,b){return 1>=a?Math.floor(b)+0.5:Math.floor(b)},iGather:function(a){return(a||"magic")+"-"+(new Date).getTime().toString()},toPercent:function(a,b){return"("+(100*a).toFixed(b)+"%)"},parseFloat:function(a,b){if(!Jidea.isNumber(a)&&(a=parseFloat(a),!Jidea.isNumber(a)))throw Error("'"+b+"'is not a valid number.");return a},ceil:function(a){return a+f(a)},floor:function(a){return a-f(a)},get:function(a){return g[a%16]},_2D:"2d",
_3D:"3d",toRgb:function(a){a=a.replace(/\s/g,"").toLowerCase();if(/rgb\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3}\)/.exec(a)||/rgba\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3},(0(\.[0-9])?|1(\.0)?)\)/.exec(a))return a;if(/#(([a-fA-F0-9]{6})|([a-fA-F0-9]{3}))/.exec(a))return a=a.replace(/#/g,"").replace(/^(\w)(\w)(\w)$/,"$1$1$2$2$3$3"),"rgb("+parseInt(a.substring(0,2),16)+","+parseInt(a.substring(2,4),16)+","+parseInt(a.substring(4,6),16)+")";if(j[a])return j[a];throw Error("invalid colors value '"+a+"'");},light:function(a,
b,c){return s(!1,a,b,c)},dark:function(a,b,c){return s(!0,a,b,c)},cToArray:function(a){var b=/rgb\((\w*),(\w*),(\w*)\)/.exec(a);if(b)return[b[1],b[2],b[3]];if(b=/rgba\((\w*),(\w*),(\w*),(.*)\)/.exec(a))return[b[1],b[2],b[3],b[4]];throw Error("invalid colors value '"+a+"'");},toHsv:function(a,b,c){Jidea.isArray(a)&&(b=a[1],c=a[2],a=a[0]);var a=a/255,b=b/255,c=c/255,g=Math.max(Math.max(a,b),c),d=Math.min(Math.min(a,b),c),d=g-d;if(0==d)return[0,0,g];var e;a==g?e=(b-c)/d:b==g?e=(c-a)/d+2:c==g&&(e=(a-
b)/d+4);e*=60;0>e&&(e+=360);return[e,d/g,g]},hsvToRgb:function(a,b,c,g){Jidea.isArray(a)&&(g=b,b=a[1],c=a[2],a=a[0]);var d,e,j,f;f=m(a/60)%6;a=a/60-f;p=c*(1-b);q=c*(1-b*a);t=c*(1-b*(1-a));switch(f){case 0:d=c;e=t;j=p;break;case 1:d=q;e=c;j=p;break;case 2:d=p;e=c;j=t;break;case 3:d=p;e=q;j=c;break;case 4:d=t;e=p;j=c;break;case 5:d=c,e=p,j=q}return"rgb"+(g?"a":"")+"("+l(255*d)+","+l(255*e)+","+l(255*j)+(g?","+g+")":")")},fixPixel:function(a){return Jidea.isNumber(a)?a:parseFloat(a.replace("px",""))||
0},toPixel:function(a){return Jidea.isNumber(a)?a+"px":Jidea.Math.fixPixel(a)+"px"}}})();
Jidea.Arithmetic={Linear:function(a,c,b,d){return b*a/d+c},Quad:{easeIn:function(a,c,b,d){return b*(a/=d)*a+c},easeOut:function(a,c,b,d){return-b*(a/=d)*(a-2)+c},easeInOut:function(a,c,b,d){return 1>(a/=d/2)?b/2*a*a+c:-b/2*(--a*(a-2)-1)+c}},Cubic:{easeIn:function(a,c,b,d){return b*(a/=d)*a*a+c},easeOut:function(a,c,b,d){return b*((a=a/d-1)*a*a+1)+c},easeInOut:function(a,c,b,d){return 1>(a/=d/2)?b/2*a*a*a+c:b/2*((a-=2)*a*a+2)+c}},Quart:{easeIn:function(a,c,b,d){return b*(a/=d)*a*a*a+c},easeOut:function(a,
c,b,d){return-b*((a=a/d-1)*a*a*a-1)+c},easeInOut:function(a,c,b,d){return 1>(a/=d/2)?b/2*a*a*a*a+c:-b/2*((a-=2)*a*a*a-2)+c}},Quint:{easeIn:function(a,c,b,d){return b*(a/=d)*a*a*a*a+c},easeOut:function(a,c,b,d){return b*((a=a/d-1)*a*a*a*a+1)+c},easeInOut:function(a,c,b,d){return 1>(a/=d/2)?b/2*a*a*a*a*a+c:b/2*((a-=2)*a*a*a*a+2)+c}},Sine:{easeIn:function(a,c,b,d){return-b*Math.cos(a/d*(Math.PI/2))+b+c},easeOut:function(a,c,b,d){return b*Math.sin(a/d*(Math.PI/2))+c},easeInOut:function(a,c,b,d){return-b/
2*(Math.cos(Math.PI*a/d)-1)+c}},Expo:{easeIn:function(a,c,b,d){return 0==a?c:b*Math.pow(2,10*(a/d-1))+c},easeOut:function(a,c,b,d){return a==d?c+b:b*(-Math.pow(2,-10*a/d)+1)+c},easeInOut:function(a,c,b,d){return 0==a?c:a==d?c+b:1>(a/=d/2)?b/2*Math.pow(2,10*(a-1))+c:b/2*(-Math.pow(2,-10*--a)+2)+c}},Circ:{easeIn:function(a,c,b,d){return-b*(Math.sqrt(1-(a/=d)*a)-1)+c},easeOut:function(a,c,b,d){return b*Math.sqrt(1-(a=a/d-1)*a)+c},easeInOut:function(a,c,b,d){return 1>(a/=d/2)?-b/2*(Math.sqrt(1-a*a)-1)+
c:b/2*(Math.sqrt(1-(a-=2)*a)+1)+c}},Elastic:{easeIn:function(a,c,b,d,e,f){if(0==a)return c;if(1==(a/=d))return c+b;f||(f=0.3*d);!e||e<Math.abs(b)?(e=b,b=f/4):b=f/(2*Math.PI)*Math.asin(b/e);return-(e*Math.pow(2,10*(a-=1))*Math.sin((a*d-b)*2*Math.PI/f))+c},easeOut:function(a,c,b,d,e,f){if(0==a)return c;if(1==(a/=d))return c+b;f||(f=0.3*d);if(!e||e<Math.abs(b))var e=b,g=f/4;else g=f/(2*Math.PI)*Math.asin(b/e);return e*Math.pow(2,-10*a)*Math.sin((a*d-g)*2*Math.PI/f)+b+c},easeInOut:function(a,c,b,d,e,
f){if(0==a)return c;if(2==(a/=d/2))return c+b;f||(f=d*0.3*1.5);if(!e||e<Math.abs(b))var e=b,g=f/4;else g=f/(2*Math.PI)*Math.asin(b/e);return 1>a?-0.5*e*Math.pow(2,10*(a-=1))*Math.sin((a*d-g)*2*Math.PI/f)+c:0.5*e*Math.pow(2,-10*(a-=1))*Math.sin((a*d-g)*2*Math.PI/f)+b+c}},Back:{easeIn:function(a,c,b,d,e){void 0==e&&(e=1.70158);return b*(a/=d)*a*((e+1)*a-e)+c},easeOut:function(a,c,b,d,e){void 0==e&&(e=1.70158);return b*((a=a/d-1)*a*((e+1)*a+e)+1)+c},easeInOut:function(a,c,b,d,e){void 0==e&&(e=1.70158);
return 1>(a/=d/2)?b/2*a*a*(((e*=1.525)+1)*a-e)+c:b/2*((a-=2)*a*(((e*=1.525)+1)*a+e)+2)+c}},Bounce:{easeIn:function(a,c,b,d){return b-easy.easing.Bounce.easeOut(d-a,0,b,d)+c},easeOut:function(a,c,b,d){return(a/=d)<1/2.75?b*7.5625*a*a+c:a<2/2.75?b*(7.5625*(a-=1.5/2.75)*a+0.75)+c:a<2.5/2.75?b*(7.5625*(a-=2.25/2.75)*a+0.9375)+c:b*(7.5625*(a-=2.625/2.75)*a+0.984375)+c},easeInOut:function(a,c,b,d){return a<d/2?0.5*easy.easing.Bounce.easeIn(2*a,0,b,d)+c:0.5*easy.easing.Bounce.easeOut(2*a-d,0,b,d)+0.5*b+
c}}};
Jidea.Painter=function(a){this.type="painter";this.dimension=Jidea.Math._2D;Jidea.DefineAbstract("configure",this);Jidea.DefineAbstract("commonDraw",this);Jidea.DefineAbstract("initialize",this);this.configurations={};this.configuration({id:"",brushsize:1,strokeStyle:"gray",lineJoin:"round",fontsize:12,font:"Verdana",fontweight:"normal",padding:10,originx:0,originy:0,color:"black",offsetx:0,offsety:0,border:{enable:!0,color:"#BCBCBC",width:1,style:""},background_color:"#fDfDfD",color_factor:0.15,style:"",
shadow:!1,shadow_color:"#666666",shadow_blur:4,shadow_offsetx:0,shadow_offsety:0,debug:!1,listeners:null});this.variable={};this.events={};this.preventEvent=!1;this.variable.event={mouseover:!1};this.registerEvent("initialize","click","dbclick","mousemove","mouseover","mouseout","keydown","beforedraw","draw");this._default_c=a||{};this.configure.apply(this,Array.prototype.slice.call(arguments,1));this.configuration(this._default_c);if(Jidea.isObject(this.get("listeners")))for(var c in this.get("listeners"))this.on(c,
this.get("listeners")[c]);this.initialization=!1;this.autoInitialized&&this.init()};
Jidea.Painter.prototype={registerEvent:function(){for(var a=0;a<arguments.length;a++)this.events[arguments[a]]=[]},init:function(){this.initialization||(this.initialize(),this.fireEvent(this,"initialize"))},is3D:function(){return this.dimension==Jidea.Math._3D},draw:function(a){this.init();if(!this.fireEvent(this,"beforedraw"))return this;this.commonDraw(a);this.fireEvent(this,"draw")},fireEvent:function(a,c,b){var d=this.events[c].length;if(1==d)return this.events[c][0].apply(a,b);for(var e=!0,f=
0;f<d;f++)e=this.events[c][f].apply(a,b);return e},on:function(a,c){Jidea.isString(a)&&Jidea.isFunction(c)&&this.events[a].push(c);return this},doConfig:function(){var a=Jidea.Math.parsePadding(this.get("padding"));this.push("padding_top",a[0]);this.push("padding_right",a[1]);this.push("padding_bottom",a[2]);this.push("padding_left",a[3]);this.push("hpadding",a[1]+a[3]);this.push("vpadding",a[0]+a[2]);this.push("fontStyle",Jidea.getFont(this.get("fontweight"),this.get("fontsize"),this.get("font")));
this.push("fill_color",this.get("background_color"));this.push("light_color",Jidea.Math.light(this.get("background_color"),this.get("color_factor")));this.push("dark_color",Jidea.Math.dark(this.get("background_color"),this.get("color_factor")));this.push("light_color2",Jidea.Math.light(this.get("background_color"),2*this.get("color_factor")));this.push("dark_color2",2*Jidea.Math.dark(this.get("background_color"),this.get("color_factor")));this.id=this.get("id")},shadowOn:function(){this.target.shadowOn(this.get("shadow"),
this.get("shadow_color"),this.get("shadow_blur"),this.get("shadow_offsetx"),this.get("shadow_offsety"))},shadowOff:function(){this.target.shadowOff()},configuration:function(a){Jidea.isObject(a)&&Jidea.merge(this.configurations,a)},push:function(a,c){var b=a.split("."),d=this.configurations;for(i=0;i<b.length-1;i++)d[b[i]]||(d[b[i]]={}),d=d[b[i]];return d[b[b.length-1]]=c},get:function(a){var a=a.split("."),c=this.configurations[a[0]];for(i=1;i<a.length;i++){if(!c)return null;c=c[a[i]]}return c}};
Jidea.Component=Jidea.extend(Jidea.Painter,{configure:function(a){this.type="component";this.configuration({gradient:!0});this.inject(a);this.autoInitialized=!0;this.final_parameter={}},initialize:function(){this.preventEvent||Jidea.DefineAbstract("isEventValid",this);Jidea.DefineAbstract("doDraw",this);this.doConfig();this.initialization=!0},doConfig:function(){Jidea.Component.superclass.doConfig.call(this);this.x=this.get("originx");this.y=this.get("originy");this.data=this.get("data");this.is3D()&&
Jidea.Interface._3D.call(this);this.get("tip.enable")&&(this.get("tip.border.color")||this.push("tip.border.color",this.get("background_color")),Jidea.isFunction(this.get("tip.invokeOffset"))||this.push("tip.invokeOffset",this.tipInvoke()))},isMouseOver:function(a){return this.isEventValid(a)},redraw:function(){this.container.draw()},commonDraw:function(a){this.doDraw.call(this,a)},inject:function(a){a&&(this.container=a,this.target=a.target)},getC:function(a){return this.container.get(a)},getContainer:function(){return this.container}});
Jidea.Interface=function(){return{_3D:function(){if(!Jidea.isDefined(this.get("xAngle_"))||!Jidea.isDefined(this.get("xAngle_"))){var a=Jidea.Math.vectorP2P(this.get("xAngle"),this.get("yAngle"));this.push("xAngle_",a.x);this.push("yAngle_",a.y)}},_2D:"2d",coordinate2d:function(){return new Jidea.Coordinate2D(Jidea.apply({kedu:{position:this.get("keduAlign"),max_scale:this.get("maxValue"),min_scale:this.get("minValue")}},this.get("coordinate")),this)},coordinate3d:function(){return new Jidea.Coordinate3D(Jidea.apply({kedu:{position:this.get("keduAlign"),
scaleAlign:this.get("keduAlign"),max_scale:this.get("maxValue"),min_scale:this.get("minValue")}},this.get("coordinate")),this)},coordinate:function(){this.get("coordinate.width")||this.push("coordinate.width",0.8*this.get("client_width"));this.get("coordinate.height")||this.push("coordinate.height",0.8*this.get("client_height"));"left"==this.get("align")?this.push("originx",this.get("l_originx")):"right"==this.get("align")?this.push("originx",this.get("r_originx")-this.get("coordinate.width")):this.push("originx",
this.get("centerx")-this.get("coordinate.width")/2);this.push("originx",this.get("originx")+this.get("offsetx"));this.push("originy",this.get("centery")-this.get("coordinate.height")/2+this.get("offsety"));(!this.get("coordinate.valid_width")||this.get("coordinate.valid_width")>this.get("coordinate.width"))&&this.push("coordinate.valid_width",this.get("coordinate.width"));(!this.get("coordinate.valid_height")||this.get("coordinate.valid_height")>this.get("coordinate.height"))&&this.push("coordinate.valid_height",
this.get("coordinate.height"));this.push("coordinate.originx",this.get("originx"));this.push("coordinate.originy",this.get("originy"));this.x=this.get("originx");this.y=this.get("originy")},parser:function(){this.data=this.get("data");if("simple"==this.dataType){for(var a=0,c=0,b,d=0,e=0;e<this.data.length;e++)if(Jidea.merge(this.data[e],this.fireEvent(this,"parseData",[this.data[e],e])),this.data[e].color||(this.data[e].color=Jidea.Math.get(e)),c=this.data[e].value,Jidea.isNumber(c))c=Jidea.Math.parseFloat(c,
this.type+":data["+e+"]"),this.data[e].value=c,this.total+=c,a=c>a?c:a,b||(b=c),b=c<b?c:b;else if(Jidea.isArray(c)){for(var f=0,d=c.length>d?c.length:d,g=0;g<c.length;g++)f+=c[g],b||(b=c),a=c[g]>a?c[g]:a,b=c[g]<b?c[g]:b;this.data[e].total=f}Jidea.isArray(this.get("labels"))&&(d=this.get("labels").length>d?this.get("labels").length:d);this.push("maxItemSize",d);this.push("minValue",b);this.push("maxValue",a);this.push("total",this.total)}else if("complex"==this.dataType){c=a=0;this.columnKeys=this.get("columnKeys");
for(d=0;d<this.data.length;d++)Jidea.Assert.equal(this.data[d].value.length,this.columnKeys.length,this.type+":data length and columnKeys not corresponding."),Jidea.merge(this.data[d],this.fireEvent(this,"parseData",[this.data[d],this.columnKeys,d])),Jidea.Assert.equal(this.data[d].value.length,this.columnKeys.length,this.type+":data length and columnKeys not corresponding.");for(d=0;d<this.columnKeys.length;d++){e=[];for(f=0;f<this.data.length;f++)b=this.data[f].value[d],this.data[f].value[d]=Jidea.Math.parseFloat(b,
this.type+":data["+f+","+d+"]"),this.data[f].color||(this.data[f].color=Jidea.Math.get(f)),this.total+=b,a=b>a?b:a,c=b<c?b:c,e.push({name:this.data[f].name,value:this.data[f].value[d],color:this.data[f].color});this.columns.push({name:this.columnKeys[d],item:e})}this.push("minValue",c);this.push("maxValue",a);this.push("total",this.total)}}}}();
(function(){Jidea.Element=function(a){this.type="element";Jidea.DefineAbstract("configure",this);Jidea.DefineAbstract("beforeshow",this);this._config_={};this.configuration({border:{enable:!1,width:1,style:"solid",color:"#BCBCBC",radius:5},animation:!0,shadow:!1,shadow_color:"#666666",shadow_blur:4,shadow_offsetx:0,shadow_offsety:0,width:0,height:0,style:"",index:999,offset_top:0,offset_left:0});this._default_c=a||{};this.configure.apply(this,Array.prototype.slice.call(arguments,1));this._default_c.style&&
(this._default_c.style=this.get("style")+";"+this._default_c.style);this.transitions="";this.variable={};this.configuration(this._default_c);this.initialize();this.applyStyle()};Jidea.Element.prototype={initialize:function(){this.wrap=this.get("wrap");this.dom=document.createElement("div");this.get("shadow")&&this.css("boxShadow",this.get("shadow_offsetx")+"px "+this.get("shadow_offsety")+"px "+this.get("shadow_blur")+"px "+this.get("shadow_color"));this.get("border.enable")&&(this.css("border",this.get("border.width")+
"px "+this.get("border.style")+" "+this.get("border.color")),this.css("borderRadius",this.get("border.radius")+"px"));this.css("zIndex",this.get("index"))},width:function(){return this.dom.offsetWidth},height:function(){return this.dom.offsetHeight},onTransitionEnd:function(a,c){var b="transitionend";Jidea.isWebKit?b="webkitTransitionEnd":Jidea.isOpera&&(b="oTransitionEnd");Jidea.Event.addEvent(this.dom,b,a,c)},transition:function(a){this.transitions=""==this.transitions?a:this.transitions+","+a;
Jidea.isWebKit?this.css("WebkitTransition",this.transitions):Jidea.isGecko?this.css("MozTransition",this.transitions):Jidea.isOpera?this.css("OTransition",this.transitions):this.css("transition",this.transitions)},show:function(a,c){this.beforeshow(a,c);this.css("visibility","visible")},hidden:function(){this.css("visibility","hidden")},getDom:function(){return this.dom},css:function(a,c){if(Jidea.isString(a))if(Jidea.isDefined(c))this.dom.style[a]=c;else return this.dom.style[a]},applyStyle:function(){for(var a=
this.get("style").split(";"),c,b=0;b<a.length;b++)c=a[b].split(":"),1<c.length&&this.css(c[0],c[1])},configuration:function(a){Jidea.isObject(a)&&Jidea.merge(this._config_,a)},push:function(a,c){var b=a.split("."),d=this._config_;for(i=0;i<b.length-1;i++)d[b[i]]||(d[b[i]]={}),d=d[b[i]];return d[b[b.length-1]]=c},get:function(a){var a=a.split("."),c=this._config_[a[0]];for(i=1;i<a.length;i++){if(!c)return null;c=c[a[i]]}return c}}})();
Jidea.Tip=Jidea.extend(Jidea.Element,{configure:function(a){this.type="tip";this.configuration({text:"",showType:"follow",invokeOffset:null,fade_duration:300,move_duration:100,shadow:!0,invokeOffsetDynamic:!1,style:"textAlign:left;padding:4px 5px;cursor:pointer;backgroundColor:rgba(239,239,239,.85);fontSize:12px;color:black;",border:{enable:!0},delay:200});this.target=a},follow:function(a,c){if(this.get("invokeOffsetDynamic")){if(c.hit){if(Jidea.isString(c.text)||Jidea.isNumber(c.text))this.dom.innerHTML=
"Today:"+c.text+"<br>Good Morning";var b=this.get("invokeOffset")(this.width(),this.height(),c);this.dom.style.top=b.top+"px";this.dom.style.left=b.left+"px"}}else"follow"==this.get("showType")?(this.dom.style.top=a.offsetY-1.1*this.height()-2+"px",this.dom.style.left=a.offsetX+2+"px"):Jidea.isFunction(this.get("invokeOffset"))?(b=this.get("invokeOffset")(this.width(),this.height(),c),this.dom.style.top=b.top+"px",this.dom.style.left=b.left+"px"):(this.dom.style.top=a.offsetY-1.1*this.height()-2+
"px",this.dom.style.left=a.offsetX+2+"px")},beforeshow:function(a,c){this.follow(a,c)},show:function(a,c){this.beforeshow(a,c);this.css("visibility","visible");this.get("animation")&&this.css("opacity",1)},hidden:function(){this.get("animation")?this.css("opacity",0):this.css("visibility","hidden")},initialize:function(){Jidea.Tip.superclass.initialize.call(this);this.css("position","absolute");this.dom.innerHTML=this.get("text");this.hidden();if(this.get("animation")){this.transition("opacity "+
this.get("fade_duration")/1E3+"s ease-in 0s");this.transition("top "+this.get("move_duration")/1E3+"s ease-in 0s");this.transition("left "+this.get("move_duration")/1E3+"s ease-in 0s");var a=this;this.onTransitionEnd(function(){0==a.css("opacity")&&a.css("visibility","hidden")},!1)}this.wrap.appendChild(this.dom);a=this;this.target.on("mouseover",function(c,b){a.show(c,b)}).on("mouseout",function(c){a.hidden(c)});if("follow"==this.get("showType"))this.target.on("mousemove",function(c,b){a.target.variable.event.mouseover&&
setTimeout(function(){a.target.variable.event.mouseover&&a.follow(c,b)},a.get("delay"))})}});
Jidea.CrossHair=Jidea.extend(Jidea.Element,{configure:function(a){this.type="crosshair";this.configuration({text:"",top:0,left:0,hcross:!0,vcross:!0,invokeOffset:null,line_width:1,line_color:"green",shadow_color:"#dedede",delay:200});this.target=a},follow:function(a,c){if(this.get("invokeOffset")){var b=this.get("invokeOffset")(a,c);b&&b.hit&&(this.horizontal.style.top=b.top-this.top+"px",this.vertical.style.left=b.left-this.left+"px")}else this.horizontal.style.top=a.offsetY-this.top-1+"px",this.vertical.style.left=
a.offsetX-this.left-1+"px"},beforeshow:function(a,c){this.follow(a,c)},initialize:function(){Jidea.CrossHair.superclass.initialize.call(this);this.top=Jidea.Math.fixPixel(this.get("top"));this.left=Jidea.Math.fixPixel(this.get("left"));this.dom=document.createElement("div");this.dom.style.zIndex=this.get("index");this.dom.style.position="absolute";this.dom.style.width=Jidea.Math.toPixel(0);this.dom.style.height=Jidea.Math.toPixel(0);this.dom.style.top=Jidea.Math.toPixel(this.get("top"));this.dom.style.left=
Jidea.Math.toPixel(this.get("left"));this.css("visibility","hidden");this.horizontal=document.createElement("div");this.vertical=document.createElement("div");this.horizontal.style.width=Jidea.Math.toPixel(this.get("width"));this.horizontal.style.height=Jidea.Math.toPixel(this.get("line_width"));this.horizontal.style.backgroundColor=this.get("line_color");this.horizontal.style.position="absolute";this.vertical.style.width=Jidea.Math.toPixel(this.get("line_width"));this.vertical.style.height=Jidea.Math.toPixel(this.get("height"));
this.vertical.style.backgroundColor=this.get("line_color");this.vertical.style.position="absolute";this.dom.appendChild(this.horizontal);this.dom.appendChild(this.vertical);this.get("shadow")&&(this.dom.style.boxShadow=this.get("shadowStyle"));this.wrap.appendChild(this.dom);var a=this;this.target.on("mouseover",function(c,b){a.show(c,b)}).on("mouseout",function(c,b){a.hidden(c,b)}).on("mousemove",function(c,b){a.follow(c,b)})}});
Jidea.Legend=Jidea.extend(Jidea.Component,{configure:function(){Jidea.Legend.superclass.configure.apply(this,arguments);this.type="legend";this.configuration({data:void 0,width:"auto",column:1,row:"max",maxwidth:0,line_height:16,sign:"square",sign_size:12,sign_space:5,legendspace:5,text_with_sign_color:!1,align:"right",valign:"middle",border:{width:1,radius:5}});this.registerEvent("drawCell","analysing","drawRaw")},drawCell:function(a,c,b,d){var e=this.get("sign_size");"round"==this.get("sign")?this.target.round(a+
e/2,c+e/2,e/2,d):"round-bar"==this.get("sign")?(this.target.rectangle(a,c+5*e/12,e,e/6,d),this.target.round(a+e/2,c+e/2,e/4,d)):"square-bar"==this.get("sign")?(this.target.rectangle(a,c+5*e/12,e,e/6,d),this.target.rectangle(a+e/4,c+e/4,e/2,e/2,d)):this.target.rectangle(a,c,e,e,d);var f=this.get("color");this.get("text_with_sign_color")&&(f=d);this.target.fillText(b,a+this.get("signwidth"),c+e/2,this.get("textwidth"),f);this.fireEvent(this,"drawCell",[a,c,b,d])},drawRow:function(a,c,b){for(var d=0;d<
this.get("column");d++)a<this.data.length&&(this.fireEvent(this,"drawCell",[this.data[a]]),this.drawCell(c,b,this.data[a].text,this.data[a].color),this.data[a].x=c,this.data[a].y=b),c+=this.columnwidth[d]+this.get("signwidth")+this.get("legendspace"),a++},isEventValid:function(a){if(a.offsetX>this.x&&a.offsetX<this.x+this.get("width")&&a.offsetY>this.y&&a.offsetY<this.y+this.get("height"))for(var c=0;c<this.data.length;c++)if(a.offsetX>this.data[c].x&&a.offsetX<this.data[c].x+this.data[c].width+this.get("signwidth")&&
a.offsetY>this.data[c].y&&a.offsetY<this.data[c].y+this.get("line_height"))return{valid:!0,value:c,target:this.data[c]};return{valid:!1}},doDraw:function(){this.get("border.enable")&&this.target.drawBorder(this.x,this.y,this.width,this.height,this.get("border.width"),this.get("border.color"),0==this.get("border.radius")?0:Jidea.Math.parseBorder(this.get("border.radius")),this.get("background_color"),!1,this.get("shadow"),this.get("shadow_color"),this.get("shadow_blur"),this.get("shadow_offsetx"),
this.get("shadow_offsety"));this.target.textStyle("left","middle",Jidea.getFont(this.get("fontweight"),this.get("fontsize"),this.get("font")));for(var a=this.x+this.get("padding_left"),c=this.y+this.get("padding_top"),b=this.get("column"),d=this.get("row"),e=0;e<d;e++)this.fireEvent(this,"drawRaw",[e*b]),this.drawRow(e*b,a,c),c+=this.get("line_height")},doEvent:function(){},doConfig:function(){Jidea.Legend.superclass.doConfig.call(this);Jidea.Assert.isNotEmpty(this.get("data"),this.type+"[data]");
this.push("signwidth",this.get("sign_size")+this.get("sign_space"));this.get("line_height")<this.get("sign_size")&&this.push("line_height",this.get("sign_size")+this.get("sign_size")/5);var a=Jidea.isNumber(this.get("column")),c=Jidea.isNumber(this.get("row"));!a&&!c&&(a=1);a&&!c&&this.push("row",Math.ceil(this.data.length/this.get("column")));!a&&c&&this.push("column",Math.ceil(this.data.length/this.get("row")));var a=this.get("column"),c=this.get("row"),b=0,d=this.get("width"),e=0,f="auto"==this.get("width");
this.columnwidth=Array(a);f&&(this.target.textFont(this.get("fontStyle")),d=0);for(var g=0;g<this.data.length;g++)Jidea.merge(this.data[g],this.fireEvent(this,"analysing",[this.data[g],g])),this.data[g].text=this.data[g].text||this.data[g].name,this.data[g].width=this.target.measureText(this.data[g].text);for(g=0;g<a;g++){e=0;for(b=g;b<this.data.length;)e=Math.max(e,this.data[b].width),b+=a;this.columnwidth[g]=e;d+=e}f&&this.push("width",d+this.get("hpadding")+this.get("signwidth")*a+(a-1)*this.get("legendspace"));
this.get("width")>this.get("maxwidth")&&this.push("width",this.get("maxwidth"));this.push("textwidth",this.get("width")-this.get("hpadding")-this.get("sign_size")-this.get("sign_space"));this.push("height",c*this.get("line_height")+this.get("vpadding"));this.width=this.get("width");this.height=this.get("height");"center"==this.get("align")&&"middle"==this.get("valign")&&this.push("valign","top");"left"==this.getC("align")&&"middle"==this.get("valign")&&this.push("align","right");"top"==this.get("valign")?
this.push("originy",this.getC("t_originy")):"bottom"==this.get("valign")?this.push("originy",this.getC("b_originy")-this.get("height")):this.push("originy",this.getC("centery")-this.get("height")/2);"left"==this.get("align")?this.push("originx",this.getC("l_originx")):"center"==this.get("align")?this.push("originx",this.getC("centerx")-this.get("textwidth")/2):this.push("originx",this.getC("r_originx")-this.get("width"));this.push("originx",this.get("originx")+this.get("offsetx"));this.push("originy",
this.get("originy")+this.get("offsety"));this.x=this.get("originx");this.y=this.get("originy")}});
Jidea.Label=Jidea.extend(Jidea.Component,{configure:function(){Jidea.Label.superclass.configure.apply(this,arguments);this.type="legend";this.configuration({text:"",line_height:16,sign:"square",sign_size:12,padding:5,offsety:2,sign_space:5,highlight:!1,background_color:"#efefef",text_with_sign_color:!1,border:{radius:2}});this.registerEvent("beforeDrawRow","highlight","drawRow")},drawBorder:function(){this.lineFn.call(this);this.target.drawBorder(this.labelx,this.labely,this.width,this.height,this.get("border.width"),
this.get("border.color"),0==this.get("border.radius")?0:Jidea.Math.parseBorder(this.get("border.radius")),this.get("background_color"),!1,this.get("shadow"),this.get("shadow_color"),this.get("shadow_blur"),this.get("shadow_offsetx"),this.get("shadow_offsety"))},isEventValid:function(a){return{valid:Jidea.Math.inRange(this.labelx,this.labelx+this.width,a.offsetX)&&Jidea.Math.inRange(this.labely,this.labely+this.height,a.offsetY)}},doDraw:function(a){a=a||{};a.invoke&&this.updateLcb(a.invoke);a.highlight&&
this.fireEvent(this,"highlight");this.drawBorder();this.target.textStyle("left","top",this.get("fontStyle"));var a=this.labelx+this.get("padding_left"),c=this.labely+this.get("padding_top")+this.get("offsety"),b=this.get("color");this.get("text_with_sign_color")&&(b=this.get("scolor"));"square"==this.get("sign")?this.target.rectangle(a,c,this.get("sign_size"),this.get("sign_size"),this.get("scolor"),1):this.target.round(a+this.get("sign_size")/2,c+this.get("sign_size")/2,this.get("sign_size")/2,this.get("scolor"),
1);this.target.fillText(this.get("text"),a+this.get("sign_size")+this.get("sign_space"),c,this.get("textwidth"),b)},updateLcb:function(a){this.lineFn=a.lineFn;var c=a.labelXY.call(this);this.labelx=c.labelx;this.labely=c.labely;this.x=a.origin.x;this.y=a.origin.y},doConfig:function(){Jidea.Label.superclass.doConfig.call(this);this.target.textFont(Jidea.getFont(this.get("fontweight"),this.get("fontsize"),this.get("font")));this.height=this.get("line_height")+this.get("vpadding");this.width=this.target.measureText(this.get("text"))+
this.get("hpadding")+this.get("sign_size")+this.get("sign_space");var a=this.get("lineCB");a&&this.updateLcb(a)}});
Jidea.Text=Jidea.extend(Jidea.Component,{configure:function(){Jidea.Text.superclass.configure.apply(this,arguments);this.type="text";this.configuration({text:"",textAlign:"center",textBaseline:"top"});this.registerEvent("beforepop","analysing","drawRow");this.preventEvent=!0},doDraw:function(){""!=this.get("text")&&this.target.text(this.get("text"),this.x,this.y,!1,this.get("color"),this.get("textAlign"),this.get("textBaseline"),this.get("fontStyle"))},doConfig:function(){Jidea.Text.superclass.doConfig.call(this)}});
(function(){function a(a){"string"===typeof a&&(a=document.getElementById(a));if(!a||!a.tagName||"canvas"!=a.tagName.toLowerCase())throw Error("there not a canvas element;can't use it");this.canvas=a;this.ctx=this.canvas.getContext("2d");this.width=this.canvas.width;this.height=this.canvas.height}var c=Math.PI/90,b=Math.PI,d=2*Math.PI,e=Math.sin,f=Math.cos;a.prototype={css:function(a,b){if(Jidea.isDefined(b))this.canvas.style[a]=b;else return this.canvas.style[a]},isPointInPathArc:function(a,b,c,
d,e,f,h,k,u,o){h=!!h;(k=!!k)||this.ctx.moveTo(a,b);this.ctx.beginPath();k&&this.ctx.moveTo(a,b);this.ctx.arc(a,b,c,d,e,h);this.ctx.lineTo(a,b);return this.ctx.isPointInPath(u,o)},arc:function(a,b,c,d,e,f,h,k,u,o,v,r,w,C,A,B,D){A=!!A;B=!!B;this.ctx.save();this.fillStyle(f);D&&(this.ctx.globalCompositeOperation="destination-over");h&&this.strokeStyle(k,u);this.shadowOn(o,v,r,w,C);this.ctx.moveTo(a,b);this.ctx.beginPath();this.ctx.arc(a,b,c,d,e,A);B&&this.ctx.lineTo(a,b);this.ctx.closePath();this.ctx.fill();
h&&this.ctx.stroke();this.ctx.restore();return this},ellipse:function(a,b,d,m,n,s,h,k,u,o,v,r,w,C,A,B,D,F){B=!!B;D=!!D;this.ctx.save();F&&(this.ctx.globalCompositeOperation="destination-over");m&&this.strokeStyle(u,o);this.shadowOn(v,r,w,C,A);this.ctx.moveTo(a,b);this.ctx.beginPath();D&&this.ctx.moveTo(a,b);for(this.fillStyle(h);n<=s;)this.ctx.lineTo(a+d*f(n),b+(B?-m*e(n):m*e(n))),n+=c;this.ctx.lineTo(a+d*f(s),b+(B?-m*e(s):m*e(s)));this.ctx.closePath();m&&this.ctx.stroke();this.ctx.fill();this.ctx.restore();
return this},sector:function(a,b,c,d,e,f,h,k,u,o,v,r,w,C,A){o?(this.arc(a,b,c,d,e,f,h,k,u,o,v,r,w,C,A,!0),this.arc(a,b,c,d,e,f,h,k,u,!1,v,r,w,C,A,!0)):this.arc(a,b,c,d,e,f,h,k,u,!1,0,0,0,0,A,!0);return this},sector3D:function(){var a=function(a,g,d,j,h,k,u,o,v){if(u&&k<=b||!u&&h>=b)return!1;var r=function(b,c){this.ctx.lineTo(a+d*f(b),g+(c||0)+(u?-j*e(b):j*e(b)))},h=u&&k>b&&h<b?b:h,k=!u&&h<b&&k>b?b:k,w=h;this.ctx.fillStyle=Jidea.Math.dark(v);this.ctx.moveTo(a+d*f(h),g+(u?-j*e(h):j*e(h)));for(this.ctx.beginPath();w<=
k;)r.call(this,w),w+=c;r.call(this,k);this.ctx.lineTo(a+d*f(k),g+o+(u?-j*e(k):j*e(k)));for(w=k;w>=h;)r.call(this,w,o),w-=c;r.call(this,h,o);this.ctx.lineTo(a+d*f(h),g+(u?-j*e(h):j*e(h)));this.ctx.closePath();this.ctx.fill()},d=function(a,b,c,g,d,j,u,o){this.ctx.moveTo(a,b);this.ctx.beginPath();this.ctx.fillStyle=Jidea.Math.dark(o);this.ctx.lineTo(a,b+j);c=a+c*f(u);g=b+j+(d?-g*e(u):g*e(u));this.ctx.lineTo(c,g);this.ctx.lineTo(c,g-j);this.ctx.lineTo(a,b);this.ctx.closePath();this.ctx.fill()};return function(c,
e,f,s,h,k,u,o,v,r,w,C,A,B,D,F,E){C=C&&!Jidea.isOpera;this.ctx.save();this.ctx.globalCompositeOperation="destination-over";this.ctx.fillStyle=o;var H=E?h<b/2||h>1.5*b:h>b/2&&h<1.5*b,I=E?k>b/2&&k<1.5*b:k<b/2||k>1.5*b;if(H||I)H&&d.call(this,c,e,f,s,E,u,h,o),I&&d.call(this,c,e,f,s,E,u,k,o);this.ellipse(c,e+u,f,s,h,k,o,v,r,w,C,A,B,D,F,E,!0);this.ctx.globalCompositeOperation="source-over";this.ellipse(c,e,f,s,h,k,o,v,r,w,!1,A,B,D,F,E,!0);a.call(this,c,e,f,s,h,k,E,u,o);this.ctx.restore();return this}}(),
textStyle:function(a,b,c){return this.textAlign(a).textBaseline(b).textFont(c)},strokeStyle:function(a,b,c){a&&(this.ctx.lineWidth=a);b&&(this.ctx.strokeStyle=b);c&&(this.ctx.lineJoin=c);return this},globalAlpha:function(a){a&&(this.ctx.globalAlpha=a);return this},fillStyle:function(a){a&&(this.ctx.fillStyle=a);return this},textAlign:function(a){a&&(this.ctx.textAlign=a);return this},textBaseline:function(a){a&&(this.ctx.textBaseline=a);return this},textFont:function(a){a&&(this.ctx.font=a);return this},
shadowOn:function(a,b,c,d,e){Jidea.isString(a)&&(e=d,d=c,c=b,b=!0);a&&(this.ctx.shadowColor=b,this.ctx.shadowBlur=c,this.ctx.shadowOffsetX=d,this.ctx.shadowOffsetY=e);return this},shadowOff:function(){this.ctx.shadowColor="white";this.ctx.shadowBlur=this.ctx.shadowOffsetX=this.ctx.shadowOffsetY=0},avgLinearGradient:function(a,b,c,d,e){a=this.createLinearGradient(a,b,c,d);for(b=0;b<e.length;b++)a.addColorStop(b/(e.length-1),e[b]);return a},createLinearGradient:function(a,b,c,d){return this.ctx.createLinearGradient(a,
b,c,d)},avgRadialGradient:function(a,b,c,d,e,f,h){a=this.createRadialGradient(a,b,c,d,e,f);for(b=0;b<h.length;b++)a.addColorStop(b/(h.length-1),h[b]);return a},createRadialGradient:function(a,b,c,d,e,f){return this.ctx.createRadialGradient(a,b,c,d,e,f)},fillText:function(a,b,c,d,e,f,h){a+="";d=d||!1;f=f||"lr";h=h||16;this.fillStyle(e);a=a.split("tb"==f?"":"\n");for(e=0;e<a.length;e++)d?this.ctx.fillText(a[e],b,c,d):this.ctx.fillText(a[e],b,c),c+=h;return this},measureText:function(a){return this.ctx.measureText(a).width},
moveTo:function(a,b){this.ctx.moveTo(a||0,b||0);return this},lineTo:function(a,b){this.ctx.lineTo(a||0,b||0);return this},save:function(){this.ctx.save();return this},restore:function(){this.ctx.restore();return this},beginPath:function(){this.ctx.beginPath();return this},closePath:function(){this.ctx.closePath();return this},stroke:function(){this.ctx.stroke();return this},fill:function(){this.ctx.fill();return this},text:function(a,b,c,d,e,f,h,k,u,o){this.ctx.save();this.textStyle(f,h,k);this.fillText(a,
b,c,d,e,u,o);this.ctx.restore();return this},cube:function(a,b,c,d,e,f,h,k,u,o,v,r,w,C,A,B){a=Jidea.Math.fixDeckle(o,a);b=Jidea.Math.fixDeckle(o,b);h=h&&0<h?h:e;d=b-h*d;c=Jidea.Math.fixDeckle(o,a+h*c);d=Jidea.Math.fixDeckle(o,d);r&&(this.polygon(k,u,o,v,r,w,C,A,B,!1,[a,b,c,d,c+e,d,a+e,b]),this.polygon(k,u,o,v,r,w,C,A,B,!1,[a,b,a,b+f,a+e,b+f,a+e,b]),this.polygon(k,u,o,v,r,w,C,A,B,!1,[a+e,b,c+e,d,c+e,d+f,a+e,b+f]));this.polygon(Jidea.Math.dark(k),u,o,v,!1,w,C,A,B,!1,[a,b,c,d,c+e,d,a+e,b]);this.polygon(k,
u,o,v,!1,w,C,A,B,!1,[a,b,a,b+f,a+e,b+f,a+e,b]);this.polygon(Jidea.Math.dark(k),u,o,v,!1,w,C,A,B,!1,[a+e,b,c+e,d,c+e,d+f,a+e,b+f]);return this},cube3D:function(a,b,c,d,e,f,h,k,u,o,v,r){a=Jidea.Math.fixDeckle(o,a);b=Jidea.Math.fixDeckle(o,b);if(!k||0==k)k=f;e?(d=Jidea.Math.vectorP2P(c,d),c=a+k*d.x,d=b-k*d.y):(c=a+k*c,d=b-k*d);for(;6>r.length;)r.push(!1);c=Jidea.Math.fixDeckle(o,c);d=Jidea.Math.fixDeckle(o,d);k=[];0>d?Jidea.isObject(r[4])&&k.push(Jidea.applyIf({points:[a,b-h,c,d-h,c+f,d-h,a+f,b-h]},
r[4])):Jidea.isObject(r[0])&&k.push(Jidea.applyIf({points:[a,b,c,d,c+f,d,a+f,b]},r[0]));Jidea.isObject(r[1])&&k.push(Jidea.applyIf({points:[c,d,c,d-h,c+f,d-h,c+f,d]},r[1]));Jidea.isObject(r[2])&&k.push(Jidea.applyIf({points:[a,b,a,b-h,c,d-h,c,d]},r[2]));Jidea.isObject(r[3])&&k.push(Jidea.applyIf({points:[a+f,b,a+f,b-h,c+f,d-h,c+f,d]},r[3]));0>d?Jidea.isObject(r[0])&&k.push(Jidea.applyIf({points:[a,b,c,d,c+f,d,a+f,b]},r[0])):Jidea.isObject(r[4])&&k.push(Jidea.applyIf({points:[a,b-h,c,d-h,c+f,d-h,a+
f,b-h]},r[4]));Jidea.isObject(r[5])&&k.push(Jidea.applyIf({points:[a,b,a,b-h,a+f,b-h,a+f,b]},r[5]));for(a=0;a<k.length;a++)this.polygon(k[a].color,u,o,v,k[a].shadow,k[a].shadowColor,k[a].blur,k[a].sx,k[a].sy,k[a].alpha,k[a].points);return this},polygon:function(a,b,c,d,e,f,h,k,u,o,v){if(!(2>v.length)){this.ctx.save();this.strokeStyle(c,d);this.ctx.beginPath();this.fillStyle(a).globalAlpha(o).shadowOn(e,f,h,k,u).moveTo(v[0],v[1]);for(a=2;a<v.length;a+=2)this.lineTo(v[a],v[a+1]);this.ctx.closePath();
b&&this.ctx.stroke();this.ctx.fill();this.ctx.restore();return this}},line:function(a,b,c,d,e,f,h){if(!e||0==e)return this;this.ctx.save();h&&(this.ctx.globalCompositeOperation="destination-over");a=Jidea.Math.fixDeckle(e,a);b=Jidea.Math.fixDeckle(e,b);c=Jidea.Math.fixDeckle(e,c);d=Jidea.Math.fixDeckle(e,d);this.ctx.beginPath();this.strokeStyle(e,f).moveTo(a,b).lineTo(c,d).ctx.stroke();this.ctx.closePath();this.ctx.restore();return this},round:function(a,b,c,e,f,s){this.ctx.beginPath();this.ctx.fillStyle=
e;this.ctx.arc(a,b,c,0,d,!1);this.ctx.closePath();this.ctx.fill();f&&(this.ctx.lineWidth=f,this.ctx.strokeStyle=s||"#010101",this.ctx.stroke());return this},backgound:function(a,b,c,d,e){this.ctx.save();this.ctx.globalCompositeOperation="destination-over";this.ctx.translate(a,b);this.ctx.beginPath();this.ctx.fillStyle=e;this.ctx.fillRect(0,0,c,d);this.ctx.restore();return this},rectangle:function(a,b,c,d,e,f,h,k,u,o,v,r,w){this.ctx.save();a=Jidea.Math.fixDeckle(h,a);b=Jidea.Math.fixDeckle(h,b);this.ctx.translate(a,
b);this.ctx.beginPath();this.ctx.fillStyle=e;this.shadowOn(u,o,v,r,w);f&&Jidea.isNumber(h)&&(this.ctx.lineWidth=h,this.ctx.strokeStyle=k,this.ctx.strokeRect(0,0,c,d));this.ctx.fillRect(0,0,c,d);f&&Jidea.isArray(h)&&(this.ctx.strokeStyle=k,this.line(0,0,c,0,h[0],k),this.line(c,0,c,d,h[1],k),this.line(0,d,c,d,h[2],k),this.line(0,0,0,d,h[3],k));this.ctx.restore();return this},clearRect:function(a,b,c,d){c=c||this.width;d=d||this.height;this.ctx.clearRect(a||0,b||0,c,d);return this},drawBorder:function(a,
b,c,d,e,f,h,k,u,o,v,r,w,C){this.ctx.save();var A=Jidea.Math.fixDeckle(e,a),B=Jidea.Math.fixDeckle(e,b);A!=a&&(a=A,c-=1);B!=b&&(b=B,d-=1);this.ctx.translate(a,b);this.ctx.lineWidth=e;this.ctx.strokeStyle=f;u&&(this.ctx.globalCompositeOperation="destination-over");k&&(this.ctx.fillStyle=k);Jidea.isArray(h)?(this.ctx.beginPath(),this.ctx.moveTo(h[0],0),this.ctx.lineTo(c-h[1],0),this.ctx.arcTo(c,0,c,h[1],h[1]),this.ctx.lineTo(c,d-h[2]),this.ctx.arcTo(c,d,c-h[2],d,h[2]),this.ctx.lineTo(h[3],d),this.ctx.arcTo(0,
d,0,d-h[3],h[3]),this.ctx.lineTo(0,h[0]),this.ctx.arcTo(0,0,h[0],0,h[0]),this.ctx.closePath(),this.shadowOn(o,v,r,w,C),k&&this.ctx.fill(),o&&this.shadowOff(),this.ctx.globalCompositeOperation="source-over",this.ctx.stroke()):(this.shadowOn(o,v,r,w,C),k&&this.ctx.fillRect(0,0,c,d),o&&this.shadowOff(),this.ctx.strokeRect(0,0,c,d));this.ctx.restore();return this},toImageURL:function(){return this.canvas.toDataURL("image/png")},addEvent:function(a,b,c){Jidea.Event.addEvent(this.canvas,a,b,c)}};Jidea.Chart=
Jidea.extend(Jidea.Painter,{configure:function(){this.type="chart";this.configuration({render:"",data:[],width:void 0,height:void 0,align:"center",segmentRect:!0,title:"",title_align:"center",title_valign:"top",title_writingmode:"lr",title_font:"Verdana",title_fontweight:"bold",title_fontsize:20,title_color:"black",title_height:25,title_lineheight:25,showpercent:!0,decimalsnum:1,animation:!1,doAnimationFn:Jidea.emptyFn,animation_timing_function:"easeInOut",duration_animation_duration:1600,legend:{enable:!1},
tip:{enable:!1},border:{radius:5}});this.registerEvent("parseData","parseTipText","parseLabelText","beforeAnimation","afterAnimation");this.target=null;this.animationed=this.autoInitialized=this.rendered=!1;this.components=[];this.total=0},pushComponent:function(a,b){Jidea.isArray(a)?this.components=b?a.concat(this.components):this.components.concat(a):b?this.components=[a].concat(this.components):this.components.push(a)},plugin:function(a,b){this.init();a.inject(this);this.pushComponent(a,b)},toImageURL:function(){return this.target.toImageURL()},
segmentRect:function(){this.target.clearRect(this.get("l_originx"),this.get("t_originy"),this.get("client_width"),this.get("client_height"))},resetCanvas:function(){this.target.backgound(this.get("l_originx"),this.get("t_originy"),this.get("client_width"),this.get("client_height"),this.get("background_color"))},animation:function(){return function(a){a.segmentRect();a.doAnimation(a.variable.animation.time,a.duration);a.resetCanvas();a.variable.animation.time<a.duration?(a.variable.animation.time++,
setTimeout(function(){a.animation(a)},Jidea.INTERVAL)):setTimeout(function(){a.variable.animation.time=0;a.animationed=!0;a.draw();a.processAnimation=!1;a.fireEvent(this,"afterAnimation",[this])},Jidea.INTERVAL)}}(),doAnimation:function(a,b){this.get("doAnimationFn").call(this,a,b)},commonDraw:function(){Jidea.Assert.isTrue(this.rendered,this.type+" has not rendered.");Jidea.Assert.isTrue(this.initialization,this.type+" has initialize failed.");Jidea.Assert.gtZero(this.data.length,this.type+"'data is empty.");
this.redraw||(this.drawTitle(),this.get("border.enable")?this.target.drawBorder(0,0,this.width,this.height,this.get("border.width"),this.get("border.color"),0==this.get("border.radius")?0:Jidea.Math.parseBorder(this.get("border.radius")),this.get("background_color"),!0):this.target.backgound(0,0,this.width,this.height,this.get("background_color")));this.redraw=!0;if(!this.animationed&&this.get("animation"))this.fireEvent(this,"beforeAnimation",[this]),this.animation(this);else{this.segmentRect();
for(var a=0;a<this.components.length;a++)this.components[a].draw();this.resetCanvas()}},drawTitle:function(){""!=this.get("title")&&("tb"!=this.get("title_writingmode")&&("left"==this.get("title_align")?this.push("title_originx",this.get("padding_left")):"right"==this.get("title_align")?this.push("title_originx",this.width-this.get("padding_right")):this.push("title_originx",this.get("client_width")/2),this.target.textAlign(this.get("title_align")),"bottom"==this.get("title_valign")?this.push("title_originy",
this.height-this.get("padding_bottom")):this.push("title_originy",this.get("padding_top")),this.target.textBaseline(this.get("title_valign"))),this.target.textFont(Jidea.getFont(this.get("title_fontweight"),this.get("title_fontsize"),this.get("title_font"))),this.target.fillText(this.get("title"),this.get("title_originx"),this.get("title_originy"),this.get("client_width"),this.get("title_color")))},create:function(b){this.width=this.push("width",this.get("width")||400);this.height=this.push("height",
this.get("height")||300);var c="width:"+this.width+"px;height:"+this.height+"px;padding:0px;overflow:hidden;position:relative;",d=Jidea.Math.iGather(this.type);this.shellid=Jidea.Math.iGather(this.type+"-shell");b.innerHTML="<div id='"+this.shellid+"' style='"+c+"'><canvas id= '"+d+"'  width='"+this.width+"' height="+this.height+"'><p>Your browser does not support the canvas element</p></canvas></div>";this.element=document.getElementById(d);this.shell=document.getElementById(this.shellid);this.target=
new a(this.element);this.rendered=!0},render:function(a){this.push("render",a)},initialize:function(){if(!this.rendered){var a=this.get("render");"string"==typeof a&&document.getElementById(a)?this.create(document.getElementById(a)):"object"==typeof a&&this.create(a)}0<this.get("data").length&&this.rendered&&!this.initialization&&(Jidea.Interface.parser.call(this),this.doConfig(),this.initialization=!0)},doConfig:function(){Jidea.Chart.superclass.doConfig.call(this);this.get("debug")&&(this.on("beforedraw",
function(){this.START_RUN_TIME=(new Date).getTime();return!0}),this.on("draw",function(){this.END_RUN_TIME=(new Date).getTime();this.RUN_TIME_COST=this.END_RUN_TIME-this.START_RUN_TIME}));this.get("animation")&&(this.processAnimation=this.get("animation"),this.duration=Math.ceil(this.get("duration_animation_duration")*Jidea.FRAME/1E3),this.variable.animation={time:0},this.animationArithmetic=Jidea.getAnimationArithmetic(this.get("animation_timing_function")));this.is3D()&&Jidea.Interface._3D.call(this);
this.target.strokeStyle(this.get("brushsize"),this.get("strokeStyle"),this.get("lineJoin"));var a=this;this.target.addEvent("click",function(b){a.fireEvent(a,"click",[Jidea.Event.fix(b)])},!1);this.target.addEvent("mousemove",function(b){a.fireEvent(a,"mousemove",[Jidea.Event.fix(b)])},!1);this.on("click",function(a){if(!this.processAnimation)for(var b,c=0;c<this.components.length;c++){b=this.components[c];if(!b.preventEvent){var d=b.isMouseOver(a);d.valid&&this.components[c].fireEvent(b,"click",
[a,d])}}});this.on("mousemove",function(a){if(!this.processAnimation){for(var b=false,c=0;c<this.components.length;c++){var d;d=this.components[c];if(!d.preventEvent){var e=d.isMouseOver(a);if(e.valid){b=true;if(!this.variable.event.mouseover){this.variable.event.mouseover=true;this.target.css("cursor","pointer");this.fireEvent(this,"mouseover",[a])}if(!d.variable.event.mouseover){d.variable.event.mouseover=true;d.fireEvent(d,"mouseover",[a,e])}d.fireEvent(d,"mousemove",[a,e])}else if(d.variable.event.mouseover){d.variable.event.mouseover=
false;d.fireEvent(d,"mouseout",[a,e])}}}if(!b&&this.variable.event.mouseover){this.variable.event.mouseover=false;this.target.css("cursor","default");this.fireEvent(this,"mouseout",[a])}}});Jidea.Assert.isArray(this.data);this.push("l_originx",this.get("padding_left"));this.push("r_originx",this.width-this.get("padding_right"));this.push("t_originy",this.get("padding_top"));this.push("b_originy",this.height-this.get("padding_bottom"));var b=0,c=0;""!=this.get("title")&&("tb"==this.get("title_writingmode")?
(b=this.get("title_height"),"left"==this.get("title_align")?this.push("l_originx",this.get("l_originx")+this.get("title_height")):this.push("r_originx",this.width-this.get("l_originx")-this.get("title_height"))):(c=this.get("title_height"),"left"==this.get("title_align")?this.push("title_originx",this.get("padding_left")):"right"==this.get("title_align")?this.push("title_originx",this.width-this.get("padding_right")):this.push("title_originx",this.get("client_width")/2),"bottom"==this.get("title_valign")?
(this.push("title_originy",this.height-this.get("padding_bottom")),this.push("b_originy",this.height-this.get("b_originy")-this.get("title_height"))):(this.push("t_originy",this.get("t_originy")+this.get("title_height")),this.push("title_originy",this.get("padding_top")))));this.push("client_width",this.get("width")-this.get("padding_left")-this.get("padding_right")-b);this.push("client_height",this.get("height")-this.get("padding_top")-this.get("padding_bottom")-c);this.push("minDistance",Math.min(this.get("client_width"),
this.get("client_height")));this.push("maxDistance",Math.max(this.get("client_width"),this.get("client_height")));this.push("minstr",this.get("client_width")<this.get("client_height")?"width":"height");this.push("centerx",this.get("l_originx")+this.get("client_width")/2);this.push("centery",this.get("t_originy")+this.get("client_height")/2);this.get("border.enable")&&(b=Jidea.Math.parseBorder(this.get("border.radius")),this.push("radius_top",b[0]),this.push("radius_right",b[1]),this.push("radius_bottom",
b[2]),this.push("radius_left",b[3]));this.get("legend.enable")&&(this.legend=new Jidea.Legend(Jidea.apply({maxwidth:this.get("client_width"),data:this.data},this.get("legend")),this),this.components.push(this.legend));this.get("tip.enable")&&this.push("tip.wrap",this.shell)},setData:function(a){this.data=a}})})();
Jidea.Custom=Jidea.extend(Jidea.Component,{configure:function(){Jidea.Custom.superclass.configure.apply(this,arguments);this.type="custom";this.configuration({drawFn:Jidea.emptyFn,eventValid:null});this.registerEvent()},doDraw:function(a){this.get("drawFn").call(this,a)},isEventValid:function(a){return Jidea.isFunction(this.get("eventValid"))?this.get("eventValid").call(this,a):{valid:!1}},doConfig:function(){Jidea.Custom.superclass.doConfig.call(this)}});
(function(){var a=Jidea.extend(Jidea.Component,{configure:function(){a.superclass.configure.apply(this,arguments);this.type="kedu";this.configuration({which:"h",distance:void 0,start_scale:0,end_scale:void 0,min_scale:void 0,max_scale:void 0,scale:void 0,scale_share:5,scale_line_enable:!0,scale_size:1,scale_width:4,scale_color:"#333333",scaleAlign:"center",labels:[],kedu2grid:!0,text_height:16,text_space:4,textAlign:"left",decimalsnum:0,join_style:"none",join_size:2,label:"",label_position:""});this.registerEvent("parseText");
this.items=[];this.number=0},isEventValid:function(){return{valid:!1}},doDraw:function(){var a=y=x0=y0=tx=ty=0,b=this.get("scale_width"),d=this.get("scale_width")/2;this.isHorizontal?("top"==this.get("scaleAlign")?y=-b:"center"==this.get("scaleAlign")?(y=-d,y0=d):y0=b,this.target.textAlign("center"),"top"==this.get("textAlign"))?(ty=-this.get("text_space"),this.target.textBaseline("bottom")):(ty=this.get("text_space"),this.target.textBaseline("top")):("left"==this.get("scaleAlign")?a=-b:"center"==
this.get("scaleAlign")?(a=-d,x0=d):x0=b,this.target.textBaseline("middle"),"right"==this.get("textAlign"))?(this.target.textAlign("left"),tx=this.get("text_space")):(this.target.textAlign("right"),tx=-this.get("text_space"));this.target.textFont(this.get("fontStyle"));for(b=0;b<this.items.length;b++)this.get("scale_line_enable")&&this.target.line(this.items[b].x+a,this.items[b].y+y,this.items[b].x+x0,this.items[b].y+y0,this.get("scale_size"),this.get("scale_color"),!1),this.target.fillText(this.items[b].text,
this.items[b].textX+tx,this.items[b].textY+ty,!1,this.get("color"),"lr",this.get("text_height"))},doConfig:function(){a.superclass.doConfig.call(this);Jidea.Assert.isNumber(this.get("distance"),"distance");var c=0<this.get("labels").length;c?this.number=this.get("labels").length-1:(Jidea.Assert.isTrue(Jidea.isNumber(this.get("max_scale"))||Jidea.isNumber(this.get("end_scale")),"max_scale&end_scale"),(!this.get("end_scale")||this.get("end_scale")<this.get("max_scale"))&&this.push("end_scale",Jidea.Math.ceil(this.get("max_scale"))),
this.get("start_scale")>this.get("min_scale")&&this.push("start_scale",Jidea.Math.floor(this.get("min_scale"))),this.get("scale")&&this.get("scale")<this.get("end_scale")-this.get("start_scale")&&this.push("scale_share",(this.get("end_scale")-this.get("start_scale"))/this.get("scale")),(!this.get("scale")||this.get("scale")>this.get("end_scale")-this.get("start_scale"))&&this.push("scale",(this.get("end_scale")-this.get("start_scale"))/this.get("scale_share")),this.number=this.get("scale_share"));
this.push("distanceOne",this.get("valid_distance")/this.number);var b,d=0,e,f;this.target.textFont(this.get("fontStyle"));this.push("which",this.get("which").toLowerCase());this.isHorizontal="h"==this.get("which");for(var g=0;g<=this.number;g++)b=c?this.get("labels")[g]:(this.get("scale")*g+this.get("start_scale")).toFixed(this.get("decimalsnum")),e=this.isHorizontal?this.get("valid_x")+g*this.get("distanceOne"):this.x,f=this.isHorizontal?this.y:this.get("valid_y")+this.get("distance")-g*this.get("distanceOne"),
this.items.push(Jidea.merge({text:b,x:e,y:f,textX:e,textY:f},this.fireEvent(this,"parseText",[b,e,f,g]))),d=Math.max(d,this.target.measureText(b));this.left=this.right=this.top=this.bottom=0;this.isHorizontal?(this.top="top"==this.get("scaleAlign")?this.get("scale_width"):"center"==this.get("scaleAlign")?this.get("scale_width")/2:0,this.bottom=this.get("scale_width")-this.top,"top"==this.get("textAlign")?this.top+=this.get("text_height")+this.get("text_space"):this.bottom+=this.get("text_height")+
this.get("text_space")):(this.left="left"==this.get("scaleAlign")?this.get("scale_width"):"center"==this.get("scaleAlign")?this.get("scale_width")/2:0,this.right=this.get("scale_width")-this.left,"left"==this.get("textAlign")?this.left+=d+this.get("text_space"):this.right+=d+this.get("text_space"))}});Jidea.Coordinate2D=Jidea.extend(Jidea.Component,{configure:function(){Jidea.Coordinate2D.superclass.configure.apply(this,arguments);this.type="coordinate2d";this.configuration({sign_size:12,sign_space:5,
kedu:[],valid_width:void 0,valid_height:void 0,grid_line_width:1,grid_color:"#c4dede",gridlinesVisible:!0,kedu2grid:!0,grids:void 0,ignoreOverlap:!0,ignoreEdge:!1,gradient:!1,ylabel:"",xlabel:"",decimalsnum:0,color_factor:0.18,background_color:"#FEFEFE",alternate_color:!0,crosshair:{enable:!1},width:void 0,height:void 0,axis:{enable:!0,color:"#666666",width:1,style:""}});this.registerEvent();this.kedu=[];this.gridlines=[]},getX:function(){return this.x},getScale:function(a){for(var b=0;b<this.kedu.length;b++)if(this.kedu[b].get("position")==
a)return{start:this.kedu[b].get("start_scale"),end:this.kedu[b].get("end_scale"),distance:this.kedu[b].get("end_scale")-this.kedu[b].get("start_scale")};return{start:0,end:0,distance:0}},isEventValid:function(a){return{valid:a.offsetX>this.x&&a.offsetX<this.x+this.get("width")&&a.offsetY<this.y+this.get("height")&&a.offsetY>this.y}},doDraw:function(){this.target.rectangle(this.x,this.y,this.get("width"),this.get("height"),this.get("fill_color"),this.get("axis.enable"),this.get("axis.width"),this.get("axis.color"),
this.get("shadow"),this.get("shadow_color"),this.get("shadow_blur"),this.get("shadow_offsetx"),this.get("shadow_offsety"));if(this.get("alternate_color")){var a,b=!1,d=[0,0,0,0],e=Jidea.Math.dark(this.get("background_color"),0.04);this.get("axis.enable")&&(d=this.get("axis.width"))}for(var f=0;f<this.gridlines.length;f++)this.gridlines[f].x1=Math.round(this.gridlines[f].x1),this.gridlines[f].y1=Math.round(this.gridlines[f].y1),this.gridlines[f].x2=Math.round(this.gridlines[f].x2),this.gridlines[f].y2=
Math.round(this.gridlines[f].y2),this.get("alternate_color")&&this.gridlines[f].y1==this.gridlines[f].y2&&(b&&this.target.rectangle(this.gridlines[f].x1+d[3],this.gridlines[f].y1+this.get("grid_line_width"),this.gridlines[f].x2-this.gridlines[f].x1-d[3]-d[1],a-this.gridlines[f].y1-this.get("grid_line_width"),e),a=this.gridlines[f].y1,b=!b),this.target.line(this.gridlines[f].x1,this.gridlines[f].y1,this.gridlines[f].x2,this.gridlines[f].y2,this.get("grid_line_width"),this.get("grid_color"));for(f=
0;f<this.kedu.length;f++)this.kedu[f].draw()},doConfig:function(){Jidea.Coordinate2D.superclass.doConfig.call(this);Jidea.Assert.isNumber(this.get("width"),"width");Jidea.Assert.isNumber(this.get("height"),"height");this.on("mouseover",function(){this.target.css("cursor","default")});(!this.get("valid_width")||this.get("valid_width")>this.get("width"))&&this.push("valid_width",this.get("width"));(!this.get("valid_height")||this.get("valid_height")>this.get("height"))&&this.push("valid_height",this.get("height"));
this.get("gradient")&&Jidea.isString(this.get("background_color"))&&this.push("fill_color",this.target.avgLinearGradient(this.x,this.y,this.x,this.y+this.get("height"),[this.get("dark_color"),this.get("light_color")]));if(this.get("axis.enable")){var c=this.get("axis.width");Jidea.isArray(c)||this.push("axis.width",[c,c,c,c])}this.get("crosshair.enable")&&(this.push("crosshair.wrap",this.container.shell),this.push("crosshair.height",this.get("height")),this.push("crosshair.width",this.get("width")),
this.push("crosshair.top",this.y),this.push("crosshair.left",this.x),this.crosshair=new Jidea.CrossHair(this.get("crosshair"),this));var b,d,e=!(!this.get("gridlinesVisible")||!this.get("grids")),c=e&&!!this.get("grids.horizontal"),f=e&&!!this.get("grids.vertical"),g=this.get("height"),j=this.get("width"),l=this.get("valid_width"),m=this.get("valid_height"),n=this.get("gridlinesVisible")&&this.get("kedu2grid")&&!(c&&f),s=(j-l)/2;sh=(g-m)/2;axis=this.get("axis.width");Jidea.isArray(this.get("kedu"))||
(Jidea.isObject(this.get("kedu"))?this.push("kedu",[this.get("kedu")]):this.push("kedu",[]));for(e=0;e<this.get("kedu").length;e++)b=this.get("kedu")[e],d=(d=b.position)||"left",d=d.toLowerCase(),b.originx=this.x,b.originy=this.y,b.valid_x=this.x+s,b.valid_y=this.y+sh,b.position=d,"top"==d?(b.which="h",b.distance=j,b.valid_distance=l):"right"==d?(b.which="v",b.distance=g,b.valid_distance=m,b.originx+=j,b.valid_x+=l):"bottom"==d?(b.which="h",b.distance=j,b.valid_distance=l,b.originy+=g,b.valid_y+=
m):(b.which="v",b.distance=g,b.valid_distance=m),this.kedu.push(new a(b,this.container));this.push("ignoreOverlap",this.get("ignoreOverlap")&&this.get("axis.enable")||this.get("ignoreEdge"));if(this.get("ignoreOverlap"))var h=this.get("ignoreEdge")?function(a,b,c){return a=="v"?c==this.y||c==this.y+g:b==this.x||b==this.x+a}:function(a,b,c){return a=="v"?c==this.y&&axis[0]>0||c==this.y+g&&axis[2]>0:b==this.x&&axis[3]>0||b==this.x+j&&axis[1]>0};if(n)for(e=0;e<this.kedu.length;e++)if(b=this.kedu[e],
!Jidea.isFalse(b.get("kedu2grid"))&&!(c&&"v"==b.get("which")||f&&"h"==b.get("which"))){d=l=0;"top"==b.get("position")?l=g:"right"==b.get("position")?d=-j:"bottom"==b.get("position")?l=-g:d=j;for(m=0;m<b.items.length;m++)(!this.get("ignoreOverlap")||!h.call(this,b.get("which"),b.items[m].x,b.items[m].y))&&this.gridlines.push({x1:b.items[m].x,y1:b.items[m].y,x2:b.items[m].x+d,y2:b.items[m].y+l})}if(f){e=this.get("grids.vertical");Jidea.Assert.gtZero(e.value,"value");f=j/e.value;b=e.value;"given_value"==
e.way&&(b=f,f=e.value,f=f>j?j:f);for(e=0;e<=b;e++)(!this.get("ignoreOverlap")||!h.call(this,"h",this.x+e*f,this.y))&&this.gridlines.push({x1:this.x+e*f,y1:this.y,x2:this.x+e*f,y2:this.y+g})}if(c){c=this.get("grids.horizontal");Jidea.Assert.gtZero(c.value,"value");f=g/c.value;b=c.value;"given_value"==c.way&&(b=f,f=c.value,f=f>g?g:f);for(e=0;e<=b;e++)(!this.get("ignoreOverlap")||!h.call(this,"v",this.x,this.y+e*f))&&this.gridlines.push({x1:this.x,y1:this.y+e*f,x2:this.x+j,y2:this.y+e*f})}}});Jidea.Coordinate3D=
Jidea.extend(Jidea.Coordinate2D,{configure:function(){Jidea.Coordinate3D.superclass.configure.apply(this,arguments);this.type="coordinate3d";this.dimension=Jidea.Math._3D;this.configuration({xAngle:60,yAngle:20,xAngle_:void 0,yAngle_:void 0,zHeight:0,pedestal_height:22,board_deep:20,gradient:!0,ignoreEdge:!0,alternate_color:!1,shadow:!0,shadow_blur:4,grid_color:"#7a8d44",background_color:"#d6dbd2",shadow_offsetx:4,shadow_offsety:2,wall_style:[],magical_shell:[],axis:{enable:!1}})},box:function(){6==
this.get("magical_shell").length&&this.target.cube3D(this.x,this.y+this.get("height"),this.get("xAngle_"),this.get("yAngle_"),!1,this.get("width"),this.get("height"),this.get("zHeight"),this.get("axis.enable"),this.get("axis.width"),this.get("axis.color"),this.get("magical_shell"))},doDraw:function(){this.target.cube3D(this.x,this.y+this.get("height")+this.get("pedestal_height"),this.get("xAngle_"),this.get("yAngle_"),!1,this.get("width"),this.get("pedestal_height"),3*this.get("zHeight")/2,this.get("axis.enable"),
this.get("axis.width"),this.get("axis.color"),this.get("bottom_style"));this.target.cube3D(this.x+this.get("board_deep")*this.get("xAngle_"),this.y+this.get("height")-this.get("board_deep")*this.get("yAngle_"),this.get("xAngle_"),this.get("yAngle_"),!1,this.get("width"),this.get("height"),this.get("zHeight"),this.get("axis.enable"),this.get("axis.width"),this.get("axis.color"),this.get("board_style"));this.target.cube3D(this.x,this.y+this.get("height"),this.get("xAngle_"),this.get("yAngle_"),!1,this.get("width"),
this.get("height"),this.get("zHeight"),this.get("axis.enable"),this.get("axis.width"),this.get("axis.color"),this.get("wall_style"));for(var a=this.get("xAngle_")*this.get("zHeight"),b=this.get("yAngle_")*this.get("zHeight"),d=0;d<this.gridlines.length;d++)this.target.line(this.gridlines[d].x1,this.gridlines[d].y1,this.gridlines[d].x1+a,this.gridlines[d].y1-b,this.get("grid_line_width"),this.get("grid_color")),this.target.line(this.gridlines[d].x1+a,this.gridlines[d].y1-b,this.gridlines[d].x2+a,this.gridlines[d].y2-
b,this.get("grid_line_width"),this.get("grid_color"));for(d=0;d<this.kedu.length;d++)this.kedu[d].draw()},doConfig:function(){Jidea.Coordinate3D.superclass.doConfig.call(this);var a=this.get("background_color"),b=Jidea.Math.dark(a,0.1),d=this.get("height"),e=this.get("width");3>this.get("wall_style").length&&this.push("wall_style",[{color:b},{color:a},{color:b}]);if(3==this.get("magical_shell").length){if(this.get("gradient")){var f=this.get("magical_shell")[2].color,g=Jidea.Math.light(f,0.3);this.get("magical_shell")[2].color=
this.target.avgLinearGradient(this.x,this.y,this.x+e,this.y,[f,g,g,g,g,f]);f=this.get("magical_shell")[1].color;Jidea.Math.light(f,0.3);this.get("magical_shell")[1].color=this.target.avgLinearGradient(this.x,this.y,this.x,this.y-this.get("yAngle_")*this.get("zHeight"),[f,Jidea.Math.light(f,0.3)])}this.push("magical_shell",[!1,!1,!1].concat(this.get("magical_shell")))}this.magic=6==this.get("magical_shell").length;f=this.get("wall_style")[0].color;this.push("bottom_style",[{color:a,shadow:this.get("shadow"),
shadowColor:this.get("shadow_color"),blur:this.get("shadow_blur"),sx:this.get("shadow_offsetx"),sy:this.get("shadow_offsety")},!1,!1,{color:f},{color:f},{color:f}]);this.push("board_style",[!1,!1,!1,{color:f},{color:a},!1]);if(this.get("gradient")){var g=this.get("xAngle_")*this.get("zHeight"),j=this.get("yAngle_")*this.get("zHeight"),l=this.get("wall_style"),m=this.get("bottom_style");Jidea.isString(l[0].color)&&(l[0].color=this.target.avgLinearGradient(this.x,this.y+d,this.x+e,this.y+d,[f,this.get("dark_color")]));
Jidea.isString(l[1].color)&&(l[1].color=this.target.avgLinearGradient(this.x+g,this.y-j,this.x+g,this.y+d-j,[this.get("dark_color"),this.get("light_color")]));Jidea.isString(l[2].color)&&(l[2].color=this.target.avgLinearGradient(this.x,this.y,this.x,this.y+d,[a,this.get("dark_color")]));m[5].color=this.target.avgLinearGradient(this.x,this.y+d,this.x,this.y+d+this.get("pedestal_height"),[a,b])}}})})();
Jidea.Rectangle=Jidea.extend(Jidea.Component,{configure:function(){Jidea.Rectangle.superclass.configure.apply(this,arguments);this.type="rectangle";this.configuration({width:0,height:0,value_space:10,value:"",tipAlign:"top",valueAlign:"top",textAlign:"center",textBaseline:"top",color_factor:0.16,shadow:!0,shadow_blur:3,shadow_offsetx:0,shadow_offsety:-1});this.registerEvent()},doDraw:function(){this.drawRectangle();this.drawValue()},doConfig:function(){Jidea.Rectangle.superclass.doConfig.call(this);
Jidea.Assert.gtZero(this.get("width"),"width");this.width=this.get("width");this.height=this.get("height");this.centerX=this.x+this.width/2;this.centerY=this.y+this.height/2;this.get("tip.enable")&&("follow"!=this.get("tip.showType")&&this.push("tip.invokeOffsetDynamic",!1),this.tip=new Jidea.Tip(this.get("tip"),this));this.variable.event.highlight=!1;this.on("mouseover",function(a){this.variable.event.highlight=true;this.redraw();this.variable.event.highlight=false;this.container.fireEvent(this.container,
"rectangleover",[a,this])}).on("mouseout",function(a){this.variable.event.highlight=false;this.redraw();this.container.fireEvent(this.container,"rectanglemouseout",[a,this])}).on("click",function(a){this.container.fireEvent(this.container,"rectangleclick",[a,this])});this.on("beforedraw",function(){this.variable.event.highlight?this.push("fill_color",this.get("light_color")):this.push("fill_color",this.get("background_color"));return true})}});
Jidea.Rectangle2D=Jidea.extend(Jidea.Rectangle,{configure:function(){Jidea.Rectangle2D.superclass.configure.apply(this,arguments);this.type="rectangle2d";this.configuration({shadow_offsety:-2,border:{color:"#BCBCBC"}});this.registerEvent()},drawValue:function(){""!=this.get("value")&&this.target.text(this.get("value"),this.get("value_x"),this.get("value_y"),!1,this.get("color"),this.get("textAlign"),this.get("textBaseline"),this.get("fontStyle"))},drawRectangle:function(){this.target.rectangle(this.get("originx"),
this.get("originy"),this.get("width"),this.get("height"),this.get("fill_color"),this.get("border.enable"),this.get("border.width"),this.get("border.color"),this.get("shadow"),this.get("shadow_color"),this.get("shadow_blur"),this.get("shadow_offsetx"),this.get("shadow_offsety"))},isEventValid:function(a){return{valid:a.offsetX>this.x&&a.offsetX<this.x+this.width&&a.offsetY<this.y+this.height&&a.offsetY>this.y}},tipInvoke:function(){var a=this;return function(c,b){return{left:a.tipX(c,b),top:a.tipY(c,
b)}}},doConfig:function(){Jidea.Rectangle2D.superclass.doConfig.call(this);"left"==this.get("tipAlign")||"right"==this.get("tipAlign")?this.tipY=function(a,c){return this.centerY-c/2}:this.tipX=function(a){return this.centerX-a/2};"left"==this.get("tipAlign")?this.tipX=function(a){return this.x-this.get("value_space")-a}:"right"==this.get("tipAlign")?this.tipX=function(){return this.x+this.width+this.get("value_space")}:this.tipY="bottom"==this.get("tipAlign")?function(){return this.y+this.height+
3}:function(a,c){return this.y-c-3};"left"==this.get("valueAlign")?(this.push("textAlign","right"),this.push("value_x",this.x-this.get("value_space")),this.push("value_y",this.centerY)):"right"==this.get("valueAlign")?(this.push("textAlign","left"),this.push("textBaseline","middle"),this.push("value_x",this.x+this.width+this.get("value_space")),this.push("value_y",this.centerY)):"bottom"==this.get("valueAlign")?(this.push("value_x",this.centerX),this.push("value_y",this.y+this.height+this.get("value_space")),
this.push("textBaseline","top")):(this.push("value_x",this.centerX),this.push("value_y",this.y-this.get("value_space")),this.push("textBaseline","bottom"));this.valueX=this.get("value_x");this.valueY=this.get("value_y")}});
Jidea.Rectangle3D=Jidea.extend(Jidea.Rectangle,{configure:function(){Jidea.Rectangle3D.superclass.configure.apply(this,arguments);this.type="rectangle3d";this.dimension=Jidea.Math._3D;this.configuration({zHeight:void 0,xAngle:60,yAngle:20,xAngle_:void 0,yAngle_:void 0,magic:!1,shadow_blur:4,shadow_offsetx:2});this.registerEvent("beforepop","analysing","drawRow")},drawValue:function(){""!=this.get("value")&&this.target.text(this.get("value"),this.centerX,this.topCenterY+this.get("value_space"),!1,
this.get("color"),"center","top",this.get("fontStyle"))},drawRectangle:function(){this.target.cube(this.get("originx"),this.get("originy"),this.get("xAngle_"),this.get("yAngle_"),this.get("width"),this.get("height"),this.get("zHeight"),this.get("fill_color"),this.get("border.enable"),this.get("border.width"),this.get("light_color"),this.get("shadow"),this.get("shadow_color"),this.get("shadow_blur"),this.get("shadow_offsetx"),this.get("shadow_offsety"))},isEventValid:function(a){return{valid:!this.preventEvent&&
a.offsetX>this.x&&a.offsetX<this.x+this.get("width")&&a.offsetY<this.y+this.get("height")&&a.offsetY>this.y}},tipInvoke:function(){var a=this;return function(c,b){return{left:a.topCenterX-c/2,top:a.topCenterY-b}}},doConfig:function(){Jidea.Rectangle3D.superclass.doConfig.call(this);this.get("zHeight")||this.push("zHeight",this.get("width"));this.centerX=this.x+this.get("width")/2;this.topCenterX=this.x+(this.get("width")+this.get("width")*this.get("xAngle_"))/2;this.topCenterY=this.y-this.get("width")*
this.get("yAngle_")/2;this.preventEvent=this.get("magic")}});
Jidea.Sector=Jidea.extend(Jidea.Component,{configure:function(){Jidea.Sector.superclass.configure.apply(this,arguments);this.type="sector";this.configuration({counterclockwise:!1,startAngle:0,middleAngle:0,endAngle:0,totalAngle:0,pop_event:"click",expand:!1,pop_animate:!1,mutex:!1,increment:void 0,shadow:!0,gradient:!0,label:{enable:!0,linelength:void 0},tip:{enable:!1,border:{width:2}}});this.registerEvent();this.tip=this.label=null},expand:function(){this.expanded=!0},collapse:function(){this.expanded=
!1},toggle:function(){this.expanded=!this.expanded},drawLabel:function(){this.get("label.enable")&&this.label.draw({highlight:this.highlighted,invoke:this.labelInvoke(this.x,this.y)})},doDraw:function(){this.drawSector();this.drawLabel()},doConfig:function(){Jidea.Sector.superclass.doConfig.call(this);this.push("totalAngle",this.get("endAngle")-this.get("startAngle"));this.push("label.scolor",this.get("background_color"));this.expanded=this.get("expand");var a=this;this.get("tip.enable")&&("follow"!=
this.get("tip.showType")&&this.push("tip.invokeOffsetDynamic",!1),this.tip=new Jidea.Tip(this.get("tip"),this));this.variable.event.poped=!1;this.on(this.get("pop_event"),function(){a.variable.event.poped=true;a.toggle();a.redraw();a.variable.event.poped=false});this.on("beforedraw",function(){this.x=this.get("originx");this.y=this.get("originy");if(this.expanded)if(this.get("mutex")&&!a.variable.event.poped)this.expanded=false;else{this.x=this.x+this.get("increment")*Math.cos(2*Math.PI-this.get("middleAngle"));
this.y=this.y-this.get("increment")*Math.sin(2*Math.PI-this.get("middleAngle"))}return true})}});
Jidea.Sector2D=Jidea.extend(Jidea.Sector,{configure:function(){Jidea.Sector2D.superclass.configure.apply(this,arguments);this.type="sector2d";this.configuration({radius:0});this.registerEvent("beforepop","analysing","drawRow")},drawSector:function(){this.target.sector(this.x,this.y,this.r,this.get("startAngle"),this.get("endAngle"),this.get("fill_color"),this.get("border.enable"),this.get("border.width"),this.get("border.color"),this.get("shadow"),this.get("shadow_color"),this.get("shadow_blur"),
this.get("shadow_offsetx"),this.get("shadow_offsety"),this.get("counterclockwise"))},isEventValid:function(a){return this.get("label.enable")&&this.label.isEventValid(a).valid?{valid:!0}:this.r<Jidea.Math.distanceP2P(this.x,this.y,a.offsetX,a.offsetY)?{valid:!1}:Jidea.Math.angleInRange(this.get("startAngle"),this.get("endAngle"),2*Math.PI-Jidea.Math.atanToRadian(this.x,this.y,a.offsetX,a.offsetY))?{valid:!0}:{valid:!1}},tipInvoke:function(){var a=this.get("middleAngle"),c=Jidea.Math.quadrantd(a),
b=this,d=this.get("radius");return function(e,f){var g=Jidea.Math.pToPoint(b.x,b.y,a,0.8*d);return{left:2<=c&&3>=c?g.x-e:g.x,top:3<=c?g.y-f:g.y}}},labelInvoke:function(a,c){var b=this.get("middleAngle"),d=Jidea.Math.pToPoint(a,c,b,this.r+this.get("label.linelength")),e=Jidea.Math.pToPoint(a,c,b,this.r/2),f=Jidea.Math.quadrantd(b);return{origin:{x:e.x,y:e.y},lineFn:function(){this.target.line(e.x,e.y,d.x,d.y,this.get("border.width"),this.get("border.color"))},labelXY:function(){return{labelx:2<=f&&
3>=f?d.x-this.width:d.x,labely:3<=f?d.y-this.height:d.y}}}},doConfig:function(){Jidea.Sector2D.superclass.doConfig.call(this);this.r=this.get("radius");Jidea.Assert.gtZero(this.r);this.get("gradient")&&this.push("fill_color",this.target.avgRadialGradient(this.x,this.y,0,this.x,this.y,this.r,[this.get("light_color"),this.get("dark_color")]));this.get("increment")||this.push("increment",Jidea.Math.lowTo(5,this.r/8));this.get("label.enable")&&(this.get("label.linelength")||this.push("label.linelength",
Jidea.Math.lowTo(10,this.r/8)),this.label=new Jidea.Label(this.get("label"),this))}});
Jidea.Sector3D=Jidea.extend(Jidea.Sector,{configure:function(){Jidea.Sector3D.superclass.configure.apply(this,arguments);this.type="sector3d";this.dimension=Jidea.Math._3D;this.configuration({semi_major_axis:0,semi_minor_axis:0,cylinder_height:0,border:{color:"#BCBCBC"}});this.registerEvent("beforepop","analysing","drawRow")},drawSector:function(){this.target.sector3D(this.x,this.y,this.a,this.b,this.get("startAngle"),this.get("endAngle"),this.h,this.get("background_color"),this.get("border.enable"),
this.get("border.width"),this.get("border.color"),this.get("shadow"),this.get("shadow_color"),this.get("shadow_blur"),this.get("shadow_offsetx"),this.get("shadow_offsety"),this.get("counterclockwise"))},isEventValid:function(a){return this.get("label.enable")&&this.label.isEventValid(a).valid?{valid:!0}:!Jidea.Math.inEllipse(a.offsetX-this.x,a.offsetY-this.y,this.get("semi_major_axis"),this.get("semi_minor_axis"))?{valid:!1}:Jidea.Math.inRange(this.sA,this.eA,2*Math.PI-Jidea.Math.atanToRadian(this.x,
this.y,a.offsetX,a.offsetY))?{valid:!0}:{valid:!1}},p2p:function(a,c,b,d){return{x:a+this.get("semi_major_axis")*Math.cos(b)*d,y:c+this.get("semi_minor_axis")*Math.sin(b)*d}},tipInvoke:function(){var a=this.get("middleAngle"),c=Jidea.Math.quadrantd(a),b=this;return function(d,e){var f=b.p2p(b.x,b.y,a,0.6);return{left:2<=c&&3>=c?f.x-d:f.x,top:3<=c?f.y-e:f.y}}},labelInvoke:function(a,c){var b=this.get("middleAngle"),d=this.p2p(a,c,b,this.Z),e=this.p2p(a,c,b,1),f=Jidea.Math.quadrantd(b),g=this,j=this.get("counterclockwise");
return{origin:{x:e.x,y:e.y},lineFn:function(){this.target.line(e.x,e.y+g.h/2,d.x,d.y+g.h/2,4*this.get("border.width"),this.get("border.color"),j&&b<Math.PI||!j&&b>Math.PI)},labelXY:function(){return{labelx:2<=f&&3>=f?d.x-this.width:d.x,labely:3<=f?d.y-this.height+g.h/2:d.y+g.h/2}}}},doConfig:function(){Jidea.Sector3D.superclass.doConfig.call(this);Jidea.Assert.gtZero(this.get("semi_major_axis"));Jidea.Assert.gtZero(this.get("semi_minor_axis"));this.a=this.get("semi_major_axis");this.b=this.get("semi_minor_axis");
this.h=this.get("cylinder_height");this.get("increment")||this.push("increment",Jidea.Math.lowTo(5,this.a/8));this.inc=Math.PI/180;ccw=this.get("counterclockwise");var a=function(a){a=Jidea.Math.atanToRadian(0,0,this.a*Math.cos(a),ccw?-this.b*Math.sin(a):this.b*Math.sin(a));!ccw&&0!=a&&(a=2*Math.PI-a);return a};this.sA=a.call(this,this.get("startAngle"));this.eA=a.call(this,this.get("endAngle"));this.get("label.enable")&&(this.get("label.linelength")||this.push("label.linelength",Jidea.Math.lowTo(10,
this.a/8)),this.Z=this.get("label.linelength")/this.a+1,this.label=new Jidea.Label(this.get("label"),this))}});
Jidea.Pie=Jidea.extend(Jidea.Chart,{configure:function(){Jidea.Pie.superclass.configure.call(this);this.type="pie";this.configuration({radius:0,offsetAngle:0,showpercent:!0,decimalsnum:1,pop_event:"click",customize_layout:!1,counterclockwise:!1,pop_animate:!1,mutex:!1,shadow:!0,gradient:!0,shadow_blur:4,shadow_offsetx:0,shadow_offsety:0,increment:void 0,label:{enable:!0,linelength:void 0,padding:5},tip:{enable:!1,border:{width:2,radius:5}},border:{color:"#EDEDED"}});this.registerEvent("beforeSectorAnimation",
"afterSectorAnimation");this.sectors=[]},doAnimation:function(a,c){for(var b,d=0,e=this.offsetAngle,f=0;f<this.sectors.length;f++)b=this.sectors[f],this.fireEvent(this,"beforeSectorAnimation",[this,b]),d=this.animationArithmetic(a,0,b.get("totalAngle"),c),b.push("startAngle",e),b.push("endAngle",e+d),e+=d,b.drawSector(),this.fireEvent(this,"afterSectorAnimation",[this,b])},doConfig:function(){Jidea.Pie.superclass.doConfig.call(this);Jidea.Assert.gtZero(this.total,"this.total");for(var a=startAngle=
this.offsetAngle=Jidea.Math.angleToRadian(this.get("offsetAngle")),c=0;c<this.data.length;c++)a+=2*this.data[c].value/this.total*Math.PI,c==this.data.length-1&&(a=2*Math.PI+this.offsetAngle),this.data[c].startAngle=startAngle,this.data[c].endAngle=a,this.data[c].totalAngle=a-startAngle,this.data[c].middleAngle=(startAngle+a)/2,startAngle=a;(0>=this.get("radius")||this.get("radius")>this.get("minDistance")/2)&&this.push("radius",this.get("minDistance")/2);this.get("increment")||this.push("increment",
Jidea.Math.lowTo(5,this.get("radius")/8));"left"==this.get("align")?this.push("originx",this.get("radius")+this.get("l_originx")+this.get("offsetx")):"right"==this.get("align")?this.push("originx",this.get("r_originx")-this.get("radius")+this.get("offsetx")):this.push("originx",this.get("centerx")+this.get("offsetx"));this.push("originy",this.get("centery")+this.get("offsety"));this.sector_config=Jidea.clone("originx,originy,pop_event,customize_layout,counterclockwise,pop_animate,mutex,shadow_blur,shadow_offsetx,shadow_offsety,increment,gradient,color_factor,label,tip,border".split(","),
this.configurations)}});
Jidea.Pie2D=Jidea.extend(Jidea.Pie,{configure:function(){Jidea.Pie2D.superclass.configure.call(this);this.type="pie2d";this.dataType="simple";this.configuration({});this.registerEvent()},doConfig:function(){Jidea.Pie2D.superclass.doConfig.call(this);this.sector_config.radius=this.get("radius");for(var a,c,b=this.get("label.enable"),d=this.get("tip.enable"),e=0;e<this.data.length;e++)a=this.data[e].name+(this.get("showpercent")?Jidea.Math.toPercent(this.data[e].value/this.total,this.get("decimalsnum")):
""),b&&(c=this.fireEvent(this,"parseLabelText",[this.data[e],e]),this.sector_config.label.text=Jidea.isString(c)?c:a),d&&(c=this.fireEvent(this,"parseTipText",[this.data[e],e]),this.sector_config.tip.text=Jidea.isString(c)?c:a),this.sector_config.startAngle=this.data[e].startAngle,this.sector_config.middleAngle=this.data[e].middleAngle,this.sector_config.endAngle=this.data[e].endAngle,this.sector_config.background_color=this.data[e].color,this.sectors.push(new Jidea.Sector2D(this.sector_config,this));
this.pushComponent(this.sectors)}});
Jidea.Pie3D=Jidea.extend(Jidea.Pie,{configure:function(){Jidea.Pie3D.superclass.configure.apply(this,arguments);this.type="pie3d";this.dimension=Jidea.Math._3D;this.dataType="simple";this.configuration({zRotate:45,yHeight:30});this.registerEvent("beforeDrawRow","drawRow")},doConfig:function(){Jidea.Pie3D.superclass.doConfig.call(this);this.push("zRotate",Jidea.Math.between(0,90,90-this.get("zRotate")));var a,c;this.sector_config.semi_major_axis=this.get("radius");this.sector_config.semi_minor_axis=
this.get("radius")*this.get("zRotate")/90;this.sector_config.cylinder_height=this.get("yHeight")*Math.cos(Jidea.Math.angleToRadian(this.get("zRotate")));for(var b=this.get("label.enable"),d=this.get("tip.enable"),e=0;e<this.data.length;e++)a=this.data[e].name+(this.get("showpercent")?Jidea.Math.toPercent(this.data[e].value/this.total,this.get("decimalsnum")):""),b&&(c=this.fireEvent(this,"parseLabelText",[this.data[e],e]),this.sector_config.label.text=Jidea.isString(c)?c:a),d&&(c=this.fireEvent(this,
"parseTipText",[this.data[e],e]),this.sector_config.tip.text=Jidea.isString(c)?c:a),this.sector_config.startAngle=this.data[e].startAngle,this.sector_config.middleAngle=this.data[e].middleAngle,this.sector_config.endAngle=this.data[e].endAngle,this.sector_config.background_color=this.data[e].color,this.sectors.push(new Jidea.Sector3D(this.sector_config,this));this.pushComponent(this.sectors)}});
Jidea.Column=Jidea.extend(Jidea.Chart,{configure:function(){Jidea.Column.superclass.configure.call(this);this.type="column";this.configuration({coordinate:{brushsize:1},hiswidth:void 0,shadow:!0,text_space:6,keduAlign:"left",label:{padding:5},customize_layout:!1,rectangle:{}});this.registerEvent("rectangleover","rectanglemouseout","rectangleclick","parseValue","parseText","beforeRectangleAnimation","afterRectangleAnimation");this.rectangles=[];this.labels=[]},doAnimation:function(a,c){var b,d;this.coordinate.draw();
for(var e=0;e<this.rectangles.length;e++)b=this.rectangles[e],this.fireEvent(this,"beforeRectangleAnimation",[this,b]),d=Math.ceil(this.animationArithmetic(a,0,b.height,c)),b.push("originy",b.y+(b.height-d)),b.push("height",d),this.labels[e].draw(),b.drawRectangle(),this.fireEvent(this,"afterRectangleAnimation",[this,b])},doConfig:function(){Jidea.Column.superclass.doConfig.call(this);Jidea.Interface.coordinate.call(this);Jidea.applyIf(this.get("rectangle"),Jidea.clone(["label","tip","border"],this.configurations));
this.on("rectangleover",function(){this.target.css("cursor","pointer")}).on("rectanglemouseout",function(){this.target.css("cursor","default")})}});
Jidea.Column2D=Jidea.extend(Jidea.Column,{configure:function(){Jidea.Column2D.superclass.configure.call(this);this.type="column2d";this.dataType="simple";this.configuration({coordinate:{grid_color:"#c4dede",background_color:"#FEFEFE"}})},doConfig:function(){Jidea.Column2D.superclass.doConfig.call(this);this.get("hiswidth")||this.push("hiswidth",this.get("coordinate.width")/(2*this.data.length+1));this.get("hiswidth")*this.data.length>this.get("coordinate.width")&&this.push("hiswidth",this.get("coordinate.width")/
this.data.length/1.2);this.push("hispace",(this.get("coordinate.width")-this.get("hiswidth")*this.data.length)/(this.data.length+1));this.coordinate=Jidea.Interface.coordinate2d.call(this);this.pushComponent(this.coordinate,!0);var a=this.coordinate.getScale(this.get("keduAlign")),c=this.get("coordinate.brushsize"),b=this.get("coordinate.height"),d=this.get("label.enable"),e=this.get("tip.enable"),f=this.get("hiswidth")+this.get("hispace"),g,j,l;this.push("rectangle.width",this.get("hiswidth"));for(var m=
0;m<this.data.length;m++)g=this.data[m].name+":"+this.data[m].value,l=(this.data[m].value-a.start)*b/a.distance,d&&(j=this.fireEvent(this,"parseLabelText",[this.data[m],m]),this.push("rectangle.label.text",Jidea.isString(j)?j:g)),e&&(j=this.fireEvent(this,"parseTipText",[this.data[m],m]),this.push("rectangle.tip.text",Jidea.isString(j)?j:g)),g=this.fireEvent(this,"parseText",[this.data[m],m]),j=this.fireEvent(this,"parseValue",[this.data[m],m]),g=Jidea.isString(g)?g:this.data[m].name,j=Jidea.isString(j)?
j:this.data[m].value,this.push("rectangle.originx",this.x+this.get("hispace")+m*f),this.push("rectangle.originy",this.get("originy")+b-l-c),this.push("rectangle.value",j),this.push("rectangle.height",l),this.push("rectangle.background_color",this.data[m].color),this.push("rectangle.id",m),this.rectangles.push(new Jidea.Rectangle2D(this.get("rectangle"),this)),this.labels.push(new Jidea.Text({id:m,text:g,originx:this.x+this.get("hispace")+f*m+this.get("hiswidth")/2,originy:this.y+b+this.get("text_space")},
this));this.pushComponent(this.labels);this.pushComponent(this.rectangles)}});
Jidea.Column3D=Jidea.extend(Jidea.Column,{configure:function(){Jidea.Column3D.superclass.configure.call(this);this.type="column3d";this.dataType="simple";this.dimension=Jidea.Math._3D;this.configuration({xAngle:60,yAngle:20,zScale:1,bottom_scale:1.4})},doConfig:function(){Jidea.Column3D.superclass.doConfig.call(this);1>this.get("bottom_scale")&&this.push("bottom_scale",1);this.get("hiswidth")||this.push("hiswidth",this.get("coordinate.width")/(2*this.data.length+1));this.get("hiswidth")*this.data.length>
this.get("coordinate.width")&&this.push("hiswidth",this.get("coordinate.width")/this.data.length/1.2);this.push("zHeight",this.get("hiswidth")*this.get("zScale"));this.push("hispace",(this.get("coordinate.width")-this.get("hiswidth")*this.data.length)/(this.data.length+1));this.push("coordinate.xAngle_",this.get("xAngle_"));this.push("coordinate.yAngle_",this.get("yAngle_"));this.push("coordinate.zHeight",this.get("zHeight")*this.get("bottom_scale"));this.coordinate=Jidea.Interface.coordinate3d.call(this);
this.pushComponent(this.coordinate,!0);var a=this.coordinate,c=a.getScale(this.get("keduAlign")),b=this.get("label.enable"),d=this.get("tip.enable"),e=this.get("zHeight")*(this.get("bottom_scale")-1)/2*this.get("yAngle_"),f,g,j,l=this.get("hiswidth")+this.get("hispace"),m=this.get("coordinate.height");this.push("rectangle.xAngle_",this.get("xAngle_"));this.push("rectangle.yAngle_",this.get("yAngle_"));this.push("rectangle.width",this.get("hiswidth"));this.push("rectangle.magic",a.magic);for(var n=
0;n<this.data.length;n++)f=this.data[n].name+":"+this.data[n].value,j=(this.data[n].value-c.start)*m/c.distance,b&&(g=this.fireEvent(this,"parseLabelText",[this.data[n],n]),this.push("rectangle.label.text",Jidea.isString(g)?g:f)),d&&(g=this.fireEvent(this,"parseTipText",[this.data[n],n]),this.push("rectangle.tip.text",Jidea.isString(g)?g:f)),f=this.fireEvent(this,"parseText",[this.data[n],n]),g=this.fireEvent(this,"parseValue",[this.data[n],n]),f=Jidea.isString(f)?f:this.data[n].name,g=Jidea.isString(g)?
g:this.data[n].value,this.push("rectangle.originx",this.x+this.get("hispace")+n*l),this.push("rectangle.originy",this.y+(m-j)-e),this.push("rectangle.text",f),this.push("rectangle.value",g),this.push("rectangle.height",j),this.push("rectangle.background_color",this.data[n].color),this.push("rectangle.id",n),this.rectangles.push(new Jidea.Rectangle3D(this.get("rectangle"),this)),this.labels.push(new Jidea.Text({id:n,text:f,originx:this.x+this.get("hispace")+l*n+this.get("hiswidth")/2,originy:this.y+
m+this.get("text_space")},this));this.pushComponent(this.labels);this.pushComponent(this.rectangles);a.magic&&this.pushComponent(new Jidea.Custom({drawFn:function(){a.box()}},this))}});
Jidea.ColumnMulti2D=Jidea.extend(Jidea.Column,{configure:function(){Jidea.ColumnMulti2D.superclass.configure.call(this);this.type="columnmulti2d";this.dataType="complex";this.configuration({});this.columns=[]},doAnimation:function(a,c){var b,d;this.coordinate.draw();for(var e=0;e<this.labels.length;e++)this.labels[e].draw();for(e=0;e<this.rectangles.length;e++)b=this.rectangles[e],this.fireEvent(this,"beforeRectangleAnimation",[this,b]),d=Math.ceil(this.animationArithmetic(a,0,b.height,c)),b.push("originy",
b.y+(b.height-d)),b.push("height",d),b.drawRectangle(),this.fireEvent(this,"afterRectangleAnimation",[this,b])},doConfig:function(){Jidea.ColumnMulti2D.superclass.doConfig.call(this);var a=this.columnKeys.length*this.data.length;this.get("hiswidth")||this.push("hiswidth",this.get("coordinate.width")/(this.columnKeys.length+1+a));this.get("hiswidth")*a>this.get("coordinate.width")&&this.push("hiswidth",this.get("coordinate.width")/a/1.2);this.push("hispace",(this.get("coordinate.width")-this.get("hiswidth")*
a)/(this.columnKeys.length+1));this.coordinate=Jidea.Interface.coordinate2d.call(this);this.pushComponent(this.coordinate,!0);var a=this.coordinate.getScale(this.get("keduAlign")),c=this.get("coordinate.brushsize"),b=this.get("coordinate.height"),d=this.get("label.enable"),e=this.get("tip.enable"),f=this.data.length*this.get("hiswidth")+this.get("hispace"),g,j,l,m,n;this.push("rectangle.width",this.get("hiswidth"));for(var s=0;s<this.columns.length;s++){g=this.columns[s].item;n=this.fireEvent(this,
"parseText",[this.columns[s],s]);n=Jidea.isString(n)?n:this.columns[s].name;for(var h=0;h<g.length;h++)m=(g[h].value-a.start)*b/a.distance,j=g[h].name+":"+g[h].value,d&&(l=this.fireEvent(this,"parseLabelText",[g[h],s]),this.push("rectangle.label.text",Jidea.isString(l)?l:j)),e&&(l=this.fireEvent(this,"parseTipText",[g[h],s]),this.push("rectangle.tip.text",Jidea.isString(l)?l:j)),j=this.fireEvent(this,"parseValue",[g[h],s]),j=Jidea.isString(j)?j:g[h].value,this.push("rectangle.originx",this.x+this.get("hispace")+
h*this.get("hiswidth")+s*f),this.push("rectangle.originy",this.get("originy")+b-m-c),this.push("rectangle.value",j),this.push("rectangle.height",m),this.push("rectangle.background_color",g[h].color),this.push("rectangle.id",s+"-"+h),this.rectangles.push(new Jidea.Rectangle2D(this.get("rectangle"),this));this.labels.push(new Jidea.Text({id:s,text:n,originx:this.x+0.5*this.get("hispace")+(s+0.5)*f,originy:this.get("originy")+b+this.get("text_space")},this))}this.pushComponent(this.labels);this.pushComponent(this.rectangles)}});
Jidea.Bar=Jidea.extend(Jidea.Column,{configure:function(){Jidea.Bar.superclass.configure.call(this);this.type="bar";this.configuration({keduAlign:"bottom"})},doAnimation:function(a,c){var b;this.coordinate.draw();for(var d=0;d<this.rectangles.length;d++)b=this.rectangles[d],this.fireEvent(this,"beforeRectangleAnimation",[this,b]),b.push("width",Math.ceil(this.animationArithmetic(a,0,b.width,c))),this.labels[d].draw(),b.drawRectangle(),this.fireEvent(this,"afterRectangleAnimation",[this,b])},doConfig:function(){Jidea.Bar.superclass.doConfig.call(this)}});
Jidea.Bar2D=Jidea.extend(Jidea.Bar,{configure:function(){Jidea.Bar2D.superclass.configure.call(this);this.type="bar2d";this.dataType="simple";this.configuration({coordinate:{grid_color:"#CDCDCD",background_color:"#FEFEFE"}})},doConfig:function(){Jidea.Bar2D.superclass.doConfig.call(this);this.get("barheight")||this.push("barheight",this.get("coordinate.height")/(2*this.data.length+1));this.get("barheight")*this.data.length>this.get("coordinate.height")&&this.push("barheight",this.get("coordinate.height")/
this.data.length/1.2);this.push("barspace",(this.get("coordinate.height")-this.get("barheight")*this.data.length)/(this.data.length+1));this.coordinate=Jidea.Interface.coordinate2d.call(this);this.pushComponent(this.coordinate,!0);var a=this.coordinate.getScale(this.get("keduAlign")),c=this.get("coordinate.width"),b=this.get("label.enable"),d=this.get("tip.enable"),e=this.get("barheight")+this.get("barspace"),f,g,j;this.push("rectangle.height",this.get("barheight"));this.push("rectangle.valueAlign",
"right");this.push("rectangle.tipAlign","right");this.push("rectangle.originx",this.x+this.get("coordinate.brushsize"));for(var l=0;l<this.data.length;l++)f=this.data[l].name+":"+this.data[l].value,j=(this.data[l].value-a.start)*c/a.distance,b&&(g=this.fireEvent(this,"parseLabelText",[this.data[l],l]),this.push("rectangle.label.text",Jidea.isString(g)?g:f)),d&&(g=this.fireEvent(this,"parseTipText",[this.data[l],l]),this.push("rectangle.tip.text",Jidea.isString(g)?g:f)),f=this.fireEvent(this,"parseText",
[this.data[l],l]),g=this.fireEvent(this,"parseValue",[this.data[l],l]),f=Jidea.isString(f)?f:this.data[l].name,g=Jidea.isString(g)?g:this.data[l].value,this.push("rectangle.originy",this.y+this.get("barspace")+l*e),this.push("rectangle.value",g),this.push("rectangle.width",j),this.push("rectangle.background_color",this.data[l].color),this.push("rectangle.id",l),this.rectangles.push(new Jidea.Rectangle2D(this.get("rectangle"),this)),this.labels.push(new Jidea.Text({id:l,textAlign:"right",textBaseline:"middle",
text:f,originx:this.x-this.get("text_space"),originy:this.y+this.get("barspace")+l*e+this.get("barheight")/2},this));this.pushComponent(this.labels);this.pushComponent(this.rectangles)}});
Jidea.BarMulti2D=Jidea.extend(Jidea.Bar,{configure:function(){Jidea.BarMulti2D.superclass.configure.call(this);this.type="barmulti2d";this.dataType="complex";this.configuration({});this.columns=[]},doAnimation:function(a,c){var b,d;this.coordinate.draw();for(var e=0;e<this.labels.length;e++)this.labels[e].draw();for(e=0;e<this.rectangles.length;e++)b=this.rectangles[e],this.fireEvent(this,"beforeRectangleAnimation",[this,b]),d=Math.ceil(this.animationArithmetic(a,0,b.height,c)),b.push("originy",b.y+
(b.height-d)),b.push("height",d),b.drawRectangle(),this.fireEvent(this,"afterRectangleAnimation",[this,b])},doConfig:function(){Jidea.BarMulti2D.superclass.doConfig.call(this);var a=this.columnKeys.length*this.data.length;this.push("barspace",(this.get("coordinate.width")-this.get("barheight")*a)/(this.columnKeys.length+1));this.get("barheight")||this.push("barheight",this.get("coordinate.height")/(this.columnKeys.length+1+a));this.get("barheight")*this.data.length>this.get("coordinate.height")&&
this.push("barheight",this.get("coordinate.height")/this.data.length/1.2);this.push("barspace",(this.get("coordinate.height")-this.get("barheight")*a)/(this.columnKeys.length+1));this.coordinate=Jidea.Interface.coordinate2d.call(this);this.pushComponent(this.coordinate,!0);a=this.coordinate.getScale(this.get("keduAlign"));this.get("coordinate.brushsize");var c=this.get("coordinate.width"),b=this.get("label.enable"),d=this.get("tip.enable"),e=this.data.length*this.get("barheight")+this.get("barspace"),
f,g,j,l,m;this.push("rectangle.height",this.get("barheight"));this.push("rectangle.originx",this.x+this.get("coordinate.brushsize"));this.push("rectangle.valueAlign","right");this.push("rectangle.tipAlign","right");for(var n=0;n<this.columns.length;n++){f=this.columns[n].item;m=this.fireEvent(this,"parseText",[this.columns[n],n]);m=Jidea.isString(m)?m:this.columns[n].name;for(var s=0;s<f.length;s++)l=(f[s].value-a.start)*c/a.distance,g=f[s].name+":"+f[s].value,b&&(j=this.fireEvent(this,"parseLabelText",
[f[s],n]),this.push("rectangle.label.text",Jidea.isString(j)?j:g)),d&&(j=this.fireEvent(this,"parseTipText",[f[s],n]),this.push("rectangle.tip.text",Jidea.isString(j)?j:g)),g=this.fireEvent(this,"parseValue",[f[s],n]),g=Jidea.isString(g)?g:f[s].value,this.push("rectangle.originy",this.y+this.get("barspace")+s*this.get("barheight")+n*e),this.push("rectangle.value",g),this.push("rectangle.width",l),this.push("rectangle.background_color",f[s].color),this.push("rectangle.id",n+"-"+s),this.rectangles.push(new Jidea.Rectangle2D(this.get("rectangle"),
this));this.labels.push(new Jidea.Text({id:n,text:m,textAlign:"right",textBaseline:"middle",originx:this.x-this.get("text_space"),originy:this.y+0.5*this.get("barspace")+(n+0.5)*e},this))}this.pushComponent(this.labels);this.pushComponent(this.rectangles)}});
Jidea.LineSegment=Jidea.extend(Jidea.Component,{configure:function(){Jidea.LineSegment.superclass.configure.apply(this,arguments);this.type="linesegment";this.configuration({intersection:!0,label:!1,point_style:"round",point_hollow:!0,point_size:3,points:[],keep_with_coordinate:!1,shadow:!0,shadow_blur:1,shadow_offsetx:0,shadow_offsety:1,spacing:0,coordinate:null,event_range_x:0,limit_y:!1,tip_offset:2,event_range_y:0,area:!1,area_opacity:0.4,tip:{enable:!1,border:{width:2}}});this.tip=this.label=
null},drawLabel:function(){if(this.get("intersection")&&this.get("label"))for(var a=0;a<this.points.length;a++)this.target.textStyle("center","bottom",Jidea.getFont(this.get("fontweight"),this.get("fontsize"),this.get("font"))),this.target.fillText(this.points[a].value,this.x+this.points[a].x,this.y-this.points[a].y-3*this.get("point_size")/2,!1,this.get("background_color"),"lr",16)},drawLineSegment:function(){this.target.shadowOn(this.get("shadow"),this.get("shadow_color"),this.get("shadow_blur"),
this.get("shadow_offsetx"),this.get("shadow_offsety"));if(this.get("area")){for(var a=[this.x,this.y],c=0;c<this.points.length;c++)a.push(this.x+this.points[c].x),a.push(this.y-this.points[c].y);a.push(this.x+this.get("width"));a.push(this.y);c=this.get("light_color");this.get("gradient")&&(c=this.target.avgLinearGradient(this.x,this.y-this.get("height"),this.x,this.y,[this.get("light_color2"),c]));this.target.polygon(c,!1,1,"",!1,"",0,0,0,this.get("area_opacity"),a)}for(c=0;c<this.points.length-
1;c++)this.target.line(this.x+this.points[c].x,this.y-this.points[c].y,this.x+this.points[c+1].x,this.y-this.points[c+1].y,this.get("brushsize"),this.get("fill_color"),!1);if(this.get("intersection"))for(c=0;c<this.points.length;c++)this.get("point_hollow")?this.target.round(this.x+this.points[c].x,this.y-this.points[c].y,this.get("point_size"),"#FEFEFE",this.get("brushsize"),this.get("fill_color")):this.target.round(this.x+this.points[c].x,this.y-this.points[c].y,this.get("point_size"),this.get("fill_color"));
this.get("shadow")&&this.target.shadowOff()},doDraw:function(){this.drawLineSegment();this.drawLabel()},isEventValid:function(){return{valid:!1}},tipInvoke:function(){var a=this.x,c=this.get("tip_offset"),b=this.get("point_size")+c,d=this;return function(e,f,g){var j=g.left,l=g.top,j=3>d.tipPosition&&0<g.left-e-a-c||2<d.tipPosition&&0>g.left-e-a-c?j-(e+c):j+c,l=0==d.tipPosition%2?g.top+b:g.top-f-b;return{left:j,top:l}}},doConfig:function(){Jidea.LineSegment.superclass.doConfig.call(this);Jidea.Assert.gtZero(this.get("spacing"),
"spacing");this.points=this.get("points");for(var a=0;a<this.points.length;a++)this.points[a].width=this.points[a].x,this.points[a].height=this.points[a].y;var c=this.get("spacing");0==this.get("event_range_x")?this.push("event_range_x",Math.floor(c/2)):this.push("event_range_x",Jidea.Math.between(1,Math.floor(c/2),this.get("event_range_x")));0==this.get("event_range_y")&&this.push("event_range_y",Math.floor(this.get("point_size")));var b=this.get("tipInvokeHeap");this.get("tip.enable")&&(this.on("mouseover",
function(){b.push(this);this.tipPosition=b.length}).on("mouseout",function(){b.pop()}),this.push("tip.invokeOffsetDynamic",!0),this.tip=new Jidea.Tip(this.get("tip"),this));var d=this,e=d.get("coordinate"),f=d.get("event_range_y"),g=d.get("event_range_x"),j=d.get("limit_y"),l=d.get("keep_with_coordinate"),m=function(a,b,c){return Math.abs(b-(d.x+d.points[a].x))<g&&(!j||j&&Math.abs(c-(d.y-d.points[a].y))<f)?true:false},n=function(a){return{valid:true,text:d.points[a].value,top:d.y-d.points[a].y,left:d.x+
d.points[a].x,hit:true}};this.isEventValid=function(a){if(e&&!e.isEventValid(a).valid)return{valid:false};var b=Math.floor((a.offsetX-d.x)/c);if(b<0||b>=this.points.length-1){b=Jidea.Math.between(0,this.points.length-1,b);return m(b,a.offsetX,a.offsetY)?n(b):{valid:l}}for(var f=b;f<=b+1;f++)if(m(f,a.offsetX,a.offsetY))return n(f);return{valid:l}}}});
Jidea.Line=Jidea.extend(Jidea.Chart,{configure:function(){Jidea.Line.superclass.configure.call(this);this.type="line";this.dataType="simple";this.configuration({coordinate:{},keduAlign:"left",labelAlign:"bottom",labels:[],label_space:6,smooth:!1,proportional_spacing:!0,label_spacing:0,segment_style:{label:!1},tip:{enable:!1},legend:{sign:"round-bar",sign_size:14},crosshair:!1,crosshair_style:{width:1,color:"blank"},customize_layout:!1});this.registerEvent("parsePoint","beforeLineAnimation","afterLineAnimation");
this.lines=[]},doConfig:function(){Jidea.Line.superclass.doConfig.call(this);Jidea.Interface.coordinate.call(this);this.push("line_start",(this.get("coordinate.width")-this.get("coordinate.valid_width"))/2);this.push("line_end",this.get("coordinate.width")-this.get("line_start"));this.get("proportional_spacing")&&this.push("label_spacing",this.get("coordinate.valid_width")/(this.get("maxItemSize")-1));this.push("segment_style.originx",this.get("originx")+this.get("line_start"));this.push("segment_style.originy",
this.get("originy")+this.get("coordinate.height"));this.push("segment_style.width",this.get("coordinate.valid_width"));this.push("segment_style.height",this.get("coordinate.valid_height"));this.push("segment_style.limit_y",1<this.data.length);this.push("segment_style.keep_with_coordinate",1==this.data.length);var a=1==this.data.length,c=this;this.get("coordinate.crosshair.enable")&&(this.push("coordinate.crosshair.hcross",a),this.push("coordinate.crosshair.invokeOffset",function(a){a=c.lines[0].isEventValid(a);
return a.valid?a:!1}));this.get("segment_style.tip")?this.push("segment_style.tip.wrap",this.get("tip.wrap")):this.push("segment_style.tip",this.get("tip"))}});
Jidea.LineBasic2D=Jidea.extend(Jidea.Line,{configure:function(){Jidea.LineBasic2D.superclass.configure.call(this);this.type="basicline2d";this.configuration({});this.registerEvent();this.tipInvokeHeap=[]},doAnimation:function(a,c){var b,d;this.coordinate.draw();for(var e=0;e<this.lines.length;e++){b=this.lines[e];this.fireEvent(this,"beforeLineAnimation",[this,b]);for(var f=0;f<b.points.length;f++)d=b.points[f],d.y=Math.ceil(this.animationArithmetic(a,0,d.height,c));b.drawLineSegment();this.fireEvent(this,
"afterLineAnimation",[this,b])}},doConfig:function(){Jidea.LineBasic2D.superclass.doConfig.call(this);this.coordinate=new Jidea.Coordinate2D(Jidea.merge({kedu:[{position:this.get("keduAlign"),max_scale:this.get("maxValue")},{position:this.get("labelAlign"),scaleEnable:!1,start_scale:1,scale:1,end_scale:this.get("maxItemSize"),labels:this.get("labels")}],axis:{width:[0,0,2,2]}},this.get("coordinate")),this);this.pushComponent(this.coordinate,!0);this.push("segment_style.tip.showType","follow");this.push("segment_style.coordinate",
this.coordinate);this.push("segment_style.tipInvokeHeap",this.tipInvokeHeap);for(var a=this.coordinate.getScale(this.get("keduAlign")),c=this.get("coordinate.valid_height"),b=this.get("label_spacing"),d,e,f,g=0;g<this.data.length;g++){d=[];for(var j=0;j<this.data[g].value.length;j++)e=b*j,f=(this.data[g].value[j]-a.start)*c/a.distance,d.push(Jidea.merge({x:e,y:f,value:this.data[g].value[j]},this.fireEvent(this,"parsePoint",[this.data[g].value[j],e,f,j])));this.push("segment_style.spacing",b);this.push("segment_style.points",
d);this.push("segment_style.brushsize",this.data[g].linewidth||1);this.push("segment_style.background_color",this.data[g].color);this.lines.push(new Jidea.LineSegment(this.get("segment_style"),this))}this.pushComponent(this.lines)}});
(function(){var a=function(a,b){this.target=a;this.line=b;this.direction=a.get("direction");this.size=a.get("queue_size");this.space=a.get("label_spacing");this.end=a.get("line_end")};a.prototype={push:function(a){Jidea.isArray(a)||(a=[a]);for("left"==this.direction&&a.reverse();this.size<this.line.points.length+a.length;)this.line.points.shift();for(var b=0;b<this.line.points.length;b++)this.line.points[b].x+=this.space*a.length*("left"==this.direction?-1:1);for(b=0;b<a.length;b++)x="left"==this.direction?
this.end-this.space*b:this.space*b,y=(Jidea.Math.between(this.target.S.start,this.target.S.end,a[b])-this.target.S.start)*this.target.S.uh,this.line.points.push(Jidea.merge({x:x,y:y,value:a[b]},this.target.fireEvent(this.target,"parsePoint",[a[b],x,y,b])))}};Jidea.LineMonitor2D=Jidea.extend(Jidea.Line,{configure:function(){Jidea.LineMonitor2D.superclass.configure.call(this);this.type="linemonitor2d";this.configuration({direction:"left",queue_size:10});this.registerEvent();this.queues=[]},createQueue:function(c){this.init();
var c=c||{},b=Jidea.clone(this.get("segment_style"));b.brushsize=c.linewidth||1;b.background_color=c.color||"#BDBDBD";c=new Jidea.LineSegment(b,this);this.pushComponent(c);return new a(this,c)},doConfig:function(){Jidea.LineMonitor2D.superclass.doConfig.call(this);this.push("animation",!1);var a=1==this.data.length,b=this;this.get("coordinate.crosshair.enable")&&(this.push("coordinate.crosshair.hcross",a),this.push("coordinate.crosshair.invokeOffset",function(a){a=b.lines[0].isEventValid(a);return a.valid?
a:!1}));this.coordinate=new Jidea.Coordinate2D(Jidea.merge({kedu:[{position:this.get("keduAlign"),max_scale:this.get("maxValue")},{position:this.get("labelAlign"),scaleEnable:!1,start_scale:1,scale:1,end_scale:this.get("maxItemSize"),labels:this.get("labels")}],axis:{width:[0,0,1,1]}},this.get("coordinate")),this);this.pushComponent(this.coordinate,!0);this.push("label_spacing",this.get("coordinate.valid_width")/(this.get("queue_size")-1));this.get("segment_style.tip")?this.push("segment_style.tip.wrap",
this.get("tip.wrap")):this.push("segment_style.tip",this.get("tip"));this.push("segment_style.tip.showType","follow");this.push("segment_style.coordinate",this.coordinate);this.push("segment_style.keep_with_coordinate",!0);this.S=this.coordinate.getScale(this.get("keduAlign"));this.S.uh=this.get("coordinate.valid_height")/this.S.distance}})})();
Jidea.Area2D=Jidea.extend(Jidea.LineBasic2D,{configure:function(){Jidea.Area2D.superclass.configure.call(this);this.type="area2d";this.configuration({area:!0,area_opacity:0.3});this.registerEvent()},doConfig:function(){this.push("segment_style.area",!0);this.push("segment_style.area_opacity",this.get("area_opacity"));Jidea.Area2D.superclass.doConfig.call(this)}});
