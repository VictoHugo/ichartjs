(function(c){var a=navigator.userAgent.toLowerCase(),b=function(b){return b.test(a)},d=Object.prototype.toString,e=document.documentMode,f=b(/opera/);f&&b(/version\/10\.5/);var g=b(/\bchrome\b/),h=b(/webkit/),j=!g&&b(/safari/),k=j&&b(/applewebkit\/4/),l=j&&b(/version\/3/),s=j&&b(/version\/4/),m=!f&&b(/msie/),o=m&&(b(/msie 8/)&&7!=e&&9!=e||8==e),ca=m&&(b(/msie 9/)&&7!=e&&8!=e||9==e);m&&b(/msie 10/);var G=!!document.createElement("canvas").getContext,n=!h&&b(/gecko/),C=n&&b(/rv:1\.9/),u=n&&b(/rv:2\.0/),A=C&&b(/rv:1\.9\.1/),z=C&&b(/rv:1\.9\.2/),B=u&&b(/rv:2\.0\.\d/),F=n&&b(/firefox/),D=b(/windows|win32/),E=b(/macintosh|mac os x/),J=b(/linux/),K={Linear:function(a,b,d,k){return d*a/k+b},Quad:{easeIn:function(a,b,d,k){return d*(a/=k)*a+b},easeOut:function(a,b,d,k){return-d*(a/=k)*(a-2)+b},easeInOut:function(a,b,d,k){return 1>(a/=k/2)?d/2*a*a+b:-d/2*(--a*(a-2)-1)+b}},Cubic:{easeIn:function(a,b,d,k){return d*(a/=k)*a*a+b},easeOut:function(a,b,d,k){return d*((a=a/k-1)*a*a+1)+b},easeInOut:function(a,b,d,k){return 1>(a/=k/2)?d/2*a*a*a+b:d/2*((a-=2)*a*a+2)+b}},Quart:{easeIn:function(a,b,d,k){return d*(a/=k)*a*a*a+b},easeOut:function(a,b,d,k){return-d*((a=a/k-1)*a*a*a-1)+b},easeInOut:function(a,b,d,k){return 1>(a/=k/2)?d/2*a*a*a*a+b:-d/2*((a-=2)*a*a*a-2)+b}},Bounce:{easeOut:function(a,b,d,k){return(a/=k)<1/2.75?d*7.5625*a*a+b:a<2/2.75?d*(7.5625*(a-=1.5/2.75)*a+0.75)+b:a<2.5/2.75?d*(7.5625*(a-=2.25/2.75)*a+0.9375)+b:d*(7.5625*(a-=2.625/2.75)*a+0.984375)+b}}},I=function(a){var b=!1,c=!1,e=[],N=function(){if(document.addEventListener)return function(){document.removeEventListener("DOMContentLoaded",N,!1);M()};if(document.attachEvent)return function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",N),M())}}(),T=function(){if(!b){try{document.documentElement.doScroll("left")}catch(a){setTimeout(T,1);return}M()}},M=function(){if(!b){b=!0;for(var a=0;a<e.length;a++)e[a].call(document);e=[]}},da=function(){if(!c){c=!0;if("complete"===document.readyState)return setTimeout(M,1);if(document.addEventListener)document.addEventListener("DOMContentLoaded",N,!1),a.addEventListener("load",M,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",N);a.attachEvent("onload",M);var b=!1;try{b=null==a.frameElement}catch(d){}document.documentElement.doScroll&&b&&T()}}},ea=function(a){da();b?a.call(document,v):e.push(function(){return a.call(this)})},v=function(a){if(!a||a.nodeType)return a;if("string"===typeof a)return-1!=a.indexOf("#")&&(a=a.substring(1)),document.getElementById(a);"function"===typeof a&&ea(a)};v.apply=function(a,b){if(a&&b&&"object"==typeof b)for(var d in b)"undefined"!=typeof b[d]&&(a[d]=b[d]);if(!b&&a){var k={};for(d in a)k[d]=a[d];return k}return a};v.applyIf=function(a,b){if(a&&b&&"object"==typeof b)for(var d in b)"undefined"!=typeof b[d]&&"undefined"==typeof a[d]&&(a[d]=b[d]);return!b&&a?v.apply(a):a};v.merge=function(a,b,k){if(a&&b&&"object"==typeof b){for(var c in b)"undefined"!=typeof b[c]&&("[object Object]"===d.apply(b[c])?"[object Object]"===d.apply(a[c])?v.merge(a[c],b[c]):a[c]=v.clone(b[c],!0):a[c]=b[c]);if("object"==typeof k)return v.merge(a,k)}return a};v.clone=function(a,b,k){var c={};if("[object Array]"===d.apply(a)&&"[object Object]"===d.apply(b))for(var e=0;e<a.length;e++)c[a[e]]=k&&"[object Object]"===d.apply(b[a[e]])?v.clone(b[a[e]]):b[a[e]];else if("[object Object]"===d.apply(a))for(e in a)c[e]=b&&"[object Object]"===d.apply(a[e])&&!(a[e]instanceof v.Painter)?v.clone(a[e],b):a[e];return c};v.override=function(a,b){if(b){var d=a.prototype;v.apply(d,b);v.isIE&&b.hasOwnProperty("toString")&&(d.toString=b.toString)}};v.extend=function(){var a=function(a){for(var b in a)this[b]=a[b]},b=Object.prototype.constructor;return function(d,k){var c=function(){d.apply(this,arguments)},e=function(){},f=d.prototype;e.prototype=f;e=c.prototype=new e;e.constructor=c;c.superclass=f;f.constructor==b&&(f.constructor=d);c.override=function(a){v.override(c,a)};e.superclass=e.supr=function(){return f};e.override=a;v.override(c,k);c.extend=function(a){return v.extend(c,a)};return c}}();var O=Math.sin,U=Math.cos,fa=Math.atan,ga=Math.sqrt,ha=Math.abs,L=Math.PI,P=2*L,ia=Math.ceil,Q=Math.round,V=Math.floor,W=Math.max,X=Math.min,H=parseFloat,Y=function(a,b){if(v.isNumber(a))return[a,a,a,a];a=a.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g,/\s/).replace(/\s/g,",").split(",");1==a.length?a[0]=a[1]=a[2]=a[3]=H(a[0])||b:2==a.length?(a[0]=a[2]=H(a[0])||b,a[1]=a[3]=H(a[1])||b):3==a.length?(a[0]=H(a[0])||b,a[1]=a[3]=H(a[1])||b,a[2]=H(a[2])||b):(a[0]=H(a[0])||b,a[1]=H(a[1])||b,a[2]=H(a[2])||b,a[3]=H(a[3])||b);return a},Z=function(a){if(0==a)return a;for(var a=a/10,b=0;1>a;)a*=10,b++;for(;1<a/10;)a/=10,b--;for(a=V(a);0<b;)a/=10,b--;for(;0>b;)a*=10,b++;return a},ja="navy,olive,silver,gold,lime,fuchsia,aqua,green,red,blue,pink,purple,yellow,maroon,black,gray,white".split(","),$={navy:"rgb(0,0,128)",olive:"rgb(128,128,0)",orange:"rgb(255,165,0)",silver:"rgb(192,192,192)",white:"rgb(255,255,255)",gold:"rgb(255,215,0)",lime:"rgb(0,255,0)",fuchsia:"rgb(255,0,255)",aqua:"rgb(0,255,255)",green:"rgb(0,128,0)",gray:"rgb(80,80,80)",red:"rgb(255,0,0)",blue:"rgb(0,0,255)",pink:"rgb(255,192,203)",purple:"rgb(128,0,128)",yellow:"rgb(255,255,0)",maroon:"rgb(128,0,0)",black:"rgb(0,0,0)",azure:"rgb(240,255,255)",beige:"rgb(245,245,220)",brown:"rgb(165,42,42)",cyan:"rgb(0,255,255)",darkblue:"rgb(0,0,139)",darkcyan:"rgb(0,139,139)",darkgrey:"rgb(169,169,169)",darkgreen:"rgb(0,100,0)",darkkhaki:"rgb(189,183,107)",darkmagenta:"rgb(139,0,139)",darkolivegreen:"rgb(85,107,47)",darkorange:"rgb(255,140,0)",darkorchid:"rgb(153,50,204)",darkred:"rgb(139,0,0)",darksalmon:"rgb(233,150,122)",darkviolet:"rgb(148,0,211)",indigo:"rgb(75,0,130)",khaki:"rgb(240,230,140)",lightblue:"rgb(173,216,230)",lightcyan:"rgb(224,255,255)",lightgreen:"rgb(144,238,144)",lightgrey:"rgb(211,211,211)",lightpink:"rgb(255,182,193)",lightyellow:"rgb(255,255,224)",magenta:"rgb(255,0,255)",violet:"rgb(128,0,128)"},ka=function(a){a=a.replace(/\s/g,"").toLowerCase();if(/rgb\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3}\)/.exec(a)||/rgba\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3},(0(\.[0-9])?|1(\.0)?)\)/.exec(a))return a;if(/#(([a-fA-F0-9]{6})|([a-fA-F0-9]{3}))/.exec(a))return a=a.replace(/#/g,"").replace(/^(\w)(\w)(\w)$/,"$1$1$2$2$3$3"),"rgb("+parseInt(a.substring(0,2),16)+","+parseInt(a.substring(2,4),16)+","+parseInt(a.substring(4,6),16)+")";if($[a])return $[a];throw Error("invalid colors value '"+a+"'");},aa=function(a,b){b=b||0.14;return 0.5<a?b-(1-a)/10:0.1<a?b-0.16+a/5:a>b?b:a/2},ba=function(a,b,d,k){var b=ka(b),c=/rgb\((\w*),(\w*),(\w*)\)/.exec(b);if(c)b=[c[1],c[2],c[3]];else if(c=/rgba\((\w*),(\w*),(\w*),(.*)\)/.exec(b))b=[c[1],c[2],c[3],c[4]];else throw Error("invalid colors value '"+b+"'");var e;var c=b,f=void 0,m=void 0;v.isArray(c)&&(f=c[1],m=c[2],c=c[0]);var c=c/255,f=f/255,m=m/255,l=W(W(c,f),m),g=X(X(c,f),m),g=l-g;0==g?e=[0,0,l]:(c==l?e=(f-m)/g:f==l?e=(m-c)/g+2:m==l&&(e=(c-f)/g+4),e*=60,0>e&&(e+=360),e=[e,g/l,l]);e[1]-=k||0;a?(e[2]-=aa(e[2],d),e[1]=v.upTo(e[1],1),e[2]=v.lowTo(e[2],0)):(e[2]+=aa(1-e[2],d),e[1]=v.lowTo(e[1],0),e[2]=v.upTo(e[2],1));a=e;d=b[3];b=k=void 0;v.isArray(a)&&(b=d,d=a[1],k=a[2],a=a[0]);var s,o,j;e=V(a/60)%6;a=a/60-e;p=k*(1-d);q=k*(1-d*a);t=k*(1-d*(1-a));switch(e){case 0:s=k;o=t;j=p;break;case 1:s=q;o=k;j=p;break;case 2:s=p;o=k;j=t;break;case 3:s=p;o=q;j=k;break;case 4:s=t;o=p;j=k;break;case 5:s=k,o=p,j=q}return"rgb"+(b?"a":"")+"("+Q(255*s)+","+Q(255*o)+","+Q(255*j)+(b?","+b+")":")")};v.apply(v,{version:"1.0",email:"wanghetommy@gmail.com",isEmpty:function(a,b){return null===a||void 0===a||v.isArray(a)&&!a.length||(!b?""===a:!1)},isArray:function(a){return"[object Array]"===d.apply(a)},isDate:function(a){return"[object Date]"===d.apply(a)},isObject:function(a){return!!a&&"[object Object]"===d.apply(a)},isFunction:function(a){return"[object Function]"===d.apply(a)},isNumber:function(a){return"number"===typeof a&&isFinite(a)},isString:function(a){return"string"===typeof a},isBoolean:function(a){return"boolean"===typeof a},isFalse:function(a){return"boolean"===typeof a&&!a},isElement:function(a){return a?!!a.tagName:!1},isDefined:function(a){return"undefined"!==typeof a},getFont:function(a,b,d){return a+" "+b+"px "+d},getDoc:function(){return a.contentWindow?a.contentWindow.document:a.contentDocument?a.contentDocument:a.document},DefineAbstract:function(a,b){if(!b[a])throw Error("Cannot instantiate the type '"+b.type+"'.you must implements it with method '"+a+"'.");},getAnimationArithmetic:function(a){return"linear"==a?K.Linear:"bounce"==a?K.Bounce.easeOut:"easeInOut"==a||"easeIn"==a||"easeOut"==a?K[v.DefaultAnimationArithmetic][a]:K.Linear},noConflict:function(){return I},parseBorder:function(a,b){return Y(a,b)},parsePadding:function(a,b){return Y(a,b)},distanceP2P:function(a,b,d,k){return ga((d-a)*(d-a)+(k-b)*(k-b))},atan2Radian:function(a,b,d,k){if(a==d)return k>b?L/2:3*L/2;var c=v.quadrant(a,b,d,k),a=fa(ha((b-k)/(a-d)));1==c?a=L-a:2==c?a=L+a:3==c&&(a=P-a);return a},angle2Radian:function(a){return a*L/180},radian2Angle:function(a){return 180*a/L},quadrant:function(a,b,d,k){return a<d?b<k?3:0:b<k?2:1},quadrantd:function(a){a=2*(a%(2*L));return ia(a/L)},upTo:function(a,b){return b>a?a:b},lowTo:function(a,b){return b<a?a:b},between:function(a,b,d){return d>b?b:d<a?a:d},inRange:function(a,b,d){return b>d&&a<d},angleInRange:function(a,b,d){a%=P;b%=P;return b>a?b>d&&a<d:b<a?d<b||d>a:d==b},inRangeClosed:function(a,b,d){return b>=d&&a<=d},inEllipse:function(a,b,d,k){return 1>=a*a/d/d+b*b/k/k},p2Point:function(a,b,d,k){return{x:a+U(d)*k,y:b+O(d)*k}},vectorP2P:function(a,b,d){d||(b=v.angle2Radian(b),a=v.angle2Radian(a));b=O(b);return{x:b*O(a),y:b*U(a)}},iGather:function(a){return(a||"ichartjs")+"-"+(new Date).getTime().toString()},toPercent:function(a,b){return"("+(100*a).toFixed(b)+"%)"},parseFloat:function(a,b){if(!v.isNumber(a)&&(a=H(a),!v.isNumber(a)))throw Error("'"+b+"'is not a valid number.");return a},ceil:function(a){return a+Z(a)},floor:function(a){return a-Z(a)},get:function(a){return ja[a%16]},_2D:"2d",_3D:"3d",light:function(a,b,d){return ba(!1,a,b,d)},dark:function(a,b,d){return ba(!0,a,b,d)},fixPixel:function(a){return v.isNumber(a)?a:H(a.replace("px",""))||0},toPixel:function(a){return v.isNumber(a)?a+"px":v.fixPixel(a)+"px"},emptyFn:function(){return!0},supportCanvas:G,isOpera:f,isWebKit:h,isChrome:g,isSafari:j,isSafari2:k,isSafari3:l,isSafari4:s,isIE:m,isIE8:o,isIE9:ca,isGecko:n,isGecko3:C,isGecko4:u,isFF:F,isFF3_5:A,isFF3_6:z,isFF4:B,isLinux:J,isWindows:D,isMac:E,FRAME:24,INTERVAL:30,DefaultAnimationArithmetic:"Cubic"});v.Assert={gtZero:function(a,b){v.Assert.gt(a,0,b)},gt:function(a,b,d){if(!v.isNumber(a)&&a>=b)throw Error(d+" required Number gt "+b+",given:"+a);},isNumber:function(a,b){if(!v.isNumber(a))throw Error(b+" required Number,given:"+a);},isNotEmpty:function(a,b){if(!a||""==a)throw Error(" required not empty.cause:"+b);if(v.isArray(a)&&0==a.length)throw Error("required must has one element at least.cause:"+b);},isArray:function(a,b){if(!v.isArray(a))throw Error(b+" required Array,given:"+a);},isFunction:function(a,b){if(!v.isFunction(a))throw Error(b+" required Function,given:"+a);},isTrue:function(a,b){if(!0!==a)throw Error(b);},equal:function(a,b,d){if(a!==b)throw Error(d);}};v.Event={addEvent:function(a,b,d,k){a.addEventListener?a.addEventListener(b,d,k):a.attachEvent?a.attachEvent("on"+b,d):a["on"+b]=d},fix:function(b){"undefined"==typeof b&&(b=a.event);b.target||(b.target=b.srcElement||document);!b.relatedTarget&&b.fromElement&&(b.relatedTarget=b.fromElement===b.target?b.toElement:b.fromElement);if(null==b.pageX&&null!=b.clientX){var d=document.documentElement,k=document.body;b.pageX=b.clientX+(d&&d.scrollLeft||k&&k.scrollLeft||0)-(d&&d.clientLeft||k&&k.clientLeft||0);b.pageY=b.clientY+(d&&d.scrollTop||k&&k.scrollTop||0)-(d&&d.clientTop||k&&k.clientTop||0)}if("undefined"==typeof b.offsetX&&"undefined"==typeof b.offsetY&&"number"!=typeof b.offsetX){for(var k=d=0,c=b.target;c!=document.body&&c;)d+=c.offsetLeft,k+=c.offsetTop,c=c.offsetParent;b.offsetX=b.pageX-d;b.offsetY=b.pageY-k}if(null==b.which&&(null!=b.charCode||null!=b.keyCode))b.which=null!=b.charCode?b.charCode:b.keyCode;!b.metaKey&&b.ctrlKey&&(b.metaKey=b.ctrlKey);!b.which&&void 0!==b.button&&(b.which=b.button&1?1:b.button&2?3:b.button&4?2:0);b.stopPropagation||(b.stopPropagation=function(){a.event.cancelBubble=true});return b}};return v}(c);Array.prototype.each=function(a,b){for(var d=this.length,k,c=0;c<d&&!(k=b?a.call(b,this[c],c):a(this[c],c),"boolean"===typeof k&&!k);c++);};Array.prototype.eachAll=function(a,b){this.each(function(d,k){I.isArray(d)?d.eachAll(a,b):b?a.call(b,d,k):a(d,k)},b)};c.iChart=c.$=I})(window);(function(c){c.Element=function(a){this.type="element";c.DefineAbstract("configure",this);c.DefineAbstract("afterConfiguration",this);this.options={};this.set({id:"",fontsize:12,font:"Verdana",fontweight:"normal",border:{enable:!1,color:"#BCBCBC",style:"solid",width:1,radius:5},shadow:!1,shadow_color:"#666666",shadow_blur:4,shadow_offsetx:0,shadow_offsety:0});this.variable={};this.events={};this.initialization=this.preventEvent=!1;this.configure.apply(this,Array.prototype.slice.call(arguments,1));this.set(a);this.afterConfiguration()};c.Element.prototype={set:function(a){c.isObject(a)&&c.merge(this.options,a)},pushIf:function(a,b){return!this.get(a)?this.push(a,b):this.get(a)},push:function(a,b){var d=a.split("."),c=this.options;for(i=0;i<d.length-1;i++)c[d[i]]||(c[d[i]]={}),c=c[d[i]];return c[d[d.length-1]]=b},get:function(a){var a=a.split("."),b=this.options[a[0]];for(i=1;i<a.length;i++){if(!b)return null;b=b[a[i]]}return b}};c.Painter=c.extend(c.Element,{configure:function(){this.type="painter";this.dimension=c._2D;c.DefineAbstract("commonDraw",this);c.DefineAbstract("initialize",this);this.set({brushsize:1,strokeStyle:"gray",lineJoin:"round",padding:10,color:"black",offsetx:0,offsety:0,background_color:"#FEFEFE",color_factor:0.15,style:"",border:{enable:!0},listeners:null,originx:0,originy:0});this.variable.event={mouseover:!1};this.registerEvent("initialize","click","dblclick","mousemove","mouseover","mouseout","beforedraw","draw")},afterConfiguration:function(){},registerEvent:function(){for(var a=0;a<arguments.length;a++)this.events[arguments[a]]=[]},init:function(){if(!this.initialization){if(c.isObject(this.get("listeners")))for(var a in this.get("listeners"))this.on(a,this.get("listeners")[a]);this.initialize();this.fireEvent(this,"initialize",[this])}},is3D:function(){return this.dimension==c._3D},draw:function(a){this.init();this.draw=function(a){if(!this.fireEvent(this,"beforedraw",[this]))return this;this.commonDraw(a);this.fireEvent(this,"draw",[this])};this.draw(a)},fireString:function(a,b,d,e){a=this.fireEvent(a,b,d);return c.isString(a)?a:e},fireEvent:function(a,b,d){var c=this.events[b].length;if(1==c)return this.events[b][0].apply(a,d);for(var f=!0,g=0;g<c;g++)f=this.events[b][g].apply(a,d);return f},on:function(a,b){c.isString(a)&&c.isFunction(b)&&(this.events[a]||console.log(a));this.events[a].push(b);return this},doConfig:function(){var a=c.parsePadding(this.get("padding")),b=this.get("background_color"),d=this.get("color_factor");this.push("padding_top",a[0]);this.push("padding_right",a[1]);this.push("padding_bottom",a[2]);this.push("padding_left",a[3]);this.push("hpadding",a[1]+a[3]);this.push("vpadding",a[0]+a[2]);this.push("fontStyle",c.getFont(this.get("fontweight"),this.get("fontsize"),this.get("font")));this.push("fill_color",b);this.push("light_color",c.light(b,d));this.push("dark_color",c.dark(b,d));this.push("light_color2",c.light(b,2*d));this.push("dark_color2",2*c.dark(b,d));this.id=this.get("id")}});c.Html=c.extend(c.Element,{configure:function(a){this.type="html";this.T=a;c.DefineAbstract("beforeshow",this);this.set({animation:!0,width:0,height:0,style:"",index:999,offset_top:0,offset_left:0});this.transitions=""},afterConfiguration:function(){this.initialize()},initialize:function(){this.wrap=this.get("wrap");this.dom=document.createElement("div");this.get("shadow")&&this.css("boxShadow",this.get("shadow_offsetx")+"px "+this.get("shadow_offsety")+"px "+this.get("shadow_blur")+"px "+this.get("shadow_color"));this.get("border.enable")&&(this.css("border",this.get("border.width")+"px "+this.get("border.style")+" "+this.get("border.color")),this.css("borderRadius",this.get("border.radius")+"px"));this.css("zIndex",this.get("index"));this.applyStyle()},width:function(){return this.dom.offsetWidth},height:function(){return this.dom.offsetHeight},onTransitionEnd:function(a,b){var d="transitionend";c.isWebKit?d="webkitTransitionEnd":c.isOpera&&(d="oTransitionEnd");c.Event.addEvent(this.dom,d,a,b)},transition:function(a){this.transitions=""==this.transitions?a:this.transitions+","+a;c.isWebKit?this.css("WebkitTransition",this.transitions):c.isGecko?this.css("MozTransition",this.transitions):c.isOpera?this.css("OTransition",this.transitions):this.css("transition",this.transitions)},show:function(a,b){this.beforeshow(a,b);this.css("visibility","visible")},hidden:function(){this.css("visibility","hidden")},getDom:function(){return this.dom},css:function(a,b){if(c.isString(a))if(c.isDefined(b))this.dom.style[a]=b;else return this.dom.style[a]},applyStyle:function(){for(var a=this.get("style").split(";"),b,d=0;d<a.length;d++)b=a[d].split(":"),1<b.length&&this.css(b[0],b[1])}});c.Component=c.extend(c.Painter,{configure:function(a){c.Component.superclass.configure.apply(this,arguments);this.type="component";this.set({gradient:!1});this.inject(a);this.final_parameter={}},afterConfiguration:function(){this.init()},initialize:function(){this.preventEvent||c.DefineAbstract("isEventValid",this);c.DefineAbstract("doDraw",this);this.doConfig();this.initialization=!0},doConfig:function(){c.Component.superclass.doConfig.call(this);this.x=this.get("originx");this.y=this.get("originy");this.data=this.get("data");this.is3D()&&c.Interface._3D.call(this);this.get("tip.enable")&&(this.pushIf("tip.border.color",this.get("background_color")),c.isFunction(this.get("tip.invokeOffset"))||this.push("tip.invokeOffset",this.tipInvoke()))},isMouseOver:function(a){return this.isEventValid(a)},redraw:function(){this.container.draw()},commonDraw:function(a){this.doDraw.call(this,a)},inject:function(a){a&&(this.container=a,this.target=this.T=a.T)}});c.Interface=function(){var a=function(a,b){var f=0,g=0,h,j=0;a.each(function(a,b){c.merge(a,this.fireEvent(this,"parseData",[this,a,b]));a.color=a.color||c.get(b);g=a.value;if(c.isNumber(g))g=c.parseFloat(g,this.type+":data["+b+"]"),a.value=g,this.total+=g,f=g>f?g:f,h||(h=g),h=g<h?g:h;else if(c.isArray(g)){var d=0;j=g.length>j?g.length:j;for(var e=0;e<g.length;e++)d+=g[e],h||(h=g),f=g[e]>f?g[e]:f,h=g[e]<h?g[e]:h;a.total=d}},this);c.isNumber(b)?Array.prototype.splice.apply(this.data,[b,0].concat(a)):this.data=this.data.concat(a);this.get("minValue")&&(h=this.get("minValue")<h?this.get("minValue"):h);this.get("maxValue")&&(f=this.get("maxValue")<f?this.get("maxValue"):f);c.isArray(this.get("labels"))&&(j=this.get("labels").length>j?this.get("labels").length:j);this.push("maxItemSize",j);this.push("minValue",h);this.push("maxValue",f);this.push("total",this.total);return a},b=function(a){this.columnKeys=this.get("columnKeys");var b=0,f=0,g,h=this.columnKeys.length;this.data=this.data.concat(a);this.data.each(function(a,b){c.Assert.equal(a.value.length,h,this.type+":data length and columnKeys not corresponding.");c.merge(a,this.fireEvent(this,"parseData",[this,a,b,this.columnKeys]));c.Assert.equal(a.value.length,h,this.type+":data length and columnKeys not corresponding.")},this);for(var j=0;j<h;j++){for(var k=[],l=0;l<this.data.length;l++)g=this.data[l],a=g.value[j],g.value[j]=c.parseFloat(a,this.type+":data["+l+","+j+"]"),g.color||(g.color=c.get(l)),this.total+=a,b=a>b?a:b,f=a<f?a:f,k.push({name:g.name,value:g.value[j],color:g.color});this.columns.push({name:this.columnKeys[j],item:k})}this.push("minValue",f);this.push("maxValue",b);this.push("total",this.total)};return{parser:function(d,c){if("simple"==this.dataType)return a.call(this,[].concat(d),c);"complex"==this.dataType&&b.call(this,[].concat(d),c)},_3D:function(){if(this.is3D()){var a=c.vectorP2P(this.get("xAngle"),this.get("yAngle"));this.push("xAngle_",a.x);this.push("yAngle_",a.y)}},_2D:"2d",coordinate2d:function(){return new c.Coordinate2D(c.apply({kedu:{position:this.get("keduAlign"),max_scale:this.get("maxValue"),min_scale:this.get("minValue")}},this.get("coordinate")),this)},coordinate3d:function(){return new c.Coordinate3D(c.apply({kedu:{position:this.get("keduAlign"),scaleAlign:this.get("keduAlign"),max_scale:this.get("maxValue"),min_scale:this.get("minValue")}},this.get("coordinate")),this)},coordinate:function(){var a=this.pushIf("coordinate.width",0.8*this.get("client_width")),b=this.pushIf("coordinate.height",0.8*this.get("client_height"));"left"==this.get("align")?this.push("originx",this.get("l_originx")):"right"==this.get("align")?this.push("originx",this.get("r_originx")-a):this.push("originx",this.get("centerx")-a/2);this.push("originx",this.get("originx")+this.get("offsetx"));this.push("originy",this.get("centery")-b/2+this.get("offsety"));(!this.get("coordinate.valid_width")||this.get("coordinate.valid_width")>a)&&this.push("coordinate.valid_width",a);(!this.get("coordinate.valid_height")||this.get("coordinate.valid_height")>b)&&this.push("coordinate.valid_height",b);this.x=this.get("originx");this.y=this.get("originy");this.push("coordinate.originx",this.x);this.push("coordinate.originy",this.y)}}}();c.Tip=c.extend(c.Html,{configure:function(){c.Tip.superclass.configure.apply(this,arguments);this.type="tip";this.set({text:"",showType:"follow",invokeOffset:null,fade_duration:300,move_duration:100,shadow:!0,invokeOffsetDynamic:!1,style:"textAlign:left;padding:4px 5px;cursor:pointer;backgroundColor:rgba(239,239,239,.85);fontSize:12px;color:black;",border:{enable:!0},delay:200})},follow:function(a,b){var d=this.dom.style;if(this.get("invokeOffsetDynamic")){if(b.hit){if(c.isString(b.text)||c.isNumber(b.text))this.dom.innerHTML=b.text;var e=this.get("invokeOffset")(this.width(),this.height(),b);d.top=e.top+"px";d.left=e.left+"px"}}else"follow"==this.get("showType")?(d.top=a.offsetY-1.1*this.height()-2+"px",d.left=a.offsetX+2+"px"):c.isFunction(this.get("invokeOffset"))?(e=this.get("invokeOffset")(this.width(),this.height(),b),d.top=e.top+"px",d.left=e.left+"px"):(d.top=a.offsetY-1.1*this.height()-2+"px",d.left=a.offsetX+2+"px")},text:function(a){this.dom.innerHTML=a},beforeshow:function(a,b){this.follow(a,b)},show:function(a,b){this.beforeshow(a,b);this.css("visibility","visible");this.get("animation")&&this.css("opacity",1)},hidden:function(){this.get("animation")?this.css("opacity",0):this.css("visibility","hidden")},initialize:function(){c.Tip.superclass.initialize.call(this);var a=this;a.css("position","absolute");a.dom.innerHTML=a.get("text");a.hidden();if(a.get("animation")){var b=a.get("move_duration")/1E3+"s ease-in 0s";a.transition("opacity "+a.get("fade_duration")/1E3+"s ease-in 0s");a.transition("top "+b);a.transition("left "+b);a.onTransitionEnd(function(){0==a.css("opacity")&&a.css("visibility","hidden")},!1)}a.wrap.appendChild(a.dom);a.T.on("mouseover",function(b,c){a.show(b,c)}).on("mouseout",function(b){a.hidden(b)});if("follow"==a.get("showType"))a.T.on("mousemove",function(b,c){a.T.variable.event.mouseover&&setTimeout(function(){a.T.variable.event.mouseover&&a.follow(b,c)},a.get("delay"))})}});c.CrossHair=c.extend(c.Html,{configure:function(){c.CrossHair.superclass.configure.apply(this,arguments);this.type="crosshair";this.set({text:"",top:0,left:0,hcross:!0,vcross:!0,invokeOffset:null,line_width:1,line_color:"green",shadow_color:"#dedede",delay:200})},follow:function(a,b){if(this.get("invokeOffset")){var d=this.get("invokeOffset")(a,b);d&&d.hit&&(this.horizontal.style.top=d.top-this.top+"px",this.vertical.style.left=d.left-this.left+"px")}else this.horizontal.style.top=a.offsetY-this.top-1+"px",this.vertical.style.left=a.offsetX-this.left-1+"px"},beforeshow:function(a,b){this.follow(a,b)},initialize:function(){c.CrossHair.superclass.initialize.call(this);this.top=c.fixPixel(this.get("top"));this.left=c.fixPixel(this.get("left"));this.dom=document.createElement("div");this.dom.style.zIndex=this.get("index");this.dom.style.position="absolute";this.dom.style.width=c.toPixel(0);this.dom.style.height=c.toPixel(0);this.dom.style.top=c.toPixel(this.get("top"));this.dom.style.left=c.toPixel(this.get("left"));this.css("visibility","hidden");this.horizontal=document.createElement("div");this.vertical=document.createElement("div");this.horizontal.style.width=c.toPixel(this.get("width"));this.horizontal.style.height=c.toPixel(this.get("line_width"));this.horizontal.style.backgroundColor=this.get("line_color");this.horizontal.style.position="absolute";this.vertical.style.width=c.toPixel(this.get("line_width"));this.vertical.style.height=c.toPixel(this.get("height"));this.vertical.style.backgroundColor=this.get("line_color");this.vertical.style.position="absolute";this.dom.appendChild(this.horizontal);this.dom.appendChild(this.vertical);this.get("shadow")&&(this.dom.style.boxShadow=this.get("shadowStyle"));this.wrap.appendChild(this.dom);var a=this;this.T.on("mouseover",function(b,d){a.show(b,d)}).on("mouseout",function(b,d){a.hidden(b,d)}).on("mousemove",function(b,d){a.follow(b,d)})}});c.Legend=c.extend(c.Component,{configure:function(){c.Legend.superclass.configure.apply(this,arguments);this.type="legend";this.set({data:void 0,width:"auto",column:1,row:"max",maxwidth:0,line_height:16,sign:"square",sign_size:12,sign_space:5,legendspace:5,text_with_sign_color:!1,align:"right",valign:"middle"});this.registerEvent("drawCell","parse","drawRaw")},drawCell:function(a,b,d,c){var f=this.get("sign_size"),g=this.get("sign");"round"==g?this.T.round(a+f/2,b+f/2,f/2,c):"round-bar"==g?(this.T.rectangle(a,b+5*f/12,f,f/6,c),this.T.round(a+f/2,b+f/2,f/4,c)):"square-bar"==g?(this.T.rectangle(a,b+5*f/12,f,f/6,c),this.T.rectangle(a+f/4,b+f/4,f/2,f/2,c)):this.T.rectangle(a,b,f,f,c);g=this.get("color");this.get("text_with_sign_color")&&(g=c);this.T.fillText(d,a+this.get("signwidth"),b+f/2,this.get("textwidth"),g);this.fireEvent(this,"drawCell",[a,b,d,c])},drawRow:function(a,b,d){for(var c,f=0;f<this.get("column");f++)c=this.data[a],a<this.data.length&&(this.fireEvent(this,"drawCell",[c]),this.drawCell(b,d,c.text,c.color),c.x=b,c.y=d),b+=this.columnwidth[f]+this.get("signwidth")+this.get("legendspace"),a++},isEventValid:function(a){var b={valid:!1};a.offsetX>this.x&&a.offsetX<this.x+this.width&&a.offsetY>this.y&&a.offsetY<this.y+this.height&&this.data.each(function(d,c){a.offsetX>d.x&&a.offsetX<d.x+d.width+this.get("signwidth")&&a.offsetY>d.y&&a.offsetY<d.y+this.get("line_height")&&(b={valid:!0,index:c,target:d})},this);return b},doDraw:function(){this.get("border.enable")&&this.T.drawBorder(this.x,this.y,this.width,this.height,this.get("border.width"),this.get("border.color"),this.get("border.radius"),this.get("fill_color"),!1,this.get("shadow"),this.get("shadow_color"),this.get("shadow_blur"),this.get("shadow_offsetx"),this.get("shadow_offsety"));this.T.textStyle("left","middle",c.getFont(this.get("fontweight"),this.get("fontsize"),this.get("font")));for(var a=this.x+this.get("padding_left"),b=this.y+this.get("padding_top"),d=this.get("column"),e=this.get("row"),f=0;f<e;f++)this.fireEvent(this,"drawRaw",[f*d]),this.drawRow(f*d,a,b),b+=this.get("line_height")},calculate:function(a,b){this.data=a;var d=0,e=w=this.get("width"),f=0,g="auto"==w,h=c.isNumber(this.get("column")),j=c.isNumber(this.get("row")),k=this.data.length,l=this.container;!h&&!j&&(h=1);h&&!j&&this.push("row",Math.ceil(k/this.get("column")));!h&&j&&this.push("column",Math.ceil(k/this.get("row")));h=this.get("column");j=this.get("row");k>j*h&&(j+=Math.ceil((k-j*h)/h),this.push("row",j));this.columnwidth=Array(h);g&&(e=0);b.each(function(a,b){c.merge(a,this.fireEvent(this,"parse",[a,b]));a.text=a.text||a.name;a.width=this.T.measureText(a.text)},this);for(var s=0;s<h;s++){f=0;for(d=s;d<k;)f=Math.max(f,this.data[d].width),d+=h;this.columnwidth[s]=f;e+=f}g&&(w=this.push("width",e+this.get("hpadding")+this.get("signwidth")*h+(h-1)*this.get("legendspace")));w>this.get("maxwidth")&&(w=this.push("width",this.get("maxwidth")));this.push("textwidth",w-this.get("hpadding")-this.get("signwidth"));this.width=w;this.height=d=this.push("height",j*this.get("line_height")+this.get("vpadding"));this.y="top"==this.get("valign")?l.get("t_originy"):"bottom"==this.get("valign")?l.get("b_originy")-d:l.get("centery")-d/2;this.x="left"==this.get("align")?l.get("l_originx"):"center"==this.get("align")?l.get("centerx")-this.get("textwidth")/2:l.get("r_originx")-w;this.x=this.push("originx",this.x+this.get("offsetx"));this.y=this.push("originy",this.y+this.get("offsety"))},doConfig:function(){c.Legend.superclass.doConfig.call(this);c.Assert.isNotEmpty(this.get("data"),this.type+"[data]");var a=this.get("sign_size"),b=this.container;this.T.textFont(this.get("fontStyle"));this.push("signwidth",a+this.get("sign_space"));this.get("line_height")<a&&this.push("line_height",a+a/5);"center"==this.get("align")&&"middle"==this.get("valign")&&this.push("valign","top");"left"==b.get("align")&&"middle"==this.get("valign")&&this.push("align","right");this.calculate(this.data,this.data)}});c.Label=c.extend(c.Component,{configure:function(){c.Label.superclass.configure.apply(this,arguments);this.type="legend";this.set({text:"",line_height:16,sign:"square",sign_size:12,padding:5,offsety:2,sign_space:5,highlight:!1,background_color:"#efefef",text_with_sign_color:!1,border:{radius:2}});this.registerEvent("beforeDrawRow","highlight","drawRow")},isEventValid:function(a){return{valid:c.inRange(this.labelx,this.labelx+this.width,a.offsetX)&&c.inRange(this.labely,this.labely+this.height,a.offsetY)}},text:function(a){a&&this.push("text",a);this.width=this.T.measureText(this.get("text"))+this.get("hpadding")+this.get("sign_size")+this.get("sign_space")},doDraw:function(a){a=a||{};a.invoke&&this.updateLcb(a.invoke);a.highlight&&this.fireEvent(this,"highlight");this.lineFn.call(this);this.T.drawBorder(this.labelx,this.labely,this.width,this.height,this.get("border.width"),this.get("border.color"),this.get("border.radius"),this.get("background_color"),!1,this.get("shadow"),this.get("shadow_color"),this.get("shadow_blur"),this.get("shadow_offsetx"),this.get("shadow_offsety"));this.T.textStyle("left","top",this.get("fontStyle"));var a=this.labelx+this.get("padding_left"),b=this.labely+this.get("padding_top")+this.get("offsety"),d=this.get("sign_size"),c=this.get("color");this.get("text_with_sign_color")&&(c=this.get("scolor"));"square"==this.get("sign")?this.T.rectangle(a,b,d,d,this.get("scolor"),1):this.T.round(a+d/2,b+d/2,d/2,this.get("scolor"),1);this.T.fillText(this.get("text"),a+d+this.get("sign_space"),b,this.get("textwidth"),c)},updateLcb:function(a){this.lineFn=a.lineFn;var b=a.labelXY.call(this);this.labelx=b.labelx;this.labely=b.labely;this.x=a.origin.x;this.y=a.origin.y},doConfig:function(){c.Label.superclass.doConfig.call(this);this.T.textFont(c.getFont(this.get("fontweight"),this.get("fontsize"),this.get("font")));this.height=this.get("line_height")+this.get("vpadding");this.text();var a=this.get("lineCB");a&&this.updateLcb(a)}});c.Text=c.extend(c.Component,{configure:function(){c.Text.superclass.configure.apply(this,arguments);this.type="text";this.set({text:"",textAlign:"center",textBaseline:"top"});this.registerEvent();this.preventEvent=!0},doDraw:function(){""!=this.get("text")&&this.T.text(this.get("text"),this.x,this.y,!1,this.get("color"),this.get("textAlign"),this.get("textBaseline"),this.get("fontStyle"))},doConfig:function(){c.Text.superclass.doConfig.call(this)}});(function(a){function b(a){"string"===typeof a&&(a=document.getElementById(a));if(!a||!a.tagName||"canvas"!=a.tagName.toLowerCase())throw Error("there not a canvas element");this.canvas=a;this.c=this.canvas.getContext("2d");this.width=this.canvas.width;this.height=this.canvas.height}var d=Math.PI/90,c=Math.PI,f=2*Math.PI,g=Math.sin,h=Math.cos,j=function(a,b){return 1>=a?Math.floor(b)+0.5:Math.floor(b)};b.prototype={css:function(b,d){if(a.isDefined(d))this.canvas.style[b]=d;else return this.canvas.style[b]},arc:function(a,b,d,c,e,f,g,j,h,u,A,z,B,F,D,E,J){D=!!D;E=!!E;this.c.save();J&&(this.c.globalCompositeOperation="destination-over");g&&this.strokeStyle(j,h);this.shadowOn(u,A,z,B,F).fillStyle(f);this.c.moveTo(a,b);this.c.beginPath();this.c.arc(a,b,d,c,e,D);E&&this.c.lineTo(a,b);this.c.closePath();this.c.fill();g&&this.c.stroke();this.c.restore();return this},ellipse:function(a,b,c,e,f,j,G,n,C,u,A,z,B,F,D,E,J,K){E=!!E;J=!!J;this.c.save();K&&(this.c.globalCompositeOperation="destination-over");e&&this.strokeStyle(C,u);this.shadowOn(A,z,B,F,D).fillStyle(G);this.c.moveTo(a,b);this.c.beginPath();for(J&&this.c.moveTo(a,b);f<=j;)this.c.lineTo(a+c*h(f),b+(E?-e*g(f):e*g(f))),f+=d;this.c.lineTo(a+c*h(j),b+(E?-e*g(j):e*g(j)));this.c.closePath();e&&this.c.stroke();this.c.fill();this.c.restore();return this},sector:function(a,b,d,c,e,f,g,j,h,u,A,z,B,F,D){u?(this.arc(a,b,d,c,e,f,g,j,h,u,A,z,B,F,D,!0),this.arc(a,b,d,c,e,f,g,j,h,!1,A,z,B,F,D,!0)):this.arc(a,b,d,c,e,f,g,j,h,!1,0,0,0,0,D,!0);return this},sector3D:function(){var b=function(b,k,f,l,j,n,C,u,A){if(C&&n<=c||!C&&j>=c)return!1;var z=function(a,d){this.c.lineTo(b+f*h(a),k+(d||0)+(C?-l*g(a):l*g(a)))},j=C&&n>c&&j<c?c:j,n=!C&&j<c&&n>c?c:n,B=j;this.c.fillStyle=a.dark(A);this.c.moveTo(b+f*h(j),k+(C?-l*g(j):l*g(j)));for(this.c.beginPath();B<=n;)z.call(this,B),B+=d;z.call(this,n);this.c.lineTo(b+f*h(n),k+u+(C?-l*g(n):l*g(n)));for(B=n;B>=j;)z.call(this,B,u),B-=d;z.call(this,j,u);this.c.lineTo(b+f*h(j),k+(C?-l*g(j):l*g(j)));this.c.closePath();this.c.fill()},f=function(b,d,c,k,e,f,l,j){this.c.moveTo(b,d);this.c.beginPath();this.c.fillStyle=a.dark(j);this.c.lineTo(b,d+f);c=b+c*h(l);k=d+f+(e?-k*g(l):k*g(l));this.c.lineTo(c,k);this.c.lineTo(c,k-f);this.c.lineTo(b,d);this.c.closePath();this.c.fill()};return function(d,g,j,h,G,n,C,u,A,z,B,F,D,E,J,K,I){F=F&&!a.isOpera;this.c.save();this.c.globalCompositeOperation="destination-over";this.c.fillStyle=u;var R=I?G<c/2||G>1.5*c:G>c/2&&G<1.5*c,S=I?n>c/2&&n<1.5*c:n<c/2||n>1.5*c;if(R||S)R&&f.call(this,d,g,j,h,I,C,G,u),S&&f.call(this,d,g,j,h,I,C,n,u);this.ellipse(d,g+C,j,h,G,n,u,A,z,B,F,D,E,J,K,I,!0);this.c.globalCompositeOperation="source-over";this.ellipse(d,g,j,h,G,n,u,A,z,B,!1,D,E,J,K,I,!0);b.call(this,d,g,j,h,G,n,I,C,u);this.c.restore();return this}}(),textStyle:function(a,b,d){return this.textAlign(a).textBaseline(b).textFont(d)},strokeStyle:function(a,b,d){a&&(this.c.lineWidth=a);b&&(this.c.strokeStyle=b);d&&(this.c.lineJoin=d);return this},globalAlpha:function(a){a&&(this.c.globalAlpha=a);return this},fillStyle:function(a){a&&(this.c.fillStyle=a);return this},textAlign:function(a){a&&(this.c.textAlign=a);return this},textBaseline:function(a){a&&(this.c.textBaseline=a);return this},textFont:function(a){a&&(this.c.font=a);return this},shadowOn:function(b,d,c,e,f){a.isString(b)&&(f=e,e=c,c=d,d=!0);b&&(this.c.shadowColor=d,this.c.shadowBlur=c,this.c.shadowOffsetX=e,this.c.shadowOffsetY=f);return this},shadowOff:function(){this.c.shadowColor="white";this.c.shadowBlur=this.c.shadowOffsetX=this.c.shadowOffsetY=0},avgLinearGradient:function(a,b,d,c,e){a=this.createLinearGradient(a,b,d,c);for(b=0;b<e.length;b++)a.addColorStop(b/(e.length-1),e[b]);return a},createLinearGradient:function(a,b,d,c){return this.c.createLinearGradient(a,b,d,c)},avgRadialGradient:function(a,b,d,c,e,f,g){a=this.createRadialGradient(a,b,d,c,e,f);for(b=0;b<g.length;b++)a.addColorStop(b/(g.length-1),g[b]);return a},createRadialGradient:function(a,b,d,c,e,f){return this.c.createRadialGradient(a,b,d,c,e,f)},fillText:function(a,b,d,c,e,f,g){a+="";c=c||!1;f=f||"lr";g=g||16;this.fillStyle(e);a.split("tb"==f?"":"\n").each(function(a){c?this.c.fillText(a,b,d,c):this.c.fillText(a,b,d);d+=g},this);return this},measureText:function(a){return this.c.measureText(a).width},moveTo:function(a,b){this.c.moveTo(a||0,b||0);return this},lineTo:function(a,b){this.c.lineTo(a||0,b||0);return this},save:function(){this.c.save();return this},restore:function(){this.c.restore();return this},beginPath:function(){this.c.beginPath();return this},closePath:function(){this.c.closePath();return this},stroke:function(){this.c.stroke();return this},fill:function(){this.c.fill();return this},text:function(a,b,d,c,e,f,g,j,h,u){this.c.save();this.textStyle(f,g,j);this.fillText(a,b,d,c,e,h,u);this.c.restore();return this},cube:function(b,d,c,e,f,g,h,n,C,u,A,z,B,F,D,E){b=j(u,b);d=j(u,d);h=h&&0<h?h:f;e=d-h*e;c=j(u,b+h*c);e=j(u,e);z&&(this.polygon(n,C,u,A,z,B,F,D,E,!1,[b,d,c,e,c+f,e,b+f,d]),this.polygon(n,C,u,A,z,B,F,D,E,!1,[b,d,b,d+g,b+f,d+g,b+f,d]),this.polygon(n,C,u,A,z,B,F,D,E,!1,[b+f,d,c+f,e,c+f,e+g,b+f,d+g]));this.polygon(a.dark(n),C,u,A,!1,B,F,D,E,!1,[b,d,c,e,c+f,e,b+f,d]);this.polygon(n,C,u,A,!1,B,F,D,E,!1,[b,d,b,d+g,b+f,d+g,b+f,d]);this.polygon(a.dark(n),C,u,A,!1,B,F,D,E,!1,[b+f,d,c+f,e,c+f,e+g,b+f,d+g]);return this},cube3D:function(b,d,c,e,f,g,h,n,C,u,A,z){b=j(u,b);d=j(u,d);n=!n||0==n?g:n;f?(e=a.vectorP2P(c,e),c=b+n*e.x,e=d-n*e.y):(c=b+n*c,e=d-n*e);for(;6>z.length;)z.push(!1);c=j(u,c);e=j(u,e);n=[];0>e?a.isObject(z[4])&&n.push(a.applyIf({points:[b,d-h,c,e-h,c+g,e-h,b+g,d-h]},z[4])):a.isObject(z[0])&&n.push(a.applyIf({points:[b,d,c,e,c+g,e,b+g,d]},z[0]));a.isObject(z[1])&&n.push(a.applyIf({points:[c,e,c,e-h,c+g,e-h,c+g,e]},z[1]));a.isObject(z[2])&&n.push(a.applyIf({points:[b,d,b,d-h,c,e-h,c,e]},z[2]));a.isObject(z[3])&&n.push(a.applyIf({points:[b+g,d,b+g,d-h,c+g,e-h,c+g,e]},z[3]));0>e?a.isObject(z[0])&&n.push(a.applyIf({points:[b,d,c,e,c+g,e,b+g,d]},z[0])):a.isObject(z[4])&&n.push(a.applyIf({points:[b,d-h,c,e-h,c+g,e-h,b+g,d-h]},z[4]));a.isObject(z[5])&&n.push(a.applyIf({points:[b,d,b,d-h,b+g,d-h,b+g,d]},z[5]));n.each(function(a){this.polygon(a.color,C,u,A,a.shadow,a.shadowColor,a.blur,a.sx,a.sy,a.alpha,a.points)},this);return this},polygon:function(a,b,d,c,e,f,g,j,h,u,A){if(!(2>A.length)){this.c.save();this.strokeStyle(d,c);this.c.beginPath();this.fillStyle(a).globalAlpha(u).shadowOn(e,f,g,j,h).moveTo(A[0],A[1]);for(a=2;a<A.length;a+=2)this.lineTo(A[a],A[a+1]);this.c.closePath();b&&this.c.stroke();this.c.fill();this.c.restore();return this}},line:function(a,b,d,c,e,f,g){if(!e||0==e)return this;this.c.save();g&&(this.c.globalCompositeOperation="destination-over");a=j(e,a);b=j(e,b);d=j(e,d);c=j(e,c);this.c.beginPath();this.strokeStyle(e,f).moveTo(a,b).lineTo(d,c).c.stroke();this.c.closePath();this.c.restore();return this},round:function(a,b,d,c,e,g){this.c.beginPath();this.c.fillStyle=c;this.c.arc(a,b,d,0,f,!1);this.c.closePath();this.c.fill();e&&(this.c.lineWidth=e,this.c.strokeStyle=g||"#010101",this.c.stroke());return this},backgound:function(a,b,d,c,e){this.c.save();this.c.globalCompositeOperation="destination-over";this.c.translate(a,b);this.c.beginPath();this.c.fillStyle=e;this.c.fillRect(0,0,d,c);this.c.restore();return this},rectangle:function(b,d,c,e,f,g,h,n,C,u,A,z,B){this.c.save();b=j(h,b);d=j(h,d);this.c.translate(b,d);this.c.beginPath();this.c.fillStyle=f;this.shadowOn(C,u,A,z,B);g&&a.isNumber(h)&&(this.c.lineWidth=h,this.c.strokeStyle=n,this.c.strokeRect(0,0,c,e));this.c.fillRect(0,0,c,e);g&&a.isArray(h)&&(this.c.strokeStyle=n,this.line(0,0,c,0,h[0],n),this.line(c,0,c,e,h[1],n),this.line(0,e,c,e,h[2],n),this.line(0,0,0,e,h[3],n));this.c.restore();return this},clearRect:function(a,b,d,c){d=d||this.width;c=c||this.height;this.c.clearRect(a||0,b||0,d,c);return this},drawBorder:function(b,d,c,e,f,g,h,n,C,u,A,z,B,F){this.c.save();var D=j(f,b),E=j(f,d);D!=b&&(b=D,c-=1);E!=d&&(d=E,e-=1);this.c.translate(b,d);this.c.lineWidth=f;this.c.strokeStyle=g;C&&(this.c.globalCompositeOperation="destination-over");n&&(this.c.fillStyle=n);h=0==h?0:a.parseBorder(h);a.isArray(h)?(this.c.beginPath(),this.c.moveTo(h[0],0),this.c.lineTo(c-h[1],0),this.c.arcTo(c,0,c,h[1],h[1]),this.c.lineTo(c,e-h[2]),this.c.arcTo(c,e,c-h[2],e,h[2]),this.c.lineTo(h[3],e),this.c.arcTo(0,e,0,e-h[3],h[3]),this.c.lineTo(0,h[0]),this.c.arcTo(0,0,h[0],0,h[0]),this.c.closePath(),this.shadowOn(u,A,z,B,F),n&&this.c.fill(),u&&this.shadowOff(),this.c.globalCompositeOperation="source-over",this.c.stroke()):(this.shadowOn(u,A,z,B,F),n&&this.c.fillRect(0,0,c,e),u&&this.shadowOff(),this.c.strokeRect(0,0,c,e));this.c.restore();return this},toImageURL:function(){return this.canvas.toDataURL("image/png")},addEvent:function(b,d,c){a.Event.addEvent(this.canvas,b,d,c)}};a.Chart=a.extend(a.Painter,{configure:function(){a.Chart.superclass.configure.apply(this,arguments);this.type="chart";this.set({render:"",data:[],width:void 0,height:void 0,align:"center",segmentRect:!0,title:"",title_align:"center",title_valign:"top",title_writingmode:"lr",title_font:"Verdana",title_fontweight:"bold",title_fontsize:20,title_color:"black",title_height:25,animation:!1,doAnimationFn:a.emptyFn,animation_timing_function:"easeInOut",duration_animation_duration:1600,legend:{enable:!1},tip:{enable:!1}});this.registerEvent("parseData","parseTipText","parseLabelText","beforeAnimation","afterAnimation","animating");this.T=null;this.animationed=this.rendered=!1;this.data=[];this.components=[];this.total=0},pushComponent:function(a,b){b?this.components.unshift(a):this.components.push(a)},plugin:function(a,b){this.init();a.inject(this);this.pushComponent(a,b)},toImageURL:function(){return this.T.toImageURL()},segmentRect:function(){this.T.clearRect(this.get("l_originx"),this.get("t_originy"),this.get("client_width"),this.get("client_height"))},resetCanvas:function(){this.T.backgound(this.get("l_originx"),this.get("t_originy"),this.get("client_width"),this.get("client_height"),this.get("background_color"))},animation:function(){return function(b){b.segmentRect();b.doAnimation(b.variable.animation.time,b.duration);b.resetCanvas();b.variable.animation.time<b.duration?(b.variable.animation.time++,setTimeout(function(){b.animation(b)},a.INTERVAL)):setTimeout(function(){b.variable.animation.time=0;b.animationed=!0;b.draw();b.processAnimation=!1;b.fireEvent(this,"afterAnimation",[this])},a.INTERVAL)}}(),doAnimation:function(a,b){this.get("doAnimationFn").call(this,a,b)},add:function(b,d,c){if(this.processAnimation)return this.variable.animation.queue.push({handler:"add",arguments:[b,d,c]}),!1;a.isNumber(d);d=a.between(0,this.data.length,d);b=a.Interface.parser.call(this,b,d);this.get("legend.enable")&&this.legend.calculate(this.data,b);return b},commonDraw:function(){a.Assert.isTrue(this.rendered,this.type+" has not rendered.");a.Assert.isTrue(this.initialization,this.type+" has initialize failed.");a.Assert.gtZero(this.data.length,this.type+"'data is empty.");this.redraw||(this.title(),this.get("border.enable")?this.T.drawBorder(0,0,this.width,this.height,this.get("border.width"),this.get("border.color"),this.get("border.radius"),this.get("background_color"),!0):this.T.backgound(0,0,this.width,this.height,this.get("background_color")));this.redraw=!0;!this.animationed&&this.get("animation")?(this.fireEvent(this,"beforeAnimation",[this]),this.animation(this)):(this.segmentRect(),this.components.eachAll(function(a){a.draw()},this),this.resetCanvas())},title:function(){""!=this.get("title")&&("tb"!=this.get("title_writingmode")&&("left"==this.get("title_align")?this.push("title_originx",this.get("padding_left")):"right"==this.get("title_align")?this.push("title_originx",this.width-this.get("padding_right")):this.push("title_originx",this.get("client_width")/2),this.T.textAlign(this.get("title_align")),"bottom"==this.get("title_valign")?this.push("title_originy",this.height-this.get("padding_bottom")):this.push("title_originy",this.get("padding_top")),this.T.textBaseline(this.get("title_valign"))),this.T.textFont(a.getFont(this.get("title_fontweight"),this.get("title_fontsize"),this.get("title_font"))),this.T.fillText(this.get("title"),this.get("title_originx"),this.get("title_originy"),this.get("client_width"),this.get("title_color")))},create:function(d){this.width=this.pushIf("width",400);this.height=this.pushIf("height",300);var c="width:"+this.width+"px;height:"+this.height+"px;padding:0px;overflow:hidden;position:relative;",e=a.iGather(this.type);this.shellid=a.iGather(this.type+"-shell");d.innerHTML="<div id='"+this.shellid+"' style='"+c+"'><canvas id= '"+e+"'  width='"+this.width+"' height="+this.height+"'><p>Your browser does not support the canvas element</p></canvas></div>";this.element=document.getElementById(e);this.shell=document.getElementById(this.shellid);this.T=this.target=new b(this.element);this.rendered=!0},render:function(a){this.push("render",a)},initialize:function(){if(!this.rendered){var b=this.get("render");"string"==typeof b&&document.getElementById(b)?this.create(document.getElementById(b)):"object"==typeof b&&this.create(b)}0<this.get("data").length&&this.rendered&&!this.initialization&&(a.Interface.parser.call(this,this.get("data")),this.doConfig(),this.initialization=!0)},doConfig:function(){a.Chart.superclass.doConfig.call(this);var b=this,d=b.variable.event;a.Assert.isArray(b.data);a.Interface._3D.call(b);b.T.strokeStyle(b.get("brushsize"),b.get("strokeStyle"),b.get("lineJoin"));b.processAnimation=b.get("animation");b.duration=Math.ceil(b.get("duration_animation_duration")*a.FRAME/1E3);b.variable.animation={type:0,time:0,queue:[]};b.animationArithmetic=a.getAnimationArithmetic(b.get("animation_timing_function"));b.on("afterAnimation",function(){var a=b.variable.animation.queue.shift();a&&b[a.handler].apply(b,a.arguments)});["click","dblclick","mousemove"].each(function(d){b.T.addEvent(d,function(c){b.processAnimation||b.fireEvent(b,d,[b,a.Event.fix(c)])},!1)});b.on("click",function(a,b){a.components.eachAll(function(a){if(!a.preventEvent){var d=a.isMouseOver(b);d.valid&&a.fireEvent(a,"click",[a,b,d])}})});b.on("mousemove",function(a,b){var c=!1;a.components.eachAll(function(e){if(!e.preventEvent){var f=e.variable.event,g=e.isMouseOver(b);g.valid?(c=!0,d.mouseover||(d.mouseover=!0,a.T.css("cursor","pointer"),a.fireEvent(a,"mouseover",[b])),f.mouseover||(f.mouseover=!0,e.fireEvent(e,"mouseover",[b,g])),e.fireEvent(e,"mousemove",[b,g])):f.mouseover&&(f.mouseover=!1,e.fireEvent(e,"mouseout",[b,g]))}});!c&&d.mouseover&&(d.mouseover=!1,a.T.css("cursor","default"),a.fireEvent(a,"mouseout",[b]))});b.push("l_originx",b.get("padding_left"));b.push("r_originx",b.width-b.get("padding_right"));b.push("t_originy",b.get("padding_top"));b.push("b_originy",b.height-b.get("padding_bottom"));var c=0,e=0;""!=b.get("title")&&("tb"==b.get("title_writingmode")?(c=b.get("title_height"),"left"==b.get("title_align")?b.push("l_originx",b.get("l_originx")+b.get("title_height")):b.push("r_originx",b.width-b.get("l_originx")-b.get("title_height"))):(e=b.get("title_height"),"left"==b.get("title_align")?b.push("title_originx",b.get("padding_left")):"right"==b.get("title_align")?b.push("title_originx",b.width-b.get("padding_right")):b.push("title_originx",b.get("client_width")/2),"bottom"==b.get("title_valign")?(b.push("title_originy",b.height-b.get("padding_bottom")),b.push("b_originy",b.height-b.get("b_originy")-b.get("title_height"))):(b.push("t_originy",b.get("t_originy")+b.get("title_height")),b.push("title_originy",b.get("padding_top")))));b.push("client_width",b.get("width")-b.get("hpadding")-c);b.push("client_height",b.get("height")-b.get("vpadding")-e);b.push("minDistance",Math.min(b.get("client_width"),b.get("client_height")));b.push("maxDistance",Math.max(b.get("client_width"),b.get("client_height")));b.push("minstr",b.get("client_width")<b.get("client_height")?"width":"height");b.push("centerx",b.get("l_originx")+b.get("client_width")/2);b.push("centery",b.get("t_originy")+b.get("client_height")/2);b.get("legend.enable")&&(b.legend=new a.Legend(a.apply({maxwidth:b.get("client_width"),data:b.data},b.get("legend")),b),b.components.push(b.legend));b.get("tip.enable")&&b.push("tip.wrap",b.shell)}})})(c);c.Custom=c.extend(c.Component,{configure:function(){c.Custom.superclass.configure.apply(this,arguments);this.type="custom";this.set({drawFn:c.emptyFn,eventValid:null});this.registerEvent()},doDraw:function(a){this.get("drawFn").call(this,a)},isEventValid:function(a){return c.isFunction(this.get("eventValid"))?this.get("eventValid").call(this,a):{valid:!1}},doConfig:function(){c.Custom.superclass.doConfig.call(this)}});c.KeDu=c.extend(c.Component,{configure:function(){c.KeDu.superclass.configure.apply(this,arguments);this.type="kedu";this.set({which:"h",distance:void 0,start_scale:0,end_scale:void 0,min_scale:void 0,max_scale:void 0,scale_space:void 0,scale_share:5,scale_enable:!0,scale_size:1,scale_width:4,scale_color:"#333333",scaleAlign:"center",labels:[],scale2grid:!0,text_height:16,text_space:4,textAlign:"left",decimalsnum:0,join_style:"none",join_size:2});this.registerEvent("parseText");this.items=[];this.number=0},isEventValid:function(){return{valid:!1}},doDraw:function(){var a=y=x0=y0=tx=ty=0,b=this.get("scale_width"),d=b/2,c=this.get("scaleAlign"),f=this.get("textAlign"),g=this.get("text_space");this.isH?("top"==c?y=-b:"center"==c?(y=-d,y0=d):y0=b,this.T.textAlign("center"),"top"==f)?(ty=-g,this.T.textBaseline("bottom")):(ty=g,this.T.textBaseline("top")):("left"==c?a=-b:"center"==c?(a=-d,x0=d):x0=b,this.T.textBaseline("middle"),"right"==f)?(this.T.textAlign("left"),tx=g):(this.T.textAlign("right"),tx=-g);this.T.textFont(this.get("fontStyle"));for(b=0;b<this.items.length;b++)this.get("scale_enable")&&this.T.line(this.items[b].x+a,this.items[b].y+y,this.items[b].x+x0,this.items[b].y+y0,this.get("scale_size"),this.get("scale_color"),!1),this.T.fillText(this.items[b].text,this.items[b].textX+tx,this.items[b].textY+ty,!1,this.get("color"),"lr",this.get("text_height"))},doConfig:function(){c.KeDu.superclass.doConfig.call(this);c.Assert.isNumber(this.get("distance"),"distance");var a=this.get("labels").length,b=this.get("min_scale"),d=this.get("max_scale"),e=this.get("scale_space"),f=this.get("end_scale"),g=this.get("start_scale");if(0<a)this.number=a-1;else{c.Assert.isTrue(c.isNumber(d)||c.isNumber(f),"max_scale&end_scale");if(!f||f<d)f=this.push("end_scale",c.ceil(d));g>b&&this.push("start_scale",c.floor(b));e&&e<f-g&&this.push("scale_share",(f-g)/e);if(!e||e>f-g)e=this.push("scale",(f-g)/this.get("scale_share"));this.number=this.get("scale_share")}this.push("distanceOne",this.get("valid_distance")/this.number);var d=0,h;this.T.textFont(this.get("fontStyle"));this.push("which",this.get("which").toLowerCase());this.isH="h"==this.get("which");for(var j=0;j<=this.number;j++)b=a?this.get("labels")[j]:(e*j+g).toFixed(this.get("decimalsnum")),f=this.isH?this.get("valid_x")+j*this.get("distanceOne"):this.x,h=this.isH?this.y:this.get("valid_y")+this.get("distance")-j*this.get("distanceOne"),this.items.push(c.merge({text:b,x:f,y:h,textX:f,textY:h},this.fireEvent(this,"parseText",[b,f,h,j]))),d=Math.max(d,this.T.measureText(b));this.left=this.right=this.top=this.bottom=0;ts=this.get("text_space");ta=this.get("textAlign");sa=this.get("scaleAlign");w=this.get("scale_width");w2=w/2;this.isH?(this.top="top"==sa?w:"center"==sa?w2:0,this.bottom=w-this.top,"top"==ta?this.top+=this.get("text_height")+ts:this.bottom+=this.get("text_height")+ts):(this.left="left"==sa?w:"center"==sa?w2:0,this.right=w-this.left,"left"==ta?this.left+=d+ts:this.right+=d+ts)}});c.Coordinate2D=c.extend(c.Component,{configure:function(){c.Coordinate2D.superclass.configure.apply(this,arguments);this.type="coordinate2d";this.set({sign_size:12,sign_space:5,kedu:[],valid_width:void 0,valid_height:void 0,grid_line_width:1,grid_color:"#c4dede",gridlinesVisible:!0,scale2grid:!0,grids:void 0,ignoreOverlap:!0,ignoreEdge:!1,xlabel:"",ylabel:"",alternate_color:!0,crosshair:{enable:!1},crosshair_style:{width:1,color:"blank"},width:void 0,height:void 0,axis:{enable:!0,color:"#666666",width:1,style:""}});this.registerEvent();this.kedu=[];this.gridlines=[]},getScale:function(a){for(var b=0;b<this.kedu.length;b++){var d=this.kedu[b];if(d.get("position")==a)return{start:d.get("start_scale"),end:d.get("end_scale"),distance:d.get("end_scale")-d.get("start_scale")}}return{start:0,end:0,distance:0}},isEventValid:function(a){return{valid:a.offsetX>this.x&&a.offsetX<this.x+this.get("width")&&a.offsetY<this.y+this.get("height")&&a.offsetY>this.y}},doDraw:function(){this.T.rectangle(this.x,this.y,this.get("width"),this.get("height"),this.get("fill_color"),this.get("axis.enable"),this.get("axis.width"),this.get("axis.color"),this.get("shadow"),this.get("shadow_color"),this.get("shadow_blur"),this.get("shadow_offsetx"),this.get("shadow_offsety"));if(this.get("alternate_color")){var a,b=!1,d=[0,0,0,0],e=c.dark(this.get("background_color"),0.04);this.get("axis.enable")&&(d=this.get("axis.width"))}for(var f=this.gridlines,g=0;g<f.length;g++)f[g].x1=Math.round(f[g].x1),f[g].y1=Math.round(f[g].y1),f[g].x2=Math.round(f[g].x2),f[g].y2=Math.round(f[g].y2),this.get("alternate_color")&&f[g].y1==f[g].y2&&(b&&this.T.rectangle(f[g].x1+d[3],f[g].y1+this.get("grid_line_width"),f[g].x2-f[g].x1-d[3]-d[1],a-f[g].y1-this.get("grid_line_width"),e),a=f[g].y1,b=!b),this.T.line(f[g].x1,f[g].y1,f[g].x2,f[g].y2,this.get("grid_line_width"),this.get("grid_color"));for(g=0;g<this.kedu.length;g++)this.kedu[g].draw()},doConfig:function(){c.Coordinate2D.superclass.doConfig.call(this);c.Assert.isNumber(this.get("width"),"width");c.Assert.isNumber(this.get("height"),"height");this.on("mouseover",function(){this.T.css("cursor","default")});(!this.get("valid_width")||this.get("valid_width")>this.get("width"))&&this.push("valid_width",this.get("width"));(!this.get("valid_height")||this.get("valid_height")>this.get("height"))&&this.push("valid_height",this.get("height"));this.get("gradient")&&c.isString(this.get("background_color"))&&this.push("fill_color",this.T.avgLinearGradient(this.x,this.y,this.x,this.y+this.get("height"),[this.get("dark_color"),this.get("light_color")]));if(this.get("axis.enable")){var a=this.get("axis.width");c.isArray(a)||this.push("axis.width",[a,a,a,a])}this.get("crosshair.enable")&&(this.push("crosshair.wrap",this.container.shell),this.push("crosshair.height",this.get("height")),this.push("crosshair.width",this.get("width")),this.push("crosshair.top",this.y),this.push("crosshair.left",this.x),this.crosshair=new c.CrossHair(this.get("crosshair"),this));var b,d,e=!(!this.get("gridlinesVisible")||!this.get("grids")),a=e&&!!this.get("grids.horizontal"),f=e&&!!this.get("grids.vertical"),g=this.get("height"),h=this.get("width"),j=this.get("valid_width"),k=this.get("valid_height"),l=this.get("gridlinesVisible")&&this.get("scale2grid")&&!(a&&f),s=(h-j)/2;sh=(g-k)/2;axis=this.get("axis.width");c.isArray(this.get("kedu"))||(c.isObject(this.get("kedu"))?this.push("kedu",[this.get("kedu")]):this.push("kedu",[]));for(e=0;e<this.get("kedu").length;e++)b=this.get("kedu")[e],d=(d=b.position)||"left",d=d.toLowerCase(),b.originx=this.x,b.originy=this.y,b.valid_x=this.x+s,b.valid_y=this.y+sh,b.position=d,"top"==d?(b.which="h",b.distance=h,b.valid_distance=j):"right"==d?(b.which="v",b.distance=g,b.valid_distance=k,b.originx+=h,b.valid_x+=j):"bottom"==d?(b.which="h",b.distance=h,b.valid_distance=j,b.originy+=g,b.valid_y+=k):(b.which="v",b.distance=g,b.valid_distance=k),this.kedu.push(new c.KeDu(b,this.container));if(b=this.push("ignoreOverlap",this.get("ignoreOverlap")&&this.get("axis.enable")||this.get("ignoreEdge")))var m=this.get("ignoreEdge")?function(a,b,d){return a=="v"?d==this.y||d==this.y+g:b==this.x||b==this.x+a}:function(a,b,d){return a=="v"?d==this.y&&axis[0]>0||d==this.y+g&&axis[2]>0:b==this.x&&axis[3]>0||b==this.x+h&&axis[1]>0};if(l)for(e=0;e<this.kedu.length;e++)if(l=this.kedu[e],!c.isFalse(l.get("scale2grid"))&&!(a&&"v"==l.get("which")||f&&"h"==l.get("which"))){d=j=0;"top"==l.get("position")?j=g:"right"==l.get("position")?d=-h:"bottom"==l.get("position")?j=-g:d=h;for(k=0;k<l.items.length;k++)(!b||!m.call(this,l.get("which"),l.items[k].x,l.items[k].y))&&this.gridlines.push({x1:l.items[k].x,y1:l.items[k].y,x2:l.items[k].x+d,y2:l.items[k].y+j})}if(f){e=this.get("grids.vertical");c.Assert.gtZero(e.value,"value");f=h/e.value;l=e.value;"given_value"==e.way&&(l=f,f=e.value,f=f>h?h:f);for(e=0;e<=l;e++)(!b||!m.call(this,"h",this.x+e*f,this.y))&&this.gridlines.push({x1:this.x+e*f,y1:this.y,x2:this.x+e*f,y2:this.y+g})}if(a){a=this.get("grids.horizontal");c.Assert.gtZero(a.value,"value");f=g/a.value;l=a.value;"given_value"==a.way&&(l=f,f=a.value,f=f>g?g:f);for(e=0;e<=l;e++)(!b||!m.call(this,"v",this.x,this.y+e*f))&&this.gridlines.push({x1:this.x,y1:this.y+e*f,x2:this.x+h,y2:this.y+e*f})}}});c.Coordinate3D=c.extend(c.Coordinate2D,{configure:function(){c.Coordinate3D.superclass.configure.apply(this,arguments);this.type="coordinate3d";this.dimension=c._3D;this.set({xAngle:60,yAngle:20,xAngle_:void 0,yAngle_:void 0,zHeight:0,pedestal_height:22,board_deep:20,gradient:!0,color_factor:0.18,ignoreEdge:!0,alternate_color:!1,grid_color:"#7a8d44",background_color:"#d6dbd2",shadow_offsetx:4,shadow_offsety:2,wall_style:[],axis:{enable:!1}})},doDraw:function(){var a=this.get("width"),b=this.get("height"),d=this.get("xAngle_"),c=this.get("yAngle_"),f=this.get("zHeight"),g=d*f,h=c*f,j=this.gridlines;this.T.cube3D(this.x,this.y+b+this.get("pedestal_height"),d,c,!1,a,this.get("pedestal_height"),3*f/2,this.get("axis.enable"),this.get("axis.width"),this.get("axis.color"),this.get("bottom_style"));this.T.cube3D(this.x+this.get("board_deep")*d,this.y+b-this.get("board_deep")*c,d,c,!1,a,b,f,this.get("axis.enable"),this.get("axis.width"),this.get("axis.color"),this.get("board_style"));this.T.cube3D(this.x,this.y+b,d,c,!1,a,b,f,this.get("axis.enable"),this.get("axis.width"),this.get("axis.color"),this.get("wall_style"));for(a=0;a<j.length;a++)this.T.line(j[a].x1,j[a].y1,j[a].x1+g,j[a].y1-h,this.get("grid_line_width"),this.get("grid_color")),this.T.line(j[a].x1+g,j[a].y1-h,j[a].x2+g,j[a].y2-h,this.get("grid_line_width"),this.get("grid_color"));for(a=0;a<this.kedu.length;a++)this.kedu[a].draw()},doConfig:function(){c.Coordinate3D.superclass.doConfig.call(this);var a=this.get("background_color"),b=c.dark(a,0.1),d=this.get("height"),e=this.get("width");3>this.get("wall_style").length&&this.push("wall_style",[{color:b},{color:a},{color:b}]);var f=this.get("wall_style")[0].color;this.push("bottom_style",[{color:a,shadow:this.get("shadow"),shadowColor:this.get("shadow_color"),blur:this.get("shadow_blur"),sx:this.get("shadow_offsetx"),sy:this.get("shadow_offsety")},!1,!1,{color:f},{color:f},{color:f}]);this.push("board_style",[!1,!1,!1,{color:f},{color:a},!1]);if(this.get("gradient")){var g=this.get("xAngle_")*this.get("zHeight"),h=this.get("yAngle_")*this.get("zHeight"),j=this.get("wall_style"),k=this.get("bottom_style");c.isString(j[0].color)&&(j[0].color=this.T.avgLinearGradient(this.x,this.y+d,this.x+e,this.y+d,[f,this.get("dark_color")]));c.isString(j[1].color)&&(j[1].color=this.T.avgLinearGradient(this.x+g,this.y-h,this.x+g,this.y+d-h,[this.get("dark_color"),this.get("light_color")]));c.isString(j[2].color)&&(j[2].color=this.T.avgLinearGradient(this.x,this.y,this.x,this.y+d,[a,this.get("dark_color")]));k[5].color=this.T.avgLinearGradient(this.x,this.y+d,this.x,this.y+d+this.get("pedestal_height"),[a,b])}}});c.Rectangle=c.extend(c.Component,{configure:function(){c.Rectangle.superclass.configure.apply(this,arguments);this.type="rectangle";this.set({width:0,height:0,value_space:10,value:"",tipAlign:"top",valueAlign:"top",textAlign:"center",textBaseline:"top",color_factor:0.16,shadow:!0,shadow_blur:3,shadow_offsetx:0,shadow_offsety:-1});this.registerEvent()},doDraw:function(){this.drawRectangle();this.drawValue()},doConfig:function(){c.Rectangle.superclass.doConfig.call(this);c.Assert.gtZero(this.get("width"),"width");this.width=this.get("width");this.height=this.get("height");this.centerX=this.x+this.width/2;this.centerY=this.y+this.height/2;this.get("tip.enable")&&("follow"!=this.get("tip.showType")&&this.push("tip.invokeOffsetDynamic",!1),this.tip=new c.Tip(this.get("tip"),this));this.variable.event.highlight=!1;this.on("mouseover",function(a){this.variable.event.highlight=true;this.redraw();this.variable.event.highlight=false;this.container.fireEvent(this.container,"rectangleover",[a,this])}).on("mouseout",function(a){this.variable.event.highlight=false;this.redraw();this.container.fireEvent(this.container,"rectanglemouseout",[a,this])}).on("click",function(a){this.container.fireEvent(this.container,"rectangleclick",[a,this])});this.on("beforedraw",function(){this.variable.event.highlight?this.push("fill_color",this.get("light_color")):this.push("fill_color",this.get("background_color"));return true})}});c.Rectangle2D=c.extend(c.Rectangle,{configure:function(){c.Rectangle2D.superclass.configure.apply(this,arguments);this.type="rectangle2d";this.set({shadow_offsety:-2});this.registerEvent()},drawValue:function(){""!=this.get("value")&&this.T.text(this.get("value"),this.get("value_x"),this.get("value_y"),!1,this.get("color"),this.get("textAlign"),this.get("textBaseline"),this.get("fontStyle"))},drawRectangle:function(){this.T.rectangle(this.get("originx"),this.get("originy"),this.get("width"),this.get("height"),this.get("fill_color"),this.get("border.enable"),this.get("border.width"),this.get("border.color"),this.get("shadow"),this.get("shadow_color"),this.get("shadow_blur"),this.get("shadow_offsetx"),this.get("shadow_offsety"))},isEventValid:function(a){return{valid:a.offsetX>this.x&&a.offsetX<this.x+this.width&&a.offsetY<this.y+this.height&&a.offsetY>this.y}},tipInvoke:function(){var a=this;return function(b,d){return{left:a.tipX(b,d),top:a.tipY(b,d)}}},doConfig:function(){c.Rectangle2D.superclass.doConfig.call(this);var a=this,b=a.get("tipAlign"),d=a.get("valueAlign");"left"==b||"right"==b?a.tipY=function(b,d){return a.centerY-d/2}:a.tipX=function(b){return a.centerX-b/2};"left"==b?a.tipX=function(b){return a.x-a.get("value_space")-b}:"right"==b?a.tipX=function(){return a.x+a.width+a.get("value_space")}:a.tipY="bottom"==b?function(){return a.y+a.height+3}:function(b,d){return a.y-d-3};"left"==d?(a.push("textAlign","right"),a.push("value_x",a.x-a.get("value_space")),a.push("value_y",a.centerY)):"right"==d?(a.push("textAlign","left"),a.push("textBaseline","middle"),a.push("value_x",a.x+a.width+a.get("value_space")),a.push("value_y",a.centerY)):"bottom"==d?(a.push("value_x",a.centerX),a.push("value_y",a.y+a.height+a.get("value_space")),a.push("textBaseline","top")):(a.push("value_x",a.centerX),a.push("value_y",a.y-a.get("value_space")),a.push("textBaseline","bottom"));a.valueX=a.get("value_x");a.valueY=a.get("value_y")}});c.Rectangle3D=c.extend(c.Rectangle,{configure:function(){c.Rectangle3D.superclass.configure.apply(this,arguments);this.type="rectangle3d";this.dimension=c._3D;this.set({zHeight:void 0,xAngle:60,yAngle:20,xAngle_:void 0,yAngle_:void 0,shadow_offsetx:2});this.registerEvent("beforepop","analysing","drawRow")},drawValue:function(){""!=this.get("value")&&this.T.text(this.get("value"),this.centerX,this.topCenterY+this.get("value_space"),!1,this.get("color"),"center","top",this.get("fontStyle"))},drawRectangle:function(){this.T.cube(this.get("originx"),this.get("originy"),this.get("xAngle_"),this.get("yAngle_"),this.get("width"),this.get("height"),this.get("zHeight"),this.get("fill_color"),this.get("border.enable"),this.get("border.width"),this.get("light_color"),this.get("shadow"),this.get("shadow_color"),this.get("shadow_blur"),this.get("shadow_offsetx"),this.get("shadow_offsety"))},isEventValid:function(a){return{valid:!this.preventEvent&&a.offsetX>this.x&&a.offsetX<this.x+this.get("width")&&a.offsetY<this.y+this.get("height")&&a.offsetY>this.y}},tipInvoke:function(){var a=this;return function(b,d){return{left:a.topCenterX-b/2,top:a.topCenterY-d}}},doConfig:function(){c.Rectangle3D.superclass.doConfig.call(this);this.pushIf("zHeight",this.get("width"));this.centerX=this.x+this.get("width")/2;this.topCenterX=this.x+(this.get("width")+this.get("width")*this.get("xAngle_"))/2;this.topCenterY=this.y-this.get("width")*this.get("yAngle_")/2}});c.Sector=c.extend(c.Component,{configure:function(){c.Sector.superclass.configure.apply(this,arguments);this.type="sector";this.set({name:"",counterclockwise:!1,startAngle:0,middleAngle:0,endAngle:0,totalAngle:0,bound_event:"click",expand:!1,pop_animate:!1,mutex:!1,increment:void 0,shadow:!0,gradient:!0,label:{enable:!0,linelength:void 0},tip:{enable:!1,border:{width:2}}});this.registerEvent("changed");this.tip=this.label=null},bound:function(){this.expanded||this.toggle()},rebound:function(){this.expanded&&this.toggle()},toggle:function(){this.fireEvent(this,this.get("bound_event"),[this])},drawLabel:function(){this.get("label.enable")&&this.label.draw({highlight:this.highlighted,invoke:this.labelInvoke(this.x,this.y)})},doDraw:function(){this.drawSector();this.drawLabel()},doConfig:function(){c.Sector.superclass.doConfig.call(this);var a=this;a.push("totalAngle",a.get("endAngle")-a.get("startAngle"));a.push("label.scolor",a.get("background_color"));a.variable.event.status=a.expanded=a.get("expand");a.get("tip.enable")&&("follow"!=a.get("tip.showType")&&a.push("tip.invokeOffsetDynamic",!1),a.tip=new c.Tip(a.get("tip"),a));a.variable.event.poped=!1;a.on(a.get("bound_event"),function(a){a.variable.event.poped=true;a.expanded=!a.expanded;a.redraw();a.variable.event.poped=false});a.on("beforedraw",function(){a.x=a.get("originx");a.y=a.get("originy");a.variable.event.status!=a.expanded&&a.fireEvent(a,"changed",[a,a.expanded]);if(a.variable.event.status=a.expanded)if(a.get("mutex")&&!a.variable.event.poped)a.expanded=false;else{a.x=a.x+a.get("increment")*Math.cos(2*Math.PI-a.get("middleAngle"));a.y=a.y-a.get("increment")*Math.sin(2*Math.PI-a.get("middleAngle"))}return true})}});c.Sector2D=c.extend(c.Sector,{configure:function(){c.Sector2D.superclass.configure.apply(this,arguments);this.type="sector2d";this.set({radius:0});this.registerEvent("beforepop","analysing","drawRow")},drawSector:function(){this.T.sector(this.x,this.y,this.r,this.get("startAngle"),this.get("endAngle"),this.get("fill_color"),this.get("border.enable"),this.get("border.width"),this.get("border.color"),this.get("shadow"),this.get("shadow_color"),this.get("shadow_blur"),this.get("shadow_offsetx"),this.get("shadow_offsety"),this.get("counterclockwise"))},isEventValid:function(a){return this.label&&this.label.isEventValid(a).valid?{valid:!0}:this.r<c.distanceP2P(this.x,this.y,a.offsetX,a.offsetY)?{valid:!1}:c.angleInRange(this.get("startAngle"),this.get("endAngle"),2*Math.PI-c.atan2Radian(this.x,this.y,a.offsetX,a.offsetY))?{valid:!0}:{valid:!1}},tipInvoke:function(){var a=this,b=a.get("radius");return function(d,e){var f=c.p2Point(a.x,a.y,a.get("middleAngle"),0.8*b),g=c.quadrantd(a.get("middleAngle"));return{left:2<=g&&3>=g?f.x-d:f.x,top:3<=g?f.y-e:f.y}}},labelInvoke:function(a,b){var d=this.get("middleAngle"),e=c.p2Point(a,b,d,this.r+this.get("label.linelength")),f=c.p2Point(a,b,d,this.r/2),g=c.quadrantd(d);return{origin:{x:f.x,y:f.y},lineFn:function(){this.T.line(f.x,f.y,e.x,e.y,this.get("border.width"),this.get("border.color"))},labelXY:function(){return{labelx:2<=g&&3>=g?e.x-this.width:e.x,labely:3<=g?e.y-this.height:e.y}}}},doConfig:function(){c.Sector2D.superclass.doConfig.call(this);this.r=this.get("radius");c.Assert.gtZero(this.r);this.get("gradient")&&this.push("fill_color",this.T.avgRadialGradient(this.x,this.y,0,this.x,this.y,this.r,[this.get("light_color"),this.get("dark_color")]));this.pushIf("increment",c.lowTo(5,this.r/8));this.get("label.enable")&&(this.pushIf("label.linelength",c.lowTo(10,this.r/8)),this.label=new c.Label(this.get("label"),this))}});c.Sector3D=c.extend(c.Sector,{configure:function(){c.Sector3D.superclass.configure.apply(this,arguments);this.type="sector3d";this.dimension=c._3D;this.set({semi_major_axis:0,semi_minor_axis:0,cylinder_height:0,border:{color:"#BCBCBC"}});this.registerEvent("beforepop","analysing","drawRow")},drawSector:function(){this.T.sector3D(this.x,this.y,this.a,this.b,this.get("startAngle"),this.get("endAngle"),this.h,this.get("background_color"),this.get("border.enable"),this.get("border.width"),this.get("border.color"),this.get("shadow"),this.get("shadow_color"),this.get("shadow_blur"),this.get("shadow_offsetx"),this.get("shadow_offsety"),this.get("counterclockwise"))},isEventValid:function(a){return this.get("label.enable")&&this.label.isEventValid(a).valid?{valid:!0}:!c.inEllipse(a.offsetX-this.x,a.offsetY-this.y,this.a,this.b)?{valid:!1}:c.inRange(this.sA,this.eA,2*Math.PI-c.atan2Radian(this.x,this.y,a.offsetX,a.offsetY))?{valid:!0}:{valid:!1}},p2p:function(a,b,d,c){return{x:a+this.a*Math.cos(d)*c,y:b+this.b*Math.sin(d)*c}},tipInvoke:function(){var a=this.get("middleAngle"),b=c.quadrantd(a),d=this;return function(c,f){var g=d.p2p(d.x,d.y,a,0.6);return{left:2<=b&&3>=b?g.x-c:g.x,top:3<=b?g.y-f:g.y}}},labelInvoke:function(a,b){var d=this.get("middleAngle"),e=this.p2p(a,b,d,this.Z),f=this.p2p(a,b,d,1),g=c.quadrantd(d),h=this,j=this.get("counterclockwise");return{origin:{x:f.x,y:f.y},lineFn:function(){this.T.line(f.x,f.y+h.h/2,e.x,e.y+h.h/2,4*this.get("border.width"),this.get("border.color"),j&&d<Math.PI||!j&&d>Math.PI)},labelXY:function(){return{labelx:2<=g&&3>=g?e.x-this.width:e.x,labely:3<=g?e.y-this.height+h.h/2:e.y+h.h/2}}}},doConfig:function(){c.Sector3D.superclass.doConfig.call(this);this.a=this.get("semi_major_axis");this.b=this.get("semi_minor_axis");this.h=this.get("cylinder_height");c.Assert.gtZero(this.a);c.Assert.gtZero(this.b);this.pushIf("increment",c.lowTo(5,this.a/8));this.inc=Math.PI/180;ccw=this.get("counterclockwise");var a=function(a){a=c.atan2Radian(0,0,this.a*Math.cos(a),ccw?-this.b*Math.sin(a):this.b*Math.sin(a));!ccw&&0!=a&&(a=2*Math.PI-a);return a};this.sA=a.call(this,this.get("startAngle"));this.eA=a.call(this,this.get("endAngle"));this.get("label.enable")&&(this.pushIf("label.linelength",c.lowTo(10,this.a/8)),this.Z=this.get("label.linelength")/this.a+1,this.label=new c.Label(this.get("label"),this))}});c.Pie=c.extend(c.Chart,{configure:function(){c.Pie.superclass.configure.call(this);this.type="pie";this.dataType="simple";this.set({radius:0,offsetAngle:0,showpercent:!0,decimalsnum:1,bound_event:"click",customize_layout:!1,counterclockwise:!1,pop_animate:!1,mutex:!1,gradient:!0,increment:void 0,label:{enable:!0,linelength:void 0,padding:5},tip:{enable:!1,border:{width:2,radius:5}}});this.registerEvent("bound","rebound");this.sectors=[]},add:function(a,b,d){if(a=c.Pie.superclass.add.call(this,a,b,d))this.calculate(),a.each(function(a,b){a.new_=!0;this.doSector(a,b)},this),this.data.each(function(a,b){if(a.new_)delete a.new_;else{var d=a.name+(this.get("showpercent")?c.toPercent(a.value/this.total,this.get("decimalsnum")):"");this.get("label.enable")&&a.reference.label.text(this.fireString(this,"parseLabelText",[a,b],d));this.get("tip.enable")&&a.reference.tip.text(this.fireString(this,"parseTipText",[a,b],d));a.reference.id=b;a.reference.push("startAngle",a.startAngle);a.reference.push("middleAngle",a.middleAngle);a.reference.push("endAngle",a.endAngle);a.reference.push("totalAngle",a.endAngle-a.startAngle)}},this),d?this.animation(this):this.draw()},toggle:function(a){this.data[a].reference.toggle()},bound:function(a){this.data[a].reference.bound()},rebound:function(a){this.data[a].reference.rebound()},doAnimation:function(a,b){var d,c=0,f=this.offsetAngle;this.data.each(function(g){d=g.reference;c=this.animationArithmetic(a,0,d.get("totalAngle"),b);d.push("startAngle",f);d.push("endAngle",f+c);f+=c;d.drawSector()},this)},getSectors:function(){return this.sectors},doParse:function(a,b){var d=this,e=a.name+(d.get("showpercent")?c.toPercent(a.value/d.total,d.get("decimalsnum")):"");d.get("label.enable")&&d.push("sector.label.text",d.fireString(d,"parseLabelText",[a,b],e));d.get("tip.enable")&&d.push("sector.tip.text",d.fireString(d,"parseTipText",[a,b],e));d.push("sector.id",b);d.push("sector.name",a.name);d.push("sector.listeners.changed",function(a,b){d.fireEvent(d,b?"bound":"rebound",[d,a.get("name")])});d.push("sector.startAngle",a.startAngle);d.push("sector.middleAngle",a.middleAngle);d.push("sector.endAngle",a.endAngle);d.push("sector.background_color",a.color)},calculate:function(){var a=this.offsetAngle,b=a,d=this.data.length;this.data.each(function(c,f){a+=2*c.value/this.total*Math.PI;f==d-1&&(a=2*Math.PI+this.offsetAngle);c.startAngle=b;c.endAngle=a;c.totalAngle=a-b;c.middleAngle=(b+a)/2;b=a},this)},doConfig:function(){c.Pie.superclass.doConfig.call(this);c.Assert.gtZero(this.total,"this.total");this.offsetAngle=c.angle2Radian(this.get("offsetAngle"));r=this.get("radius");this.calculate();if(0>=r||r>this.get("minDistance")/2)r=this.push("radius",this.get("minDistance")/2);this.r=r;this.pushIf("increment",c.lowTo(5,r/8));"left"==this.get("align")?this.push("originx",r+this.get("l_originx")+this.get("offsetx")):"right"==this.get("align")?this.push("originx",this.get("r_originx")-r+this.get("offsetx")):this.push("originx",this.get("centerx")+this.get("offsetx"));this.push("originy",this.get("centery")+this.get("offsety"));this.push("sector",c.clone("originx,originy,bound_event,customize_layout,counterclockwise,pop_animate,mutex,shadow,shadow_blur,shadow_offsetx,shadow_offsety,increment,gradient,color_factor,label,tip,border".split(","),this.options))}});c.Pie2D=c.extend(c.Pie,{configure:function(){c.Pie2D.superclass.configure.call(this);this.type="pie2d";this.registerEvent()},doSector:function(a,b){this.doParse(a,b);a.reference=new c.Sector2D(this.get("sector"),this);this.sectors.push(a.reference)},doConfig:function(){c.Pie2D.superclass.doConfig.call(this);this.push("sector.radius",this.r);this.data.each(function(a,b){this.doSector(a,b)},this);this.pushComponent(this.sectors)}});c.Pie3D=c.extend(c.Pie,{configure:function(){c.Pie3D.superclass.configure.apply(this,arguments);this.type="pie3d";this.dimension=c._3D;this.set({zRotate:45,yHeight:30});this.registerEvent("beforeDrawRow","drawRow")},doSector:function(a,b){this.doParse(a,b);a.reference=new c.Sector3D(this.get("sector"),this);this.sectors.push(a.reference)},doConfig:function(){c.Pie3D.superclass.doConfig.call(this);this.push("zRotate",c.between(0,90,90-this.get("zRotate")));this.push("sector.semi_major_axis",this.r);this.push("sector.semi_minor_axis",this.r*this.get("zRotate")/90);this.push("sector.cylinder_height",this.get("yHeight")*Math.cos(c.angle2Radian(this.get("zRotate"))));this.push("sector.semi_major_axis",this.r);this.data.each(function(a,b){this.doSector(a,b)},this);this.pushComponent(this.sectors)}});c.Column=c.extend(c.Chart,{configure:function(){c.Column.superclass.configure.call(this);this.type="column";this.dataType="simple";this.set({coordinate:{},hiswidth:void 0,text_space:6,keduAlign:"left",label:{padding:5},rectangle:{}});this.registerEvent("rectangleover","rectanglemouseout","rectangleclick","parseValue","parseText");this.rectangles=[];this.labels=[]},doAnimation:function(a,b){var d,c;this.coo.draw();for(var f=0;f<this.rectangles.length;f++)d=this.rectangles[f],c=Math.ceil(this.animationArithmetic(a,0,d.height,b)),d.push("originy",d.y+(d.height-c)),d.push("height",c),this.labels[f].draw(),d.drawRectangle()},doConfig:function(){c.Column.superclass.doConfig.call(this);c.Interface.coordinate.call(this);this.push("rectangle",c.clone("customize_layout,shadow,shadow_blur,shadow_offsetx,shadow_offsety,gradient,color_factor,label,tip,border".split(","),this.options));this.on("rectangleover",function(){this.T.css("cursor","pointer")}).on("rectanglemouseout",function(){this.T.css("cursor","default")})}});c.Column2D=c.extend(c.Column,{configure:function(){c.Column2D.superclass.configure.call(this);this.type="column2d"},doConfig:function(){c.Column2D.superclass.doConfig.call(this);var a=this.data.length,b=this.get("coordinate.width"),d=this.pushIf("hiswidth",b/(2*a+1));d*a>b&&(d=this.push("hiswidth",b/(2*a+1)));this.push("hispace",(b-d*a)/(a+1));this.coo=c.Interface.coordinate2d.call(this);this.pushComponent(this.coo,!0);var b=this.coo.getScale(this.get("keduAlign")),e=this.coo.get("brushsize"),f=this.coo.get("height"),g=this.get("label.enable"),h=this.get("tip.enable"),j=d+this.get("hispace"),k,l,s,m;this.push("rectangle.width",d);for(var o=0;o<a;o++)s=this.data[o].name,m=this.data[o].value,k=s+":"+m,l=(this.data[o].value-b.start)*f/b.distance,g&&this.push("rectangle.label.text",this.fireString(this,"parseLabelText",[this.data[o],o],k)),h&&this.push("rectangle.tip.text",this.fireString(this,"parseTipText",[this.data[o],o],k)),s=this.fireString(this,"parseText",[this.data[o],o],s),m=this.fireString(this,"parseValue",[this.data[o],o],m),this.push("rectangle.originx",this.x+this.get("hispace")+o*j),this.push("rectangle.originy",this.y+f-l-e),this.push("rectangle.value",m),this.push("rectangle.height",l),this.push("rectangle.background_color",this.data[o].color),this.push("rectangle.id",o),this.rectangles.push(new c.Rectangle2D(this.get("rectangle"),this)),this.labels.push(new c.Text({id:o,text:s,originx:this.x+this.get("hispace")+j*o+d/2,originy:this.y+f+this.get("text_space")},this));this.pushComponent(this.labels);this.pushComponent(this.rectangles)}});c.Column3D=c.extend(c.Column,{configure:function(){c.Column3D.superclass.configure.call(this);this.type="column3d";this.dimension=c._3D;this.set({xAngle:60,yAngle:20,zScale:1,bottom_scale:1.4})},doConfig:function(){c.Column3D.superclass.doConfig.call(this);var a=this.data.length,b=this.get("coordinate.width"),d=this.pushIf("hiswidth",b/(2*a+1));1>this.get("bottom_scale")&&(d=this.push("bottom_scale",1));d*a>b&&this.push("hiswidth",b/(2*a+1));this.push("zHeight",d*this.get("zScale"));this.push("hispace",(b-d*a)/(a+1));this.push("coordinate.xAngle_",this.get("xAngle_"));this.push("coordinate.yAngle_",this.get("yAngle_"));this.push("coordinate.zHeight",this.get("zHeight")*this.get("bottom_scale"));this.coo=c.Interface.coordinate3d.call(this);this.pushComponent(this.coo,!0);var b=this.coo.getScale(this.get("keduAlign")),e=this.get("label.enable"),f=this.get("tip.enable"),g=this.get("zHeight")*(this.get("bottom_scale")-1)/2*this.get("yAngle_"),h,j,k,l,s=d+this.get("hispace"),m=this.coo.get("height");this.push("rectangle.xAngle_",this.get("xAngle_"));this.push("rectangle.yAngle_",this.get("yAngle_"));this.push("rectangle.width",d);for(var o=0;o<a;o++)k=this.data[o].name,l=this.data[o].value,h=k+":"+l,j=(this.data[o].value-b.start)*m/b.distance,e&&this.push("rectangle.label.text",this.fireString(this,"parseLabelText",[this.data[o],o],h)),f&&this.push("rectangle.tip.text",this.fireString(this,"parseTipText",[this.data[o],o],h)),k=this.fireString(this,"parseText",[this.data[o],o],k),l=this.fireString(this,"parseValue",[this.data[o],o],l),this.push("rectangle.originx",this.x+this.get("hispace")+o*s),this.push("rectangle.originy",this.y+(m-j)-g),this.push("rectangle.text",k),this.push("rectangle.value",l),this.push("rectangle.height",j),this.push("rectangle.background_color",this.data[o].color),this.push("rectangle.id",o),this.rectangles.push(new c.Rectangle3D(this.get("rectangle"),this)),this.labels.push(new c.Text({id:o,text:k,originx:this.x+this.get("hispace")+s*o+d/2,originy:this.y+m+this.get("text_space")},this));this.pushComponent(this.labels);this.pushComponent(this.rectangles)}});c.ColumnMulti2D=c.extend(c.Column,{configure:function(){c.ColumnMulti2D.superclass.configure.call(this);this.type="columnmulti2d";this.dataType="complex";this.columns=[]},doAnimation:function(a,b){var d,c;this.coo.draw();for(var f=0;f<this.labels.length;f++)this.labels[f].draw();for(f=0;f<this.rectangles.length;f++)d=this.rectangles[f],this.fireEvent(this,"beforeRectangleAnimation",[this,d]),c=Math.ceil(this.animationArithmetic(a,0,d.height,b)),d.push("originy",d.y+(d.height-c)),d.push("height",c),d.drawRectangle(),this.fireEvent(this,"afterRectangleAnimation",[this,d])},doConfig:function(){c.ColumnMulti2D.superclass.doConfig.call(this);var a=this.data.length,b=this.columnKeys.length,d=this.get("coordinate.width"),e=this.get("coordinate.height"),f=b*a,a=this.pushIf("hiswidth",d/(b+1+f));a*f>d&&(a=this.push("hiswidth",d/(b+1+f)));this.push("hispace",(d-a*f)/(b+1));this.coo=c.Interface.coordinate2d.call(this);this.pushComponent(this.coo,!0);var b=this.coo.getScale(this.get("keduAlign")),d=this.coo.get("brushsize"),f=this.get("label.enable"),g=this.get("tip.enable"),h=this.data.length*a+this.get("hispace"),j,k,l,s;this.push("rectangle.width",a);for(var m=0;m<this.columns.length;m++){j=this.columns[m].item;s=this.fireString(this,"parseText",[this.columns[m],m],this.columns[m].name);for(var o=0;o<j.length;o++)l=(j[o].value-b.start)*e/b.distance,k=j[o].name+":"+j[o].value,f&&this.push("rectangle.label.text",this.fireString(this,"parseLabelText",[j[o],m],k)),g&&this.push("rectangle.tip.text",this.fireString(this,"parseTipText",[j[o],m],k)),k=this.fireString(this,"parseValue",[j[o],m],j[o].value),this.push("rectangle.originx",this.x+this.get("hispace")+o*a+m*h),this.push("rectangle.originy",this.y+e-l-d),this.push("rectangle.value",k),this.push("rectangle.height",l),this.push("rectangle.background_color",j[o].color),this.push("rectangle.id",m+"-"+o),this.rectangles.push(new c.Rectangle2D(this.get("rectangle"),this));this.labels.push(new c.Text({id:m,text:s,originx:this.x+0.5*this.get("hispace")+(m+0.5)*h,originy:this.get("originy")+e+this.get("text_space")},this))}this.pushComponent(this.labels);this.pushComponent(this.rectangles)}});c.Bar=c.extend(c.Chart,{configure:function(){c.Bar.superclass.configure.call(this);this.type="bar";this.dataType="simple";this.set({coordinate:{},barheight:void 0,text_space:6,keduAlign:"bottom",label:{padding:5},rectangle:{}});this.registerEvent("rectangleover","rectanglemouseout","rectangleclick","parseValue","parseText","beforeRectangleAnimation","afterRectangleAnimation");this.rectangles=[];this.labels=[]},doAnimation:function(a,b){var d;this.coo.draw();for(var c=0;c<this.rectangles.length;c++)d=this.rectangles[c],this.fireEvent(this,"beforeRectangleAnimation",[this,d]),d.push("width",Math.ceil(this.animationArithmetic(a,0,d.width,b))),this.labels[c].draw(),d.drawRectangle(),this.fireEvent(this,"afterRectangleAnimation",[this,d])},doConfig:function(){c.Bar.superclass.doConfig.call(this);c.Interface.coordinate.call(this);c.applyIf(this.get("rectangle"),c.clone(["label","tip","border"],this.options));this.on("rectangleover",function(){this.T.css("cursor","pointer")}).on("rectanglemouseout",function(){this.T.css("cursor","default")})}});c.Bar2D=c.extend(c.Bar,{configure:function(){c.Bar2D.superclass.configure.call(this);this.type="bar2d"},doConfig:function(){c.Bar2D.superclass.doConfig.call(this);var a=this.data.length,b=this.get("coordinate.height"),d=this.pushIf("barheight",b/(2*a+1));d*a>b&&(d=this.push("barheight",b/(2*a+1)));this.push("barspace",(b-d*a)/(a+1));this.coo=c.Interface.coordinate2d.call(this);this.pushComponent(this.coo,!0);var b=this.coo.getScale(this.get("keduAlign")),e=this.coo.get("width"),f=this.get("label.enable"),g=this.get("tip.enable"),h=d+this.get("barspace"),j,k,l,s;this.push("rectangle.height",d);this.push("rectangle.valueAlign","right");this.push("rectangle.tipAlign","right");this.push("rectangle.originx",this.x+this.coo.get("brushsize"));for(var m=0;m<a;m++)l=this.data[m].name,s=this.data[m].value,j=l+":"+s,k=(this.data[m].value-b.start)*e/b.distance,f&&this.push("rectangle.label.text",this.fireString(this,"parseLabelText",[this.data[m],m],j)),g&&this.push("rectangle.tip.text",this.fireString(this,"parseTipText",[this.data[m],m],j)),l=this.fireString(this,"parseText",[this.data[m],m],l),s=this.fireString(this,"parseValue",[this.data[m],m],s),this.push("rectangle.originy",this.y+this.get("barspace")+m*h),this.push("rectangle.value",s),this.push("rectangle.width",k),this.push("rectangle.background_color",this.data[m].color),this.push("rectangle.id",m),this.rectangles.push(new c.Rectangle2D(this.get("rectangle"),this)),this.labels.push(new c.Text({id:m,textAlign:"right",textBaseline:"middle",text:l,originx:this.x-this.get("text_space"),originy:this.y+this.get("barspace")+m*h+d/2},this));this.pushComponent(this.labels);this.pushComponent(this.rectangles)}});c.BarMulti2D=c.extend(c.Bar,{configure:function(){c.BarMulti2D.superclass.configure.call(this);this.type="barmulti2d";this.dataType="complex";this.columns=[]},doAnimation:function(a,b){var c,e;this.coo.draw();for(var f=0;f<this.labels.length;f++)this.labels[f].draw();for(f=0;f<this.rectangles.length;f++)c=this.rectangles[f],this.fireEvent(this,"beforeRectangleAnimation",[this,c]),e=Math.ceil(this.animationArithmetic(a,0,c.height,b)),c.push("originy",c.y+(c.height-e)),c.push("height",e),c.drawRectangle(),this.fireEvent(this,"afterRectangleAnimation",[this,c])},doConfig:function(){c.BarMulti2D.superclass.doConfig.call(this);var a=this.data.length,b=this.columnKeys.length,d=this.get("coordinate.width"),e=this.get("coordinate.height"),f=b*a,g=this.pushIf("barheight",e/(b+1+f));g*a>e&&(g=this.push("barheight",e/(b+1+f)));this.push("barspace",(e-g*f)/(b+1));this.coo=c.Interface.coordinate2d.call(this);this.pushComponent(this.coo,!0);var b=this.coo.getScale(this.get("keduAlign")),e=this.get("label.enable"),f=this.get("tip.enable"),a=a*g+this.get("barspace"),h,j,k,l;this.push("rectangle.height",g);this.push("rectangle.originx",this.x+this.coo.get("brushsize"));this.push("rectangle.valueAlign","right");this.push("rectangle.tipAlign","right");for(var s=0;s<this.columns.length;s++){h=this.columns[s].item;l=this.fireString(this,"parseText",[this.columns[s],s],this.columns[s].name);for(var m=0;m<h.length;m++)k=(h[m].value-b.start)*d/b.distance,j=h[m].name+":"+h[m].value,e&&this.push("rectangle.label.text",this.fireString(this,"parseLabelText",[h[m],s],j)),f&&this.push("rectangle.tip.text",this.fireString(this,"parseTipText",[h[m],s],j)),j=this.fireString(this,"parseValue",[h[m],s],h[m].value),this.push("rectangle.originy",this.y+this.get("barspace")+m*g+s*a),this.push("rectangle.value",j),this.push("rectangle.width",k),this.push("rectangle.background_color",h[m].color),this.push("rectangle.id",s+"-"+m),this.rectangles.push(new c.Rectangle2D(this.get("rectangle"),this));this.labels.push(new c.Text({id:s,text:l,textAlign:"right",textBaseline:"middle",originx:this.x-this.get("text_space"),originy:this.y+0.5*this.get("barspace")+(s+0.5)*a},this))}this.pushComponent(this.labels);this.pushComponent(this.rectangles)}});c.LineSegment=c.extend(c.Component,{configure:function(){c.LineSegment.superclass.configure.apply(this,arguments);this.type="linesegment";this.set({intersection:!0,label:!1,point_style:"round",point_hollow:!0,point_size:3,points:[],keep_with_coordinate:!1,shadow:!0,shadow_blur:1,shadow_offsetx:0,shadow_offsety:1,spacing:0,coordinate:null,event_range_x:0,limit_y:!1,tip_offset:2,event_range_y:0,area:!1,area_opacity:0.4,tip:{enable:!1,border:{width:2}}});this.tip=this.label=null},drawLabel:function(){if(this.get("intersection")&&this.get("label"))for(var a=this.get("points"),b=0;b<a.length;b++)this.T.textStyle("center","bottom",c.getFont(this.get("fontweight"),this.get("fontsize"),this.get("font"))),this.T.fillText(a[b].value,this.x+a[b].x,this.y-a[b].y-3*this.get("point_size")/2,!1,this.get("background_color"),"lr",16)},drawLineSegment:function(){this.T.shadowOn(this.get("shadow"),this.get("shadow_color"),this.get("shadow_blur"),this.get("shadow_offsetx"),this.get("shadow_offsety"));var a=this.get("points");if(this.get("area")){for(var b=[this.x,this.y],c=0;c<a.length;c++)b.push(this.x+a[c].x),b.push(this.y-a[c].y);b.push(this.x+this.get("width"));b.push(this.y);c=this.get("light_color");this.get("gradient")&&(c=this.T.avgLinearGradient(this.x,this.y-this.get("height"),this.x,this.y,[this.get("light_color2"),c]));this.T.polygon(c,!1,1,"",!1,"",0,0,0,this.get("area_opacity"),b)}for(c=0;c<a.length-1;c++)this.T.line(this.x+a[c].x,this.y-a[c].y,this.x+a[c+1].x,this.y-a[c+1].y,this.get("brushsize"),this.get("fill_color"),!1);if(this.get("intersection"))for(c=0;c<a.length;c++)this.get("point_hollow")?this.T.round(this.x+a[c].x,this.y-a[c].y,this.get("point_size"),"#FEFEFE",this.get("brushsize"),this.get("fill_color")):this.T.round(this.x+a[c].x,this.y-a[c].y,this.get("point_size"),this.get("fill_color"));this.get("shadow")&&this.T.shadowOff()},doDraw:function(){this.drawLineSegment();this.drawLabel()},isEventValid:function(){return{valid:!1}},tipInvoke:function(){var a=this.x,b=this.get("tip_offset"),c=this.get("point_size")+b,e=this;return function(f,g,h){var j=h.left,k=h.top,j=3>e.tipPosition&&0<h.left-f-a-b||2<e.tipPosition&&0>h.left-f-a-b?j-(f+b):j+b,k=0==e.tipPosition%2?h.top+c:h.top-g-c;return{left:j,top:k}}},doConfig:function(){c.LineSegment.superclass.doConfig.call(this);c.Assert.gtZero(this.get("spacing"),"spacing");var a=this,b=this.get("spacing"),d=a.get("event_range_y"),e=a.get("event_range_x"),f=a.get("tipInvokeHeap"),g=a.get("points");a.points=g;for(var h=0;h<g.length;h++)g[h].width=g[h].x,g[h].height=g[h].y;e=0==e?a.push("event_range_x",Math.floor(b/2)):a.push("event_range_x",c.between(1,Math.floor(b/2),e));0==d&&(d=a.push("event_range_y",Math.floor(a.get("point_size"))));a.get("tip.enable")&&(a.on("mouseover",function(){f.push(a);a.tipPosition=f.length}).on("mouseout",function(){f.pop()}),a.push("tip.invokeOffsetDynamic",!0),a.tip=new c.Tip(a.get("tip"),a));var j=a.get("coordinate"),k=a.get("limit_y"),l=a.get("keep_with_coordinate"),s=function(b,c,f){return Math.abs(c-(a.x+g[b].x))<e&&(!k||k&&Math.abs(f-(a.y-g[b].y))<d)?true:false},m=function(b){return{valid:true,text:g[b].value,top:a.y-g[b].y,left:a.x+g[b].x,hit:true}};a.isEventValid=function(d){if(j&&!j.isEventValid(d).valid)return{valid:false};var e=Math.floor((d.offsetX-a.x)/b);if(e<0||e>=g.length-1){e=c.between(0,g.length-1,e);return s(e,d.offsetX,d.offsetY)?m(e):{valid:l}}for(var f=e;f<=e+1;f++)if(s(f,d.offsetX,d.offsetY))return m(f);return{valid:l}}}});c.Line=c.extend(c.Chart,{configure:function(){c.Line.superclass.configure.call(this);this.type="line";this.dataType="simple";this.set({coordinate:{},keduAlign:"left",labelAlign:"bottom",labels:[],label_space:6,smooth:!1,proportional_spacing:!0,label_spacing:0,segment_style:{},tip:{enable:!1},legend:{sign:"round-bar",sign_size:14}});this.registerEvent("parsePoint","beforeLineAnimation","afterLineAnimation");this.lines=[]},doConfig:function(){c.Line.superclass.doConfig.call(this);c.Interface.coordinate.call(this);this.push("line_start",(this.get("coordinate.width")-this.get("coordinate.valid_width"))/2);this.push("line_end",this.get("coordinate.width")-this.get("line_start"));this.get("proportional_spacing")&&this.push("label_spacing",this.get("coordinate.valid_width")/(this.get("maxItemSize")-1));this.push("segment_style.originx",this.get("originx")+this.get("line_start"));this.push("segment_style.originy",this.get("originy")+this.get("coordinate.height"));this.push("segment_style.width",this.get("coordinate.valid_width"));this.push("segment_style.height",this.get("coordinate.valid_height"));this.push("segment_style.limit_y",1<this.data.length);this.push("segment_style.keep_with_coordinate",1==this.data.length);var a=1==this.data.length,b=this;this.get("coordinate.crosshair.enable")&&(this.push("coordinate.crosshair.hcross",a),this.push("coordinate.crosshair.invokeOffset",function(a){a=b.lines[0].isEventValid(a);return a.valid?a:!1}));this.get("segment_style.tip")?this.push("segment_style.tip.wrap",this.get("tip.wrap")):this.push("segment_style.tip",this.get("tip"))}});c.LineBasic2D=c.extend(c.Line,{configure:function(){c.LineBasic2D.superclass.configure.call(this);this.type="basicline2d";this.set({});this.registerEvent();this.tipInvokeHeap=[]},doAnimation:function(a,b){var c,e;this.coo.draw();for(var f=0;f<this.lines.length;f++){c=this.lines[f];this.fireEvent(this,"beforeLineAnimation",[this,c]);for(var g=0;g<c.points.length;g++)e=c.points[g],e.y=Math.ceil(this.animationArithmetic(a,0,e.height,b));c.drawLineSegment();this.fireEvent(this,"afterLineAnimation",[this,c])}},doConfig:function(){c.LineBasic2D.superclass.doConfig.call(this);this.coo=new c.Coordinate2D(c.merge({kedu:[{position:this.get("keduAlign"),max_scale:this.get("maxValue")},{position:this.get("labelAlign"),scaleEnable:!1,start_scale:1,scale:1,end_scale:this.get("maxItemSize"),labels:this.get("labels")}],axis:{width:[0,0,2,2]}},this.get("coordinate")),this);this.pushComponent(this.coo,!0);this.push("segment_style.tip.showType","follow");this.push("segment_style.coordinate",this.coo);this.push("segment_style.tipInvokeHeap",this.tipInvokeHeap);for(var a=this.coo.getScale(this.get("keduAlign")),b=this.get("coordinate.valid_height"),d=this.get("label_spacing"),e,f,g,h=this.data,j=0;j<h.length;j++){e=[];for(var k=0;k<h[j].value.length;k++)f=d*k,g=(h[j].value[k]-a.start)*b/a.distance,e.push(c.merge({x:f,y:g,value:h[j].value[k]},this.fireEvent(this,"parsePoint",[h[j].value[k],f,g,k])));this.push("segment_style.spacing",d);this.push("segment_style.points",e);this.push("segment_style.brushsize",h[j].linewidth||1);this.push("segment_style.background_color",h[j].color);this.lines.push(new c.LineSegment(this.get("segment_style"),this))}this.pushComponent(this.lines)}});(function(){var a=function(a,c){this.T=a;this.line=c;this.direction=a.get("direction");this.size=a.get("queue_size");this.space=a.get("label_spacing");this.end=a.get("line_end")};a.prototype={push:function(a){c.isArray(a)||(a=[a]);for("left"==this.direction&&a.reverse();this.size<this.line.points.length+a.length;)this.line.points.shift();for(var d=0;d<this.line.points.length;d++)this.line.points[d].x+=this.space*a.length*("left"==this.direction?-1:1);for(d=0;d<a.length;d++)x="left"==this.direction?this.end-this.space*d:this.space*d,y=(c.between(this.T.S.start,this.T.S.end,a[d])-this.T.S.start)*this.T.S.uh,this.line.points.push(c.merge({x:x,y:y,value:a[d]},this.T.fireEvent(this.T,"parsePoint",[a[d],x,y,d])))}};c.LineMonitor2D=c.extend(c.Line,{configure:function(){c.LineMonitor2D.superclass.configure.call(this);this.type="linemonitor2d";this.set({direction:"left",queue_size:10});this.registerEvent();this.queues=[]},createQueue:function(b){this.init();var b=b||{},d=c.clone(this.get("segment_style"));d.brushsize=b.linewidth||1;d.background_color=b.color||"#BDBDBD";b=new c.LineSegment(d,this);this.pushComponent(b);return new a(this,b)},doConfig:function(){c.LineMonitor2D.superclass.doConfig.call(this);var a=this;a.push("animation",!1);a.get("coordinate.crosshair.enable")&&(a.push("coordinate.crosshair.hcross",1==a.data.length),a.push("coordinate.crosshair.invokeOffset",function(c){c=a.lines[0].isEventValid(c);return c.valid?c:!1}));a.coo=new c.Coordinate2D(c.merge({kedu:[{position:a.get("keduAlign"),max_scale:a.get("maxValue")},{position:a.get("labelAlign"),scaleEnable:!1,start_scale:1,scale:1,end_scale:a.get("maxItemSize"),labels:a.get("labels")}],axis:{width:[0,0,1,1]}},a.get("coordinate")),a);a.pushComponent(a.coo,!0);a.push("label_spacing",a.get("coordinate.valid_width")/(a.get("queue_size")-1));a.get("segment_style.tip")?a.push("segment_style.tip.wrap",a.get("tip.wrap")):a.push("segment_style.tip",a.get("tip"));a.push("segment_style.tip.showType","follow");a.push("segment_style.coordinate",a.coo);a.push("segment_style.keep_with_coordinate",!0);a.S=a.coo.getScale(a.get("keduAlign"));a.S.uh=a.get("coordinate.valid_height")/a.S.distance}})})();c.Area2D=c.extend(c.LineBasic2D,{configure:function(){c.Area2D.superclass.configure.call(this);this.type="area2d";this.set({area:!0,area_opacity:0.3});this.registerEvent()},doConfig:function(){this.push("segment_style.area",!0);this.push("segment_style.area_opacity",this.get("area_opacity"));c.Area2D.superclass.doConfig.call(this)}})})(iChart);