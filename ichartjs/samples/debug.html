<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8" />
		<title>test</title>
		<meta name="Description" content="" />
		<meta name="Keywords" content="" />
		<script type="text/javascript" src="../src/ichart.core.js"></script>
		<script type="text/javascript" src="../src/ichart.element.js"></script>
		<script type="text/javascript" src="../src/ichart.html.js"></script>
		<script type="text/javascript" src="../src/ichart.painter.js"></script>
		<script type="text/javascript" src="../src/ichart.component.js"></script>
		<script type="text/javascript" src="../src/ichart.legend.js"></script>
		<script type="text/javascript" src="../src/ichart.label.js"></script>
		<script type="text/javascript" src="../src/ichart.chart.js"></script>
		<script type="text/javascript" src="../src/ichart.custom.js"></script>
		<script type="text/javascript" src="../src/ichart.sector.js"></script>
		<script type="text/javascript" src="../src/ichart.sector2d.js"></script>
		<script type="text/javascript" src="../src/ichart.sector3d.js"></script>
		<script type="text/javascript" src="../src/ichart.rectangle.js"></script>
		<script type="text/javascript" src="../src/ichart.rectangle2d.js"></script>
		<script type="text/javascript" src="../src/ichart.rectangle3d.js"></script>
		<script type="text/javascript" src="../src/ichart.column.js"></script>
		<script type="text/javascript" src="../src/ichart.column2d.js"></script>
		<script type="text/javascript" src="../src/ichart.bar.js"></script>
		<script type="text/javascript" src="../src/ichart.bar2d.js"></script>
		<script type="text/javascript" src="../src/ichart.barstacked2d.js"></script>
		<script type="text/javascript" src="../src/ichart.columnmulti2d.js"></script>
		<script type="text/javascript" src="../src/ichart.columnstacked2d.js"></script>
		<script type="text/javascript" src="../src/ichart.columnstacked3d.js"></script>
		<script type="text/javascript" src="../src/ichart.columnmulti3d.js"></script>
		<script type="text/javascript" src="../src/ichart.barmulti2d.js"></script>
		<script type="text/javascript" src="../src/ichart.column3d.js"></script>
		<script type="text/javascript" src="../src/ichart.tip.js"></script>
		<script type="text/javascript" src="../src/ichart.text.js"></script>
		<script type="text/javascript" src="../src/ichart.pie.js"></script>
		<script type="text/javascript" src="../src/ichart.pie2d.js"></script>
		<script type="text/javascript" src="../src/ichart.donut2d.js"></script>
		<script type="text/javascript" src="../src/ichart.pie3d.js"></script>
		<script type="text/javascript" src="../src/ichart.coordinate.js"></script>
		<script type="text/javascript" src="../src/ichart.crosshair.js"></script>
		<script type="text/javascript" src="../src/ichart.linesegment.js"></script>
		<script type="text/javascript" src="../src/ichart.line.js"></script>
		<script type="text/javascript" src="../src/ichart.linebasic2d.js"></script>
		<script type="text/javascript" src="../src/ichart.area2d.js"></script>
		<script type="text/javascript" src="../plugin/ichart.gauge2d.js"></script>
		<script type="text/javascript" src="../plugin/ichart.slider.js"></script>
		<style type="text/css">
body {
	text-align: center;
	background-repeat: repeat;
}
#some_shell{
	width:700px;
	height:400px;
	padding:10px;
	background-color: #666666;
	position:relative;
}
#console{
	width:180px;
	height:300px;
	color: #ffffff;
	font-size: 13px;
	padding-left:10px;
	text-align:left;
	position:absolute;
	right:0px;
	top:0px;
}
#canvasDiv {
	margin: 0px auto;
	text-align: center;
}
</style>
		<script type="text/javascript">
		$(function(){
			var data = [
			        	{name : '广州',value : 400,color:'#a5c2d5'},
			        	{name : '上海',value : -200,color:'#cbab4f'},
			        	{name : '南昌',value : 350,color:'#76a871'},
			        	{name : '哈尔滨',value : 360,color:'#9f7961'},
			        	{name : '北京',value : 415,color:'#a56f8f'}
		        	];
        	
			var chart = new iChart.Column2D({
				render : 'canvasDiv',
				data: data,
				title : '2012年5个城市平均工资的情况',
				width : 800,
				height : 400,
				coordinate:{
					width:580,
					height:260,
					scale:[{
						 position:'left',	
						 end_scale:500,
						 scale_space:50
					}]
				}
			});

			/**
			 *自定义组件,画平均线。
			 */
			chart.plugin(new iChart.Custom({
					drawFn:function(){
						/**
						 *计算平均值的高度(坐标Y值)
						 */	
						var avg = chart.total/5,
							coo = chart.getCoordinate(),
							x = coo.get('originx'),
							W = coo.width,
							S = coo.getScale('left'),
							H = coo.height,
							h = (avg - (S.end-S.distance)) * H / S.distance,
							y = chart.y + H - h;
						//用(S.end-S.distance)进行修正
						//S.end是最大值,S.distance是间距,(S.end-S.distance)则是最小值
						chart.target.line(x,y,x+W,y,2,'#b32c0d')
						.textAlign('start')
						.textBaseline('middle')
						.textFont('600 12px Verdana')
						.fillText('平均:$'+avg,x+W+5,y,false,'#b32c0d');
					}
			}));	
			chart.draw();
	});
	</script>
	</head>
	<body>
		<div id='canvasDiv'></div>
	</body>
</html>
