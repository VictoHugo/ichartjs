iChart.Sector=iChart.extend(iChart.Component,{configure:function(){iChart.Sector.superclass.configure.apply(this,arguments);this.type="sector";this.set({value:"",name:"",ignored:!1,counterclockwise:!1,startAngle:0,middleAngle:0,endAngle:0,totalAngle:0,bound_event:"click",expand:!1,donutwidth:0,mutex:!1,increment:void 0,gradient_mode:"RadialGradientOutIn",mini_label_threshold_angle:15,mini_label:!1,label:{}});this.atomic=!0;this.registerEvent("changed","parseText");this.tip=this.label=null},bound:function(){this.expanded||this.toggle()},rebound:function(){this.expanded&&this.toggle()},toggle:function(){this.fireEvent(this,this.get("bound_event"),[this])},getDimension:function(){return{x:this.x,x:this.y,startAngle:this.get("startAngle"),middleAngle:this.get("middleAngle"),endAngle:this.get("endAngle")}},doDraw:function(){this.get("ignored")||(this.drawSector(),this.label&&this.label.draw())},doText:function(a,b,c){a.push("label.originx",b);a.push("label.originy",c);a.push("label.textBaseline","middle");a.label=new iChart.Text(a.get("label"),a)},doLabel:function(a,b,c,d,e,f,g){a.push("label.originx",b);a.push("label.originy",c);a.push("label.quadrantd",d);a.push("label.line_points",e);a.push("label.labelx",f);a.push("label.labely",g);a.label=new iChart.Label(a.get("label"),a)},isLabel:function(){return this.get("label")&&!this.get("mini_label")},doConfig:function(){iChart.Sector.superclass.doConfig.call(this);var a=this._(),b=a.variable.event,c=a.get("label");iChart.taylor.light(a,b);a.push("totalAngle",a.get("endAngle")-a.get("startAngle"));c&&(a.get("mini_label")&&(a.get("mini_label_threshold_angle")*Math.PI/180>a.get("totalAngle")?a.push("mini_label",!1):iChart.apply(a.get("label"),a.get("mini_label"))),a.push("label.text",a.fireString(a,"parseText",[a,a.get("label.text")],a.get("label.text"))),a.pushIf("label.border.color",a.get("border.color")),a.push("label.scolor",a.get("background_color")));a.variable.event.status=a.expanded=a.get("expand");a.get("tip.enable")&&("follow"!=a.get("tip.showType")&&a.push("tip.invokeOffsetDynamic",!1),a.tip=new iChart.Tip(a.get("tip"),a));b.poped=!1;a.on(a.get("bound_event"),function(){b.poped=true;a.expanded=!a.expanded;a.redraw();b.poped=false});a.on("beforedraw",function(){a.x=a.get("originx");a.y=a.get("originy");if(b.status!=a.expanded){a.fireEvent(a,"changed",[a,a.expanded]);c&&a.label.doLayout(a.get("inc_x")*(a.expanded?1:-1),-a.get("inc_y")*(a.expanded?1:-1))}if(b.status=a.expanded)if(a.get("mutex")&&!b.poped)a.expanded=false;else{a.x=a.x+a.get("inc_x");a.y=a.y-a.get("inc_y")}return true})}});