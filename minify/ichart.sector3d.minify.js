iChart.Sector3D=iChart.extend(iChart.Sector,{configure:function(){iChart.Sector3D.superclass.configure.apply(this,arguments);this.type="sector3d";this.dimension=iChart._3D;this.set({semi_major_axis:0,semi_minor_axis:0,cylinder_height:0})},drawSector:function(){this.T.sector3D(this.x,this.y,this.a,this.b,this.get("startAngle"),this.get("endAngle"),this.h,this.get("f_color"),this.get("border.enable"),this.get("border.width"),this.get("border.color"),this.get("shadow"),this.get("shadow_color"),this.get("shadow_blur"),this.get("shadow_offsetx"),this.get("shadow_offsety"),this.get("counterclockwise"))},isEventValid:function(a){if(!this.get("ignored")){if(this.isLabel()&&this.label.isEventValid(a).valid)return{valid:!0};if(!iChart.inEllipse(a.x-this.x,a.y-this.y,this.a,this.b))return{valid:!1};if(iChart.angleInRange(this.sA,this.eA,2*Math.PI-iChart.atan2Radian(this.x,this.y,a.x,a.y)))return{valid:!0}}return{valid:!1}},p2p:function(a,e,b,c){return{x:a+this.a*Math.cos(b)*c,y:e+this.b*Math.sin(b)*c}},tipInvoke:function(){var a=this,e=a.get("middleAngle"),b=iChart.quadrantd(e);return function(c,d){var f=a.p2p(a.x,a.y,e,0.6);return{left:2<=b&&3>=b?f.x-c:f.x,top:3<=b?f.y-d:f.y}}},doConfig:function(){iChart.Sector3D.superclass.doConfig.call(this);var a=this._(),e=a.get("counterclockwise"),b=a.get("middleAngle");a.a=a.get("semi_major_axis");a.b=a.get("semi_minor_axis");a.h=a.get("cylinder_height");iChart.Assert.gtZero(a.a);iChart.Assert.gtZero(a.b);a.pushIf("increment",iChart.lowTo(5,a.a/8));var c=function(b){b=iChart.atan2Radian(0,0,a.a*Math.cos(b),e?-a.b*Math.sin(b):a.b*Math.sin(b));!e&&0!=b&&(b=2*Math.PI-b);return b},d=a.get("increment");a.sA=c.call(a,a.get("startAngle"));a.eA=c.call(a,a.get("endAngle"));a.mA=c.call(a,b);a.push("inc_x",d*Math.cos(2*Math.PI-a.mA));a.push("inc_y",d*Math.sin(2*Math.PI-a.mA));a.get("label")&&(a.get("mini_label")?(b=a.p2p(a.x,a.y,b,0.5),a.doText(a,b.x,b.y)):(c=iChart.quadrantd(b),d=a.p2p(a.x,a.y,b,d/a.a+1),b=a.p2p(a.x,a.y,b,1),a.doLabel(a,b.x,b.y,c,[{x:b.x,y:b.y},{x:d.x,y:d.y}],d.x,d.y)))}});