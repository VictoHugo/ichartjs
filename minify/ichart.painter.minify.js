iChart.Painter=iChart.extend(iChart.Element,{configure:function(){this.type="painter";this.dimension=iChart._2D;iChart.DefineAbstract("commonDraw",this);iChart.DefineAbstract("initialize",this);this.set({brushsize:1,strokeStyle:"gray",padding:10,color:"black",offsetx:0,offsety:0,background_color:"#FEFEFE",color_factor:0.15,style:"",border:{enable:!0},gradient:!1,gradient_mode:"LinearGradientUpDown",z_index:0,listeners:null,originx:0,originy:0});this.variable.event={mouseover:!1};this.registerEvent("initialize","click","mousemove","mouseover","mouseout","beforedraw","draw")},afterConfiguration:function(){if(iChart.isObject(this.get("listeners")))for(var a in this.get("listeners"))this.on(a,this.get("listeners")[a]);this.initialize();this.fireEvent(this,"initialize",[this])},registerEvent:function(){for(var a=0;a<arguments.length;a++)this.events[arguments[a]]=[]},is3D:function(){return this.dimension==iChart._3D},applyGradient:function(a,c,b,d){this.get("gradient")&&(this.push("f_color",this.T.gradient(a||this.x||0,c||this.y||0,b||this.get("width"),d||this.get("height"),[this.get("dark_color"),this.get("light_color")],this.get("gradient_mode"))),this.push("light_color",this.T.gradient(a||this.x||0,c||this.y||0,b||this.get("width"),d||this.get("height"),[this.get("background_color"),this.get("light_color")],this.get("gradient_mode"))),this.push("f_color_",this.get("f_color")))},draw:function(a){if(!this.fireEvent(this,"beforedraw",[this]))return this;this.commonDraw(this,a);this.fireEvent(this,"draw",[this])},fireString:function(a,c,b,d){a=this.fireEvent(a,c,b);return iChart.isString(a)?a:!0!==a&&iChart.isDefined(a)?a.toString():d},fireEvent:function(a,c,b){var d=this.events[c].length;if(1==d)return this.events[c][0].apply(a,b);for(var e=!0,f=0;f<d;f++)e=this.events[c][f].apply(a,b);return e},on:function(a,c){if(iChart.isString(a)){if(!this.events[a])throw Error("["+this.type+"] invalid event:'"+a+"'");this.events[a].push(c)}else iChart.isArray(a)&&a.each(function(a){this.on(a,c)},this);return this},doConfig:function(){var a=this._(),c=iChart.parsePadding(a.get("padding")),b=a.get("border.enable"),b=b?iChart.parsePadding(a.get("border.width")):[0,0,0,0],d=a.get("background_color"),e=a.get("color_factor");a.set({border_top:b[0],border_right:b[1],border_bottom:b[2],border_left:b[3],hborder:b[1]+b[3],vborder:b[0]+b[2],padding_top:c[0]+b[0],padding_right:c[1]+b[1],padding_bottom:c[2]+b[2],padding_left:c[3]+b[3],hpadding:c[1]+c[3]+b[1]+b[3],vpadding:c[0]+c[2]+b[0]+b[2]});a.get("shadow")&&a.push("shadow",{color:a.get("shadow_color"),blur:a.get("shadow_blur"),offsetx:a.get("shadow_offsetx"),offsety:a.get("shadow_offsety")});a.push("f_color",d);a.push("f_color_",d);a.push("light_color",iChart.light(d,e));a.push("dark_color",iChart.dark(d,0.8*e));a.push("light_color2",iChart.light(d,2*e));a.id=a.get("id");a.is3D()&&!a.get("xAngle_")&&(c=iChart.vectorP2P(a.get("xAngle"),a.get("yAngle")),a.push("xAngle_",c.x),a.push("yAngle_",c.y))}});